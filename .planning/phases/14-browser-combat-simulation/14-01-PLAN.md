# Phase 14-01 Plan - Combat Contracts and Definition of Done Draft

## Objectives

1. Lock combat direction: encounter simulation with no combat grid.
2. Lock interaction boundary: player uses `fight`/`flee`; engine resolves detailed skill choices.
3. Lock deterministic flee semantics (no hard-fail roll, legal move, later chase allowed).
4. Lock deed misinformation model for self/other entity beliefs.
5. Draft concrete Definition of Done with measurable replay/performance gates.

## Task Blocks

### Planning Updates
- Update ROADMAP, REQUIREMENTS, DECISIONS, TASK-REGISTRY, STATE, and PRD.
- Review and update GRD for concrete gameplay contracts.
- Add Phase 14 context/plan/summary artifacts under `.planning/phases/14-browser-combat-simulation/`.

### Contracts to Finalize
- Combat simulation factor inputs (equipment, stats, traits/features, passives/effects, room context, skill policy).
- Flee resolution contract (deterministic movement, no fail roll, chase behavior).
- Deed memory contract (`verified`, `rumor`, `misinformed`) with source and confidence.
- Action-to-outcome mapping contract in machine-readable data format.
- Dialogue/combat boundary contract in UI and engine APIs.
- Cross-language contract strategy (JSON schemas/data packs + golden traces).

### Definition of Done Draft Inputs
- Browser gameplay feel targets (clarity, speed, control simplicity).
- Determinism requirements for seed/snapshot replay.
- Test coverage thresholds (unit + e2e + deterministic 25-turn integration + long-run pressure scenario).
- Performance gate target (`p95 <= 2s` turn time under pressure profile).
- Feature/vector usage reporting requirement.

## Verification

- Planning docs are internally consistent on no-grid combat and deterministic flee model.
- New requirements and task rows trace to Phase 14 and are implementation-ready.
- GRD has concrete 25-turn reference playthrough contract and misinformation model.
- Next loop can start contracts implementation without unresolved gameplay ambiguity.
