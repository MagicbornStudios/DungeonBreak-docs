---
phase: 09-cutscenes-action-gating-and-fame-economy
plan: 01
wave: 1
depends_on: ['08-01']
files_modified: []
autonomous: true
gap_closure: false
must_haves:
  truths:
    - "Cutscenes can trigger from item/quest/stat events and are logged."
    - "Action/dialogue options are filtered by explicit prerequisites."
    - "Skills exist in narrative space and can unlock emergent actions."
    - "Livestream action spends 10 effort per turn and affects Fame."
  artifacts:
    - path: ".planning/phases/09-cutscenes-action-gating-and-fame-economy/09-01-SUMMARY.md"
      provides: "Execution summary for phase 09 plan 01"
      min_lines: 10
  key_links:
    - from: ".planning/REQUIREMENTS.md"
      to: ".planning/phases/09-cutscenes-action-gating-and-fame-economy/09-01-SUMMARY.md"
      via: "phase 09 implementation traceability"
---

<objective>
Add a coherent presentation and gating layer so players only see meaningful options, high-signal events trigger cutscenes, and Fame/Effort streaming becomes part of emergent builds.
</objective>

<context>
@.planning/PRD-text-adventure-embeddings-demo.md
@.planning/phases/09-cutscenes-action-gating-and-fame-economy/09-CONTEXT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
</context>

<tasks>
<task type="auto">
  <name>Implement prerequisite-based option filtering</name>
  <files>src/dungeonbreak_narrative/escape_the_dungeon/engine/*.py, src/dungeonbreak_narrative/escape_the_dungeon/narrative/*.py</files>
  <action>Create reusable prerequisite checks for actions/dialogue/skills and return explainable availability reasons.</action>
  <verify>Available options and blocked reasons can be listed via API.</verify>
  <done>Player and CLI/notebook see correctly filtered options.</done>
</task>

<task type="auto">
  <name>Implement cutscene trigger and presentation pipeline</name>
  <files>src/dungeonbreak_narrative/escape_the_dungeon/narrative/*.py, src/dungeonbreak_narrative/escape_the_dungeon/engine/*.py</files>
  <action>Model cutscene definitions and trigger conditions, then emit cutscene events into logs/pages/UI.</action>
  <verify>At least item-trigger and milestone-trigger cutscenes are observable in playthrough.</verify>
  <done>Cutscene events are reliably emitted and logged.</done>
</task>

<task type="auto">
  <name>Add skill vectors and livestream Fame/Effort loop</name>
  <files>src/dungeonbreak_narrative/escape_the_dungeon/entities/*.py, src/dungeonbreak_narrative/escape_the_dungeon/engine/*.py, notebooks/*.ipynb</files>
  <action>Add skill vector model, unlock/use conditions, and `live_stream` action with Effort cost 10 per turn and Fame updates.</action>
  <verify>Runtime status exposes Fame/Effort/skills and streaming modifies them correctly.</verify>
  <done>Mechanics are playable from notebook and CLI.</done>
</task>
</tasks>
