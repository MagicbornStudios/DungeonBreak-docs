<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escape the Dungeon (KAPLAY)</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #0f172a;
      color: #e2e8f0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: Consolas, "JetBrains Mono", Menlo, monospace;
    }
    canvas { display: block; }
  </style>
</head>
<body>
  <script>"use strict";(()=>{var qI=Object.create;var us=Object.defineProperty;var BI=Object.getOwnPropertyDescriptor;var ZI=Object.getOwnPropertyNames;var KI=Object.getPrototypeOf,VI=Object.prototype.hasOwnProperty;var GI=(e,t,n)=>t in e?us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Eo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Kr=(e,t)=>{for(var n in t)us(e,n,{get:t[n],enumerable:!0})},HI=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of ZI(t))!VI.call(e,r)&&r!==n&&us(e,r,{get:()=>t[r],enumerable:!(i=BI(t,r))||i.enumerable});return e};var Sl=(e,t,n)=>(n=e!=null?qI(KI(e)):{},HI(t||!e||!e.__esModule?us(n,"default",{value:e,enumerable:!0}):n,e));var D=(e,t,n)=>GI(e,typeof t!="symbol"?t+"":t,n);var vw=Eo((wg,_g)=>{(function(e,t){typeof wg=="object"&&typeof _g<"u"?_g.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.Dexie=t())})(wg,function(){"use strict";var e=function(u,c){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(f[g]=p[g])},e(u,c)};function t(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");e(u,c);function f(){this.constructor=u}u.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}var n=function(){return n=Object.assign||function(c){for(var f,p=1,g=arguments.length;p<g;p++){f=arguments[p];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(c[y]=f[y])}return c},n.apply(this,arguments)};function i(u,c,f){if(f||arguments.length===2)for(var p=0,g=c.length,y;p<g;p++)(y||!(p in c))&&(y||(y=Array.prototype.slice.call(c,0,p)),y[p]=c[p]);return u.concat(y||Array.prototype.slice.call(c))}typeof SuppressedError=="function"&&SuppressedError;var r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o=Object.keys,a=Array.isArray;typeof Promise<"u"&&!r.Promise&&(r.Promise=Promise);function s(u,c){return typeof c!="object"||o(c).forEach(function(f){u[f]=c[f]}),u}var l=Object.getPrototypeOf,d={}.hasOwnProperty;function m(u,c){return d.call(u,c)}function v(u,c){typeof c=="function"&&(c=c(l(u))),(typeof Reflect>"u"?o:Reflect.ownKeys)(c).forEach(function(f){b(u,f,c[f])})}var h=Object.defineProperty;function b(u,c,f,p){h(u,c,s(f&&m(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},p))}function _(u){return{from:function(c){return u.prototype=Object.create(c.prototype),b(u.prototype,"constructor",u),{extend:v.bind(null,u.prototype)}}}}var E=Object.getOwnPropertyDescriptor;function S(u,c){var f=E(u,c),p;return f||(p=l(u))&&S(p,c)}var T=[].slice;function Z(u,c,f){return T.call(u,c,f)}function H(u,c){return c(u)}function re(u){if(!u)throw new Error("Assertion Failed")}function K(u){r.setImmediate?setImmediate(u):setTimeout(u,0)}function z(u,c){return u.reduce(function(f,p,g){var y=c(p,g);return y&&(f[y[0]]=y[1]),f},{})}function O(u,c){if(typeof c=="string"&&m(u,c))return u[c];if(!c)return u;if(typeof c!="string"){for(var f=[],p=0,g=c.length;p<g;++p){var y=O(u,c[p]);f.push(y)}return f}var w=c.indexOf(".");if(w!==-1){var I=u[c.substr(0,w)];return I==null?void 0:O(I,c.substr(w+1))}}function W(u,c,f){if(!(!u||c===void 0)&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof c!="string"&&"length"in c){re(typeof f!="string"&&"length"in f);for(var p=0,g=c.length;p<g;++p)W(u,c[p],f[p])}else{var y=c.indexOf(".");if(y!==-1){var w=c.substr(0,y),I=c.substr(y+1);if(I==="")f===void 0?a(u)&&!isNaN(parseInt(w))?u.splice(w,1):delete u[w]:u[w]=f;else{var $=u[w];(!$||!m(u,w))&&($=u[w]={}),W($,I,f)}}else f===void 0?a(u)&&!isNaN(parseInt(c))?u.splice(c,1):delete u[c]:u[c]=f}}function se(u,c){typeof c=="string"?W(u,c,void 0):"length"in c&&[].map.call(c,function(f){W(u,f,void 0)})}function pe(u){var c={};for(var f in u)m(u,f)&&(c[f]=u[f]);return c}var be=[].concat;function $e(u){return be.apply([],u)}var Me="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($e([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(c){return c+u+"Array"})}))).filter(function(u){return r[u]}),je=new Set(Me.map(function(u){return r[u]}));function Ue(u){var c={};for(var f in u)if(m(u,f)){var p=u[f];c[f]=!p||typeof p!="object"||je.has(p.constructor)?p:Ue(p)}return c}function Pe(u){for(var c in u)if(m(u,c))return!1;return!0}var _e=null;function Ge(u){_e=new WeakMap;var c=Fe(u);return _e=null,c}function Fe(u){if(!u||typeof u!="object")return u;var c=_e.get(u);if(c)return c;if(a(u)){c=[],_e.set(u,c);for(var f=0,p=u.length;f<p;++f)c.push(Fe(u[f]))}else if(je.has(u.constructor))c=u;else{var g=l(u);c=g===Object.prototype?{}:Object.create(g),_e.set(u,c);for(var y in u)m(u,y)&&(c[y]=Fe(u[y]))}return c}var Je={}.toString;function pt(u){return Je.call(u).slice(8,-1)}var ke=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Fr=typeof ke=="symbol"?function(u){var c;return u!=null&&(c=u[ke])&&c.apply(u)}:function(){return null};function Mt(u,c){var f=u.indexOf(c);return f>=0&&u.splice(f,1),f>=0}var nr={};function Nt(u){var c,f,p,g;if(arguments.length===1){if(a(u))return u.slice();if(this===nr&&typeof u=="string")return[u];if(g=Fr(u)){for(f=[];p=g.next(),!p.done;)f.push(p.value);return f}if(u==null)return[u];if(c=u.length,typeof c=="number"){for(f=new Array(c);c--;)f[c]=u[c];return f}return[u]}for(c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return f}var nn=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ho=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],di=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Sr=ho.concat(di),ir={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function yr(u,c){this.name=u,this.message=c}_(yr).from(Error).extend({toString:function(){return this.name+": "+this.message}});function xe(u,c){return u+". Errors: "+Object.keys(c).map(function(f){return c[f].toString()}).filter(function(f,p,g){return g.indexOf(f)===p}).join(`
`)}function Ae(u,c,f,p){this.failures=c,this.failedKeys=p,this.successCount=f,this.message=xe(u,c)}_(Ae).from(yr);function Te(u,c){this.name="BulkError",this.failures=Object.keys(c).map(function(f){return c[f]}),this.failuresByPos=c,this.message=xe(u,this.failures)}_(Te).from(yr);var Xe=Sr.reduce(function(u,c){return u[c]=c+"Error",u},{}),gt=yr,le=Sr.reduce(function(u,c){var f=c+"Error";function p(g,y){this.name=f,g?typeof g=="string"?(this.message="".concat(g).concat(y?`
 `+y:""),this.inner=y||null):typeof g=="object"&&(this.message="".concat(g.name," ").concat(g.message),this.inner=g):(this.message=ir[c]||f,this.inner=null)}return _(p).from(gt),u[c]=p,u},{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var xt=di.reduce(function(u,c){return u[c+"Error"]=le[c],u},{});function kr(u,c){if(!u||u instanceof yr||u instanceof TypeError||u instanceof SyntaxError||!u.name||!xt[u.name])return u;var f=new xt[u.name](c||u.message,u);return"stack"in u&&b(f,"stack",{get:function(){return this.inner.stack}}),f}var on=Sr.reduce(function(u,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(u[c+"Error"]=le[c]),u},{});on.ModifyError=Ae,on.DexieError=yr,on.BulkError=Te;function Ke(){}function Lr(u){return u}function go(u,c){return u==null||u===Lr?c:function(f){return c(u(f))}}function or(u,c){return function(){u.apply(this,arguments),c.apply(this,arguments)}}function ar(u,c){return u===Ke?c:function(){var f=u.apply(this,arguments);f!==void 0&&(arguments[0]=f);var p=this.onsuccess,g=this.onerror;this.onsuccess=null,this.onerror=null;var y=c.apply(this,arguments);return p&&(this.onsuccess=this.onsuccess?or(p,this.onsuccess):p),g&&(this.onerror=this.onerror?or(g,this.onerror):g),y!==void 0?y:f}}function Ar(u,c){return u===Ke?c:function(){u.apply(this,arguments);var f=this.onsuccess,p=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?or(f,this.onsuccess):f),p&&(this.onerror=this.onerror?or(p,this.onerror):p)}}function fi(u,c){return u===Ke?c:function(f){var p=u.apply(this,arguments);s(f,p);var g=this.onsuccess,y=this.onerror;this.onsuccess=null,this.onerror=null;var w=c.apply(this,arguments);return g&&(this.onsuccess=this.onsuccess?or(g,this.onsuccess):g),y&&(this.onerror=this.onerror?or(y,this.onerror):y),p===void 0?w===void 0?void 0:w:s(p,w)}}function Pt(u,c){return u===Ke?c:function(){return c.apply(this,arguments)===!1?!1:u.apply(this,arguments)}}function qr(u,c){return u===Ke?c:function(){var f=u.apply(this,arguments);if(f&&typeof f.then=="function"){for(var p=this,g=arguments.length,y=new Array(g);g--;)y[g]=arguments[g];return f.then(function(){return c.apply(p,y)})}return c.apply(this,arguments)}}var mt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Rn(u,c){mt=u}var Cn={},Ca=100,pi=typeof Promise>"u"?[]:function(){var u=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[u,l(u),u];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,l(c),u]}(),ja=pi[0],Ma=pi[1],Dt=pi[2],vo=Ma&&Ma.then,sr=ja&&ja.constructor,mi=!!Dt;function Na(){queueMicrotask(T_)}var jn=function(u,c){Qe.push([u,c]),Mn&&(Na(),Mn=!1)},hi=!0,Mn=!0,k=[],F=[],Q=Lr,fe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ke,pgp:!1,env:{},finalize:Ke},ce=fe,Qe=[],ht=0,br=[];function de(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=ce;if(typeof u!="function"){if(u!==Cn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Gc(this,this._value);return}this._state=null,this._value=null,++c.ref,Lg(this,u)}var xr={get:function(){var u=ce,c=qa;function f(p,g){var y=this,w=!u.global&&(u!==ce||c!==qa),I=w&&!sn(),$=new de(function(A,j){Hc(y,new gi(Zg(p,u,w,I),Zg(g,u,w,I),A,j,u))});return this._consoleTask&&($._consoleTask=this._consoleTask),$}return f.prototype=Cn,f},set:function(u){b(this,"then",u&&u.prototype===Cn?xr:{get:function(){return u},set:xr.set})}};v(de.prototype,{then:xr,_then:function(u,c){Hc(this,new gi(null,null,u,c,ce))},catch:function(u){if(arguments.length===1)return this.then(null,u);var c=arguments[0],f=arguments[1];return typeof c=="function"?this.then(null,function(p){return p instanceof c?f(p):Ua(p)}):this.then(null,function(p){return p&&p.name===c?f(p):Ua(p)})},finally:function(u){return this.then(function(c){return de.resolve(u()).then(function(){return c})},function(c){return de.resolve(u()).then(function(){return Ua(c)})})},timeout:function(u,c){var f=this;return u<1/0?new de(function(p,g){var y=setTimeout(function(){return g(new le.Timeout(c))},u);f.then(p,g).finally(clearTimeout.bind(null,y))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(de.prototype,Symbol.toStringTag,"Dexie.Promise"),fe.env=Bg();function gi(u,c,f,p,g){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof c=="function"?c:null,this.resolve=f,this.reject=p,this.psd=g}v(de,{all:function(){var u=Nt.apply(null,arguments).map(Ba);return new de(function(c,f){u.length===0&&c([]);var p=u.length;u.forEach(function(g,y){return de.resolve(g).then(function(w){u[y]=w,--p||c(u)},f)})})},resolve:function(u){if(u instanceof de)return u;if(u&&typeof u.then=="function")return new de(function(f,p){u.then(f,p)});var c=new de(Cn,!0,u);return c},reject:Ua,race:function(){var u=Nt.apply(null,arguments).map(Ba);return new de(function(c,f){u.map(function(p){return de.resolve(p).then(c,f)})})},PSD:{get:function(){return ce},set:function(u){return ce=u}},totalEchoes:{get:function(){return qa}},newPSD:an,usePSD:Nn,scheduler:{get:function(){return jn},set:function(u){jn=u}},rejectionMapper:{get:function(){return Q},set:function(u){Q=u}},follow:function(u,c){return new de(function(f,p){return an(function(g,y){var w=ce;w.unhandleds=[],w.onunhandled=y,w.finalize=or(function(){var I=this;P_(function(){I.unhandleds.length===0?g():y(I.unhandleds[0])})},w.finalize),u()},c,f,p)})}}),sr&&(sr.allSettled&&b(de,"allSettled",function(){var u=Nt.apply(null,arguments).map(Ba);return new de(function(c){u.length===0&&c([]);var f=u.length,p=new Array(f);u.forEach(function(g,y){return de.resolve(g).then(function(w){return p[y]={status:"fulfilled",value:w}},function(w){return p[y]={status:"rejected",reason:w}}).then(function(){return--f||c(p)})})})}),sr.any&&typeof AggregateError<"u"&&b(de,"any",function(){var u=Nt.apply(null,arguments).map(Ba);return new de(function(c,f){u.length===0&&f(new AggregateError([]));var p=u.length,g=new Array(p);u.forEach(function(y,w){return de.resolve(y).then(function(I){return c(I)},function(I){g[w]=I,--p||f(new AggregateError(g))})})})}),sr.withResolvers&&(de.withResolvers=sr.withResolvers));function Lg(u,c){try{c(function(f){if(u._state===null){if(f===u)throw new TypeError("A promise cannot be resolved with itself.");var p=u._lib&&vi();f&&typeof f.then=="function"?Lg(u,function(g,y){f instanceof de?f._then(g,y):f.then(g,y)}):(u._state=!0,u._value=f,qg(u)),p&&yi()}},Gc.bind(null,u))}catch(f){Gc(u,f)}}function Gc(u,c){if(F.push(c),u._state===null){var f=u._lib&&vi();c=Q(c),u._state=!1,u._value=c,D_(u),qg(u),f&&yi()}}function qg(u){var c=u._listeners;u._listeners=[];for(var f=0,p=c.length;f<p;++f)Hc(u,c[f]);var g=u._PSD;--g.ref||g.finalize(),ht===0&&(++ht,jn(function(){--ht===0&&Wc()},[]))}function Hc(u,c){if(u._state===null){u._listeners.push(c);return}var f=u._state?c.onFulfilled:c.onRejected;if(f===null)return(u._state?c.resolve:c.reject)(u._value);++c.psd.ref,++ht,jn(E_,[f,u,c])}function E_(u,c,f){try{var p,g=c._value;!c._state&&F.length&&(F=[]),p=mt&&c._consoleTask?c._consoleTask.run(function(){return u(g)}):u(g),!c._state&&F.indexOf(g)===-1&&z_(c),f.resolve(p)}catch(y){f.reject(y)}finally{--ht===0&&Wc(),--f.psd.ref||f.psd.finalize()}}function T_(){Nn(fe,function(){vi()&&yi()})}function vi(){var u=hi;return hi=!1,Mn=!1,u}function yi(){var u,c,f;do for(;Qe.length>0;)for(u=Qe,Qe=[],f=u.length,c=0;c<f;++c){var p=u[c];p[0].apply(null,p[1])}while(Qe.length>0);hi=!0,Mn=!0}function Wc(){var u=k;k=[],u.forEach(function(p){p._PSD.onunhandled.call(null,p._value,p)});for(var c=br.slice(0),f=c.length;f;)c[--f]()}function P_(u){function c(){u(),br.splice(br.indexOf(c),1)}br.push(c),++ht,jn(function(){--ht===0&&Wc()},[])}function D_(u){k.some(function(c){return c._value===u._value})||k.push(u)}function z_(u){for(var c=k.length;c;)if(k[--c]._value===u._value){k.splice(c,1);return}}function Ua(u){return new de(Cn,!1,u)}function ot(u,c){var f=ce;return function(){var p=vi(),g=ce;try{return un(f,!0),u.apply(this,arguments)}catch(y){c&&c(y)}finally{un(g,!1),p&&yi()}}}var bt={awaits:0,echoes:0,id:0},O_=0,Fa=[],La=0,qa=0,R_=0;function an(u,c,f,p){var g=ce,y=Object.create(g);y.parent=g,y.ref=0,y.global=!1,y.id=++R_,fe.env,y.env=mi?{Promise:de,PromiseProp:{value:de,configurable:!0,writable:!0},all:de.all,race:de.race,allSettled:de.allSettled,any:de.any,resolve:de.resolve,reject:de.reject}:{},c&&s(y,c),++g.ref,y.finalize=function(){--this.parent.ref||this.parent.finalize()};var w=Nn(y,u,f,p);return y.ref===0&&y.finalize(),w}function bi(){return bt.id||(bt.id=++O_),++bt.awaits,bt.echoes+=Ca,bt.id}function sn(){return bt.awaits?(--bt.awaits===0&&(bt.id=0),bt.echoes=bt.awaits*Ca,!0):!1}(""+vo).indexOf("[native code]")===-1&&(bi=sn=Ke);function Ba(u){return bt.echoes&&u&&u.constructor===sr?(bi(),u.then(function(c){return sn(),c},function(c){return sn(),dt(c)})):u}function C_(u){++qa,(!bt.echoes||--bt.echoes===0)&&(bt.echoes=bt.awaits=bt.id=0),Fa.push(ce),un(u,!0)}function j_(){var u=Fa[Fa.length-1];Fa.pop(),un(u,!1)}function un(u,c){var f=ce;if((c?bt.echoes&&(!La++||u!==ce):La&&(!--La||u!==ce))&&queueMicrotask(c?C_.bind(null,u):j_),u!==ce&&(ce=u,f===fe&&(fe.env=Bg()),mi)){var p=fe.env.Promise,g=u.env;(f.global||u.global)&&(Object.defineProperty(r,"Promise",g.PromiseProp),p.all=g.all,p.race=g.race,p.resolve=g.resolve,p.reject=g.reject,g.allSettled&&(p.allSettled=g.allSettled),g.any&&(p.any=g.any))}}function Bg(){var u=r.Promise;return mi?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function Nn(u,c,f,p,g){var y=ce;try{return un(u,!0),c(f,p,g)}finally{un(y,!1)}}function Zg(u,c,f,p){return typeof u!="function"?u:function(){var g=ce;f&&bi(),un(c,!0);try{return u.apply(this,arguments)}finally{un(g,!1),p&&queueMicrotask(sn)}}}function Jc(u){Promise===sr&&bt.echoes===0?La===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}var dt=de.reject;function Yc(u,c,f,p){if(!u.idbdb||!u._state.openComplete&&!ce.letThrough&&!u._vip){if(u._state.openComplete)return dt(new le.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return dt(new le.DatabaseClosed);u.open().catch(Ke)}return u._state.dbReadyPromise.then(function(){return Yc(u,c,f,p)})}else{var g=u._createTransaction(c,f,u._dbSchema);try{g.create(),u._state.PR1398_maxLoop=3}catch(y){return y.name===Xe.InvalidState&&u.isOpen()&&--u._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),u.close({disableAutoOpen:!1}),u.open().then(function(){return Yc(u,c,f,p)})):dt(y)}return g._promise(c,function(y,w){return an(function(){return ce.trans=g,p(y,w,g)})}).then(function(y){if(c==="readwrite")try{g.idbtrans.commit()}catch{}return c==="readonly"?y:g._completion.then(function(){return y})})}}var Kg="4.3.0",Un="\uFFFF",Xc=-1/0,Br="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vg="String expected.",xi=[],Za="__dbnames",Qc="readonly",el="readwrite";function Fn(u,c){return u?c?function(){return u.apply(this,arguments)&&c.apply(this,arguments)}:u:c}var Gg={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ka(u){return typeof u=="string"&&!/\./.test(u)?function(c){return c[u]===void 0&&u in c&&(c=Ge(c),delete c[u]),c}:function(c){return c}}function Hg(){throw le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function qe(u,c){try{var f=Wg(u),p=Wg(c);if(f!==p)return f==="Array"?1:p==="Array"?-1:f==="binary"?1:p==="binary"?-1:f==="string"?1:p==="string"?-1:f==="Date"?1:p!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return u>c?1:u<c?-1:0;case"binary":return N_(Jg(u),Jg(c));case"Array":return M_(u,c)}}catch{}return NaN}function M_(u,c){for(var f=u.length,p=c.length,g=f<p?f:p,y=0;y<g;++y){var w=qe(u[y],c[y]);if(w!==0)return w}return f===p?0:f<p?-1:1}function N_(u,c){for(var f=u.length,p=c.length,g=f<p?f:p,y=0;y<g;++y)if(u[y]!==c[y])return u[y]<c[y]?-1:1;return f===p?0:f<p?-1:1}function Wg(u){var c=typeof u;if(c!=="object")return c;if(ArrayBuffer.isView(u))return"binary";var f=pt(u);return f==="ArrayBuffer"?"binary":f}function Jg(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}function Va(u,c,f){var p=u.schema.yProps;return p?(c&&f.numFailures>0&&(c=c.filter(function(g,y){return!f.failures[y]})),Promise.all(p.map(function(g){var y=g.updatesTable;return c?u.db.table(y).where("k").anyOf(c).delete():u.db.table(y).clear()})).then(function(){return f})):f}var yo=function(){function u(c){this["@@propmod"]=c}return u.prototype.execute=function(c){var f,p=this["@@propmod"];if(p.add!==void 0){var g=p.add;if(a(g))return i(i([],a(c)?c:[],!0),g,!0).sort();if(typeof g=="number")return(Number(c)||0)+g;if(typeof g=="bigint")try{return BigInt(c)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(p.remove!==void 0){var y=p.remove;if(a(y))return a(c)?c.filter(function(I){return!y.includes(I)}).sort():[];if(typeof y=="number")return Number(c)-y;if(typeof y=="bigint")try{return BigInt(c)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}var w=(f=p.replacePrefix)===null||f===void 0?void 0:f[0];return w&&typeof c=="string"&&c.startsWith(w)?p.replacePrefix[1]+c.substring(w.length):c},u}();function Yg(u,c){for(var f=o(c),p=f.length,g=!1,y=0;y<p;++y){var w=f[y],I=c[w],$=O(u,w);I instanceof yo?(W(u,w,I.execute($)),g=!0):$!==I&&(W(u,w,I),g=!0)}return g}var Xg=function(){function u(){}return u.prototype._trans=function(c,f,p){var g=this._tx||ce.trans,y=this.name,w=mt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(c==="readonly"?"read":"write"," ").concat(this.name));function I(j,P,B){if(!B.schema[y])throw new le.NotFound("Table "+y+" not part of transaction");return f(B.idbtrans,B)}var $=vi();try{var A=g&&g.db._novip===this.db._novip?g===ce.trans?g._promise(c,I,p):an(function(){return g._promise(c,I,p)},{trans:g,transless:ce.transless||ce}):Yc(this.db,c,[this.name],I);return w&&(A._consoleTask=w,A=A.catch(function(j){return console.trace(j),dt(j)})),A}finally{$&&yi()}},u.prototype.get=function(c,f){var p=this;return c&&c.constructor===Object?this.where(c).first(f):c==null?dt(new le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(g){return p.core.get({trans:g,key:c}).then(function(y){return p.hook.reading.fire(y)})}).then(f)},u.prototype.where=function(c){if(typeof c=="string")return new this.db.WhereClause(this,c);if(a(c))return new this.db.WhereClause(this,"[".concat(c.join("+"),"]"));var f=o(c);if(f.length===1)return this.where(f[0]).equals(c[f[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&f.every(function(B){return j.keyPath.indexOf(B)>=0})){for(var P=0;P<f.length;++P)if(f.indexOf(j.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(j,P){return j.keyPath.length-P.keyPath.length})[0];if(p&&this.db._maxKey!==Un){var g=p.keyPath.slice(0,f.length);return this.where(g).equals(g.map(function(j){return c[j]}))}!p&&mt&&console.warn("The query ".concat(JSON.stringify(c)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(f.join("+"),"]"));var y=this.schema.idxByName;function w(j,P){return qe(j,P)===0}var I=f.reduce(function(j,P){var B=j[0],ae=j[1],R=y[P],M=c[P];return[B||R,B||!R?Fn(ae,R&&R.multi?function(q){var V=O(q,P);return a(V)&&V.some(function(Y){return w(M,Y)})}:function(q){return w(M,O(q,P))}):ae]},[null,null]),$=I[0],A=I[1];return $?this.where($.name).equals(c[$.keyPath]).filter(A):p?this.filter(A):this.where(f).equals("")},u.prototype.filter=function(c){return this.toCollection().and(c)},u.prototype.count=function(c){return this.toCollection().count(c)},u.prototype.offset=function(c){return this.toCollection().offset(c)},u.prototype.limit=function(c){return this.toCollection().limit(c)},u.prototype.each=function(c){return this.toCollection().each(c)},u.prototype.toArray=function(c){return this.toCollection().toArray(c)},u.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},u.prototype.orderBy=function(c){return new this.db.Collection(new this.db.WhereClause(this,a(c)?"[".concat(c.join("+"),"]"):c))},u.prototype.reverse=function(){return this.toCollection().reverse()},u.prototype.mapToClass=function(c){var f=this,p=f.db,g=f.name;this.schema.mappedClass=c,c.prototype instanceof Hg&&(c=function($){t(A,$);function A(){return $!==null&&$.apply(this,arguments)||this}return Object.defineProperty(A.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),A.prototype.table=function(){return g},A}(c));for(var y=new Set,w=c.prototype;w;w=l(w))Object.getOwnPropertyNames(w).forEach(function($){return y.add($)});var I=function($){if(!$)return $;var A=Object.create(c.prototype);for(var j in $)if(!y.has(j))try{A[j]=$[j]}catch{}return A};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=I,this.hook("reading",I),c},u.prototype.defineClass=function(){function c(f){s(this,f)}return this.mapToClass(c)},u.prototype.add=function(c,f){var p=this,g=this.schema.primKey,y=g.auto,w=g.keyPath,I=c;return w&&y&&(I=Ka(w)(c)),this._trans("readwrite",function($){return p.core.mutate({trans:$,type:"add",keys:f!=null?[f]:null,values:[I]})}).then(function($){return $.numFailures?de.reject($.failures[0]):$.lastResult}).then(function($){if(w)try{W(c,w,$)}catch{}return $})},u.prototype.upsert=function(c,f){var p=this,g=this.schema.primKey.keyPath;return this._trans("readwrite",function(y){return p.core.get({trans:y,key:c}).then(function(w){var I=w??{};return Yg(I,f),g&&W(I,g,c),p.core.mutate({trans:y,type:"put",values:[I],keys:[c],upsert:!0,updates:{keys:[c],changeSpecs:[f]}}).then(function($){return $.numFailures?de.reject($.failures[0]):!!w})})})},u.prototype.update=function(c,f){if(typeof c=="object"&&!a(c)){var p=O(c,this.schema.primKey.keyPath);return p===void 0?dt(new le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(f)}else return this.where(":id").equals(c).modify(f)},u.prototype.put=function(c,f){var p=this,g=this.schema.primKey,y=g.auto,w=g.keyPath,I=c;return w&&y&&(I=Ka(w)(c)),this._trans("readwrite",function($){return p.core.mutate({trans:$,type:"put",values:[I],keys:f!=null?[f]:null})}).then(function($){return $.numFailures?de.reject($.failures[0]):$.lastResult}).then(function($){if(w)try{W(c,w,$)}catch{}return $})},u.prototype.delete=function(c){var f=this;return this._trans("readwrite",function(p){return f.core.mutate({trans:p,type:"delete",keys:[c]}).then(function(g){return Va(f,[c],g)}).then(function(g){return g.numFailures?de.reject(g.failures[0]):void 0})})},u.prototype.clear=function(){var c=this;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"deleteRange",range:Gg}).then(function(p){return Va(c,null,p)})}).then(function(f){return f.numFailures?de.reject(f.failures[0]):void 0})},u.prototype.bulkGet=function(c){var f=this;return this._trans("readonly",function(p){return f.core.getMany({keys:c,trans:p}).then(function(g){return g.map(function(y){return f.hook.reading.fire(y)})})})},u.prototype.bulkAdd=function(c,f,p){var g=this,y=Array.isArray(f)?f:void 0;p=p||(y?void 0:f);var w=p?p.allKeys:void 0;return this._trans("readwrite",function(I){var $=g.schema.primKey,A=$.auto,j=$.keyPath;if(j&&y)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(y&&y.length!==c.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var P=c.length,B=j&&A?c.map(Ka(j)):c;return g.core.mutate({trans:I,type:"add",keys:y,values:B,wantResults:w}).then(function(ae){var R=ae.numFailures,M=ae.results,q=ae.lastResult,V=ae.failures,Y=w?M:q;if(R===0)return Y;throw new Te("".concat(g.name,".bulkAdd(): ").concat(R," of ").concat(P," operations failed"),V)})})},u.prototype.bulkPut=function(c,f,p){var g=this,y=Array.isArray(f)?f:void 0;p=p||(y?void 0:f);var w=p?p.allKeys:void 0;return this._trans("readwrite",function(I){var $=g.schema.primKey,A=$.auto,j=$.keyPath;if(j&&y)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(y&&y.length!==c.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var P=c.length,B=j&&A?c.map(Ka(j)):c;return g.core.mutate({trans:I,type:"put",keys:y,values:B,wantResults:w}).then(function(ae){var R=ae.numFailures,M=ae.results,q=ae.lastResult,V=ae.failures,Y=w?M:q;if(R===0)return Y;throw new Te("".concat(g.name,".bulkPut(): ").concat(R," of ").concat(P," operations failed"),V)})})},u.prototype.bulkUpdate=function(c){var f=this,p=this.core,g=c.map(function(I){return I.key}),y=c.map(function(I){return I.changes}),w=[];return this._trans("readwrite",function(I){return p.getMany({trans:I,keys:g,cache:"clone"}).then(function($){var A=[],j=[];c.forEach(function(B,ae){var R=B.key,M=B.changes,q=$[ae];if(q){for(var V=0,Y=Object.keys(M);V<Y.length;V++){var X=Y[V],ee=M[X];if(X===f.schema.primKey.keyPath){if(qe(ee,R)!==0)throw new le.Constraint("Cannot update primary key in bulkUpdate()")}else W(q,X,ee)}w.push(ae),A.push(R),j.push(q)}});var P=A.length;return p.mutate({trans:I,type:"put",keys:A,values:j,updates:{keys:g,changeSpecs:y}}).then(function(B){var ae=B.numFailures,R=B.failures;if(ae===0)return P;for(var M=0,q=Object.keys(R);M<q.length;M++){var V=q[M],Y=w[Number(V)];if(Y!=null){var X=R[V];delete R[V],R[Y]=X}}throw new Te("".concat(f.name,".bulkUpdate(): ").concat(ae," of ").concat(P," operations failed"),R)})})})},u.prototype.bulkDelete=function(c){var f=this,p=c.length;return this._trans("readwrite",function(g){return f.core.mutate({trans:g,type:"delete",keys:c}).then(function(y){return Va(f,c,y)})}).then(function(g){var y=g.numFailures,w=g.lastResult,I=g.failures;if(y===0)return w;throw new Te("".concat(f.name,".bulkDelete(): ").concat(y," of ").concat(p," operations failed"),I)})},u}();function bo(u){var c={},f=function(I,$){if($){for(var A=arguments.length,j=new Array(A-1);--A;)j[A-1]=arguments[A];return c[I].subscribe.apply(null,j),u}else if(typeof I=="string")return c[I]};f.addEventType=y;for(var p=1,g=arguments.length;p<g;++p)y(arguments[p]);return f;function y(I,$,A){if(typeof I=="object")return w(I);$||($=Pt),A||(A=Ke);var j={subscribers:[],fire:A,subscribe:function(P){j.subscribers.indexOf(P)===-1&&(j.subscribers.push(P),j.fire=$(j.fire,P))},unsubscribe:function(P){j.subscribers=j.subscribers.filter(function(B){return B!==P}),j.fire=j.subscribers.reduce($,A)}};return c[I]=f[I]=j,j}function w(I){o(I).forEach(function($){var A=I[$];if(a(A))y($,I[$][0],I[$][1]);else if(A==="asap")var j=y($,Lr,function(){for(var B=arguments.length,ae=new Array(B);B--;)ae[B]=arguments[B];j.subscribers.forEach(function(R){K(function(){R.apply(null,ae)})})});else throw new le.InvalidArgument("Invalid event config")})}}function xo(u,c){return _(c).from({prototype:u}),c}function U_(u){return xo(Xg.prototype,function(f,p,g){this.db=u,this._tx=g,this.name=f,this.schema=p,this.hook=u._allTables[f]?u._allTables[f].hook:bo(null,{creating:[ar,Ke],reading:[go,Lr],updating:[fi,Ke],deleting:[Ar,Ke]})})}function wi(u,c){return!(u.filter||u.algorithm||u.or)&&(c?u.justLimit:!u.replayFilter)}function tl(u,c){u.filter=Fn(u.filter,c)}function rl(u,c,f){var p=u.replayFilter;u.replayFilter=p?function(){return Fn(p(),c())}:c,u.justLimit=f&&!p}function F_(u,c){u.isMatch=Fn(u.isMatch,c)}function Ga(u,c){if(u.isPrimKey)return c.primaryKey;var f=c.getIndexByKeyPath(u.index);if(!f)throw new le.Schema("KeyPath "+u.index+" on object store "+c.name+" is not indexed");return f}function Qg(u,c,f){var p=Ga(u,c.schema);return c.openCursor({trans:f,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:p,range:u.range}})}function Ha(u,c,f,p){var g=u.replayFilter?Fn(u.filter,u.replayFilter()):u.filter;if(u.or){var y={},w=function(I,$,A){if(!g||g($,A,function(B){return $.stop(B)},function(B){return $.fail(B)})){var j=$.primaryKey,P=""+j;P==="[object ArrayBuffer]"&&(P=""+new Uint8Array(j)),m(y,P)||(y[P]=!0,c(I,$,A))}};return Promise.all([u.or._iterate(w,f),ev(Qg(u,p,f),u.algorithm,w,!u.keysOnly&&u.valueMapper)])}else return ev(Qg(u,p,f),Fn(u.algorithm,g),c,!u.keysOnly&&u.valueMapper)}function ev(u,c,f,p){var g=p?function(w,I,$){return f(p(w),I,$)}:f,y=ot(g);return u.then(function(w){if(w)return w.start(function(){var I=function(){return w.continue()};(!c||c(w,function($){return I=$},function($){w.stop($),I=Ke},function($){w.fail($),I=Ke}))&&y(w.value,w,function($){return I=$}),I()})})}var L_=function(){function u(){}return u.prototype._read=function(c,f){var p=this._ctx;return p.error?p.table._trans(null,dt.bind(null,p.error)):p.table._trans("readonly",c).then(f)},u.prototype._write=function(c){var f=this._ctx;return f.error?f.table._trans(null,dt.bind(null,f.error)):f.table._trans("readwrite",c,"locked")},u.prototype._addAlgorithm=function(c){var f=this._ctx;f.algorithm=Fn(f.algorithm,c)},u.prototype._iterate=function(c,f){return Ha(this._ctx,c,f,this._ctx.table.core)},u.prototype.clone=function(c){var f=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return c&&s(p,c),f._ctx=p,f},u.prototype.raw=function(){return this._ctx.valueMapper=null,this},u.prototype.each=function(c){var f=this._ctx;return this._read(function(p){return Ha(f,c,p,f.table.core)})},u.prototype.count=function(c){var f=this;return this._read(function(p){var g=f._ctx,y=g.table.core;if(wi(g,!0))return y.count({trans:p,query:{index:Ga(g,y.schema),range:g.range}}).then(function(I){return Math.min(I,g.limit)});var w=0;return Ha(g,function(){return++w,!1},p,y).then(function(){return w})}).then(c)},u.prototype.sortBy=function(c,f){var p=c.split(".").reverse(),g=p[0],y=p.length-1;function w(A,j){return j?w(A[p[j]],j-1):A[g]}var I=this._ctx.dir==="next"?1:-1;function $(A,j){var P=w(A,y),B=w(j,y);return qe(P,B)*I}return this.toArray(function(A){return A.sort($)}).then(f)},u.prototype.toArray=function(c){var f=this;return this._read(function(p){var g=f._ctx;if(g.dir==="next"&&wi(g,!0)&&g.limit>0){var y=g.valueMapper,w=Ga(g,g.table.core.schema);return g.table.core.query({trans:p,limit:g.limit,values:!0,query:{index:w,range:g.range}}).then(function($){var A=$.result;return y?A.map(y):A})}else{var I=[];return Ha(g,function($){return I.push($)},p,g.table.core).then(function(){return I})}},c)},u.prototype.offset=function(c){var f=this._ctx;return c<=0?this:(f.offset+=c,wi(f)?rl(f,function(){var p=c;return function(g,y){return p===0?!0:p===1?(--p,!1):(y(function(){g.advance(p),p=0}),!1)}}):rl(f,function(){var p=c;return function(){return--p<0}}),this)},u.prototype.limit=function(c){return this._ctx.limit=Math.min(this._ctx.limit,c),rl(this._ctx,function(){var f=c;return function(p,g,y){return--f<=0&&g(y),f>=0}},!0),this},u.prototype.until=function(c,f){return tl(this._ctx,function(p,g,y){return c(p.value)?(g(y),f):!0}),this},u.prototype.first=function(c){return this.limit(1).toArray(function(f){return f[0]}).then(c)},u.prototype.last=function(c){return this.reverse().first(c)},u.prototype.filter=function(c){return tl(this._ctx,function(f){return c(f.value)}),F_(this._ctx,c),this},u.prototype.and=function(c){return this.filter(c)},u.prototype.or=function(c){return new this.db.WhereClause(this._ctx.table,c,this)},u.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},u.prototype.desc=function(){return this.reverse()},u.prototype.eachKey=function(c){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(p,g){c(g.key,g)})},u.prototype.eachUniqueKey=function(c){return this._ctx.unique="unique",this.eachKey(c)},u.prototype.eachPrimaryKey=function(c){var f=this._ctx;return f.keysOnly=!f.isMatch,this.each(function(p,g){c(g.primaryKey,g)})},u.prototype.keys=function(c){var f=this._ctx;f.keysOnly=!f.isMatch;var p=[];return this.each(function(g,y){p.push(y.key)}).then(function(){return p}).then(c)},u.prototype.primaryKeys=function(c){var f=this._ctx;if(f.dir==="next"&&wi(f,!0)&&f.limit>0)return this._read(function(g){var y=Ga(f,f.table.core.schema);return f.table.core.query({trans:g,values:!1,limit:f.limit,query:{index:y,range:f.range}})}).then(function(g){var y=g.result;return y}).then(c);f.keysOnly=!f.isMatch;var p=[];return this.each(function(g,y){p.push(y.primaryKey)}).then(function(){return p}).then(c)},u.prototype.uniqueKeys=function(c){return this._ctx.unique="unique",this.keys(c)},u.prototype.firstKey=function(c){return this.limit(1).keys(function(f){return f[0]}).then(c)},u.prototype.lastKey=function(c){return this.reverse().firstKey(c)},u.prototype.distinct=function(){var c=this._ctx,f=c.index&&c.table.schema.idxByName[c.index];if(!f||!f.multi)return this;var p={};return tl(this._ctx,function(g){var y=g.primaryKey.toString(),w=m(p,y);return p[y]=!0,!w}),this},u.prototype.modify=function(c){var f=this,p=this._ctx;return this._write(function(g){var y;typeof c=="function"?y=c:y=function(V){return Yg(V,c)};var w=p.table.core,I=w.schema.primaryKey,$=I.outbound,A=I.extractKey,j=200,P=f.db._options.modifyChunkSize;P&&(typeof P=="object"?j=P[w.name]||P["*"]||200:j=P);var B=[],ae=0,R=[],M=function(V,Y){var X=Y.failures,ee=Y.numFailures;ae+=V-ee;for(var J=0,me=o(X);J<me.length;J++){var ve=me[J];B.push(X[ve])}},q=c===tv;return f.clone().primaryKeys().then(function(V){var Y=wi(p)&&p.limit===1/0&&(typeof c!="function"||q)&&{index:p.index,range:p.range},X=function(ee){var J=Math.min(j,V.length-ee),me=V.slice(ee,ee+J);return(q?Promise.resolve([]):w.getMany({trans:g,keys:me,cache:"immutable"})).then(function(ve){var he=[],Ie=[],Re=$?[]:null,ye=q?me:[];if(!q)for(var Oe=0;Oe<J;++Oe){var Se=ve[Oe],Be={value:Ge(Se),primKey:V[ee+Oe]};y.call(Be,Be.value,Be)!==!1&&(Be.value==null?ye.push(V[ee+Oe]):!$&&qe(A(Se),A(Be.value))!==0?(ye.push(V[ee+Oe]),he.push(Be.value)):(Ie.push(Be.value),$&&Re.push(V[ee+Oe])))}return Promise.resolve(he.length>0&&w.mutate({trans:g,type:"add",values:he}).then(function(we){for(var ut in we.failures)ye.splice(parseInt(ut),1);M(he.length,we)})).then(function(){return(Ie.length>0||Y&&typeof c=="object")&&w.mutate({trans:g,type:"put",keys:Re,values:Ie,criteria:Y,changeSpec:typeof c!="function"&&c,isAdditionalChunk:ee>0}).then(function(we){return M(Ie.length,we)})}).then(function(){return(ye.length>0||Y&&q)&&w.mutate({trans:g,type:"delete",keys:ye,criteria:Y,isAdditionalChunk:ee>0}).then(function(we){return Va(p.table,ye,we)}).then(function(we){return M(ye.length,we)})}).then(function(){return V.length>ee+J&&X(ee+j)})})};return X(0).then(function(){if(B.length>0)throw new Ae("Error modifying one or more objects",B,ae,R);return V.length})})})},u.prototype.delete=function(){var c=this._ctx,f=c.range;return wi(c)&&!c.table.schema.yProps&&(c.isPrimKey||f.type===3)?this._write(function(p){var g=c.table.core.schema.primaryKey,y=f;return c.table.core.count({trans:p,query:{index:g,range:y}}).then(function(w){return c.table.core.mutate({trans:p,type:"deleteRange",range:y}).then(function(I){var $=I.failures,A=I.numFailures;if(A)throw new Ae("Could not delete some values",Object.keys($).map(function(j){return $[j]}),w-A);return w-A})})}):this.modify(tv)},u}(),tv=function(u,c){return c.value=null};function q_(u){return xo(L_.prototype,function(f,p){this.db=u;var g=Gg,y=null;if(p)try{g=p()}catch(A){y=A}var w=f._ctx,I=w.table,$=I.hook.reading.fire;this._ctx={table:I,index:w.index,isPrimKey:!w.index||I.schema.primKey.keyPath&&w.index===I.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:y,or:w.or,valueMapper:$!==Lr?$:null}})}function B_(u,c){return u<c?-1:u===c?0:1}function Z_(u,c){return u>c?-1:u===c?0:1}function Kt(u,c,f){var p=u instanceof nv?new u.Collection(u):u;return p._ctx.error=f?new f(c):new TypeError(c),p}function _i(u){return new u.Collection(u,function(){return rv("")}).limit(0)}function K_(u){return u==="next"?function(c){return c.toUpperCase()}:function(c){return c.toLowerCase()}}function V_(u){return u==="next"?function(c){return c.toLowerCase()}:function(c){return c.toUpperCase()}}function G_(u,c,f,p,g,y){for(var w=Math.min(u.length,p.length),I=-1,$=0;$<w;++$){var A=c[$];if(A!==p[$])return g(u[$],f[$])<0?u.substr(0,$)+f[$]+f.substr($+1):g(u[$],p[$])<0?u.substr(0,$)+p[$]+f.substr($+1):I>=0?u.substr(0,I)+c[I]+f.substr(I+1):null;g(u[$],A)<0&&(I=$)}return w<p.length&&y==="next"?u+f.substr(u.length):w<u.length&&y==="prev"?u.substr(0,f.length):I<0?null:u.substr(0,I)+p[I]+f.substr(I+1)}function Wa(u,c,f,p){var g,y,w,I,$,A,j,P=f.length;if(!f.every(function(M){return typeof M=="string"}))return Kt(u,Vg);function B(M){g=K_(M),y=V_(M),w=M==="next"?B_:Z_;var q=f.map(function(V){return{lower:y(V),upper:g(V)}}).sort(function(V,Y){return w(V.lower,Y.lower)});I=q.map(function(V){return V.upper}),$=q.map(function(V){return V.lower}),A=M,j=M==="next"?"":p}B("next");var ae=new u.Collection(u,function(){return cn(I[0],$[P-1]+p)});ae._ondirectionchange=function(M){B(M)};var R=0;return ae._addAlgorithm(function(M,q,V){var Y=M.key;if(typeof Y!="string")return!1;var X=y(Y);if(c(X,$,R))return!0;for(var ee=null,J=R;J<P;++J){var me=G_(Y,X,I[J],$[J],w,A);me===null&&ee===null?R=J+1:(ee===null||w(ee,me)>0)&&(ee=me)}return q(ee!==null?function(){M.continue(ee+j)}:V),!1}),ae}function cn(u,c,f,p){return{type:2,lower:u,upper:c,lowerOpen:f,upperOpen:p}}function rv(u){return{type:1,lower:u,upper:u}}var nv=function(){function u(){}return Object.defineProperty(u.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),u.prototype.between=function(c,f,p,g){p=p!==!1,g=g===!0;try{return this._cmp(c,f)>0||this._cmp(c,f)===0&&(p||g)&&!(p&&g)?_i(this):new this.Collection(this,function(){return cn(c,f,!p,!g)})}catch{return Kt(this,Br)}},u.prototype.equals=function(c){return c==null?Kt(this,Br):new this.Collection(this,function(){return rv(c)})},u.prototype.above=function(c){return c==null?Kt(this,Br):new this.Collection(this,function(){return cn(c,void 0,!0)})},u.prototype.aboveOrEqual=function(c){return c==null?Kt(this,Br):new this.Collection(this,function(){return cn(c,void 0,!1)})},u.prototype.below=function(c){return c==null?Kt(this,Br):new this.Collection(this,function(){return cn(void 0,c,!1,!0)})},u.prototype.belowOrEqual=function(c){return c==null?Kt(this,Br):new this.Collection(this,function(){return cn(void 0,c)})},u.prototype.startsWith=function(c){return typeof c!="string"?Kt(this,Vg):this.between(c,c+Un,!0,!0)},u.prototype.startsWithIgnoreCase=function(c){return c===""?this.startsWith(c):Wa(this,function(f,p){return f.indexOf(p[0])===0},[c],Un)},u.prototype.equalsIgnoreCase=function(c){return Wa(this,function(f,p){return f===p[0]},[c],"")},u.prototype.anyOfIgnoreCase=function(){var c=Nt.apply(nr,arguments);return c.length===0?_i(this):Wa(this,function(f,p){return p.indexOf(f)!==-1},c,"")},u.prototype.startsWithAnyOfIgnoreCase=function(){var c=Nt.apply(nr,arguments);return c.length===0?_i(this):Wa(this,function(f,p){return p.some(function(g){return f.indexOf(g)===0})},c,Un)},u.prototype.anyOf=function(){var c=this,f=Nt.apply(nr,arguments),p=this._cmp;try{f.sort(p)}catch{return Kt(this,Br)}if(f.length===0)return _i(this);var g=new this.Collection(this,function(){return cn(f[0],f[f.length-1])});g._ondirectionchange=function(w){p=w==="next"?c._ascending:c._descending,f.sort(p)};var y=0;return g._addAlgorithm(function(w,I,$){for(var A=w.key;p(A,f[y])>0;)if(++y,y===f.length)return I($),!1;return p(A,f[y])===0?!0:(I(function(){w.continue(f[y])}),!1)}),g},u.prototype.notEqual=function(c){return this.inAnyRange([[Xc,c],[c,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},u.prototype.noneOf=function(){var c=Nt.apply(nr,arguments);if(c.length===0)return new this.Collection(this);try{c.sort(this._ascending)}catch{return Kt(this,Br)}var f=c.reduce(function(p,g){return p?p.concat([[p[p.length-1][1],g]]):[[Xc,g]]},null);return f.push([c[c.length-1],this.db._maxKey]),this.inAnyRange(f,{includeLowers:!1,includeUppers:!1})},u.prototype.inAnyRange=function(c,f){var p=this,g=this._cmp,y=this._ascending,w=this._descending,I=this._min,$=this._max;if(c.length===0)return _i(this);if(!c.every(function(J){return J[0]!==void 0&&J[1]!==void 0&&y(J[0],J[1])<=0}))return Kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);var A=!f||f.includeLowers!==!1,j=f&&f.includeUppers===!0;function P(J,me){for(var ve=0,he=J.length;ve<he;++ve){var Ie=J[ve];if(g(me[0],Ie[1])<0&&g(me[1],Ie[0])>0){Ie[0]=I(Ie[0],me[0]),Ie[1]=$(Ie[1],me[1]);break}}return ve===he&&J.push(me),J}var B=y;function ae(J,me){return B(J[0],me[0])}var R;try{R=c.reduce(P,[]),R.sort(ae)}catch{return Kt(this,Br)}var M=0,q=j?function(J){return y(J,R[M][1])>0}:function(J){return y(J,R[M][1])>=0},V=A?function(J){return w(J,R[M][0])>0}:function(J){return w(J,R[M][0])>=0};function Y(J){return!q(J)&&!V(J)}var X=q,ee=new this.Collection(this,function(){return cn(R[0][0],R[R.length-1][1],!A,!j)});return ee._ondirectionchange=function(J){J==="next"?(X=q,B=y):(X=V,B=w),R.sort(ae)},ee._addAlgorithm(function(J,me,ve){for(var he=J.key;X(he);)if(++M,M===R.length)return me(ve),!1;return Y(he)?!0:(p._cmp(he,R[M][1])===0||p._cmp(he,R[M][0])===0||me(function(){B===y?J.continue(R[M][0]):J.continue(R[M][1])}),!1)}),ee},u.prototype.startsWithAnyOf=function(){var c=Nt.apply(nr,arguments);return c.every(function(f){return typeof f=="string"})?c.length===0?_i(this):this.inAnyRange(c.map(function(f){return[f,f+Un]})):Kt(this,"startsWithAnyOf() only works with strings")},u}();function H_(u){return xo(nv.prototype,function(f,p,g){if(this.db=u,this._ctx={table:f,index:p===":id"?null:p,or:g},this._cmp=this._ascending=qe,this._descending=function(y,w){return qe(w,y)},this._max=function(y,w){return qe(y,w)>0?y:w},this._min=function(y,w){return qe(y,w)<0?y:w},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new le.MissingAPI})}function Er(u){return ot(function(c){return wo(c),u(c.target.error),!1})}function wo(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var _o="storagemutated",nl="x-storagemutated-1",ln=bo(null,_o),W_=function(){function u(){}return u.prototype._lock=function(){return re(!ce.global),++this._reculock,this._reculock===1&&!ce.global&&(ce.lockOwnerFor=this),this},u.prototype._unlock=function(){if(re(!ce.global),--this._reculock===0)for(ce.global||(ce.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var c=this._blockedFuncs.shift();try{Nn(c[1],c[0])}catch{}}return this},u.prototype._locked=function(){return this._reculock&&ce.lockOwnerFor!==this},u.prototype.create=function(c){var f=this;if(!this.mode)return this;var p=this.db.idbdb,g=this.db._state.dbOpenError;if(re(!this.idbtrans),!c&&!p)switch(g&&g.name){case"DatabaseClosedError":throw new le.DatabaseClosed(g);case"MissingAPIError":throw new le.MissingAPI(g.message,g);default:throw new le.OpenFailed(g)}if(!this.active)throw new le.TransactionInactive;return re(this._completion._state===null),c=this.idbtrans=c||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):p.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),c.onerror=ot(function(y){wo(y),f._reject(c.error)}),c.onabort=ot(function(y){wo(y),f.active&&f._reject(new le.Abort(c.error)),f.active=!1,f.on("abort").fire(y)}),c.oncomplete=ot(function(){f.active=!1,f._resolve(),"mutatedParts"in c&&ln.storagemutated.fire(c.mutatedParts)}),this},u.prototype._promise=function(c,f,p){var g=this;if(c==="readwrite"&&this.mode!=="readwrite")return dt(new le.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new le.TransactionInactive);if(this._locked())return new de(function(w,I){g._blockedFuncs.push([function(){g._promise(c,f,p).then(w,I)},ce])});if(p)return an(function(){var w=new de(function(I,$){g._lock();var A=f(I,$,g);A&&A.then&&A.then(I,$)});return w.finally(function(){return g._unlock()}),w._lib=!0,w});var y=new de(function(w,I){var $=f(w,I,g);$&&$.then&&$.then(w,I)});return y._lib=!0,y},u.prototype._root=function(){return this.parent?this.parent._root():this},u.prototype.waitFor=function(c){var f=this._root(),p=de.resolve(c);if(f._waitingFor)f._waitingFor=f._waitingFor.then(function(){return p});else{f._waitingFor=p,f._waitingQueue=[];var g=f.idbtrans.objectStore(f.storeNames[0]);(function w(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(g.get(-1/0).onsuccess=w)})()}var y=f._waitingFor;return new de(function(w,I){p.then(function($){return f._waitingQueue.push(ot(w.bind(null,$)))},function($){return f._waitingQueue.push(ot(I.bind(null,$)))}).finally(function(){f._waitingFor===y&&(f._waitingFor=null)})})},u.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new le.Abort))},u.prototype.table=function(c){var f=this._memoizedTables||(this._memoizedTables={});if(m(f,c))return f[c];var p=this.schema[c];if(!p)throw new le.NotFound("Table "+c+" not part of transaction");var g=new this.db.Table(c,p,this);return g.core=this.db.core.table(c),f[c]=g,g},u}();function J_(u){return xo(W_.prototype,function(f,p,g,y,w){var I=this;f!=="readonly"&&p.forEach(function($){var A,j=(A=g[$])===null||A===void 0?void 0:A.yProps;j&&(p=p.concat(j.map(function(P){return P.updatesTable})))}),this.db=u,this.mode=f,this.storeNames=p,this.schema=g,this.chromeTransactionDurability=y,this.idbtrans=null,this.on=bo(this,"complete","error","abort"),this.parent=w||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new de(function($,A){I._resolve=$,I._reject=A}),this._completion.then(function(){I.active=!1,I.on.complete.fire()},function($){var A=I.active;return I.active=!1,I.on.error.fire($),I.parent?I.parent._reject($):A&&I.idbtrans&&I.idbtrans.abort(),dt($)})})}function il(u,c,f,p,g,y,w,I){return{name:u,keyPath:c,unique:f,multi:p,auto:g,compound:y,src:(f&&!w?"&":"")+(p?"*":"")+(g?"++":"")+iv(c),type:I}}function iv(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function ol(u,c,f){return{name:u,primKey:c,indexes:f,mappedClass:null,idxByName:z(f,function(p){return[p.name,p]})}}function Y_(u){return u.length===1?u[0]:u}var Io=function(u){try{return u.only([[]]),Io=function(){return[[]]},[[]]}catch{return Io=function(){return Un},Un}};function al(u){return u==null?function(){}:typeof u=="string"?X_(u):function(c){return O(c,u)}}function X_(u){var c=u.split(".");return c.length===1?function(f){return f[u]}:function(f){return O(f,u)}}function ov(u){return[].slice.call(u)}var Q_=0;function $o(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function eI(u,c,f){function p(P,B){var ae=ov(P.objectStoreNames);return{schema:{name:P.name,tables:ae.map(function(R){return B.objectStore(R)}).map(function(R){var M=R.keyPath,q=R.autoIncrement,V=a(M),Y=M==null,X={},ee={name:R.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Y,compound:V,keyPath:M,autoIncrement:q,unique:!0,extractKey:al(M)},indexes:ov(R.indexNames).map(function(J){return R.index(J)}).map(function(J){var me=J.name,ve=J.unique,he=J.multiEntry,Ie=J.keyPath,Re=a(Ie),ye={name:me,compound:Re,keyPath:Ie,unique:ve,multiEntry:he,extractKey:al(Ie)};return X[$o(Ie)]=ye,ye}),getIndexByKeyPath:function(J){return X[$o(J)]}};return X[":id"]=ee.primaryKey,M!=null&&(X[$o(M)]=ee.primaryKey),ee})},hasGetAll:ae.length>0&&"getAll"in B.objectStore(ae[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function g(P){if(P.type===3)return null;if(P.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var B=P.lower,ae=P.upper,R=P.lowerOpen,M=P.upperOpen,q=B===void 0?ae===void 0?null:c.upperBound(ae,!!M):ae===void 0?c.lowerBound(B,!!R):c.bound(B,ae,!!R,!!M);return q}function y(P){var B=P.name;function ae(q){var V=q.trans,Y=q.type,X=q.keys,ee=q.values,J=q.range;return new Promise(function(me,ve){me=ot(me);var he=V.objectStore(B),Ie=he.keyPath==null,Re=Y==="put"||Y==="add";if(!Re&&Y!=="delete"&&Y!=="deleteRange")throw new Error("Invalid operation type: "+Y);var ye=(X||ee||{length:1}).length;if(X&&ee&&X.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(ye===0)return me({numFailures:0,failures:{},results:[],lastResult:void 0});var Oe,Se=[],Be=[],we=0,ut=function(Pr){++we,wo(Pr)};if(Y==="deleteRange"){if(J.type===4)return me({numFailures:we,failures:Be,results:[],lastResult:void 0});J.type===3?Se.push(Oe=he.clear()):Se.push(Oe=he.delete(g(J)))}else{var St=Re?Ie?[ee,X]:[ee,null]:[X,null],Tr=St[0],Ut=St[1];if(Re)for(var ur=0;ur<ye;++ur)Se.push(Oe=Ut&&Ut[ur]!==void 0?he[Y](Tr[ur],Ut[ur]):he[Y](Tr[ur])),Oe.onerror=ut;else for(var ur=0;ur<ye;++ur)Se.push(Oe=he[Y](Tr[ur])),Oe.onerror=ut}var pn=function(Pr){var Ao=Pr.target.result;Se.forEach(function(wr,ss){return wr.error!=null&&(Be[ss]=wr.error)}),me({numFailures:we,failures:Be,results:Y==="delete"?X:Se.map(function(wr){return wr.result}),lastResult:Ao})};Oe.onerror=function(Pr){ut(Pr),pn(Pr)},Oe.onsuccess=pn})}function R(q){var V=q.trans,Y=q.values,X=q.query,ee=q.reverse,J=q.unique;return new Promise(function(me,ve){me=ot(me);var he=X.index,Ie=X.range,Re=V.objectStore(B),ye=he.isPrimaryKey?Re:Re.index(he.name),Oe=ee?J?"prevunique":"prev":J?"nextunique":"next",Se=Y||!("openKeyCursor"in ye)?ye.openCursor(g(Ie),Oe):ye.openKeyCursor(g(Ie),Oe);Se.onerror=Er(ve),Se.onsuccess=ot(function(Be){var we=Se.result;if(!we){me(null);return}we.___id=++Q_,we.done=!1;var ut=we.continue.bind(we),St=we.continuePrimaryKey;St&&(St=St.bind(we));var Tr=we.advance.bind(we),Ut=function(){throw new Error("Cursor not started")},ur=function(){throw new Error("Cursor not stopped")};we.trans=V,we.stop=we.continue=we.continuePrimaryKey=we.advance=Ut,we.fail=ot(ve),we.next=function(){var pn=this,Pr=1;return this.start(function(){return Pr--?pn.continue():pn.stop()}).then(function(){return pn})},we.start=function(pn){var Pr=new Promise(function(wr,ss){wr=ot(wr),Se.onerror=Er(ss),we.fail=ss,we.stop=function(LI){we.stop=we.continue=we.continuePrimaryKey=we.advance=ur,wr(LI)}}),Ao=function(){if(Se.result)try{pn()}catch(wr){we.fail(wr)}else we.done=!0,we.start=function(){throw new Error("Cursor behind last entry")},we.stop()};return Se.onsuccess=ot(function(wr){Se.onsuccess=Ao,Ao()}),we.continue=ut,we.continuePrimaryKey=St,we.advance=Tr,Ao(),Pr},me(we)},ve)})}function M(q){return function(V){return new Promise(function(Y,X){Y=ot(Y);var ee=V.trans,J=V.values,me=V.limit,ve=V.query,he=me===1/0?void 0:me,Ie=ve.index,Re=ve.range,ye=ee.objectStore(B),Oe=Ie.isPrimaryKey?ye:ye.index(Ie.name),Se=g(Re);if(me===0)return Y({result:[]});if(q){var Be=J?Oe.getAll(Se,he):Oe.getAllKeys(Se,he);Be.onsuccess=function(Tr){return Y({result:Tr.target.result})},Be.onerror=Er(X)}else{var we=0,ut=J||!("openKeyCursor"in Oe)?Oe.openCursor(Se):Oe.openKeyCursor(Se),St=[];ut.onsuccess=function(Tr){var Ut=ut.result;if(!Ut)return Y({result:St});if(St.push(J?Ut.value:Ut.primaryKey),++we===me)return Y({result:St});Ut.continue()},ut.onerror=Er(X)}})}}return{name:B,schema:P,mutate:ae,getMany:function(q){var V=q.trans,Y=q.keys;return new Promise(function(X,ee){X=ot(X);for(var J=V.objectStore(B),me=Y.length,ve=new Array(me),he=0,Ie=0,Re,ye=function(we){var ut=we.target;(ve[ut._pos]=ut.result)!=null,++Ie===he&&X(ve)},Oe=Er(ee),Se=0;Se<me;++Se){var Be=Y[Se];Be!=null&&(Re=J.get(Y[Se]),Re._pos=Se,Re.onsuccess=ye,Re.onerror=Oe,++he)}he===0&&X(ve)})},get:function(q){var V=q.trans,Y=q.key;return new Promise(function(X,ee){X=ot(X);var J=V.objectStore(B),me=J.get(Y);me.onsuccess=function(ve){return X(ve.target.result)},me.onerror=Er(ee)})},query:M($),openCursor:R,count:function(q){var V=q.query,Y=q.trans,X=V.index,ee=V.range;return new Promise(function(J,me){var ve=Y.objectStore(B),he=X.isPrimaryKey?ve:ve.index(X.name),Ie=g(ee),Re=Ie?he.count(Ie):he.count();Re.onsuccess=ot(function(ye){return J(ye.target.result)}),Re.onerror=Er(me)})}}}var w=p(u,f),I=w.schema,$=w.hasGetAll,A=I.tables.map(function(P){return y(P)}),j={};return A.forEach(function(P){return j[P.name]=P}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(P){var B=j[P];if(!B)throw new Error("Table '".concat(P,"' not found"));return j[P]},MIN_KEY:-1/0,MAX_KEY:Io(c),schema:I}}function tI(u,c){return c.reduce(function(f,p){var g=p.create;return n(n({},f),g(f))},u)}function rI(u,c,f,p){var g=f.IDBKeyRange;f.indexedDB;var y=tI(eI(c,g,p),u.dbcore);return{dbcore:y}}function Ja(u,c){var f=c.db,p=rI(u._middlewares,f,u._deps,c);u.core=p.dbcore,u.tables.forEach(function(g){var y=g.name;u.core.schema.tables.some(function(w){return w.name===y})&&(g.core=u.core.table(y),u[y]instanceof u.Table&&(u[y].core=g.core))})}function Ya(u,c,f,p){f.forEach(function(g){var y=p[g];c.forEach(function(w){var I=S(w,g);(!I||"value"in I&&I.value===void 0)&&(w===u.Transaction.prototype||w instanceof u.Transaction?b(w,g,{get:function(){return this.table(g)},set:function($){h(this,g,{value:$,writable:!0,configurable:!0,enumerable:!0})}}):w[g]=new u.Table(g,y))})})}function sl(u,c){c.forEach(function(f){for(var p in f)f[p]instanceof u.Table&&delete f[p]})}function nI(u,c){return u._cfg.version-c._cfg.version}function iI(u,c,f,p){var g=u._dbSchema;f.objectStoreNames.contains("$meta")&&!g.$meta&&(g.$meta=ol("$meta",sv("")[0],[]),u._storeNames.push("$meta"));var y=u._createTransaction("readwrite",u._storeNames,g);y.create(f),y._completion.catch(p);var w=y._reject.bind(y),I=ce.transless||ce;an(function(){if(ce.trans=y,ce.transless=I,c===0)o(g).forEach(function($){cl(f,$,g[$].primKey,g[$].indexes)}),Ja(u,f),de.follow(function(){return u.on.populate.fire(y)}).catch(w);else return Ja(u,f),aI(u,y,c).then(function($){return sI(u,$,y,f)}).catch(w)})}function oI(u,c){av(u._dbSchema,c),c.db.version%10===0&&!c.objectStoreNames.contains("$meta")&&c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var f=Qa(u,u.idbdb,c);es(u,u._dbSchema,c);for(var p=ul(f,u._dbSchema),g=function(A){if(A.change.length||A.recreate)return console.warn("Unable to patch indexes of table ".concat(A.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=c.objectStore(A.name);A.add.forEach(function(P){mt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(A.name,".").concat(P.src)),Xa(j,P)})},y=0,w=p.change;y<w.length;y++){var I=w[y],$=g(I);if(typeof $=="object")return $.value}}function aI(u,c,f){return c.storeNames.includes("$meta")?c.table("$meta").get("version").then(function(p){return p??f}):de.resolve(f)}function sI(u,c,f,p){var g=[],y=u._versions,w=u._dbSchema=Qa(u,u.idbdb,p),I=y.filter(function(A){return A._cfg.version>=c});if(I.length===0)return de.resolve();I.forEach(function(A){g.push(function(){var j=w,P=A._cfg.dbschema;es(u,j,p),es(u,P,p),w=u._dbSchema=P;var B=ul(j,P);B.add.forEach(function(Y){cl(p,Y[0],Y[1].primKey,Y[1].indexes)}),B.change.forEach(function(Y){if(Y.recreate)throw new le.Upgrade("Not yet support for changing primary key");var X=p.objectStore(Y.name);Y.add.forEach(function(ee){return Xa(X,ee)}),Y.change.forEach(function(ee){X.deleteIndex(ee.name),Xa(X,ee)}),Y.del.forEach(function(ee){return X.deleteIndex(ee)})});var ae=A._cfg.contentUpgrade;if(ae&&A._cfg.version>c){Ja(u,p),f._memoizedTables={};var R=pe(P);B.del.forEach(function(Y){R[Y]=j[Y]}),sl(u,[u.Transaction.prototype]),Ya(u,[u.Transaction.prototype],o(R),R),f.schema=R;var M=nn(ae);M&&bi();var q,V=de.follow(function(){if(q=ae(f),q&&M){var Y=sn.bind(null,null);q.then(Y,Y)}});return q&&typeof q.then=="function"?de.resolve(q):V.then(function(){return q})}}),g.push(function(j){var P=A._cfg.dbschema;uI(P,j),sl(u,[u.Transaction.prototype]),Ya(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),f.schema=u._dbSchema}),g.push(function(j){u.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(u.idbdb.version/10)===A._cfg.version?(u.idbdb.deleteObjectStore("$meta"),delete u._dbSchema.$meta,u._storeNames=u._storeNames.filter(function(P){return P!=="$meta"})):j.objectStore("$meta").put(A._cfg.version,"version"))})});function $(){return g.length?de.resolve(g.shift()(f.idbtrans)).then($):de.resolve()}return $().then(function(){av(w,p)})}function ul(u,c){var f={del:[],add:[],change:[]},p;for(p in u)c[p]||f.del.push(p);for(p in c){var g=u[p],y=c[p];if(!g)f.add.push([p,y]);else{var w={name:p,def:y,recreate:!1,del:[],add:[],change:[]};if(""+(g.primKey.keyPath||"")!=""+(y.primKey.keyPath||"")||g.primKey.auto!==y.primKey.auto)w.recreate=!0,f.change.push(w);else{var I=g.idxByName,$=y.idxByName,A=void 0;for(A in I)$[A]||w.del.push(A);for(A in $){var j=I[A],P=$[A];j?j.src!==P.src&&w.change.push(P):w.add.push(P)}(w.del.length>0||w.add.length>0||w.change.length>0)&&f.change.push(w)}}}return f}function cl(u,c,f,p){var g=u.db.createObjectStore(c,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return p.forEach(function(y){return Xa(g,y)}),g}function av(u,c){o(u).forEach(function(f){c.db.objectStoreNames.contains(f)||(mt&&console.debug("Dexie: Creating missing table",f),cl(c,f,u[f].primKey,u[f].indexes))})}function uI(u,c){[].slice.call(c.db.objectStoreNames).forEach(function(f){return u[f]==null&&c.db.deleteObjectStore(f)})}function Xa(u,c){u.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Qa(u,c,f){var p={},g=Z(c.objectStoreNames,0);return g.forEach(function(y){for(var w=f.objectStore(y),I=w.keyPath,$=il(iv(I),I||"",!0,!1,!!w.autoIncrement,I&&typeof I!="string",!0),A=[],j=0;j<w.indexNames.length;++j){var P=w.index(w.indexNames[j]);I=P.keyPath;var B=il(P.name,I,!!P.unique,!!P.multiEntry,!1,I&&typeof I!="string",!1);A.push(B)}p[y]=ol(y,$,A)}),p}function cI(u,c,f){u.verno=c.version/10;var p=u._dbSchema=Qa(u,c,f);u._storeNames=Z(c.objectStoreNames,0),Ya(u,[u._allTables],o(p),p)}function lI(u,c){var f=Qa(u,u.idbdb,c),p=ul(f,u._dbSchema);return!(p.add.length||p.change.some(function(g){return g.add.length||g.change.length}))}function es(u,c,f){for(var p=f.db.objectStoreNames,g=0;g<p.length;++g){var y=p[g],w=f.objectStore(y);u._hasGetAll="getAll"in w;for(var I=0;I<w.indexNames.length;++I){var $=w.indexNames[I],A=w.index($).keyPath,j=typeof A=="string"?A:"["+Z(A).join("+")+"]";if(c[y]){var P=c[y].idxByName[j];P&&(P.name=$,delete c[y].idxByName[j],c[y].idxByName[$]=P)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function sv(u){return u.split(",").map(function(c,f){var p,g=c.split(":"),y=(p=g[1])===null||p===void 0?void 0:p.trim();c=g[0].trim();var w=c.replace(/([&*]|\+\+)/g,""),I=/^\[/.test(w)?w.match(/^\[(.*)\]$/)[1].split("+"):w;return il(w,I||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),a(I),f===0,y)})}var dI=function(){function u(){}return u.prototype._createTableSchema=function(c,f,p){return ol(c,f,p)},u.prototype._parseIndexSyntax=function(c){return sv(c)},u.prototype._parseStoresSpec=function(c,f){var p=this;o(c).forEach(function(g){if(c[g]!==null){var y=p._parseIndexSyntax(c[g]),w=y.shift();if(!w)throw new le.Schema("Invalid schema for table "+g+": "+c[g]);if(w.unique=!0,w.multi)throw new le.Schema("Primary key cannot be multiEntry*");y.forEach(function($){if($.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!$.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")});var I=p._createTableSchema(g,w,y);f[g]=I}})},u.prototype.stores=function(c){var f=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,c):c;var p=f._versions,g={},y={};return p.forEach(function(w){s(g,w._cfg.storesSource),y=w._cfg.dbschema={},w._parseStoresSpec(g,y)}),f._dbSchema=y,sl(f,[f._allTables,f,f.Transaction.prototype]),Ya(f,[f._allTables,f,f.Transaction.prototype,this._cfg.tables],o(y),y),f._storeNames=o(y),this},u.prototype.upgrade=function(c){return this._cfg.contentUpgrade=qr(this._cfg.contentUpgrade||Ke,c),this},u}();function fI(u){return xo(dI.prototype,function(f){this.db=u,this._cfg={version:f,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ll(u,c){var f=u._dbNamesDB;return f||(f=u._dbNamesDB=new Zr(Za,{addons:[],indexedDB:u,IDBKeyRange:c}),f.version(1).stores({dbnames:"name"})),f.table("dbnames")}function dl(u){return u&&typeof u.databases=="function"}function pI(u){var c=u.indexedDB,f=u.IDBKeyRange;return dl(c)?Promise.resolve(c.databases()).then(function(p){return p.map(function(g){return g.name}).filter(function(g){return g!==Za})}):ll(c,f).toCollection().primaryKeys()}function mI(u,c){var f=u.indexedDB,p=u.IDBKeyRange;!dl(f)&&c!==Za&&ll(f,p).put({name:c}).catch(Ke)}function hI(u,c){var f=u.indexedDB,p=u.IDBKeyRange;!dl(f)&&c!==Za&&ll(f,p).delete(c).catch(Ke)}function fl(u){return an(function(){return ce.letThrough=!0,u()})}function gI(){var u=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!u||!indexedDB.databases)return Promise.resolve();var c;return new Promise(function(f){var p=function(){return indexedDB.databases().finally(f)};c=setInterval(p,100),p()}).finally(function(){return clearInterval(c)})}var pl;function ml(u){return!("from"in u)}var $t=function(u,c){if(this)s(this,arguments.length?{d:1,from:u,to:arguments.length>1?c:u}:{d:0});else{var f=new $t;return u&&"d"in u&&s(f,u),f}};v($t.prototype,(pl={add:function(u){return ko(this,u),this},addKey:function(u){return So(this,u,u),this},addKeys:function(u){var c=this;return u.forEach(function(f){return So(c,f,f)}),this},hasKey:function(u){var c=ts(this).next(u).value;return c&&qe(c.from,u)<=0&&qe(c.to,u)>=0}},pl[ke]=function(){return ts(this)},pl));function So(u,c,f){var p=qe(c,f);if(!isNaN(p)){if(p>0)throw RangeError();if(ml(u))return s(u,{from:c,to:f,d:1});var g=u.l,y=u.r;if(qe(f,u.from)<0)return g?So(g,c,f):u.l={from:c,to:f,d:1,l:null,r:null},cv(u);if(qe(c,u.to)>0)return y?So(y,c,f):u.r={from:c,to:f,d:1,l:null,r:null},cv(u);qe(c,u.from)<0&&(u.from=c,u.l=null,u.d=y?y.d+1:1),qe(f,u.to)>0&&(u.to=f,u.r=null,u.d=u.l?u.l.d+1:1);var w=!u.r;g&&!u.l&&ko(u,g),y&&w&&ko(u,y)}}function ko(u,c){function f(p,g){var y=g.from,w=g.to,I=g.l,$=g.r;So(p,y,w),I&&f(p,I),$&&f(p,$)}ml(c)||f(u,c)}function uv(u,c){var f=ts(c),p=f.next();if(p.done)return!1;for(var g=p.value,y=ts(u),w=y.next(g.from),I=w.value;!p.done&&!w.done;){if(qe(I.from,g.to)<=0&&qe(I.to,g.from)>=0)return!0;qe(g.from,I.from)<0?g=(p=f.next(I.from)).value:I=(w=y.next(g.from)).value}return!1}function ts(u){var c=ml(u)?null:{s:0,n:u};return{next:function(f){for(var p=arguments.length>0;c;)switch(c.s){case 0:if(c.s=1,p)for(;c.n.l&&qe(f,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!p||qe(f,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function cv(u){var c,f,p=(((c=u.r)===null||c===void 0?void 0:c.d)||0)-(((f=u.l)===null||f===void 0?void 0:f.d)||0),g=p>1?"r":p<-1?"l":"";if(g){var y=g==="r"?"l":"r",w=n({},u),I=u[g];u.from=I.from,u.to=I.to,u[g]=I[g],w[g]=I[y],u[y]=w,w.d=lv(w)}u.d=lv(u)}function lv(u){var c=u.r,f=u.l;return(c?f?Math.max(c.d,f.d):c.d:f?f.d:0)+1}function rs(u,c){return o(c).forEach(function(f){u[f]?ko(u[f],c[f]):u[f]=Ue(c[f])}),u}function hl(u,c){return u.all||c.all||Object.keys(u).some(function(f){return c[f]&&uv(c[f],u[f])})}var Ln={},gl={},vl=!1;function ns(u,c){rs(gl,u),vl||(vl=!0,setTimeout(function(){vl=!1;var f=gl;gl={},yl(f,!1)},0))}function yl(u,c){c===void 0&&(c=!1);var f=new Set;if(u.all)for(var p=0,g=Object.values(Ln);p<g.length;p++){var y=g[p];dv(y,u,f,c)}else for(var w in u){var I=/^idb\:\/\/(.*)\/(.*)\//.exec(w);if(I){var $=I[1],A=I[2],y=Ln["idb://".concat($,"/").concat(A)];y&&dv(y,u,f,c)}}f.forEach(function(j){return j()})}function dv(u,c,f,p){for(var g=[],y=0,w=Object.entries(u.queries.query);y<w.length;y++){for(var I=w[y],$=I[0],A=I[1],j=[],P=0,B=A;P<B.length;P++){var ae=B[P];hl(c,ae.obsSet)?ae.subscribers.forEach(function(V){return f.add(V)}):p&&j.push(ae)}p&&g.push([$,j])}if(p)for(var R=0,M=g;R<M.length;R++){var q=M[R],$=q[0],j=q[1];u.queries.query[$]=j}}function vI(u){var c=u._state,f=u._deps.indexedDB;if(c.isBeingOpened||u.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?dt(c.dbOpenError):u});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var p=c.openCanceller,g=Math.round(u.verno*10),y=!1;function w(){if(c.openCanceller!==p)throw new le.DatabaseClosed("db.open() was cancelled")}var I=c.dbReadyResolve,$=null,A=!1,j=function(){return new de(function(P,B){if(w(),!f)throw new le.MissingAPI;var ae=u.name,R=c.autoSchema||!g?f.open(ae):f.open(ae,g);if(!R)throw new le.MissingAPI;R.onerror=Er(B),R.onblocked=ot(u._fireOnBlocked),R.onupgradeneeded=ot(function(M){if($=R.transaction,c.autoSchema&&!u._options.allowEmptyDB){R.onerror=wo,$.abort(),R.result.close();var q=f.deleteDatabase(ae);q.onsuccess=q.onerror=ot(function(){B(new le.NoSuchDatabase("Database ".concat(ae," doesnt exist")))})}else{$.onerror=Er(B);var V=M.oldVersion>Math.pow(2,62)?0:M.oldVersion;A=V<1,u.idbdb=R.result,y&&oI(u,$),iI(u,V/10,$,B)}},B),R.onsuccess=ot(function(){$=null;var M=u.idbdb=R.result,q=Z(M.objectStoreNames);if(q.length>0)try{var V=M.transaction(Y_(q),"readonly");if(c.autoSchema)cI(u,M,V);else if(es(u,u._dbSchema,V),!lI(u,V)&&!y)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),M.close(),g=M.version+1,y=!0,P(j());Ja(u,V)}catch{}xi.push(u),M.onversionchange=ot(function(Y){c.vcFired=!0,u.on("versionchange").fire(Y)}),M.onclose=ot(function(){u.close({disableAutoOpen:!1})}),A&&mI(u._deps,ae),P()},B)}).catch(function(P){switch(P?.name){case"UnknownError":if(c.PR1398_maxLoop>0)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(g>0)return g=0,j();break}return de.reject(P)})};return de.race([p,(typeof navigator>"u"?de.resolve():gI()).then(j)]).then(function(){return w(),c.onReadyBeingFired=[],de.resolve(fl(function(){return u.on.ready.fire(u.vip)})).then(function P(){if(c.onReadyBeingFired.length>0){var B=c.onReadyBeingFired.reduce(qr,Ke);return c.onReadyBeingFired=[],de.resolve(fl(function(){return B(u.vip)})).then(P)}})}).finally(function(){c.openCanceller===p&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(P){c.dbOpenError=P;try{$&&$.abort()}catch{}return p===c.openCanceller&&u._close(),dt(P)}).finally(function(){c.openComplete=!0,I()}).then(function(){if(A){var P={};u.tables.forEach(function(B){B.schema.indexes.forEach(function(ae){ae.name&&(P["idb://".concat(u.name,"/").concat(B.name,"/").concat(ae.name)]=new $t(-1/0,[[[]]]))}),P["idb://".concat(u.name,"/").concat(B.name,"/")]=P["idb://".concat(u.name,"/").concat(B.name,"/:dels")]=new $t(-1/0,[[[]]])}),ln(_o).fire(P),yl(P,!0)}return u})}function bl(u){var c=function(w){return u.next(w)},f=function(w){return u.throw(w)},p=y(c),g=y(f);function y(w){return function(I){var $=w(I),A=$.value;return $.done?A:!A||typeof A.then!="function"?a(A)?Promise.all(A).then(p,g):p(A):A.then(p,g)}}return y(c)()}function yI(u,c,f){var p=arguments.length;if(p<2)throw new le.InvalidArgument("Too few arguments");for(var g=new Array(p-1);--p;)g[p-1]=arguments[p];f=g.pop();var y=$e(g);return[u,y,f]}function fv(u,c,f,p,g){return de.resolve().then(function(){var y=ce.transless||ce,w=u._createTransaction(c,f,u._dbSchema,p);w.explicit=!0;var I={trans:w,transless:y};if(p)w.idbtrans=p.idbtrans;else try{w.create(),w.idbtrans._explicit=!0,u._state.PR1398_maxLoop=3}catch(P){return P.name===Xe.InvalidState&&u.isOpen()&&--u._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),u.close({disableAutoOpen:!1}),u.open().then(function(){return fv(u,c,f,null,g)})):dt(P)}var $=nn(g);$&&bi();var A,j=de.follow(function(){if(A=g.call(w,w),A)if($){var P=sn.bind(null,null);A.then(P,P)}else typeof A.next=="function"&&typeof A.throw=="function"&&(A=bl(A))},I);return(A&&typeof A.then=="function"?de.resolve(A).then(function(P){return w.active?P:dt(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):j.then(function(){return A})).then(function(P){return p&&w._resolve(),w._completion.then(function(){return P})}).catch(function(P){return w._reject(P),dt(P)})})}function is(u,c,f){for(var p=a(u)?u.slice():[u],g=0;g<f;++g)p.push(c);return p}function bI(u){return n(n({},u),{table:function(c){var f=u.table(c),p=f.schema,g={},y=[];function w(M,q,V){var Y=$o(M),X=g[Y]=g[Y]||[],ee=M==null?0:typeof M=="string"?1:M.length,J=q>0,me=n(n({},V),{name:J?"".concat(Y,"(virtual-from:").concat(V.name,")"):V.name,lowLevelIndex:V,isVirtual:J,keyTail:q,keyLength:ee,extractKey:al(M),unique:!J&&V.unique});if(X.push(me),me.isPrimaryKey||y.push(me),ee>1){var ve=ee===2?M[0]:M.slice(0,ee-1);w(ve,q+1,V)}return X.sort(function(he,Ie){return he.keyTail-Ie.keyTail}),me}var I=w(p.primaryKey.keyPath,0,p.primaryKey);g[":id"]=[I];for(var $=0,A=p.indexes;$<A.length;$++){var j=A[$];w(j.keyPath,0,j)}function P(M){var q=g[$o(M)];return q&&q[0]}function B(M,q){return{type:M.type===1?2:M.type,lower:is(M.lower,M.lowerOpen?u.MAX_KEY:u.MIN_KEY,q),lowerOpen:!0,upper:is(M.upper,M.upperOpen?u.MIN_KEY:u.MAX_KEY,q),upperOpen:!0}}function ae(M){var q=M.query.index;return q.isVirtual?n(n({},M),{query:{index:q.lowLevelIndex,range:B(M.query.range,q.keyTail)}}):M}var R=n(n({},f),{schema:n(n({},p),{primaryKey:I,indexes:y,getIndexByKeyPath:P}),count:function(M){return f.count(ae(M))},query:function(M){return f.query(ae(M))},openCursor:function(M){var q=M.query.index,V=q.keyTail,Y=q.isVirtual,X=q.keyLength;if(!Y)return f.openCursor(M);function ee(J){function me(he){he!=null?J.continue(is(he,M.reverse?u.MAX_KEY:u.MIN_KEY,V)):M.unique?J.continue(J.key.slice(0,X).concat(M.reverse?u.MIN_KEY:u.MAX_KEY,V)):J.continue()}var ve=Object.create(J,{continue:{value:me},continuePrimaryKey:{value:function(he,Ie){J.continuePrimaryKey(is(he,u.MAX_KEY,V),Ie)}},primaryKey:{get:function(){return J.primaryKey}},key:{get:function(){var he=J.key;return X===1?he[0]:he.slice(0,X)}},value:{get:function(){return J.value}}});return ve}return f.openCursor(ae(M)).then(function(J){return J&&ee(J)})}});return R}})}var xI={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:bI};function xl(u,c,f,p){return f=f||{},p=p||"",o(u).forEach(function(g){if(!m(c,g))f[p+g]=void 0;else{var y=u[g],w=c[g];if(typeof y=="object"&&typeof w=="object"&&y&&w){var I=pt(y),$=pt(w);I!==$?f[p+g]=c[g]:I==="Object"?xl(y,w,f,p+g+"."):y!==w&&(f[p+g]=c[g])}else y!==w&&(f[p+g]=c[g])}}),o(c).forEach(function(g){m(u,g)||(f[p+g]=c[g])}),f}function wl(u,c){return c.type==="delete"?c.keys:c.keys||c.values.map(u.extractKey)}var wI={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return n(n({},u),{table:function(c){var f=u.table(c),p=f.schema.primaryKey,g=n(n({},f),{mutate:function(y){var w=ce.trans,I=w.table(c).hook,$=I.deleting,A=I.creating,j=I.updating;switch(y.type){case"add":if(A.fire===Ke)break;return w._promise("readwrite",function(){return P(y)},!0);case"put":if(A.fire===Ke&&j.fire===Ke)break;return w._promise("readwrite",function(){return P(y)},!0);case"delete":if($.fire===Ke)break;return w._promise("readwrite",function(){return P(y)},!0);case"deleteRange":if($.fire===Ke)break;return w._promise("readwrite",function(){return B(y)},!0)}return f.mutate(y);function P(R){var M=ce.trans,q=R.keys||wl(p,R);if(!q)throw new Error("Keys missing");return R=R.type==="add"||R.type==="put"?n(n({},R),{keys:q}):n({},R),R.type!=="delete"&&(R.values=i([],R.values,!0)),R.keys&&(R.keys=i([],R.keys,!0)),_I(f,R,q).then(function(V){var Y=q.map(function(X,ee){var J=V[ee],me={onerror:null,onsuccess:null};if(R.type==="delete")$.fire.call(me,X,J,M);else if(R.type==="add"||J===void 0){var ve=A.fire.call(me,X,R.values[ee],M);X==null&&ve!=null&&(X=ve,R.keys[ee]=X,p.outbound||W(R.values[ee],p.keyPath,X))}else{var he=xl(J,R.values[ee]),Ie=j.fire.call(me,he,X,J,M);if(Ie){var Re=R.values[ee];Object.keys(Ie).forEach(function(ye){m(Re,ye)?Re[ye]=Ie[ye]:W(Re,ye,Ie[ye])})}}return me});return f.mutate(R).then(function(X){for(var ee=X.failures,J=X.results,me=X.numFailures,ve=X.lastResult,he=0;he<q.length;++he){var Ie=J?J[he]:q[he],Re=Y[he];Ie==null?Re.onerror&&Re.onerror(ee[he]):Re.onsuccess&&Re.onsuccess(R.type==="put"&&V[he]?R.values[he]:Ie)}return{failures:ee,results:J,numFailures:me,lastResult:ve}}).catch(function(X){return Y.forEach(function(ee){return ee.onerror&&ee.onerror(X)}),Promise.reject(X)})})}function B(R){return ae(R.trans,R.range,1e4)}function ae(R,M,q){return f.query({trans:R,values:!1,query:{index:p,range:M},limit:q}).then(function(V){var Y=V.result;return P({type:"delete",keys:Y,trans:R}).then(function(X){return X.numFailures>0?Promise.reject(X.failures[0]):Y.length<q?{failures:[],numFailures:0,lastResult:void 0}:ae(R,n(n({},M),{lower:Y[Y.length-1],lowerOpen:!0}),q)})})}}});return g}})}};function _I(u,c,f){return c.type==="add"?Promise.resolve([]):u.getMany({trans:c.trans,keys:f,cache:"immutable"})}function pv(u,c,f){try{if(!c||c.keys.length<u.length)return null;for(var p=[],g=0,y=0;g<c.keys.length&&y<u.length;++g)qe(c.keys[g],u[y])===0&&(p.push(f?Ge(c.values[g]):c.values[g]),++y);return p.length===u.length?p:null}catch{return null}}var II={stack:"dbcore",level:-1,create:function(u){return{table:function(c){var f=u.table(c);return n(n({},f),{getMany:function(p){if(!p.cache)return f.getMany(p);var g=pv(p.keys,p.trans._cache,p.cache==="clone");return g?de.resolve(g):f.getMany(p).then(function(y){return p.trans._cache={keys:p.keys,values:p.cache==="clone"?Ge(y):y},y})},mutate:function(p){return p.type!=="add"&&(p.trans._cache=null),f.mutate(p)}})}}}};function mv(u,c){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function hv(u,c){switch(u){case"query":return c.values&&!c.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var $I={stack:"dbcore",level:0,name:"Observability",create:function(u){var c=u.schema.name,f=new $t(u.MIN_KEY,u.MAX_KEY);return n(n({},u),{transaction:function(p,g,y){if(ce.subscr&&g!=="readonly")throw new le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ce.querier));return u.transaction(p,g,y)},table:function(p){var g=u.table(p),y=g.schema,w=y.primaryKey,I=y.indexes,$=w.extractKey,A=w.outbound,j=w.autoIncrement&&I.filter(function(R){return R.compound&&R.keyPath.includes(w.keyPath)}),P=n(n({},g),{mutate:function(R){var M,q,V=R.trans,Y=R.mutatedParts||(R.mutatedParts={}),X=function(Se){var Be="idb://".concat(c,"/").concat(p,"/").concat(Se);return Y[Be]||(Y[Be]=new $t)},ee=X(""),J=X(":dels"),me=R.type,ve=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[wl(w,R).filter(function(Se){return Se}),R.values]:[],he=ve[0],Ie=ve[1],Re=R.trans._cache;if(a(he)){ee.addKeys(he);var ye=me==="delete"||he.length===Ie.length?pv(he,Re):null;ye||J.addKeys(he),(ye||Ie)&&SI(X,y,ye,Ie)}else if(he){var Oe={from:(M=he.lower)!==null&&M!==void 0?M:u.MIN_KEY,to:(q=he.upper)!==null&&q!==void 0?q:u.MAX_KEY};J.add(Oe),ee.add(Oe)}else ee.add(f),J.add(f),y.indexes.forEach(function(Se){return X(Se.name).add(f)});return g.mutate(R).then(function(Se){return he&&(R.type==="add"||R.type==="put")&&(ee.addKeys(Se.results),j&&j.forEach(function(Be){for(var we=R.values.map(function(Ut){return Be.extractKey(Ut)}),ut=Be.keyPath.findIndex(function(Ut){return Ut===w.keyPath}),St=0,Tr=Se.results.length;St<Tr;++St)we[St][ut]=Se.results[St];X(Be.name).addKeys(we)})),V.mutatedParts=rs(V.mutatedParts||{},Y),Se})}}),B=function(R){var M,q,V=R.query,Y=V.index,X=V.range;return[Y,new $t((M=X.lower)!==null&&M!==void 0?M:u.MIN_KEY,(q=X.upper)!==null&&q!==void 0?q:u.MAX_KEY)]},ae={get:function(R){return[w,new $t(R.key)]},getMany:function(R){return[w,new $t().addKeys(R.keys)]},count:B,query:B,openCursor:B};return o(ae).forEach(function(R){P[R]=function(M){var q=ce.subscr,V=!!q,Y=mv(ce,g)&&hv(R,M),X=Y?M.obsSet={}:q;if(V){var ee=function(ye){var Oe="idb://".concat(c,"/").concat(p,"/").concat(ye);return X[Oe]||(X[Oe]=new $t)},J=ee(""),me=ee(":dels"),ve=ae[R](M),he=ve[0],Ie=ve[1];if(R==="query"&&he.isPrimaryKey&&!M.values?me.add(Ie):ee(he.name||"").add(Ie),!he.isPrimaryKey)if(R==="count")me.add(f);else{var Re=R==="query"&&A&&M.values&&g.query(n(n({},M),{values:!1}));return g[R].apply(this,arguments).then(function(ye){if(R==="query"){if(A&&M.values)return Re.then(function(we){var ut=we.result;return J.addKeys(ut),ye});var Oe=M.values?ye.result.map($):ye.result;M.values?J.addKeys(Oe):me.addKeys(Oe)}else if(R==="openCursor"){var Se=ye,Be=M.values;return Se&&Object.create(Se,{key:{get:function(){return me.addKey(Se.primaryKey),Se.key}},primaryKey:{get:function(){var we=Se.primaryKey;return me.addKey(we),we}},value:{get:function(){return Be&&J.addKey(Se.primaryKey),Se.value}}})}return ye})}}return g[R].apply(this,arguments)}}),P}})}};function SI(u,c,f,p){function g(y){var w=u(y.name||"");function I(A){return A!=null?y.extractKey(A):null}var $=function(A){return y.multiEntry&&a(A)?A.forEach(function(j){return w.addKey(j)}):w.addKey(A)};(f||p).forEach(function(A,j){var P=f&&I(f[j]),B=p&&I(p[j]);qe(P,B)!==0&&(P!=null&&$(P),B!=null&&$(B))})}c.indexes.forEach(g)}function gv(u,c,f){if(f.numFailures===0)return c;if(c.type==="deleteRange")return null;var p=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;if(f.numFailures===p)return null;var g=n({},c);return a(g.keys)&&(g.keys=g.keys.filter(function(y,w){return!(w in f.failures)})),"values"in g&&a(g.values)&&(g.values=g.values.filter(function(y,w){return!(w in f.failures)})),g}function kI(u,c){return c.lower===void 0?!0:c.lowerOpen?qe(u,c.lower)>0:qe(u,c.lower)>=0}function AI(u,c){return c.upper===void 0?!0:c.upperOpen?qe(u,c.upper)<0:qe(u,c.upper)<=0}function _l(u,c){return kI(u,c)&&AI(u,c)}function vv(u,c,f,p,g,y){if(!f||f.length===0)return u;var w=c.query.index,I=w.multiEntry,$=c.query.range,A=p.schema.primaryKey,j=A.extractKey,P=w.extractKey,B=(w.lowLevelIndex||w).extractKey,ae=f.reduce(function(R,M){var q=R,V=[];if(M.type==="add"||M.type==="put")for(var Y=new $t,X=M.values.length-1;X>=0;--X){var ee=M.values[X],J=j(ee);if(!Y.hasKey(J)){var me=P(ee);(I&&a(me)?me.some(function(ye){return _l(ye,$)}):_l(me,$))&&(Y.addKey(J),V.push(ee))}}switch(M.type){case"add":{var ve=new $t().addKeys(c.values?R.map(function(ye){return j(ye)}):R);q=R.concat(c.values?V.filter(function(ye){var Oe=j(ye);return ve.hasKey(Oe)?!1:(ve.addKey(Oe),!0)}):V.map(function(ye){return j(ye)}).filter(function(ye){return ve.hasKey(ye)?!1:(ve.addKey(ye),!0)}));break}case"put":{var he=new $t().addKeys(M.values.map(function(ye){return j(ye)}));q=R.filter(function(ye){return!he.hasKey(c.values?j(ye):ye)}).concat(c.values?V:V.map(function(ye){return j(ye)}));break}case"delete":var Ie=new $t().addKeys(M.keys);q=R.filter(function(ye){return!Ie.hasKey(c.values?j(ye):ye)});break;case"deleteRange":var Re=M.range;q=R.filter(function(ye){return!_l(j(ye),Re)});break}return q},u);return ae===u?u:(ae.sort(function(R,M){return qe(B(R),B(M))||qe(j(R),j(M))}),c.limit&&c.limit<1/0&&(ae.length>c.limit?ae.length=c.limit:u.length===c.limit&&ae.length<c.limit&&(g.dirty=!0)),y?Object.freeze(ae):ae)}function yv(u,c){return qe(u.lower,c.lower)===0&&qe(u.upper,c.upper)===0&&!!u.lowerOpen==!!c.lowerOpen&&!!u.upperOpen==!!c.upperOpen}function EI(u,c,f,p){if(u===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;var g=qe(u,c);if(g===0){if(f&&p)return 0;if(f)return 1;if(p)return-1}return g}function TI(u,c,f,p){if(u===void 0)return c!==void 0?1:0;if(c===void 0)return-1;var g=qe(u,c);if(g===0){if(f&&p)return 0;if(f)return-1;if(p)return 1}return g}function PI(u,c){return EI(u.lower,c.lower,u.lowerOpen,c.lowerOpen)<=0&&TI(u.upper,c.upper,u.upperOpen,c.upperOpen)>=0}function DI(u,c,f,p){var g=Ln["idb://".concat(u,"/").concat(c)];if(!g)return[];var y=g.queries[f];if(!y)return[null,!1,g,null];var w=p.query?p.query.index.name:null,I=y[w||""];if(!I)return[null,!1,g,null];switch(f){case"query":var $=I.find(function(P){return P.req.limit===p.limit&&P.req.values===p.values&&yv(P.req.query.range,p.query.range)});if($)return[$,!0,g,I];var A=I.find(function(P){var B="limit"in P.req?P.req.limit:1/0;return B>=p.limit&&(p.values?P.req.values:!0)&&PI(P.req.query.range,p.query.range)});return[A,!1,g,I];case"count":var j=I.find(function(P){return yv(P.req.query.range,p.query.range)});return[j,!!j,g,I]}}function zI(u,c,f,p){u.subscribers.add(f),p.addEventListener("abort",function(){u.subscribers.delete(f),u.subscribers.size===0&&OI(u,c)})}function OI(u,c){setTimeout(function(){u.subscribers.size===0&&Mt(c,u)},3e3)}var RI={stack:"dbcore",level:0,name:"Cache",create:function(u){var c=u.schema.name,f=n(n({},u),{transaction:function(p,g,y){var w=u.transaction(p,g,y);if(g==="readwrite"){var I=new AbortController,$=I.signal,A=function(j){return function(){if(I.abort(),g==="readwrite"){for(var P=new Set,B=0,ae=p;B<ae.length;B++){var R=ae[B],M=Ln["idb://".concat(c,"/").concat(R)];if(M){var q=u.table(R),V=M.optimisticOps.filter(function(Be){return Be.trans===w});if(w._explicit&&j&&w.mutatedParts)for(var Y=0,X=Object.values(M.queries.query);Y<X.length;Y++)for(var ee=X[Y],J=0,me=ee.slice();J<me.length;J++){var ve=me[J];hl(ve.obsSet,w.mutatedParts)&&(Mt(ee,ve),ve.subscribers.forEach(function(Be){return P.add(Be)}))}else if(V.length>0){M.optimisticOps=M.optimisticOps.filter(function(Be){return Be.trans!==w});for(var he=0,Ie=Object.values(M.queries.query);he<Ie.length;he++)for(var ee=Ie[he],Re=0,ye=ee.slice();Re<ye.length;Re++){var ve=ye[Re];if(ve.res!=null&&w.mutatedParts)if(j&&!ve.dirty){var Oe=Object.isFrozen(ve.res),Se=vv(ve.res,ve.req,V,q,ve,Oe);ve.dirty?(Mt(ee,ve),ve.subscribers.forEach(function(ut){return P.add(ut)})):Se!==ve.res&&(ve.res=Se,ve.promise=de.resolve({result:Se}))}else ve.dirty&&Mt(ee,ve),ve.subscribers.forEach(function(ut){return P.add(ut)})}}}}P.forEach(function(Be){return Be()})}}};w.addEventListener("abort",A(!1),{signal:$}),w.addEventListener("error",A(!1),{signal:$}),w.addEventListener("complete",A(!0),{signal:$})}return w},table:function(p){var g=u.table(p),y=g.schema.primaryKey,w=n(n({},g),{mutate:function(I){var $=ce.trans;if(y.outbound||$.db._options.cache==="disabled"||$.explicit||$.idbtrans.mode!=="readwrite")return g.mutate(I);var A=Ln["idb://".concat(c,"/").concat(p)];if(!A)return g.mutate(I);var j=g.mutate(I);return(I.type==="add"||I.type==="put")&&(I.values.length>=50||wl(y,I).some(function(P){return P==null}))?j.then(function(P){var B=n(n({},I),{values:I.values.map(function(R,M){var q;if(P.failures[M])return R;var V=!((q=y.keyPath)===null||q===void 0)&&q.includes(".")?Ge(R):n({},R);return W(V,y.keyPath,P.results[M]),V})}),ae=gv(A,B,P);A.optimisticOps.push(ae),queueMicrotask(function(){return I.mutatedParts&&ns(I.mutatedParts)})}):(A.optimisticOps.push(I),I.mutatedParts&&ns(I.mutatedParts),j.then(function(P){if(P.numFailures>0){Mt(A.optimisticOps,I);var B=gv(A,I,P);B&&A.optimisticOps.push(B),I.mutatedParts&&ns(I.mutatedParts)}}),j.catch(function(){Mt(A.optimisticOps,I),I.mutatedParts&&ns(I.mutatedParts)})),j},query:function(I){var $;if(!mv(ce,g)||!hv("query",I))return g.query(I);var A=(($=ce.trans)===null||$===void 0?void 0:$.db._options.cache)==="immutable",j=ce,P=j.requery,B=j.signal,ae=DI(c,p,"query",I),R=ae[0],M=ae[1],q=ae[2],V=ae[3];if(R&&M)R.obsSet=I.obsSet;else{var Y=g.query(I).then(function(X){var ee=X.result;if(R&&(R.res=ee),A){for(var J=0,me=ee.length;J<me;++J)Object.freeze(ee[J]);Object.freeze(ee)}else X.result=Ge(ee);return X}).catch(function(X){return V&&R&&Mt(V,R),Promise.reject(X)});R={obsSet:I.obsSet,promise:Y,subscribers:new Set,type:"query",req:I,dirty:!1},V?V.push(R):(V=[R],q||(q=Ln["idb://".concat(c,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),q.queries.query[I.query.index.name||""]=V)}return zI(R,V,P,B),R.promise.then(function(X){return{result:vv(X.result,I,q?.optimisticOps,g,R,A)}})}});return w}});return f}};function os(u,c){return new Proxy(u,{get:function(f,p,g){return p==="db"?c:Reflect.get(f,p,g)}})}var Zr=function(){function u(c,f){var p=this;this._middlewares={},this.verno=0;var g=u.dependencies;this._options=f=n({addons:u.addons,autoOpen:!0,indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange,cache:"cloned"},f),this._deps={indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange};var y=f.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var w={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ke,dbReadyPromise:null,cancelOpen:Ke,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:f.autoOpen};w.dbReadyPromise=new de(function($){w.dbReadyResolve=$}),w.openCanceller=new de(function($,A){w.cancelOpen=A}),this._state=w,this.name=c,this.on=bo(this,"populate","blocked","versionchange","close",{ready:[qr,Ke]}),this.once=function($,A){var j=function(){for(var P=[],B=0;B<arguments.length;B++)P[B]=arguments[B];p.on($).unsubscribe(j),A.apply(p,P)};return p.on($,j)},this.on.ready.subscribe=H(this.on.ready.subscribe,function($){return function(A,j){u.vip(function(){var P=p._state;if(P.openComplete)P.dbOpenError||de.resolve().then(A),j&&$(A);else if(P.onReadyBeingFired)P.onReadyBeingFired.push(A),j&&$(A);else{$(A);var B=p;j||$(function ae(){B.on.ready.unsubscribe(A),B.on.ready.unsubscribe(ae)})}})}}),this.Collection=q_(this),this.Table=U_(this),this.Transaction=J_(this),this.Version=fI(this),this.WhereClause=H_(this),this.on("versionchange",function($){$.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function($){!$.newVersion||$.newVersion<$.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat($.oldVersion/10))}),this._maxKey=Io(f.IDBKeyRange),this._createTransaction=function($,A,j,P){return new p.Transaction($,A,j,p._options.chromeTransactionDurability,P)},this._fireOnBlocked=function($){p.on("blocked").fire($),xi.filter(function(A){return A.name===p.name&&A!==p&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire($)})},this.use(II),this.use(RI),this.use($I),this.use(xI),this.use(wI);var I=new Proxy(this,{get:function($,A,j){if(A==="_vip")return!0;if(A==="table")return function(B){return os(p.table(B),I)};var P=Reflect.get($,A,j);return P instanceof Xg?os(P,I):A==="tables"?P.map(function(B){return os(B,I)}):A==="_createTransaction"?function(){var B=P.apply(this,arguments);return os(B,I)}:P}});this.vip=I,y.forEach(function($){return $(p)})}return u.prototype.version=function(c){if(isNaN(c)||c<.1)throw new le.Type("Given version is not a positive number");if(c=Math.round(c*10)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,c);var f=this._versions,p=f.filter(function(g){return g._cfg.version===c})[0];return p||(p=new this.Version(c),f.push(p),f.sort(nI),p.stores({}),this._state.autoSchema=!1,p)},u.prototype._whenReady=function(c){var f=this;return this.idbdb&&(this._state.openComplete||ce.letThrough||this._vip)?c():new de(function(p,g){if(f._state.openComplete)return g(new le.DatabaseClosed(f._state.dbOpenError));if(!f._state.isBeingOpened){if(!f._state.autoOpen){g(new le.DatabaseClosed);return}f.open().catch(Ke)}f._state.dbReadyPromise.then(p,g)}).then(c)},u.prototype.use=function(c){var f=c.stack,p=c.create,g=c.level,y=c.name;y&&this.unuse({stack:f,name:y});var w=this._middlewares[f]||(this._middlewares[f]=[]);return w.push({stack:f,create:p,level:g??10,name:y}),w.sort(function(I,$){return I.level-$.level}),this},u.prototype.unuse=function(c){var f=c.stack,p=c.name,g=c.create;return f&&this._middlewares[f]&&(this._middlewares[f]=this._middlewares[f].filter(function(y){return g?y.create!==g:p?y.name!==p:!1})),this},u.prototype.open=function(){var c=this;return Nn(fe,function(){return vI(c)})},u.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var c=this._state,f=xi.indexOf(this);if(f>=0&&xi.splice(f,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}c.isBeingOpened||(c.dbReadyPromise=new de(function(p){c.dbReadyResolve=p}),c.openCanceller=new de(function(p,g){c.cancelOpen=g}))},u.prototype.close=function(c){var f=c===void 0?{disableAutoOpen:!0}:c,p=f.disableAutoOpen,g=this._state;p?(g.isBeingOpened&&g.cancelOpen(new le.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new le.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},u.prototype.delete=function(c){var f=this;c===void 0&&(c={disableAutoOpen:!0});var p=arguments.length>0&&typeof arguments[0]!="object",g=this._state;return new de(function(y,w){var I=function(){f.close(c);var $=f._deps.indexedDB.deleteDatabase(f.name);$.onsuccess=ot(function(){hI(f._deps,f.name),y()}),$.onerror=Er(w),$.onblocked=f._fireOnBlocked};if(p)throw new le.InvalidArgument("Invalid closeOptions argument to db.delete()");g.isBeingOpened?g.dbReadyPromise.then(I):I()})},u.prototype.backendDB=function(){return this.idbdb},u.prototype.isOpen=function(){return this.idbdb!==null},u.prototype.hasBeenClosed=function(){var c=this._state.dbOpenError;return c&&c.name==="DatabaseClosed"},u.prototype.hasFailed=function(){return this._state.dbOpenError!==null},u.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(u.prototype,"tables",{get:function(){var c=this;return o(this._allTables).map(function(f){return c._allTables[f]})},enumerable:!1,configurable:!0}),u.prototype.transaction=function(){var c=yI.apply(this,arguments);return this._transaction.apply(this,c)},u.prototype._transaction=function(c,f,p){var g=this,y=ce.trans;(!y||y.db!==this||c.indexOf("!")!==-1)&&(y=null);var w=c.indexOf("?")!==-1;c=c.replace("!","").replace("?","");var I,$;try{if($=f.map(function(j){var P=j instanceof g.Table?j.name:j;if(typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),c=="r"||c===Qc)I=Qc;else if(c=="rw"||c==el)I=el;else throw new le.InvalidArgument("Invalid transaction mode: "+c);if(y){if(y.mode===Qc&&I===el)if(w)y=null;else throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");y&&$.forEach(function(j){if(y&&y.storeNames.indexOf(j)===-1)if(w)y=null;else throw new le.SubTransaction("Table "+j+" not included in parent transaction.")}),w&&y&&!y.active&&(y=null)}}catch(j){return y?y._promise(null,function(P,B){B(j)}):dt(j)}var A=fv.bind(null,this,I,$,y,p);return y?y._promise(I,A,"lock"):ce.trans?Nn(ce.transless,function(){return g._whenReady(A)}):this._whenReady(A)},u.prototype.table=function(c){if(!m(this._allTables,c))throw new le.InvalidTable("Table ".concat(c," does not exist"));return this._allTables[c]},u}(),CI=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jI=function(){function u(c){this._subscribe=c}return u.prototype.subscribe=function(c,f,p){return this._subscribe(!c||typeof c=="function"?{next:c,error:f,complete:p}:c)},u.prototype[CI]=function(){return this},u}(),as;try{as={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch{as={indexedDB:null,IDBKeyRange:null}}function bv(u){var c=!1,f,p=new jI(function(g){var y=nn(u);function w(V){var Y=vi();try{y&&bi();var X=an(u,V);return y&&(X=X.finally(sn)),X}finally{Y&&yi()}}var I=!1,$,A={},j={},P={get closed(){return I},unsubscribe:function(){I||(I=!0,$&&$.abort(),B&&ln.storagemutated.unsubscribe(M))}};g.start&&g.start(P);var B=!1,ae=function(){return Jc(q)};function R(){return hl(j,A)}var M=function(V){rs(A,V),R()&&ae()},q=function(){if(!(I||!as.indexedDB)){A={};var V={};$&&$.abort(),$=new AbortController;var Y={subscr:V,signal:$.signal,requery:ae,querier:u,trans:null},X=w(Y);Promise.resolve(X).then(function(ee){c=!0,f=ee,!(I||Y.signal.aborted)&&(A={},j=V,!Pe(j)&&!B&&(ln(_o,M),B=!0),Jc(function(){return!I&&g.next&&g.next(ee)}))},function(ee){c=!1,["DatabaseClosedError","AbortError"].includes(ee?.name)||I||Jc(function(){I||g.error&&g.error(ee)})})}};return setTimeout(ae,0),P});return p.hasValue=function(){return c},p.getValue=function(){return f},p}var qn=Zr;v(qn,n(n({},on),{delete:function(u){var c=new qn(u,{addons:[]});return c.delete()},exists:function(u){return new qn(u,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return pI(qn.dependencies).then(u)}catch{return dt(new le.MissingAPI)}},defineClass:function(){function u(c){s(this,c)}return u},ignoreTransaction:function(u){return ce.trans?Nn(ce.transless,u):u()},vip:fl,async:function(u){return function(){try{var c=bl(u.apply(this,arguments));return!c||typeof c.then!="function"?de.resolve(c):c}catch(f){return dt(f)}}},spawn:function(u,c,f){try{var p=bl(u.apply(f,c||[]));return!p||typeof p.then!="function"?de.resolve(p):p}catch(g){return dt(g)}},currentTransaction:{get:function(){return ce.trans||null}},waitFor:function(u,c){var f=de.resolve(typeof u=="function"?qn.ignoreTransaction(u):u).timeout(c||6e4);return ce.trans?ce.trans.waitFor(f):f},Promise:de,debug:{get:function(){return mt},set:function(u){Rn(u)}},derive:_,extend:s,props:v,override:H,Events:bo,on:ln,liveQuery:bv,extendObservabilitySet:rs,getByKeyPath:O,setByKeyPath:W,delByKeyPath:se,shallowClone:pe,deepClone:Ge,getObjectDiff:xl,cmp:qe,asap:K,minKey:Xc,addons:[],connections:xi,errnames:Xe,dependencies:as,cache:Ln,semVer:Kg,version:Kg.split(".").map(function(u){return parseInt(u)}).reduce(function(u,c,f){return u+c/Math.pow(10,f*2)})})),qn.maxKey=Io(qn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ln(_o,function(u){if(!dn){var c;c=new CustomEvent(nl,{detail:u}),dn=!0,dispatchEvent(c),dn=!1}}),addEventListener(nl,function(u){var c=u.detail;dn||Il(c)}));function Il(u){var c=dn;try{dn=!0,ln.storagemutated.fire(u),yl(u,!0)}finally{dn=c}}var dn=!1,fn,$l=function(){};typeof BroadcastChannel<"u"&&($l=function(){fn=new BroadcastChannel(nl),fn.onmessage=function(u){return u.data&&Il(u.data)}},$l(),typeof fn.unref=="function"&&fn.unref(),ln(_o,function(u){dn||fn.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!Zr.disableBfCache&&u.persisted){mt&&console.debug("Dexie: handling persisted pagehide"),fn?.close();for(var c=0,f=xi;c<f.length;c++){var p=f[c];p.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(u){!Zr.disableBfCache&&u.persisted&&(mt&&console.debug("Dexie: handling persisted pageshow"),$l(),Il({all:new $t(-1/0,[[]])}))}));function MI(u){return new yo({add:u})}function NI(u){return new yo({remove:u})}function UI(u,c){return new yo({replacePrefix:[u,c]})}de.rejectionMapper=kr,Rn(mt);var FI=Object.freeze({__proto__:null,Dexie:Zr,Entity:Hg,PropModification:yo,RangeSet:$t,add:MI,cmp:qe,default:Zr,liveQuery:bv,mergeRanges:ko,rangesOverlap:uv,remove:NI,replacePrefix:UI});return n(Zr,FI,{default:Zr}),Zr})});var Pw=Eo(De=>{"use strict";var Sg=Symbol.for("react.transitional.element"),m2=Symbol.for("react.portal"),h2=Symbol.for("react.fragment"),g2=Symbol.for("react.strict_mode"),v2=Symbol.for("react.profiler"),y2=Symbol.for("react.consumer"),b2=Symbol.for("react.context"),x2=Symbol.for("react.forward_ref"),w2=Symbol.for("react.suspense"),_2=Symbol.for("react.memo"),$w=Symbol.for("react.lazy"),I2=Symbol.for("react.activity"),xw=Symbol.iterator;function $2(e){return e===null||typeof e!="object"?null:(e=xw&&e[xw]||e["@@iterator"],typeof e=="function"?e:null)}var Sw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kw=Object.assign,Aw={};function so(e,t,n){this.props=e,this.context=t,this.refs=Aw,this.updater=n||Sw}so.prototype.isReactComponent={};so.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};so.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ew(){}Ew.prototype=so.prototype;function kg(e,t,n){this.props=e,this.context=t,this.refs=Aw,this.updater=n||Sw}var Ag=kg.prototype=new Ew;Ag.constructor=kg;kw(Ag,so.prototype);Ag.isPureReactComponent=!0;var ww=Array.isArray;function $g(){}var it={H:null,A:null,T:null,S:null},Tw=Object.prototype.hasOwnProperty;function Eg(e,t,n){var i=n.ref;return{$$typeof:Sg,type:e,key:t,ref:i!==void 0?i:null,props:n}}function S2(e,t){return Eg(e.type,t,e.props)}function Tg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sg}function k2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _w=/\/+/g;function Ig(e,t){return typeof e=="object"&&e!==null&&e.key!=null?k2(""+e.key):t.toString(36)}function A2(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then($g,$g):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ao(e,t,n,i,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"bigint":case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Sg:case m2:a=!0;break;case $w:return a=e._init,ao(a(e._payload),t,n,i,r)}}if(a)return r=r(e),a=i===""?"."+Ig(e,0):i,ww(r)?(n="",a!=null&&(n=a.replace(_w,"$&/")+"/"),ao(r,t,n,"",function(d){return d})):r!=null&&(Tg(r)&&(r=S2(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(_w,"$&/")+"/")+a)),t.push(r)),1;a=0;var s=i===""?".":i+":";if(ww(e))for(var l=0;l<e.length;l++)i=e[l],o=s+Ig(i,l),a+=ao(i,t,n,o,r);else if(l=$2(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,o=s+Ig(i,l++),a+=ao(i,t,n,o,r);else if(o==="object"){if(typeof e.then=="function")return ao(A2(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return a}function zc(e,t,n){if(e==null)return e;var i=[],r=0;return ao(e,i,"","",function(o){return t.call(n,o,r++)}),i}function E2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Iw=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},T2={map:zc,forEach:function(e,t,n){zc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return zc(e,function(){t++}),t},toArray:function(e){return zc(e,function(t){return t})||[]},only:function(e){if(!Tg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Activity=I2;De.Children=T2;De.Component=so;De.Fragment=h2;De.Profiler=v2;De.PureComponent=kg;De.StrictMode=g2;De.Suspense=w2;De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=it;De.__COMPILER_RUNTIME={__proto__:null,c:function(e){return it.H.useMemoCache(e)}};De.cache=function(e){return function(){return e.apply(null,arguments)}};De.cacheSignal=function(){return null};De.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=kw({},e.props),r=e.key;if(t!=null)for(o in t.key!==void 0&&(r=""+t.key),t)!Tw.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];i.children=a}return Eg(e.type,r,i)};De.createContext=function(e){return e={$$typeof:b2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:y2,_context:e},e};De.createElement=function(e,t,n){var i,r={},o=null;if(t!=null)for(i in t.key!==void 0&&(o=""+t.key),t)Tw.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];r.children=s}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Eg(e,o,r)};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:x2,render:e}};De.isValidElement=Tg;De.lazy=function(e){return{$$typeof:$w,_payload:{_status:-1,_result:e},_init:E2}};De.memo=function(e,t){return{$$typeof:_2,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=it.T,n={};it.T=n;try{var i=e(),r=it.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then($g,Iw)}catch(o){Iw(o)}finally{t!==null&&n.types!==null&&(t.types=n.types),it.T=t}};De.unstable_useCacheRefresh=function(){return it.H.useCacheRefresh()};De.use=function(e){return it.H.use(e)};De.useActionState=function(e,t,n){return it.H.useActionState(e,t,n)};De.useCallback=function(e,t){return it.H.useCallback(e,t)};De.useContext=function(e){return it.H.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e,t){return it.H.useDeferredValue(e,t)};De.useEffect=function(e,t){return it.H.useEffect(e,t)};De.useEffectEvent=function(e){return it.H.useEffectEvent(e)};De.useId=function(){return it.H.useId()};De.useImperativeHandle=function(e,t,n){return it.H.useImperativeHandle(e,t,n)};De.useInsertionEffect=function(e,t){return it.H.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return it.H.useLayoutEffect(e,t)};De.useMemo=function(e,t){return it.H.useMemo(e,t)};De.useOptimistic=function(e,t){return it.H.useOptimistic(e,t)};De.useReducer=function(e,t,n){return it.H.useReducer(e,t,n)};De.useRef=function(e){return it.H.useRef(e)};De.useState=function(e){return it.H.useState(e)};De.useSyncExternalStore=function(e,t,n){return it.H.useSyncExternalStore(e,t,n)};De.useTransition=function(){return it.H.useTransition()};De.version="19.2.4"});var zw=Eo((pC,Dw)=>{"use strict";Dw.exports=Pw()});var Rw=Eo(Oc=>{"use strict";var P2=Symbol.for("react.transitional.element"),D2=Symbol.for("react.fragment");function Ow(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:P2,type:e,key:i,ref:t!==void 0?t:null,props:n}}Oc.Fragment=D2;Oc.jsx=Ow;Oc.jsxs=Ow});var jw=Eo((hC,Cw)=>{"use strict";Cw.exports=Rw()});var WI=(()=>{for(var e=new Uint8Array(128),t=0;t<64;t++)e[t<26?t+65:t<52?t+71:t<62?t-4:t*4-205]=t;return n=>{for(var i=n.length,r=new Uint8Array((i-(n[i-1]=="=")-(n[i-2]=="="))*3/4|0),o=0,a=0;o<i;){var s=e[n.charCodeAt(o++)],l=e[n.charCodeAt(o++)],d=e[n.charCodeAt(o++)],m=e[n.charCodeAt(o++)];r[a++]=s<<2|l>>4,r[a++]=l<<4|d>>2,r[a++]=d<<6|m}return r}})(),JI={name:"kaplay",description:"KAPLAY is a JavaScript & TypeScript game library that helps you make games fast and fun! (formerly known as Kaboom.js)",version:"3001.0.19",license:"MIT",homepage:"https://kaplayjs.com/",bugs:{url:"https://github.com/kaplayjs/kaplay/issues"},funding:{type:"opencollective",url:"https://opencollective.com/kaplay"},repository:{type:"git",url:"git+https://github.com/kaplayjs/kaplay.git"},type:"module",main:"./dist/kaplay.cjs",module:"./dist/kaplay.mjs",types:"./dist/doc.d.ts",readme:"./README.md",exports:{".":{import:{types:"./dist/doc.d.ts",default:"./dist/kaplay.mjs"},require:{types:"./dist/doc.d.ts",default:"./dist/kaplay.cjs"}},"./global":"./dist/declaration/global.js"},typesVersions:{"*":{global:["./dist/declaration/global.d.ts"]}},keywords:["game development","javascript","typescript","game engine","2d games","physics engine","webgl","canvas","game library","kaplay","kaboom","kaboomjs","kaboom.js"],files:["dist/","kaplay.webp","CHANGELOG.md"],scripts:{dev:"NODE_ENV=development node scripts/dev.js","win:dev":"set NODE_ENV=development && node scripts/dev.js",build:"node scripts/generateIndex.js && npm run doc-dts && node scripts/build.js","build:fast":"node scripts/buildFast.js",check:"tsc",fmt:"dprint fmt",test:"node scripts/test.js","doc-dts":"dts-bundle-generator -o dist/doc.d.ts src/index.ts","test:vite":"vitest --typecheck",desktop:"tauri dev",prepare:"npm run build","publish:next":"npm publish --tag next"},devDependencies:{"@kaplayjs/dprint-config":"^1.2.0","@types/jest":"^29.5.14",dprint:"^0.49.1","dts-bundle-generator":"^9.5.1",ejs:"^3.1.10",esbuild:"^0.25.2",express:"^5.1.0",puppeteer:"^22.15.0","tar-fs":"3.0.8",typescript:"5.6.3",vite:"5.4.16",vitest:"^3.1.1","vitest-environment-puppeteer":"^11.0.3","vitest-puppeteer":"^11.0.3"},engines:{node:">=20.0.0"},packageManager:"pnpm@9.9.0+sha512.60c18acd138bff695d339be6ad13f7e936eea6745660d4cc4a776d5247c540d0edee1a563695c183a66eb917ef88f2b4feb1fc25f32a7adcadc7aaf3438e99c1"};function Or(e,t,n){return t>n?Or(e,n,t):Math.min(Math.max(e,t),n)}var Ve,Le=(Ve=class{constructor(t,n,i){D(this,"r",255);D(this,"g",255);D(this,"b",255);this.r=Or(t,0,255),this.g=Or(n,0,255),this.b=Or(i,0,255)}static fromArray(t){return new Ve(t[0],t[1],t[2])}static fromHex(t){if(typeof t=="number")return new Ve(t>>16&255,t>>8&255,t>>0&255);if(typeof t=="string"){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!n)throw new Error("Invalid hex color format");return new Ve(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16))}else throw new Error("Invalid hex color format")}static fromHSL(t,n,i){if(n==0)return new Ve(255*i,255*i,255*i);let r=(m,v,h)=>(h<0&&(h+=1),h>1&&(h-=1),h<1/6?m+(v-m)*6*h:h<1/2?v:h<2/3?m+(v-m)*(2/3-h)*6:m),o=i<.5?i*(1+n):i+n-i*n,a=2*i-o,s=r(a,o,t+1/3),l=r(a,o,t),d=r(a,o,t-1/3);return new Ve(Math.round(s*255),Math.round(l*255),Math.round(d*255))}clone(){return new Ve(this.r,this.g,this.b)}lighten(t){return new Ve(this.r+t,this.g+t,this.b+t)}darken(t){return this.lighten(-t)}invert(){return new Ve(255-this.r,255-this.g,255-this.b)}mult(t){return new Ve(this.r*t.r/255,this.g*t.g/255,this.b*t.b/255)}lerp(t,n){return new Ve(Gt(this.r,t.r,n),Gt(this.g,t.g,n),Gt(this.b,t.b,n))}toHSL(){let t=this.r/255,n=this.g/255,i=this.b/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=(r+o)/2,s=a,l=a;if(r==o)a=s=0;else{let d=r-o;switch(s=l>.5?d/(2-r-o):d/(r+o),r){case t:a=(n-i)/d+(n<i?6:0);break;case n:a=(i-t)/d+2;break;case i:a=(t-n)/d+4;break}a/=6}return[a,s,l]}eq(t){return this.r===t.r&&this.g===t.g&&this.b===t.b}toString(){return`rgb(${this.r}, ${this.g}, ${this.b})`}toHex(){return"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1)}toArray(){return[this.r,this.g,this.b]}},D(Ve,"RED",new Ve(255,0,0)),D(Ve,"GREEN",new Ve(0,255,0)),D(Ve,"BLUE",new Ve(0,0,255)),D(Ve,"YELLOW",new Ve(255,255,0)),D(Ve,"MAGENTA",new Ve(255,0,255)),D(Ve,"CYAN",new Ve(0,255,255)),D(Ve,"WHITE",new Ve(255,255,255)),D(Ve,"BLACK",new Ve(0,0,0)),Ve);function Ye(...e){if(e.length===0)return new Le(255,255,255);if(e.length===1){if(e[0]instanceof Le)return e[0].clone();if(typeof e[0]=="string")return Le.fromHex(e[0]);if(Array.isArray(e[0])&&e[0].length===3)return Le.fromArray(e[0])}else if(e.length===2){if(e[0]instanceof Le)return e[0].clone()}else if(e.length===3||e.length===4)return new Le(e[0],e[1],e[2]);throw new Error("Invalid color arguments")}var YI=(e,t,n)=>Le.fromHSL(e,t,n);function yt(e){return e*Math.PI/180}function Vn(e){return e*180/Math.PI}function Gt(e,t,n){if(typeof e=="number"&&typeof t=="number")return e+(t-e)*n;if(e instanceof G&&t instanceof G||e instanceof Le&&t instanceof Le)return e.lerp(t,n);throw new Error(`Bad value for lerp(): ${e}, ${t}. Only number, Vec2 and Color is supported.`)}function zr(e,t,n,i,r){return i+(e-t)/(n-t)*(r-i)}function XI(e,t,n,i,r){return Or(zr(e,t,n,i,r),i,r)}var rt,G=(rt=class{constructor(t=0,n=t){D(this,"x",0);D(this,"y",0);this.x=t,this.y=n}static fromAngle(t){let n=yt(t);return new rt(Math.cos(n),Math.sin(n))}static fromArray(t){return new rt(t[0],t[1])}clone(){return new rt(this.x,this.y)}add(...t){let n=U(...t);return new rt(this.x+n.x,this.y+n.y)}sub(...t){let n=U(...t);return new rt(this.x-n.x,this.y-n.y)}scale(...t){let n=U(...t);return new rt(this.x*n.x,this.y*n.y)}dist(...t){let n=U(...t);return this.sub(n).len()}sdist(...t){let n=U(...t);return this.sub(n).slen()}static sdist(t,n){let i=t.x-n.x,r=t.y-n.y;return i*i+r*r}len(){return Math.sqrt(this.dot(this))}slen(){return this.dot(this)}unit(){let t=this.len();return t===0?new rt(0):this.scale(1/t)}normal(){return new rt(this.y,-this.x)}reflect(t){return this.sub(t.scale(2*this.dot(t)))}project(t){return t.scale(t.dot(this)/t.len())}reject(t){return this.sub(this.project(t))}dot(t){return this.x*t.x+this.y*t.y}static dot(t,n){return t.x*n.x+t.y*n.y}cross(t){return this.x*t.y-this.y*t.x}static cross(t,n){return t.x*n.y-t.y*n.x}angle(...t){let n=U(...t);return Vn(Math.atan2(this.y-n.y,this.x-n.x))}angleBetween(...t){let n=U(...t);return Vn(Math.atan2(this.cross(n),this.dot(n)))}lerp(t,n){return new rt(Gt(this.x,t.x,n),Gt(this.y,t.y,n))}slerp(t,n){let i=this.dot(t),r=this.cross(t),o=Math.atan2(r,i);return this.scale(Math.sin((1-n)*o)).add(t.scale(Math.sin(n*o))).scale(1/r)}isZero(){return this.x===0&&this.y===0}toFixed(t){return new rt(Number(this.x.toFixed(t)),Number(this.y.toFixed(t)))}transform(t){return t.multVec2(this)}eq(t){return this.x===t.x&&this.y===t.y}bbox(){return new at(this,0,0)}toString(){return`vec2(${this.x.toFixed(2)}, ${this.y.toFixed(2)})`}toArray(){return[this.x,this.y]}},D(rt,"ZERO",new rt(0,0)),D(rt,"ONE",new rt(1,1)),D(rt,"LEFT",new rt(-1,0)),D(rt,"RIGHT",new rt(1,0)),D(rt,"UP",new rt(0,-1)),D(rt,"DOWN",new rt(0,1)),rt);function U(...e){if(e.length===1){if(e[0]instanceof G)return new G(e[0].x,e[0].y);if(Array.isArray(e[0])&&e[0].length===2)return new G(...e[0])}return new G(...e)}var ct=class Tl{constructor(t,n,i,r){D(this,"x",0);D(this,"y",0);D(this,"w",1);D(this,"h",1);this.x=t,this.y=n,this.w=i,this.h=r}scale(t){return new Tl(this.x+this.w*t.x,this.y+this.h*t.y,this.w*t.w,this.h*t.h)}pos(){return new G(this.x,this.y)}clone(){return new Tl(this.x,this.y,this.w,this.h)}eq(t){return this.x===t.x&&this.y===t.y&&this.w===t.w&&this.h===t.h}toString(){return`quad(${this.x}, ${this.y}, ${this.w}, ${this.h})`}};function vt(e,t,n,i){return new ct(e,t,n,i)}var hs=class $i{constructor(t,n,i,r){D(this,"a");D(this,"b");D(this,"c");D(this,"d");this.a=t,this.b=n,this.c=i,this.d=r}mul(t){return new $i(this.a*t.a+this.b*t.c,this.a*t.b+this.b*t.d,this.c*t.a+this.d*t.c,this.c*t.b+this.d*t.d)}transform(t){return U(this.a*t.x+this.b*t.y,this.c*t.x+this.d*t.y)}get inverse(){let t=this.det;return new $i(this.d/t,-this.b/t,-this.c/t,this.a/t)}get transpose(){return new $i(this.a,this.c,this.b,this.d)}get eigenvalues(){let t=this.trace/2,n=this.det,i=t+Math.sqrt(t*t-n),r=t-Math.sqrt(t*t-n);return[i,r]}eigenvectors(t,n){return this.c!=0?[[t-this.d,this.c],[n-this.d,this.c]]:this.b!=0?[[this.b,t-this.a],[this.b,n-this.a]]:Math.abs(this.transform(U(1,0)).x-t)<Number.EPSILON?[[1,0],[0,1]]:[[0,1],[1,0]]}get det(){return this.a*this.d-this.b*this.c}get trace(){return this.a+this.d}static rotation(t){let n=Math.cos(t),i=Math.sin(t);return new $i(n,i,-i,n)}static scale(t,n){return new $i(t,0,0,n)}},Do=class zo{constructor(t,n,i,r,o,a,s,l,d){D(this,"m11");D(this,"m12");D(this,"m13");D(this,"m21");D(this,"m22");D(this,"m23");D(this,"m31");D(this,"m32");D(this,"m33");this.m11=t,this.m12=n,this.m13=i,this.m21=r,this.m22=o,this.m23=a,this.m31=s,this.m32=l,this.m33=d}static fromMat2(t){return new zo(t.a,t.b,0,t.c,t.d,0,0,0,1)}toMat2(){return new hs(this.m11,this.m12,this.m21,this.m22)}mul(t){return new zo(this.m11*t.m11+this.m12*t.m21+this.m13*t.m31,this.m11*t.m12+this.m12*t.m22+this.m13*t.m32,this.m11*t.m13+this.m12*t.m23+this.m13*t.m33,this.m21*t.m11+this.m22*t.m21+this.m23*t.m31,this.m21*t.m12+this.m22*t.m22+this.m23*t.m32,this.m21*t.m13+this.m22*t.m23+this.m23*t.m33,this.m31*t.m11+this.m32*t.m21+this.m33*t.m31,this.m31*t.m12+this.m32*t.m22+this.m33*t.m32,this.m31*t.m13+this.m32*t.m23+this.m33*t.m33)}get det(){return this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-this.m13*this.m22*this.m31-this.m12*this.m21*this.m33-this.m11*this.m23*this.m32}rotate(t){let n=Math.cos(t),i=Math.sin(t),r=this.m11,o=this.m12;return this.m11=n*this.m11+i*this.m21,this.m12=n*this.m12+i*this.m22,this.m21=n*this.m21-i*r,this.m22=n*this.m22-i*o,this}scale(t,n){return this.m11*=t,this.m12*=t,this.m21*=n,this.m22*=n,this}get inverse(){let t=this.det;return new zo((this.m22*this.m33-this.m23*this.m32)/t,(this.m13*this.m32-this.m12*this.m33)/t,(this.m12*this.m23-this.m13*this.m22)/t,(this.m23*this.m31-this.m21*this.m33)/t,(this.m11*this.m33-this.m13*this.m31)/t,(this.m13*this.m21-this.m11*this.m23)/t,(this.m21*this.m32-this.m22*this.m31)/t,(this.m12*this.m31-this.m11*this.m32)/t,(this.m11*this.m22-this.m12*this.m21)/t)}get transpose(){return new zo(this.m11,this.m21,this.m31,this.m12,this.m22,this.m32,this.m13,this.m23,this.m33)}},Rr=class Gr{constructor(t){D(this,"m",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);t&&(this.m=t)}static translate(t){return new Gr([1,0,0,0,0,1,0,0,0,0,1,0,t.x,t.y,0,1])}static scale(t){return new Gr([t.x,0,0,0,0,t.y,0,0,0,0,1,0,0,0,0,1])}static rotateX(t){t=yt(-t);let n=Math.cos(t),i=Math.sin(t);return new Gr([1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1])}static rotateY(t){t=yt(-t);let n=Math.cos(t),i=Math.sin(t);return new Gr([n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1])}static rotateZ(t){t=yt(-t);let n=Math.cos(t),i=Math.sin(t);return new Gr([n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1])}translate(t){return this.m[12]+=this.m[0]*t.x+this.m[4]*t.y,this.m[13]+=this.m[1]*t.x+this.m[5]*t.y,this.m[14]+=this.m[2]*t.x+this.m[6]*t.y,this.m[15]+=this.m[3]*t.x+this.m[7]*t.y,this}scale(t){return this.m[0]*=t.x,this.m[4]*=t.y,this.m[1]*=t.x,this.m[5]*=t.y,this.m[2]*=t.x,this.m[6]*=t.y,this.m[3]*=t.x,this.m[7]*=t.y,this}rotate(t){t=yt(-t);let n=Math.cos(t),i=Math.sin(t),r=this.m[0],o=this.m[1],a=this.m[4],s=this.m[5];return this.m[0]=r*n+o*i,this.m[1]=-r*i+o*n,this.m[4]=a*n+s*i,this.m[5]=-a*i+s*n,this}mult(t){let n=[];for(let i=0;i<4;i++)for(let r=0;r<4;r++)n[i*4+r]=this.m[0*4+r]*t.m[i*4+0]+this.m[1*4+r]*t.m[i*4+1]+this.m[2*4+r]*t.m[i*4+2]+this.m[3*4+r]*t.m[i*4+3];return new Gr(n)}multVec2(t){return new G(t.x*this.m[0]+t.y*this.m[4]+this.m[12],t.x*this.m[1]+t.y*this.m[5]+this.m[13])}getTranslation(){return new G(this.m[12],this.m[13])}getScale(){if(this.m[0]!=0||this.m[1]!=0){let t=this.m[0]*this.m[5]-this.m[1]*this.m[4],n=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new G(n,t/n)}else if(this.m[4]!=0||this.m[5]!=0){let t=this.m[0]*this.m[5]-this.m[1]*this.m[4],n=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return new G(t/n,n)}else return new G(0,0)}getRotation(){if(this.m[0]!=0||this.m[1]!=0){let t=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return Vn(this.m[1]>0?Math.acos(this.m[0]/t):-Math.acos(this.m[0]/t))}else if(this.m[4]!=0||this.m[5]!=0){let t=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return Vn(Math.PI/2-(this.m[5]>0?Math.acos(-this.m[4]/t):-Math.acos(this.m[4]/t)))}else return 0}getSkew(){if(this.m[0]!=0||this.m[1]!=0){let t=Math.sqrt(this.m[0]*this.m[0]+this.m[1]*this.m[1]);return new G(Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(t*t),0)}else if(this.m[4]!=0||this.m[5]!=0){let t=Math.sqrt(this.m[4]*this.m[4]+this.m[5]*this.m[5]);return new G(0,Math.atan(this.m[0]*this.m[4]+this.m[1]*this.m[5])/(t*t))}else return new G(0,0)}invert(){let t=[],n=this.m[10]*this.m[15]-this.m[14]*this.m[11],i=this.m[9]*this.m[15]-this.m[13]*this.m[11],r=this.m[9]*this.m[14]-this.m[13]*this.m[10],o=this.m[8]*this.m[15]-this.m[12]*this.m[11],a=this.m[8]*this.m[14]-this.m[12]*this.m[10],s=this.m[8]*this.m[13]-this.m[12]*this.m[9],l=this.m[6]*this.m[15]-this.m[14]*this.m[7],d=this.m[5]*this.m[15]-this.m[13]*this.m[7],m=this.m[5]*this.m[14]-this.m[13]*this.m[6],v=this.m[4]*this.m[15]-this.m[12]*this.m[7],h=this.m[4]*this.m[14]-this.m[12]*this.m[6],b=this.m[5]*this.m[15]-this.m[13]*this.m[7],_=this.m[4]*this.m[13]-this.m[12]*this.m[5],E=this.m[6]*this.m[11]-this.m[10]*this.m[7],S=this.m[5]*this.m[11]-this.m[9]*this.m[7],T=this.m[5]*this.m[10]-this.m[9]*this.m[6],Z=this.m[4]*this.m[11]-this.m[8]*this.m[7],H=this.m[4]*this.m[10]-this.m[8]*this.m[6],re=this.m[4]*this.m[9]-this.m[8]*this.m[5];t[0]=this.m[5]*n-this.m[6]*i+this.m[7]*r,t[4]=-(this.m[4]*n-this.m[6]*o+this.m[7]*a),t[8]=this.m[4]*i-this.m[5]*o+this.m[7]*s,t[12]=-(this.m[4]*r-this.m[5]*a+this.m[6]*s),t[1]=-(this.m[1]*n-this.m[2]*i+this.m[3]*r),t[5]=this.m[0]*n-this.m[2]*o+this.m[3]*a,t[9]=-(this.m[0]*i-this.m[1]*o+this.m[3]*s),t[13]=this.m[0]*r-this.m[1]*a+this.m[2]*s,t[2]=this.m[1]*l-this.m[2]*d+this.m[3]*m,t[6]=-(this.m[0]*l-this.m[2]*v+this.m[3]*h),t[10]=this.m[0]*b-this.m[1]*v+this.m[3]*_,t[14]=-(this.m[0]*m-this.m[1]*h+this.m[2]*_),t[3]=-(this.m[1]*E-this.m[2]*S+this.m[3]*T),t[7]=this.m[0]*E-this.m[2]*Z+this.m[3]*H,t[11]=-(this.m[0]*S-this.m[1]*Z+this.m[3]*re),t[15]=this.m[0]*T-this.m[1]*H+this.m[2]*re;let K=this.m[0]*t[0]+this.m[1]*t[4]+this.m[2]*t[8]+this.m[3]*t[12];for(let z=0;z<4;z++)for(let O=0;O<4;O++)t[z*4+O]*=1/K;return new Gr(t)}clone(){return new Gr([...this.m])}toString(){return this.m.toString()}};function Cv(e,t,n,i=r=>-Math.cos(r)){return e+(i(n)+1)/2*(t-e)}var QI=1103515245,e$=12345,xv=2147483648,jv=class{constructor(e){D(this,"seed");this.seed=e}gen(){return this.seed=(QI*this.seed+e$)%xv,this.seed/xv}genNumber(e,t){return e+this.gen()*(t-e)}genVec2(e,t){return new G(this.genNumber(e.x,t.x),this.genNumber(e.y,t.y))}genColor(e,t){return new Le(this.genNumber(e.r,t.r),this.genNumber(e.g,t.g),this.genNumber(e.b,t.b))}genAny(...e){if(e.length===0)return this.gen();if(e.length===1){if(typeof e[0]=="number")return this.genNumber(0,e[0]);if(e[0]instanceof G)return this.genVec2(U(0,0),e[0]);if(e[0]instanceof Le)return this.genColor(Ye(0,0,0),e[0])}else if(e.length===2){if(typeof e[0]=="number"&&typeof e[1]=="number")return this.genNumber(e[0],e[1]);if(e[0]instanceof G&&e[1]instanceof G)return this.genVec2(e[0],e[1]);if(e[0]instanceof Le&&e[1]instanceof Le)return this.genColor(e[0],e[1])}throw new Error("More than 2 arguments not supported")}},Pl=new jv(Date.now());function t$(e){return e!=null&&(Pl.seed=e),Pl.seed}function wt(...e){return Pl.genAny(...e)}function Mv(...e){return Math.floor(wt(...e.length>0?e:[2]))}function r$(e){return wt()<=e}function Nv(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function n$(e,t){return e.length<=t?e.slice():Nv(e.slice()).slice(0,t)}function i$(e){return e[Mv(e.length)]}function Uv(e,t){return e.pos.x+e.width>t.pos.x&&e.pos.x<t.pos.x+t.width&&e.pos.y+e.height>t.pos.y&&e.pos.y<t.pos.y+t.height}function o$(e,t){if(e.p1.x===e.p2.x&&e.p1.y===e.p2.y||t.p1.x===t.p2.x&&t.p1.y===t.p2.y)return null;let n=(t.p2.y-t.p1.y)*(e.p2.x-e.p1.x)-(t.p2.x-t.p1.x)*(e.p2.y-e.p1.y);if(n===0)return null;let i=((t.p2.x-t.p1.x)*(e.p1.y-t.p1.y)-(t.p2.y-t.p1.y)*(e.p1.x-t.p1.x))/n,r=((e.p2.x-e.p1.x)*(e.p1.y-t.p1.y)-(e.p2.y-e.p1.y)*(e.p1.x-t.p1.x))/n;return i<0||i>1||r<0||r>1?null:i}function Hl(e,t){let n=o$(e,t);return n?U(e.p1.x+n*(e.p2.x-e.p1.x),e.p1.y+n*(e.p2.y-e.p1.y)):null}function Wl(e,t){let n=t.p2.sub(t.p1),i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;if(n.x!=0){let o=(e.pos.x-t.p1.x)/n.x,a=(e.pos.x+e.width-t.p1.x)/n.x;i=Math.max(i,Math.min(o,a)),r=Math.min(r,Math.max(o,a))}if(n.y!=0){let o=(e.pos.y-t.p1.y)/n.y,a=(e.pos.y+e.height-t.p1.y)/n.y;i=Math.max(i,Math.min(o,a)),r=Math.min(r,Math.max(o,a))}return r>=i&&r>=0&&i<=1}function $s(e,t){return t.x>e.pos.x&&t.x<e.pos.x+e.width&&t.y>e.pos.y&&t.y<e.pos.y+e.height}function Fv(e,t){let n=Math.max(e.pos.x,Math.min(t.center.x,e.pos.x+e.width)),i=Math.max(e.pos.y,Math.min(t.center.y,e.pos.y+e.height));return U(n,i).sdist(t.center)<=t.radius*t.radius}function Lv(e,t){return qv(t,new Lt(e.points()))}function Jl(e,t){let n=t.sub(e.p1),i=e.p2.sub(e.p1);if(Math.abs(n.cross(i))>Number.EPSILON)return!1;let r=n.dot(i)/i.dot(i);return r>=0&&r<=1}function Vo(e,t){let n=e.p2.sub(e.p1),i=n.dot(n),r=e.p1.sub(t.center),o=2*n.dot(r),a=r.dot(r)-t.radius*t.radius,s=o*o-4*i*a;if(i<=Number.EPSILON||s<0)return!1;if(s==0){let l=-o/(2*i);if(l>=0&&l<=1)return!0}else{let l=(-o+Math.sqrt(s))/(2*i),d=(-o-Math.sqrt(s))/(2*i);if(l>=0&&l<=1||d>=0&&d<=1)return!0}return Ss(t,e.p1)}function Yl(e,t){if(vn(t,e.p1)||vn(t,e.p2))return!0;for(let n=0;n<t.pts.length;n++){let i=t.pts[n],r=t.pts[(n+1)%t.pts.length];if(Hl(e,new Wt(i,r)))return!0}return!1}function Ss(e,t){return e.center.sdist(t)<e.radius*e.radius}function a$(e,t){return e.center.sdist(t.center)<(e.radius+t.radius)*(e.radius+t.radius)}function ks(e,t){let n=t.pts[t.pts.length-1];for(let i of t.pts){if(Vo(new Wt(n,i),e))return!0;n=i}return Ss(e,t.pts[0])?!0:vn(t,e.center)}function qv(e,t){for(let n=0;n<e.pts.length;n++)if(Yl(new Wt(e.pts[n],e.pts[(n+1)%e.pts.length]),t))return!0;return!!(e.pts.some(n=>vn(t,n))||t.pts.some(n=>vn(e,n)))}function vn(e,t){let n=!1,i=e.pts;for(let r=0,o=i.length-1;r<i.length;o=r++)i[r].y>t.y!=i[o].y>t.y&&t.x<(i[o].x-i[r].x)*(t.y-i[r].y)/(i[o].y-i[r].y)+i[r].x&&(n=!n);return n}function Xl(e,t){t=t.sub(e.center);let n=yt(e.angle),i=Math.cos(n),r=Math.sin(n),o=t.x*i+t.y*r,a=-t.x*r+t.y*i;return o*o/(e.radiusX*e.radiusX)+a*a/(e.radiusY*e.radiusY)<1}function gs(e,t){let n=t.center.sub(e.center),i=yt(e.angle),r=Math.cos(i),o=Math.sin(i),a=n.x*r+n.y*o,s=-n.x*o+n.y*r;return Xl(new Hr(U(),e.radiusX+t.radius,e.radiusY+t.radius,0),U(a,s))}function Bv(e,t){let n=e.toMat2().inverse;return t=new Wt(n.transform(t.p1.sub(e.center)),n.transform(t.p2.sub(e.center))),Vo(t,new Ht(U(),1))}function s$(e,t){if(e.radiusX===e.radiusY)return gs(t,new Ht(e.center,e.radiusX));if(t.radiusX===t.radiusY)return gs(e,new Ht(t.center,t.radiusX));let n=new Do(1/e.radiusX**2,0,0,0,1/e.radiusY**2,0,0,0,-1),i=new Do(1/t.radiusX**2,0,0,0,1/t.radiusY**2,0,0,0,-1),r=e.center.x,o=e.center.y,a=t.center.x,s=t.center.y,l=yt(e.angle),d=yt(t.angle),m=new Do(Math.cos(l),-Math.sin(l),r,Math.sin(l),Math.cos(l),o,0,0,1),v=new Do(Math.cos(d),-Math.sin(d),a,Math.sin(d),Math.cos(d),s,0,0,1),h=m.inverse,b=v.inverse,_=h.transpose.mul(n).mul(h),E=b.transpose.mul(i).mul(b),S=_.m11,T=_.m12,Z=_.m13,H=_.m21,re=_.m22,K=_.m23,z=_.m31,O=_.m32,W=_.m33,se=E.m11,pe=E.m12,be=E.m13,$e=E.m21,Me=E.m22,je=E.m23,Ue=E.m31,Pe=E.m32,_e=E.m33,Ge=S*re*W-S*K*O-T*H*W+T*K*z+Z*H*O-Z*re*z,Fe=(S*re*_e-S*K*Pe-S*O*je+S*W*Me-T*H*_e+T*K*Ue+T*z*je-T*W*$e+Z*H*Pe-Z*re*Ue-Z*z*Me+Z*O*$e+H*O*be-H*W*pe-re*z*be+re*W*se+K*z*pe-K*O*se)/Ge,Je=(S*Me*_e-S*je*Pe-T*$e*_e+T*je*Ue+Z*$e*Pe-Z*Me*Ue-H*pe*_e+H*be*Pe+re*se*_e-re*be*Ue-K*se*Pe+K*pe*Ue+z*pe*je-z*be*Me-O*se*je+O*be*$e+W*se*Me-W*pe*$e)/Ge,pt=(se*Me*_e-se*je*Pe-pe*$e*_e+pe*je*Ue+be*$e*Pe-be*Me*Ue)/Ge;if(Fe>=0){let ke=-3*Je+Fe**2,Fr=3*Fe*pt+Je*Fe**2-4*Je**2,Mt=-27*pt**2+18*pt*Fe*Je+Fe**2*Je**2-4*Fe**3*pt-4*Je**3;return!(ke>0&&Fr<0&&Mt>0)}else{let ke=-3*Je+Fe**2,Fr=-27*pt**2+18*pt*Fe*Je+Fe**2*Je**2-4*Fe**3*pt-4*Je**3;return!(ke>0&&Fr>0)}}function Zv(e,t){return Ql(e,new Lt(t.points()))}function Ql(e,t){let n=e.toMat2().inverse;return t=new Lt(t.pts.map(i=>n.transform(i.sub(e.center)))),ks(new Ht(U(),1),t)}function u$(e,t){return e.x===t.x&&e.y===t.y}function c$(e,t){return t instanceof G?u$(t,e.pt):t instanceof Ht?Ss(t,e.pt):t instanceof Wt?Jl(t,e.pt):t instanceof at?$s(t,e.pt):t instanceof Lt?vn(t,e.pt):t instanceof Hr?Xl(t,e.pt):!1}function l$(e,t){return t instanceof G?Jl(e,t):t instanceof Ht?Vo(e,t):t instanceof Wt?Hl(e,t)!=null:t instanceof at?Wl(t,e):t instanceof Lt?Yl(e,t):t instanceof Hr?Bv(t,e):!1}function d$(e,t){return t instanceof G?Ss(e,t):t instanceof Ht?a$(e,t):t instanceof Wt?Vo(t,e):t instanceof at?Fv(t,e):t instanceof Lt?ks(e,t):t instanceof Hr?gs(t,e):!1}function f$(e,t){return t instanceof G?$s(e,t):t instanceof Ht?Fv(e,t):t instanceof Wt?Wl(e,t):t instanceof at?Uv(e,t):t instanceof Lt?Lv(e,t):t instanceof Hr?Zv(t,e):!1}function p$(e,t){return t instanceof G?vn(e,t):t instanceof Ht?ks(t,e):t instanceof Wt?Yl(t,e):t instanceof at?Lv(t,e):t instanceof Lt?qv(t,e):t instanceof Hr?Ql(t,e):!1}function m$(e,t){return t instanceof G?Xl(e,t):t instanceof Ht?gs(e,t):t instanceof Wt?Bv(e,t):t instanceof at?Zv(e,t):t instanceof Lt?Ql(e,t):t instanceof Hr?s$(t,e):!1}function Kv(e,t,n){let i=e,r=n.p1,o=n.p2,a=t,s=o.sub(r),l=a.cross(s);if(Math.abs(l)<Number.EPSILON)return null;let d=r.sub(i),m=d.cross(s)/l;if(m<=0||m>=1)return null;let v=d.cross(a)/l;if(v<=0||v>=1)return null;let h=s.normal().unit();return t.dot(h)>0&&(h.x*=-1,h.y*=-1),{point:i.add(a.scale(m)),normal:h,fraction:m}}function h$(e,t,n){let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o;if(e.x!=0){let a=(n.pos.x-e.x)/t.x,s=(n.pos.x+n.width-e.x)/t.x;o=U(-Math.sign(t.x),0),i=Math.max(i,Math.min(a,s)),r=Math.min(r,Math.max(a,s))}if(e.y!=0){let a=(n.pos.y-e.y)/t.y,s=(n.pos.y+n.height-e.y)/t.y;Math.min(a,s)>i&&(o=U(0,-Math.sign(t.y))),i=Math.max(i,Math.min(a,s)),r=Math.min(r,Math.max(a,s))}return r>=i&&i>=0&&i<=1?{point:e.add(t.scale(i)),normal:o,fraction:i}:null}function Vv(e,t,n){let i=e,r=n.center,o=t,a=o.dot(o),s=i.sub(r),l=2*o.dot(s),d=s.dot(s)-n.radius*n.radius,m=l*l-4*a*d;if(a<=Number.EPSILON||m<0)return null;if(m==0){let v=-l/(2*a);if(v>=0&&v<=1){let h=i.add(o.scale(v));return{point:h,normal:h.sub(r),fraction:v}}}else{let v=(-l+Math.sqrt(m))/(2*a),h=(-l-Math.sqrt(m))/(2*a),b=null;if(v>=0&&v<=1&&(b=v),h>=0&&h<=1&&(b=Math.min(h,b??h)),b!=null){let _=i.add(o.scale(b));return{point:_,normal:_.sub(r).unit(),fraction:b}}}return null}function g$(e,t,n){let i=n.pts,r=null,o=i[i.length-1];for(let a=0;a<i.length;a++){let s=i[a],l=Kv(e,t,new Wt(o,s));l&&(!r||r.fraction>l.fraction)&&(r=l),o=s}return r}function v$(e,t,n){let i=n.toMat2(),r=i.inverse,o=r.transform(e.sub(n.center)),a=r.transform(t),s=Vv(o,a,new Ht(U(),1));if(s){let l=hs.rotation(yt(-n.angle)),d=hs.scale(n.radiusX,n.radiusY).transform(s.point),m=i.transform(s.point).add(n.center),v=m.dist(e)/t.len();return{point:m,normal:l.transform(U(n.radiusY**2*d.x,n.radiusX**2*d.y)).unit(),fraction:v}}return s}function y$(e,t,n,i=64){let r=e,o=t.len(),a=t.scale(1/o),s=0,l=U(Math.floor(e.x),Math.floor(e.y)),d=U(a.x>0?1:-1,a.y>0?1:-1),m=U(Math.abs(1/a.x),Math.abs(1/a.y)),v=U(d.x>0?l.x+1-e.x:e.x-l.x,d.y>0?l.y+1-e.y:e.y-l.y),h=U(m.x<1/0?m.x*v.x:1/0,m.y<1/0?m.y*v.y:1/0),b=-1;for(;s<=i;){let _=n(l);if(_===!0)return{point:r.add(a.scale(s)),normal:U(b===0?-d.x:0,b===1?-d.y:0),fraction:s/o,gridPos:l};if(_)return _;h.x<h.y?(l.x+=d.x,s=h.x,h.x+=m.x,b=0):(l.y+=d.y,s=h.y,h.y+=m.y,b=1)}return null}var b$=class Dl{constructor(t){D(this,"pt");this.pt=t.clone()}transform(t){return new Dl(t.multVec2(this.pt))}bbox(){return new at(this.pt,0,0)}area(){return 0}clone(){return new Dl(this.pt)}collides(t){return c$(this,t)}contains(t){return this.pt.eq(t)}raycast(t,n){return null}random(){return this.pt.clone()}},Wt=class zl{constructor(t,n){D(this,"p1");D(this,"p2");this.p1=t.clone(),this.p2=n.clone()}transform(t){return new zl(t.multVec2(this.p1),t.multVec2(this.p2))}bbox(){return at.fromPoints(this.p1,this.p2)}area(){return this.p1.dist(this.p2)}clone(){return new zl(this.p1,this.p2)}collides(t){return l$(this,t)}contains(t){return this.collides(t)}raycast(t,n){return Kv(t,n,this)}random(){return this.p1.add(this.p2.sub(this.p1).scale(wt(1)))}},at=class Ol{constructor(t,n,i){D(this,"pos");D(this,"width");D(this,"height");this.pos=t.clone(),this.width=n,this.height=i}static fromPoints(t,n){return new Ol(t.clone(),n.x-t.x,n.y-t.y)}center(){return new G(this.pos.x+this.width/2,this.pos.y+this.height/2)}points(){return[this.pos,this.pos.add(this.width,0),this.pos.add(this.width,this.height),this.pos.add(0,this.height)]}transform(t){return new Lt(this.points().map(n=>t.multVec2(n)))}bbox(){return this.clone()}area(){return this.width*this.height}clone(){return new Ol(this.pos.clone(),this.width,this.height)}distToPoint(t){return Math.sqrt(this.sdistToPoint(t))}sdistToPoint(t){let n=this.pos,i=this.pos.add(this.width,this.height),r=Math.max(n.x-t.x,0,t.x-i.x),o=Math.max(n.y-t.y,0,t.y-i.y);return r*r+o*o}collides(t){return f$(this,t)}contains(t){return this.collides(t)}raycast(t,n){return h$(t,n,this)}random(){return this.pos.add(wt(this.width),wt(this.height))}},Ht=class Gv{constructor(t,n){D(this,"center");D(this,"radius");this.center=t.clone(),this.radius=n}transform(t){return new Hr(this.center,this.radius,this.radius).transform(t)}bbox(){return at.fromPoints(this.center.sub(U(this.radius)),this.center.add(U(this.radius)))}area(){return this.radius*this.radius*Math.PI}clone(){return new Gv(this.center,this.radius)}collides(t){return d$(this,t)}contains(t){return this.collides(t)}raycast(t,n){return Vv(t,n,this)}random(){return this.center.add(G.fromAngle(wt(360)).scale(wt(this.radius)))}},Hr=class Si{constructor(t,n,i,r=0){D(this,"center");D(this,"radiusX");D(this,"radiusY");D(this,"angle");this.center=t.clone(),this.radiusX=n,this.radiusY=i,this.angle=r}static fromMat2(t){let n=t.inverse,i=n.transpose.mul(n),[r,o]=i.eigenvalues,[a,s]=i.eigenvectors(r,o),[l,d]=[1/Math.sqrt(r),1/Math.sqrt(o)];return l>d?new Si(U(),l,d,Vn(Math.atan2(-a[1],a[0]))):new Si(U(),d,l,Vn(Math.atan2(-s[1],s[0])))}toMat2(){let t=yt(this.angle),n=Math.cos(t),i=Math.sin(t);return new hs(n*this.radiusX,-i*this.radiusY,i*this.radiusX,n*this.radiusY)}transform(t){if(this.angle==0&&t.getRotation()==0)return new Si(t.multVec2(this.center),t.m[0]*this.radiusX,t.m[5]*this.radiusY);{let n=this.toMat2(),i=t.getRotation(),r=t.getScale();n=Do.fromMat2(n).scale(r.x,r.y).rotate(i).toMat2();let o=Si.fromMat2(n);return o.center=t.multVec2(this.center),o}}bbox(){if(this.angle==0)return at.fromPoints(this.center.sub(U(this.radiusX,this.radiusY)),this.center.add(U(this.radiusX,this.radiusY)));{let t=yt(this.angle),n=Math.cos(t),i=Math.sin(t),r=this.radiusX*n,o=this.radiusX*i,a=this.radiusY*i,s=this.radiusY*n,l=Math.sqrt(r*r+a*a),d=Math.sqrt(o*o+s*s);return at.fromPoints(this.center.sub(U(l,d)),this.center.add(U(l,d)))}}area(){return this.radiusX*this.radiusY*Math.PI}clone(){return new Si(this.center,this.radiusX,this.radiusY,this.angle)}collides(t){return m$(this,t)}contains(t){t=t.sub(this.center);let n=yt(this.angle),i=Math.cos(n),r=Math.sin(n),o=t.x*i+t.y*r,a=-t.x*r+t.y*i;return o*o/(this.radiusX*this.radiusX)+a*a/(this.radiusY*this.radiusY)<1}raycast(t,n){return v$(t,n,this)}random(){return this.center}};function x$(e,t,n,i){let r=t.sub(e),o=i.sub(n),a=r.cross(o);return a<1e-5&&a>-1e-5||(a=n.sub(e).cross(o)/a,a<0||a>1)?null:e.add(r.scale(a))}var Lt=class Oo{constructor(t){D(this,"pts");if(t.length<3)throw new Error("Polygons should have at least 3 vertices");this.pts=t}transform(t){return new Oo(this.pts.map(n=>t.multVec2(n)))}bbox(){let t=U(Number.MAX_VALUE),n=U(-Number.MAX_VALUE);for(let i of this.pts)t.x=Math.min(t.x,i.x),n.x=Math.max(n.x,i.x),t.y=Math.min(t.y,i.y),n.y=Math.max(n.y,i.y);return at.fromPoints(t,n)}area(){let t=0,n=this.pts.length;for(let i=0;i<n;i++){let r=this.pts[i],o=this.pts[(i+1)%n];t+=r.x*o.y*.5,t-=o.x*r.y*.5}return Math.abs(t)}clone(){return new Oo(this.pts.map(t=>t.clone()))}collides(t){return p$(this,t)}contains(t){return this.collides(t)}raycast(t,n){return g$(t,n,this)}random(){return U()}cut(t,n){let i=new Wt(t,n),r=[],o=[],a=n.sub(t),s=this.pts[this.pts.length-1],l=s.sub(t),d=a.cross(l)>0;return this.pts.forEach(m=>{l=m.sub(t);let v=a.cross(l)>0;if(d!=v){let h=x$(s,m,t,n);r.push(h),o.push(h),d=v}(v?r:o).push(m),s=m}),[r.length?new Oo(r):null,o.length?new Oo(o):null]}};function w$(e,t,n,i){let r=i*i,o=1-i,a=o*o;return e.scale(a).add(t.scale(2*o*i)).add(n.scale(r))}function _$(e,t,n,i){let r=1-i;return t.sub(e).scale(2*r).add(n.sub(t).scale(2*i))}function I$(e,t,n,i){return n.sub(t.scale(2)).add(e).scale(2)}function ed(e,t,n,i,r){let o=r*r,a=o*r,s=1-r,l=s*s,d=l*s;return e.scale(d).add(t.scale(3*l*r)).add(n.scale(3*s*o)).add(i.scale(a))}function $$(e,t,n,i,r){let o=r*r,a=1-r,s=a*a;return t.sub(e).scale(3*s).add(n.sub(t).scale(6*a*r)).add(i.sub(n).scale(3*o))}function S$(e,t,n,i,r){let o=1-r;return n.sub(t.scale(2)).add(e).scale(6*o).add(i.sub(n.scale(2)).add(t).scale(6*r))}function k$(e,t,n,i,r){let o=.5*(((-r+2)*r-1)*r),a=.5*((3*r-5)*r*r+2),s=.5*(((-3*r+4)*r+1)*r),l=.5*((r-1)*r*r);return e.scale(o).add(t.scale(a)).add(n.scale(s)).add(i.scale(l))}function A$(e,t,n,i,r){let o=.5*((-3*r+4)*r-1),a=.5*((9*r-10)*r),s=.5*((-9*r+8)*r+1),l=.5*((3*r-2)*r);return e.scale(o).add(t.scale(a)).add(n.scale(s)).add(i.scale(l))}function E$(e){let t=Hv(e),n=t(1);return i=>{let r=i*n,o=t(r,!0);return e(o)}}function Hv(e,t=10,n=10){let i=[0],r=[0],o=1/(t-1)/n,a=0,s=e(0),l=0;for(let d=1;d<t;d++){for(let m=0;m<n;m++){l+=o;let v=e(l),h=v.dist(s);a+=h,s=v}i[d]=a,r[d]=l}return r[t-1]=1,(d,m=!1)=>{if(m){let v=d;if(v<=0)return 0;if(v>=a)return 1;let h=0;for(;i[h+1]<v;)h++;let b=r[h],_=r[h+1],E=i[h],S=i[h+1],T=(v-E)/(S-E);return b+(_-b)*T}else{if(d<=0)return 0;if(d>=1)return i[t-1];let v=0;for(;r[v+1]<d;)v++;let h=r[v],b=r[v+1],_=i[v],E=i[v+1],S=(d-h)/(b-h);return _+(E-_)*S}}}function Go(e,t,n,i){let r=2*e+t-2*i+n,o=-3*e+3*i-2*t-n,a=t,s=e;return l=>{let d=l*l,m=d*l;return r*m+o*d+a*l+s}}function Wv(e,t,n,i,r,o=Go){let a=o(t.x,(1-r)*(n.x-e.x),(1-r)*(i.x-t.x),n.x),s=o(t.y,(1-r)*(n.y-e.y),(1-r)*(i.y-t.y),n.y);return l=>new G(a(l),s(l))}function vs(e,t,n,i,r=Go){return Wv(e,t,n,i,.5,r)}function T$(e,t,n,i,r=Go){return vs(i.add(e.sub(t).scale(6)),e,i,e.add(i.sub(n).scale(6)),r)}function P$(e,t,n,i,r,o,a,s=Go){let l=s(t.x,.5*(1-r)*(1+a)*(1+o)*(t.x-e.x)+.5*(1-r)*(1-a)*(1-o)*(n.x-t.x),.5*(1-r)*(1+a)*(1-o)*(n.x-t.x)+.5*(1-r)*(1-a)*(1+o)*(i.x-n.x),n.x),d=s(t.y,.5*(1-r)*(1+a)*(1+o)*(t.y-e.y)+.5*(1-r)*(1-a)*(1-o)*(n.y-t.y),.5*(1-r)*(1+a)*(1-o)*(n.y-t.y)+.5*(1-r)*(1-a)*(1+o)*(i.y-n.y),n.y);return m=>new G(l(m),d(m))}function D$(e,t,n,i){let r=2*e+t-2*i+n,o=-3*e+3*i-2*t+n,a=t;return s=>{let l=s*s;return 3*r*l+2*o*s+a}}function To(e){return 0<=e&&e<=1}function kl(e,t){return Math.abs(e-t)<=Number.EPSILON}function Po(e){return e<0?-Math.pow(-e,1/3):Math.pow(e,1/3)}function z$(e,t,n,i){let r=3*e-6*t+3*n,o=-3*e+3*t,a=e,s=-e+3*t-3*n+i;if(kl(s,0)){if(kl(r,0))return kl(o,0)?[]:[-a/o].filter(To);let S=Math.sqrt(o*o-4*r*a),T=2*r;return[(S-o)/T,(-o-S)/T].filter(To)}r/=s,o/=s,a/=s;let l=(3*o-r*r)/3,d=l/3,m=(2*r*r*r-9*r*o+27*a)/27,v=m/2,h=v*v+d*d*d;if(h<0){let S=-l/3,T=S*S*S,Z=Math.sqrt(T),H=-m/(2*Z),re=H<-1?-1:H>1?1:H,K=Math.acos(re),z=2*Po(Z),O=z*Math.cos(K/3)-r/3,W=z*Math.cos((K+2*Math.PI)/3)-r/3,se=z*Math.cos((K+4*Math.PI)/3)-r/3;return[O,W,se].filter(To)}if(h===0){let S=v<0?Po(-v):-Po(v),T=2*S-r/3,Z=-S-r/3;return[T,Z].filter(To)}let b=Math.sqrt(h),_=Po(b-v),E=Po(b+v);return[_-E-r/3].filter(To)}function O$(e,t,n,i,r){let o=z$(e.x-r,t.x-r,n.x-r,i.x-r);return o.length>0?ed(e,t,n,i,o[0]).y:NaN}function R$(e){if(!e||e.length==0)throw new Error("Need at least one point for easingLinear.");let t=e.length;return n=>{if(n<=0||e.length==1||n<=e[0].x)return e[0].y;for(let i=0;i<t;i++)if(e[i].x>=n)return zr(n,e[i-1].x,e[i].x,e[i-1].y,e[i].y);return e[e.length-1].y}}function C$(e,t){return n=>O$(U(0,0),e,t,U(1,1),n)}function j$(e,t="jump-end"){let n=1/e,i=t=="jump-start"||t=="jump-both",r=t=="jump-end"||t=="jump-both",o=1/(e+(r?1:0)),a=i?o:0;return s=>{let l=Math.floor(s/n);return a+l*o}}function M$(e,t){let n=Number.MAX_VALUE,i={normal:U(0),distance:0};for(let r of[e,t])for(let o=0;o<r.pts.length;o++){let a=r.pts[o],s=r.pts[(o+1)%r.pts.length].sub(a).normal().unit(),l=Number.MAX_VALUE,d=-Number.MAX_VALUE;for(let b=0;b<e.pts.length;b++){let _=e.pts[b].dot(s);l=Math.min(l,_),d=Math.max(d,_)}let m=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let b=0;b<t.pts.length;b++){let _=t.pts[b].dot(s);m=Math.min(m,_),v=Math.max(v,_)}let h=Math.min(d,v)-Math.max(l,m);if(h<0)return null;if(h<Math.abs(n)){let b=v-l,_=m-d;n=Math.abs(b)<Math.abs(_)?b:_,i.normal=s,i.distance=n}}return i}function Jv(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)>=0}function N$(e){let t=0,n=e[e.length-1];for(let i=0;i<e.length;i++)t+=(e[i].x-n.x)*(e[i].y+n.y),n=e[i];return t<0}function Al(e,t,n,i){let r=i.x-n.x,o=i.y-n.y,a=r*(e.y-n.y)-o*(e.x-n.x),s=r*(t.y-n.y)-o*(t.x-n.x);return a*s>=0}function U$(e,t,n,i){return Al(e,t,n,i)&&Al(e,n,t,i)&&Al(e,i,t,n)}function F$(e,t,n,i){for(let r of e)if(r!==t&&r!==n&&r!==i&&U$(r,t,n,i))return!0;return!1}function L$(e,t,n,i){return Jv(e,t,n)&&!F$(i,e,t,n)}function Yv(e){if(e.length<3)return[];if(e.length==3)return[e];let t=[],n=[],i=0;for(let v=0;v<e.length;v++){let h=e[i],b=e[v];(b.x<h.x||b.x==h.x&&b.y<h.y)&&(i=i),t[v]=v+1,n[v]=v-1}t[t.length-1]=0,n[0]=n.length-1,N$(e)||([t,n]=[n,t]);let r=[];for(let v=0;v<e.length;++v)Jv(e[n[v]],e[v],e[t[v]])||r.push(e[v]);let o=[],a=e.length,s=1,l=0,d,m;for(;a>3;){d=t[s],m=n[s];let v=e[m],h=e[s],b=e[d];if(L$(v,h,b,r))o.push([v,h,b]),t[m]=d,n[d]=m,r.splice(r.indexOf(h),1),--a,l=0;else if(++l>a)return[];s=d}return d=t[s],m=n[s],o.push([e[m],e[s],e[d]]),o}function q$(e){if(e.length<3)return!1;let t=e.length-2,n=e.length-1,i=0,r=e[n].sub(e[t]),o=e[i].sub(e[n]),a=r.cross(o);for(;i+1<e.length;)if(t=n,n=i,i++,r=e[n].sub(e[t]),o=e[i].sub(e[n]),r.cross(o)*a<0)return!1;return!0}var Xv=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",As="topleft",B$="monospace",ys="monospace",Rl="linear",td=[{name:"a_pos",size:2},{name:"a_uv",size:2},{name:"a_color",size:4}],Z$=td.reduce((e,t)=>e+t.size,0),Qv=2048,K$=Qv*4*Z$,V$=Qv*6,G$=`
attribute vec2 a_pos;
attribute vec2 a_uv;
attribute vec4 a_color;

varying vec2 v_pos;
varying vec2 v_uv;
varying vec4 v_color;

vec4 def_vert() {
	return vec4(a_pos, 0.0, 1.0);
}

{{user}}

void main() {
	vec4 pos = vert(a_pos, a_uv, a_color);
	v_pos = a_pos;
	v_uv = a_uv;
	v_color = a_color;
	gl_Position = pos;
}
`,H$=`
precision mediump float;

varying vec2 v_pos;
varying vec2 v_uv;
varying vec4 v_color;

uniform sampler2D u_tex;

vec4 def_frag() {
	vec4 texColor = texture2D(u_tex, v_uv);
	return vec4((v_color.rgb * texColor.rgb), texColor.a) * v_color.a;
}

{{user}}

void main() {
	gl_FragColor = frag(v_pos, v_uv, v_color, u_tex);
	if (gl_FragColor.a == 0.0) {
		discard;
	}
}
`,Cl=`
vec4 vert(vec2 pos, vec2 uv, vec4 color) {
	return def_vert();
}
`,jl=`
vec4 frag(vec2 pos, vec2 uv, vec4 color, sampler2D tex) {
	return def_frag();
}
`,W$=new Set(["id","require"]),J$=new Set(["add","fixedUpdate","update","draw","destroy","inspect","drawInspect"]),wv=200,Y$=640,X$=65536,ey=Symbol.for("kaplay.cancel"),ty=class extends Map{constructor(){super(...arguments);D(this,"lastID",0)}push(t){let n=this.lastID;return this.set(n,t),this.lastID++,n}pushd(t){let n=this.push(t);return()=>this.delete(n)}},Yn=class ry{constructor(t){D(this,"paused",!1);D(this,"cancel");this.cancel=t}static join(t){let n=new ry(()=>t.forEach(i=>i.cancel()));return Object.defineProperty(n,"paused",{get:()=>t[0].paused,set:i=>t.forEach(r=>r.paused=i)}),n.paused=!1,n}static replace(t,n){return t.cancel=()=>n.cancel(),n.paused=t.paused,Object.defineProperty(t,"paused",{get:()=>n.paused,set:i=>n.paused=i}),t}},Ft=class{constructor(){D(this,"cancellers",new WeakMap);D(this,"handlers",new ty)}add(e){function t(...r){if(!i.paused)return e(...r)}let n=this.handlers.pushd(t),i=new Yn(n);return this.cancellers.set(t,n),i}addOnce(e){let t=this.add((...n)=>{t.cancel(),e(...n)});return t}next(){return new Promise(e=>this.addOnce(e))}trigger(...e){this.handlers.forEach(t=>{let n=t(...e),i;n===ey&&(i=this.cancellers.get(t))&&i()})}numListeners(){return this.handlers.size}clear(){this.handlers.clear()}},Lo=class{constructor(){D(this,"handlers",{});D(this,"registers",{})}on(e,t){return this.handlers[e]||(this.handlers[e]=new Ft),this.handlers[e].add(t)}onOnce(e,t){let n=this.on(e,(...i)=>{n.cancel(),t(...i)});return n}next(e){return new Promise(t=>{this.onOnce(e,(...n)=>t(n[0]))})}trigger(e,...t){this.handlers[e]&&this.handlers[e].trigger(...t)}remove(e){delete this.handlers[e]}clear(){this.handlers={}}numListeners(e){return this.handlers[e]?.numListeners()??0}},Q$=e=>e[0]instanceof Le,eS=e=>e[0]instanceof G,tS=e=>typeof e[0]=="number",ny=class{constructor(e=(t,n)=>t<n){D(this,"_items");D(this,"_compareFn");this._compareFn=e,this._items=[]}insert(e){this._items.push(e),this.moveUp(this._items.length-1)}remove(){if(this._items.length===0)return null;let e=this._items[0],t=this._items.pop();return this._items.length!==0&&(this._items[0]=t,this.moveDown(0)),e}clear(){this._items.splice(0,this._items.length)}moveUp(e){for(;e>0;){let t=Math.floor((e-1)/2);if(!this._compareFn(this._items[e],this._items[t])&&this._items[e]>=this._items[t])break;this.swap(e,t),e=t}}moveDown(e){for(;e<Math.floor(this._items.length/2);){let t=2*e+1;if(t<this._items.length-1&&!this._compareFn(this._items[t],this._items[t+1])&&++t,this._compareFn(this._items[e],this._items[t]))break;this.swap(e,t),e=t}}swap(e,t){[this._items[e],this._items[t]]=[this._items[t],this._items[e]]}get length(){return this._items.length}};function rS(e){let t=window.atob(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function nS(e){return rS(e.split(",")[1])}function rd(e,t){let n=document.createElement("a");n.href=t,n.download=e,n.click()}function iy(e,t){rd(e,"data:text/plain;charset=utf-8,"+t)}function iS(e,t){iy(e,JSON.stringify(t))}function _v(e,t){let n=URL.createObjectURL(t);rd(e,n),URL.revokeObjectURL(n)}var oy=e=>e.match(/^data:\w+\/\w+;base64,.+/),oS=e=>e.split(".").slice(0,-1).join(".");function nd(e,t){if(e===t)return!0;let n=typeof e,i=typeof t;if(n!==i)return!1;if(n==="object"&&i==="object"&&e!==null&&t!==null){if(Array.isArray(e)!==Array.isArray(t))return!1;let r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(let a of r){let s=e[a],l=t[a];if(!nd(s,l))return!1}return!0}return!1}var Iv=new Set,aS=e=>e instanceof Error?e.message:String(e);function sS(e){Iv.has(e)||(Iv.add(e),console.warn(e))}function Ai(e,t){sS(`${e} is deprecated. Use ${t} instead.`)}function Ml(e,t){return Number(e.toFixed(t))}function st(e,t){return(...n)=>{let i=n.length;if(i===e.length)return e(...n);if(i===t.length)return t(...n)}}var uS=Object.freeze([776,2359,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520]);function cS(e){if(typeof e!="string")throw new TypeError("string cannot be undefined or null");let t=[],n=0,i=0;for(;n<e.length;){if(i+=lS(n+i,e),vS(e[n+i])&&i++,mS(e[n+i])&&i++,hS(e[n+i])&&i++,yS(e[n+i])){i++;continue}t.push(e.substring(n,n+i)),n+=i,i=0}return t}function lS(e,t){let n=t[e];if(!dS(n)||e===t.length-1)return 1;let i=n+t[e+1],r=t.substring(e+2,e+5);return $v(i)&&$v(r)?4:fS(i)&&gS(r)?t.slice(e).indexOf(String.fromCodePoint(917631))+2:pS(r)?4:2}function dS(e){return e&&Xn(e[0].charCodeAt(0),55296,56319)}function $v(e){return Xn(id(e),127462,127487)}function fS(e){return Xn(id(e),127988,127988)}function pS(e){return Xn(id(e),127995,127999)}function mS(e){return typeof e=="string"&&Xn(e.charCodeAt(0),65024,65039)}function hS(e){return typeof e=="string"&&Xn(e.charCodeAt(0),8400,8447)}function gS(e){let t=e.codePointAt(0);return typeof e=="string"&&typeof t=="number"&&Xn(t,917504,917631)}function vS(e){return typeof e=="string"&&uS.includes(e.charCodeAt(0))}function yS(e){return typeof e=="string"&&e.charCodeAt(0)===8205}function id(e){let t=e.charCodeAt(0)-55296,n=e.charCodeAt(1)-56320;return(t<<10)+n+65536}function Xn(e,t,n){return e>=t&&e<=n}var cr=(e,t)=>Array.isArray(e)?e?.includes(t):e===t,Dr=(e,t)=>Array.isArray(t)?t.some(n=>e.has(n)):e.has(t),cs=(e,t,n)=>{e.has(t)?e.get(t)?.push(n):e.set(t,[n])},bS=(()=>{let e=0;return()=>e++})(),xS={"Joy-Con L+R (STANDARD GAMEPAD Vendor: 057e Product: 200e)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},"Joy-Con (L) (STANDARD GAMEPAD Vendor: 057e Product: 2006)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"select",10:"lstick",16:"start"},sticks:{left:{x:0,y:1}}},"Joy-Con (R) (STANDARD GAMEPAD Vendor: 057e Product: 2007)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",9:"start",10:"lstick",16:"select"},sticks:{left:{x:0,y:1}}},"Pro Controller (STANDARD GAMEPAD Vendor: 057e Product: 2009)":{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home",17:"capture"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}},default:{buttons:{0:"south",1:"east",2:"west",3:"north",4:"lshoulder",5:"rshoulder",6:"ltrigger",7:"rtrigger",8:"select",9:"start",10:"lstick",11:"rstick",12:"dpad-up",13:"dpad-down",14:"dpad-left",15:"dpad-right",16:"home"},sticks:{left:{x:0,y:1},right:{x:2,y:3}}}};function ay(){let e=x.globalOpt.pixelDensity??1,t=x.globalOpt.width,n=x.globalOpt.height,i=x.gfx.ggl.gl.drawingBufferWidth,r=x.gfx.ggl.gl.drawingBufferHeight,o=i/e,a=r/e,s=0,l=0,d=o,m=a;if(x.globalOpt.letterbox){if(!t||!n)throw new Error("Letterboxing requires width and height defined.");let v=o/a,h=t/n;if(v>h){let b=a*h;s=(o-b)/2,d=b}else{let b=o/h;m=b,l=(a-b)/2}}if(x.globalOpt.stretch&&(!x.globalOpt.width||!x.globalOpt.height))throw new Error("Stretching requires width and height defined.");x.gfx.viewport={x:s,y:l,width:d,height:m,scale:(x.gfx.viewport.width+x.gfx.viewport.height)/(x.gfx.width+x.gfx.height)}}function wS(e){return new G(e.x*x.gfx.viewport.width/x.gfx.width,e.y*x.gfx.viewport.height/x.gfx.height)}function Vr(e){return new G((e.x-x.gfx.viewport.x)*x.gfx.width/x.gfx.viewport.width,(e.y-x.gfx.viewport.y)*x.gfx.height/x.gfx.viewport.height)}var _S=()=>Zn.lastInputDevice,IS=()=>{let e=Zn.buttons;for(let t in e){let n=e[t].keyboard&&[e[t].keyboard].flat(),i=e[t].keyboardCode&&[e[t].keyboardCode].flat(),r=e[t].gamepad&&[e[t].gamepad].flat(),o=e[t].mouse&&[e[t].mouse].flat();n&&n.forEach(a=>{cs(Zn.buttonsByKey,a,t)}),i&&i.forEach(a=>{cs(Zn.buttonsByKeyCode,a,t)}),r&&r.forEach(a=>{cs(Zn.buttonsByGamepad,a,t)}),o&&o.forEach(a=>{cs(Zn.buttonsByMouse,a,t)})}},Mo=class{constructor(){D(this,"pressed",new Set([]));D(this,"pressedRepeat",new Set([]));D(this,"released",new Set([]));D(this,"down",new Set([]))}update(){this.pressed.clear(),this.released.clear(),this.pressedRepeat.clear()}press(e){this.pressed.add(e),this.pressedRepeat.add(e),this.down.add(e)}pressRepeat(e){this.pressedRepeat.add(e)}release(e){this.down.delete(e),this.pressed.delete(e),this.released.add(e)}},$S=class{constructor(){D(this,"buttonState",new Mo);D(this,"stickState",new Map)}},SS=class{constructor(){D(this,"dts",[]);D(this,"timer",0);D(this,"fps",0)}tick(e){this.dts.push(e),this.timer+=e,this.timer>=1&&(this.timer=0,this.fps=Math.round(1/(this.dts.reduce((t,n)=>t+n)/this.dts.length)),this.dts=[])}},Zn,Sv=xS,kS=e=>{let t=e.buttons??{};return{canvas:e.canvas,buttons:t,buttonsByKey:new Map,buttonsByMouse:new Map,buttonsByGamepad:new Map,buttonsByKeyCode:new Map,loopID:null,stopped:!1,dt:0,fixedDt:1/50,restDt:0,time:0,realTime:0,fpsCounter:new SS,timeScale:1,skipTime:!1,isHidden:!1,numFrames:0,mousePos:new G(0),mouseDeltaPos:new G(0),keyState:new Mo,mouseState:new Mo,mergedGamepadState:new $S,gamepadStates:new Map,lastInputDevice:null,buttonState:new Mo,gamepads:[],charInputted:[],isMouseMoved:!1,lastWidth:e.canvas.offsetWidth,lastHeight:e.canvas.offsetHeight,events:new Lo}},AS=e=>{if(!e.canvas)throw new Error("Please provide a canvas");let t=kS(e);Zn=t,IS();function n(){return t.dt*t.timeScale}function i(){return t.fixedDt*t.timeScale}function r(){return t.restDt*t.timeScale}function o(){return t.isHidden}function a(){return t.time}function s(){return t.fpsCounter.fps}function l(){return t.numFrames}function d(){return t.canvas.toDataURL()}function m(k){t.canvas.style.cursor=k}function v(){return t.canvas.style.cursor}function h(k){if(k)try{let F=t.canvas.requestPointerLock();F?.catch&&F.catch(Q=>console.error(Q))}catch(F){console.error(F)}else document.exitPointerLock()}function b(){return!!document.pointerLockElement}function _(k){k.requestFullscreen?k.requestFullscreen():k.webkitRequestFullscreen&&k.webkitRequestFullscreen()}function E(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullScreen&&document.webkitExitFullScreen()}function S(k=!0){k?_(t.canvas):E()}function T(){return document.fullscreenElement===t.canvas||document.webkitFullscreenElement===t.canvas}function Z(){t.stopped=!0;let k=Object.entries(Dt),F=Object.entries(vo),Q=Object.entries(sr);for(let[fe,ce]of k)t.canvas.removeEventListener(fe,ce);for(let[fe,ce]of F)document.removeEventListener(fe,ce);for(let[fe,ce]of Q)window.removeEventListener(fe,ce);Mn.disconnect()}function H(k,F){t.loopID!==null&&cancelAnimationFrame(t.loopID);let Q=0,fe=0,ce=Qe=>{if(t.stopped)return;if(document.visibilityState!=="visible"){t.loopID=requestAnimationFrame(ce);return}let ht=Qe/1e3,br=Math.min(ht-t.realTime,.25),de=e.maxFPS?1/e.maxFPS:0;if(t.realTime=ht,fe+=br,fe>de){if(!t.skipTime){for(Q+=fe,t.dt=t.fixedDt,t.restDt=0;Q>t.fixedDt;)Q-=t.fixedDt,Q<t.fixedDt&&(t.restDt=Q),k();t.restDt=Q,t.dt=fe,t.time+=n(),t.fpsCounter.tick(t.dt)}fe=0,t.skipTime=!1,t.numFrames++,F(Cn,Ca)}t.loopID=requestAnimationFrame(ce)};ce(0)}function re(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function K(){return t.mousePos.clone()}function z(){return t.mouseDeltaPos.clone()}function O(k="left"){return t.mouseState.pressed.has(k)}function W(k="left"){return t.mouseState.down.has(k)}function se(k="left"){return t.mouseState.released.has(k)}function pe(){return t.isMouseMoved}function be(k){return k===void 0?t.keyState.pressed.size>0:Dr(t.keyState.pressed,k)}function $e(k){return k===void 0?t.keyState.pressedRepeat.size>0:Dr(t.keyState.pressedRepeat,k)}function Me(k){return k===void 0?t.keyState.down.size>0:Dr(t.keyState.down,k)}function je(k){return k===void 0?t.keyState.released.size>0:Dr(t.keyState.released,k)}function Ue(k){return k===void 0?t.mergedGamepadState.buttonState.pressed.size>0:Dr(t.mergedGamepadState.buttonState.pressed,k)}function Pe(k){return k===void 0?t.mergedGamepadState.buttonState.down.size>0:Dr(t.mergedGamepadState.buttonState.down,k)}function _e(k){return k===void 0?t.mergedGamepadState.buttonState.released.size>0:Dr(t.mergedGamepadState.buttonState.released,k)}function Ge(k){return k===void 0?t.buttonState.pressed.size>0:Dr(t.buttonState.pressed,k)}function Fe(k){return k===void 0?t.buttonState.down.size>0:Dr(t.buttonState.down,k)}function Je(k){return k===void 0?t.buttonState.released.size>0:Dr(t.buttonState.released,k)}function pt(k){return t.buttons?.[k]}function ke(k,F){t.buttons[k]={...t.buttons[k],...F}}function Fr(k){t.buttonState.press(k),t.events.trigger("buttonPress",k)}function Mt(k){t.buttonState.release(k),t.events.trigger("buttonRelease",k)}function nr(k){return t.events.on("resize",k)}let Nt=st(k=>t.events.on("keyDown",k),(k,F)=>t.events.on("keyDown",Q=>cr(k,Q)&&F(Q))),nn=st(k=>t.events.on("keyPress",F=>k(F)),(k,F)=>t.events.on("keyPress",Q=>cr(k,Q)&&F(Q))),ho=st(k=>t.events.on("keyPressRepeat",k),(k,F)=>t.events.on("keyPressRepeat",Q=>cr(k,Q)&&F(Q))),di=st(k=>t.events.on("keyRelease",k),(k,F)=>t.events.on("keyRelease",Q=>cr(k,Q)&&F(Q))),Sr=st(k=>t.events.on("mouseDown",F=>k(F)),(k,F)=>t.events.on("mouseDown",Q=>cr(k,Q)&&F(Q))),ir=st(k=>t.events.on("mousePress",F=>k(F)),(k,F)=>t.events.on("mousePress",Q=>cr(k,Q)&&F(Q))),yr=st(k=>t.events.on("mouseRelease",F=>k(F)),(k,F)=>t.events.on("mouseRelease",Q=>Q===k&&F(Q)));function xe(k){return t.events.on("mouseMove",()=>k(K(),z()))}function Ae(k){return t.events.on("charInput",k)}function Te(k){return t.events.on("touchStart",k)}function Xe(k){return t.events.on("touchMove",k)}function gt(k){return t.events.on("touchEnd",k)}function le(k){return t.events.on("scroll",k)}function xt(k){return t.events.on("hide",k)}function kr(k){return t.events.on("show",k)}let on=st(k=>t.events.on("gamepadButtonPress",(F,Q)=>k(F,Q)),(k,F)=>t.events.on("gamepadButtonPress",(Q,fe)=>cr(k,Q)&&F(Q,fe))),Ke=st(k=>t.events.on("gamepadButtonDown",(F,Q)=>k(F,Q)),(k,F)=>t.events.on("gamepadButtonDown",(Q,fe)=>cr(k,Q)&&F(Q,fe))),Lr=st(k=>t.events.on("gamepadButtonRelease",(F,Q)=>k(F,Q)),(k,F)=>t.events.on("gamepadButtonRelease",(Q,fe)=>cr(k,Q)&&F(Q,fe)));function go(k,F){return t.events.on("gamepadStick",(Q,fe,ce)=>Q===k&&F(fe,ce))}function or(k){t.events.on("gamepadConnect",k)}function ar(k){t.events.on("gamepadDisconnect",k)}function Ar(k){return t.mergedGamepadState.stickState.get(k)||new G(0)}function fi(){return[...t.charInputted]}function Pt(){return[...t.gamepads]}let qr=st(k=>t.events.on("buttonPress",F=>k(F)),(k,F)=>t.events.on("buttonPress",Q=>cr(k,Q)&&F(Q))),mt=st(k=>t.events.on("buttonDown",F=>k(F)),(k,F)=>t.events.on("buttonDown",Q=>cr(k,Q)&&F(Q))),Rn=st(k=>t.events.on("buttonRelease",F=>k(F)),(k,F)=>t.events.on("buttonRelease",Q=>cr(k,Q)&&F(Q)));function Cn(){t.events.trigger("input"),t.keyState.down.forEach(k=>t.events.trigger("keyDown",k)),t.mouseState.down.forEach(k=>t.events.trigger("mouseDown",k)),t.buttonState.down.forEach(k=>{t.events.trigger("buttonDown",k)}),Ma()}function Ca(){t.keyState.update(),t.mouseState.update(),t.buttonState.update(),t.mergedGamepadState.buttonState.update(),t.mergedGamepadState.stickState.forEach((k,F)=>{t.mergedGamepadState.stickState.set(F,new G(0))}),t.charInputted=[],t.isMouseMoved=!1,t.mouseDeltaPos=new G(0),t.gamepadStates.forEach(k=>{k.buttonState.update(),k.stickState.forEach((F,Q)=>{k.stickState.set(Q,new G(0))})})}function pi(k){let F={index:k.index,isPressed:Q=>t.gamepadStates.get(k.index)?.buttonState.pressed.has(Q)||!1,isDown:Q=>t.gamepadStates.get(k.index)?.buttonState.down.has(Q)||!1,isReleased:Q=>t.gamepadStates.get(k.index)?.buttonState.released.has(Q)||!1,getStick:Q=>t.gamepadStates.get(k.index)?.stickState.get(Q)||U()};return t.gamepads.push(F),t.gamepadStates.set(k.index,{buttonState:new Mo,stickState:new Map([["left",new G(0)],["right",new G(0)]])}),F}function ja(k){t.gamepads=t.gamepads.filter(F=>F.index!==k.index),t.gamepadStates.delete(k.index)}function Ma(){for(let k of navigator.getGamepads())k&&!t.gamepadStates.has(k.index)&&pi(k);for(let k of t.gamepads){let F=navigator.getGamepads()[k.index];if(!F)continue;let Q=(e.gamepads??{})[F.id]||Sv[F.id]||Sv.default,fe=t.gamepadStates.get(k.index);if(fe){for(let ce=0;ce<F.buttons.length;ce++){let Qe=Q.buttons[ce],ht=F.buttons[ce],br=t.buttonsByGamepad.has(Qe);if(ht.pressed){if(fe.buttonState.down.has(Qe)){t.events.trigger("gamepadButtonDown",Qe,k);continue}t.lastInputDevice="gamepad",br&&t.buttonsByGamepad.get(Qe)?.forEach(de=>{t.buttonState.press(de),t.events.trigger("buttonPress",de)}),t.mergedGamepadState.buttonState.press(Qe),fe.buttonState.press(Qe),t.events.trigger("gamepadButtonPress",Qe,k)}else fe.buttonState.down.has(Qe)&&(br&&t.buttonsByGamepad.get(Qe)?.forEach(de=>{t.buttonState.release(de),t.events.trigger("buttonRelease",de)}),t.mergedGamepadState.buttonState.release(Qe),fe.buttonState.release(Qe),t.events.trigger("gamepadButtonRelease",Qe,k))}for(let ce in Q.sticks){let Qe=Q.sticks[ce];if(!Qe)continue;let ht=new G(F.axes[Qe.x],F.axes[Qe.y]);fe.stickState.set(ce,ht),t.mergedGamepadState.stickState.set(ce,ht),t.events.trigger("gamepadStick",ce,ht,k)}}}}let Dt={},vo={},sr={},mi=e.pixelDensity||1;Dt.mousemove=k=>{let F=Vr(new G(k.offsetX,k.offsetY)),Q=new G(k.movementX,k.movementY);if(T()){let fe=t.canvas.width/mi,ce=t.canvas.height/mi,Qe=window.innerWidth,ht=window.innerHeight,br=Qe/ht,de=fe/ce;if(br>de){let xr=ht/ce,gi=(Qe-fe*xr)/2;F.x=zr(k.offsetX-gi,0,fe*xr,0,fe),F.y=zr(k.offsetY,0,ce*xr,0,ce)}else{let xr=Qe/fe,gi=(ht-ce*xr)/2;F.x=zr(k.offsetX,0,fe*xr,0,fe),F.y=zr(k.offsetY-gi,0,ce*xr,0,ce)}}t.events.onOnce("input",()=>{t.isMouseMoved=!0,t.mousePos=F,t.mouseDeltaPos=Q,t.events.trigger("mouseMove")})};let Na=["left","middle","right","back","forward"];Dt.mousedown=k=>{t.events.onOnce("input",()=>{let F=Na[k.button];F&&(t.lastInputDevice="mouse",t.buttonsByMouse.has(F)&&t.buttonsByMouse.get(F)?.forEach(Q=>{t.buttonState.press(Q),t.events.trigger("buttonPress",Q)}),t.mouseState.press(F),t.events.trigger("mousePress",F))})},Dt.mouseup=k=>{t.events.onOnce("input",()=>{let F=Na[k.button];F&&(t.buttonsByMouse.has(F)&&t.buttonsByMouse.get(F)?.forEach(Q=>{t.buttonState.release(Q),t.events.trigger("buttonRelease",Q)}),t.mouseState.release(F),t.events.trigger("mouseRelease",F))})};let jn=new Set([" ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab"]),hi={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down"," ":"space"};Dt.keydown=k=>{jn.has(k.key)&&k.preventDefault(),t.events.onOnce("input",()=>{let F=hi[k.key]||k.key.toLowerCase(),Q=k.code;if(F===void 0)throw new Error(`Unknown key: ${k.key}`);F.length===1?(t.events.trigger("charInput",F),t.charInputted.push(F)):F==="space"&&(t.events.trigger("charInput"," "),t.charInputted.push(" ")),k.repeat?(t.keyState.pressRepeat(F),t.events.trigger("keyPressRepeat",F)):(t.lastInputDevice="keyboard",t.buttonsByKey.has(F)&&t.buttonsByKey.get(F)?.forEach(fe=>{t.buttonState.press(fe),t.events.trigger("buttonPress",fe)}),t.buttonsByKeyCode.has(Q)&&t.buttonsByKeyCode.get(Q)?.forEach(fe=>{t.buttonState.press(fe),t.events.trigger("buttonPress",fe)}),t.keyState.press(F),t.events.trigger("keyPressRepeat",F),t.events.trigger("keyPress",F))})},Dt.keyup=k=>{t.events.onOnce("input",()=>{let F=hi[k.key]||k.key.toLowerCase(),Q=k.code;t.buttonsByKey.has(F)&&t.buttonsByKey.get(F)?.forEach(fe=>{t.buttonState.release(fe),t.events.trigger("buttonRelease",fe)}),t.buttonsByKeyCode.has(Q)&&t.buttonsByKeyCode.get(Q)?.forEach(fe=>{t.buttonState.release(fe),t.events.trigger("buttonRelease",fe)}),t.keyState.release(F),t.events.trigger("keyRelease",F)})},Dt.touchstart=k=>{k.preventDefault(),t.events.onOnce("input",()=>{let F=[...k.changedTouches],Q=t.canvas.getBoundingClientRect();e.touchToMouse!==!1&&(t.mousePos=Vr(new G(F[0].clientX-Q.x,F[0].clientY-Q.y)),t.lastInputDevice="mouse",t.buttonsByMouse.has("left")&&t.buttonsByMouse.get("left")?.forEach(fe=>{t.buttonState.press(fe),t.events.trigger("buttonPress",fe)}),t.mouseState.press("left"),t.events.trigger("mousePress","left")),F.forEach(fe=>{t.events.trigger("touchStart",Vr(new G(fe.clientX-Q.x,fe.clientY-Q.y)),fe)})})},Dt.touchmove=k=>{k.preventDefault(),t.events.onOnce("input",()=>{let F=[...k.changedTouches],Q=t.canvas.getBoundingClientRect();if(e.touchToMouse!==!1){let fe=t.mousePos;t.mousePos=Vr(new G(F[0].clientX-Q.x,F[0].clientY-Q.y)),t.mouseDeltaPos=t.mousePos.sub(fe),t.events.trigger("mouseMove")}F.forEach(fe=>{t.events.trigger("touchMove",Vr(new G(fe.clientX-Q.x,fe.clientY-Q.y)),fe)})})},Dt.touchend=k=>{t.events.onOnce("input",()=>{let F=[...k.changedTouches],Q=t.canvas.getBoundingClientRect();e.touchToMouse!==!1&&(t.mousePos=Vr(new G(F[0].clientX-Q.x,F[0].clientY-Q.y)),t.mouseDeltaPos=new G(0,0),t.buttonsByMouse.has("left")&&t.buttonsByMouse.get("left")?.forEach(fe=>{t.buttonState.release(fe),t.events.trigger("buttonRelease",fe)}),t.mouseState.release("left"),t.events.trigger("mouseRelease","left")),F.forEach(fe=>{t.events.trigger("touchEnd",Vr(new G(fe.clientX-Q.x,fe.clientY-Q.y)),fe)})})},Dt.touchcancel=k=>{t.events.onOnce("input",()=>{let F=[...k.changedTouches],Q=t.canvas.getBoundingClientRect();e.touchToMouse!==!1&&(t.mousePos=Vr(new G(F[0].clientX-Q.x,F[0].clientY-Q.y)),t.mouseState.release("left"),t.events.trigger("mouseRelease","left")),F.forEach(fe=>{t.events.trigger("touchEnd",Vr(new G(fe.clientX-Q.x,fe.clientY-Q.y)),fe)})})},Dt.wheel=k=>{k.preventDefault(),t.events.onOnce("input",()=>{t.events.trigger("scroll",new G(k.deltaX,k.deltaY))})},Dt.contextmenu=k=>k.preventDefault(),vo.visibilitychange=()=>{document.visibilityState==="visible"?(t.skipTime=!0,t.isHidden=!1,t.events.trigger("show")):(t.isHidden=!0,t.events.trigger("hide"))},sr.gamepadconnected=k=>{let F=pi(k.gamepad);t.events.onOnce("input",()=>{t.events.trigger("gamepadConnect",F)})},sr.gamepaddisconnected=k=>{let F=Pt().filter(Q=>Q.index===k.gamepad.index)[0];ja(k.gamepad),t.events.onOnce("input",()=>{t.events.trigger("gamepadDisconnect",F)})};for(let[k,F]of Object.entries(Dt))t.canvas.addEventListener(k,F);for(let[k,F]of Object.entries(vo))document.addEventListener(k,F);for(let[k,F]of Object.entries(sr))window.addEventListener(k,F);let Mn=new ResizeObserver(k=>{for(let F of k)if(F.target===t.canvas){if(t.lastWidth===t.canvas.offsetWidth&&t.lastHeight===t.canvas.offsetHeight)return;t.lastWidth=t.canvas.offsetWidth,t.lastHeight=t.canvas.offsetHeight,t.events.onOnce("input",()=>{t.events.trigger("resize")})}});return Mn.observe(t.canvas),{state:t,dt:n,fixedDt:i,restDt:r,time:a,run:H,canvas:t.canvas,fps:s,numFrames:l,quit:Z,isHidden:o,setFullscreen:S,isFullscreen:T,setCursor:m,screenshot:d,getGamepads:Pt,getCursor:v,setCursorLocked:h,isCursorLocked:b,isTouchscreen:re,mousePos:K,mouseDeltaPos:z,isKeyDown:Me,isKeyPressed:be,isKeyPressedRepeat:$e,isKeyReleased:je,isMouseDown:W,isMousePressed:O,isMouseReleased:se,isMouseMoved:pe,isGamepadButtonPressed:Ue,isGamepadButtonDown:Pe,isGamepadButtonReleased:_e,getGamepadStick:Ar,isButtonPressed:Ge,isButtonDown:Fe,isButtonReleased:Je,setButton:ke,getButton:pt,pressButton:Fr,releaseButton:Mt,charInputted:fi,onResize:nr,onKeyDown:Nt,onKeyPress:nn,onKeyPressRepeat:ho,onKeyRelease:di,onMouseDown:Sr,onMousePress:ir,onMouseRelease:yr,onMouseMove:xe,onCharInput:Ae,onTouchStart:Te,onTouchMove:Xe,onTouchEnd:gt,onScroll:le,onHide:xt,onShow:kr,onGamepadButtonDown:Ke,onGamepadButtonPress:on,onGamepadButtonRelease:Lr,onGamepadStick:go,onGamepadConnect:or,onGamepadDisconnect:ar,onButtonPress:qr,onButtonDown:mt,onButtonRelease:Rn,getLastInputDeviceType:_S,events:t.events}};function _t(){return x.app.dt()}function Nl(){return x.app.fixedDt()}function Ul(){return x.app.restDt()}var ES=new G(-1,-1),TS=new G(0,-1),PS=new G(1,-1),DS=new G(-1,0),zS=new G(0,0),OS=new G(1,0),RS=new G(-1,1),CS=new G(0,1),jS=new G(1,1);function Ei(e){switch(e){case"topleft":return ES;case"top":return TS;case"topright":return PS;case"left":return DS;case"center":return zS;case"right":return OS;case"botleft":return RS;case"bot":return CS;case"botright":return jS;default:return e}}function MS(e){switch(e){case"left":return 0;case"center":return .5;case"right":return 1;default:return 0}}function NS(e){return e.createBuffer(1,1,44100)}var ls=2.5949095,kv=1.70158+1,Av=2*Math.PI/3,Ev=2*Math.PI/4.5,ds={linear:e=>e,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>kv*e*e*e-1.70158*e*e,easeOutBack:e=>1+kv*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((ls+1)*2*e-ls)/2:(Math.pow(2*e-2,2)*((ls+1)*(e*2-2)+ls)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Av),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Av)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Ev))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Ev)/2+1,easeInBounce:e=>1-ds.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?(1-ds.easeOutBounce(1-2*e))/2:(1+ds.easeOutBounce(2*e-1))/2},qo=ds;function US(e,t,n){let i=[],r=t;for(i.push(r);r!==e;){if(r=n.get(r),r==null)return null;i.push(r)}return i.reverse()}function FS(e,t,n){let i=new ny((a,s)=>a.cost<s.cost);i.insert({cost:0,node:t});let r=new Map;r.set(t,t);let o=new Map;for(o.set(t,0);i.length!==0;){let a=i.remove()?.node;if(a===n)break;let s=e.getNeighbours(a);for(let l of s){let d=(o.get(a)||0)+e.getCost(a,l)+e.getHeuristic(l,n);(!o.has(l)||d<o.get(l))&&(o.set(l,d),i.insert({cost:d,node:l}),r.set(l,a))}}return US(t,n,r)}var LS=class{constructor(e,t,n){D(this,"a");D(this,"b");D(this,"polygon");this.a=e,this.b=t,this.polygon=new WeakRef(n)}isLeft(e,t){return(this.b.x-this.a.x)*(t-this.a.y)-(e-this.a.x)*(this.b.y-this.a.y)}get middle(){return this.a.add(this.b).scale(.5)}},qS=class{constructor(e){D(this,"_edges");D(this,"_centroid");D(this,"_id");this._id=e}get id(){return this._id}set edges(e){this._edges=e;let t=0,n=0,i=0;for(let r of this._edges){r.polygon=new WeakRef(this);let o=r.a.x*r.b.y-r.a.y*r.b.x;t+=(r.a.x+r.b.x)*o,n+=(r.a.y+r.b.y)*o,i+=o}i/=2,this._centroid=U(t/(6*i),n/(6*i))}get edges(){return this._edges}get centroid(){return this._centroid}contains(e){let t=!1;for(let n of this.edges)n.b.y>e.y!=n.a.y>e.y&&e.x<(n.a.x-n.b.x)*(e.y-n.b.y)/(n.a.y-n.b.y)+n.b.x&&(t=!t);return t}},BS=class{constructor(){D(this,"_polygons");D(this,"_pointCache");D(this,"_edgeCache");this._polygons=[],this._pointCache={},this._edgeCache={}}_addPoint(e){let t=this._pointCache[`${e.x}_${e.y}`];return t||(t=e.clone(),this._pointCache[`${e.x}_${e.y}`]=t,t)}_addEdge(e){let t=`${e.a.x}_${e.a.y}-${e.b.x}_${e.b.y}`;return this._edgeCache[t]=e,e}_findEdge(e,t){let n=`${e.x}_${e.y}-${t.x}_${t.y}`;return this._edgeCache[n]}_findCommonEdge(e,t){for(let n of e.edges){let i=this._findEdge(n.b,n.a);if(i&&i.polygon.deref().id===t.id)return i}return null}addPolygon(e){let t=new qS(this._polygons.length),n=e.map((i,r)=>new LS(i,e[(r+1)%e.length],t));t.edges=n,this._polygons.push(t);for(let i of t.edges)this._addEdge(i);return t}addRect(e,t){let n=this._addPoint(e),i=this._addPoint(e.add(t.x,0)),r=this._addPoint(e.add(t)),o=this._addPoint(e.add(0,t.y));return this.addPolygon([n,i,r,o])}_getLocation(e){for(let t of this._polygons)if(t.contains(e))return t;return null}getNeighbours(e){let t=[];for(let n of this._polygons[e].edges){let i=this._findEdge(n.b,n.a);if(i){let r=i.polygon.deref();r&&t.push(r.id)}}return t}getCost(e,t){return 1}getHeuristic(e,t){let n=this._polygons[e],i=this._polygons[t],r=n.centroid.x-i.centroid.x,o=n.centroid.y-i.centroid.y;return Math.sqrt(r*r+o*o)}getPath(e,t){return e===void 0||t===void 0?[]:e===t?[e,t]:FS(this,e,t)}getWaypointPath(e,t,n){let i=n?.type||"centroids",r=this._getLocation(e),o=this._getLocation(t);if(r===void 0||o===void 0)return[];let a=this.getPath(r.id,o.id);if(!a)return[];if(i==="edges"){let s=[];for(let l=1;l<a.length;l++){let d=this._polygons[a[l-1]],m=this._polygons[a[l]],v=this._findCommonEdge(d,m);s.push(v.middle.add(m.centroid.sub(v.middle).unit().scale(4)))}return[e,...s,t]}else return[e,...a.slice(1,-1).map(s=>this._polygons[s].centroid),t]}};function No(e){let t=new Rr;return e.pos&&t.translate(e.pos),e.scale&&t.scale(e.scale),e.angle&&t.rotate(e.angle),e.parent?t.mult(e.parent.transform):t}function ZS(e){return new G(e.x/kt()*2-1,-e.y/zt()*2+1)}function Ro(e,t,n,i,r,o=1){i=yt(i%360),r=yt(r%360),r<=i&&(r+=Math.PI*2);let a=[],s=Math.ceil((r-i)/yt(8)*o),l=(r-i)/s,d=U(Math.cos(i),Math.sin(i)),m=U(Math.cos(l),Math.sin(l));for(let v=0;v<=s;v++)a.push(e.add(t*d.x,n*d.y)),d=U(d.x*m.x-d.y*m.y,d.x*m.y+d.y*m.x);return a}function KS(...e){let t=Ye(...e),n=e[3]??1;x.gfx.bgColor=t,x.gfx.bgAlpha=n,x.gfx.ggl.gl.clearColor(t.r/255,t.g/255,t.b/255,n)}function VS(){return x.gfx.bgColor?.clone?.()??null}function ft(...e){if(e[0]===void 0)return;let t=U(...e);t.x===0&&t.y===0||x.gfx.transform.translate(t)}function lr(){x.gfx.transformStack.push(x.gfx.transform.clone())}function GS(e){x.gfx.transform=e.clone()}function Bo(...e){if(e[0]===void 0)return;let t=U(...e);t.x===1&&t.y===1||x.gfx.transform.scale(t)}function ki(e){e&&x.gfx.transform.rotate(e)}function Vt(){x.gfx.transformStack.length>0&&(x.gfx.transform=x.gfx.transformStack.pop())}function dr(){x.gfx.renderer.flush()}function kt(){return x.gfx.width}function zt(){return x.gfx.height}function sy(){return(x.gfx.viewport.width+x.gfx.viewport.height)/(x.gfx.width+x.gfx.height)}function bs(){return U(kt()/2,zt()/2)}var HS=class{constructor(e,t,n,i){D(this,"lastTextureId",0);D(this,"textures",[]);D(this,"bigTextures",[]);D(this,"texturesPosition",new Map);D(this,"canvas");D(this,"c2d");D(this,"x",0);D(this,"y",0);D(this,"curHeight",0);D(this,"gfx");D(this,"padding");this.gfx=e,this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.textures=[gn.fromImage(e,this.canvas)],this.bigTextures=[],this.padding=i;let r=this.canvas.getContext("2d");if(!r)throw new Error("Failed to get 2d context");this.c2d=r}addSingle(e){let t=gn.fromImage(this.gfx,e);return this.bigTextures.push(t),[t,new ct(0,0,1,1),0]}add(e){let t=e.width+this.padding*2,n=e.height+this.padding*2;if(t>this.canvas.width||n>this.canvas.height)return this.addSingle(e);this.x+t>this.canvas.width&&(this.x=0,this.y+=this.curHeight,this.curHeight=0),this.y+n>this.canvas.height&&(this.c2d.clearRect(0,0,this.canvas.width,this.canvas.height),this.textures.push(gn.fromImage(this.gfx,this.canvas)),this.x=0,this.y=0,this.curHeight=0);let i=this.textures[this.textures.length-1],r=new G(this.x+this.padding,this.y+this.padding);return this.x+=t,n>this.curHeight&&(this.curHeight=n),e instanceof ImageData?this.c2d.putImageData(e,r.x,r.y):this.c2d.drawImage(e,r.x,r.y),i.update(this.canvas),this.texturesPosition.set(this.lastTextureId,{position:r,size:new G(e.width,e.height),texture:i}),this.lastTextureId++,[i,new ct(r.x/this.canvas.width,r.y/this.canvas.height,e.width/this.canvas.width,e.height/this.canvas.height),this.lastTextureId-1]}free(){for(let e of this.textures)e.free();for(let e of this.bigTextures)e.free()}};function pr(e){return typeof e!="string"||oy(e)?e:x.assets.urlPrefix+e}var mr=class uy{constructor(t){D(this,"loaded",!1);D(this,"data",null);D(this,"error",null);D(this,"onLoadEvents",new Ft);D(this,"onErrorEvents",new Ft);D(this,"onFinishEvents",new Ft);t.then(n=>{this.loaded=!0,this.data=n,this.onLoadEvents.trigger(n)}).catch(n=>{if(this.error=n,this.onErrorEvents.numListeners()>0)this.onErrorEvents.trigger(n);else throw n}).finally(()=>{this.onFinishEvents.trigger(),this.loaded=!0})}static loaded(t){let n=new uy(Promise.resolve(t));return n.data=t,n.loaded=!0,n}onLoad(t){return this.loaded&&this.data?t(this.data):this.onLoadEvents.add(t),this}onError(t){return this.loaded&&this.error?t(this.error):this.onErrorEvents.add(t),this}onFinish(t){return this.loaded?t():this.onFinishEvents.add(t),this}then(t){return this.onLoad(t)}catch(t){return this.onError(t)}finally(t){return this.onFinish(t)}},Ii=class{constructor(){D(this,"assets",new Map);D(this,"lastUID",0)}add(e,t){let n=e??this.lastUID+++"",i=new mr(t);return this.assets.set(n,i),i}addLoaded(e,t){let n=e??this.lastUID+++"",i=mr.loaded(t);return this.assets.set(n,i),i}get(e){return this.assets.get(e)}progress(){if(this.assets.size===0)return 1;let e=0;return this.assets.forEach(t=>{t.loaded&&e++}),e/this.assets.size}getFailedAssets(){return Array.from(this.assets.keys()).filter(e=>this.assets.get(e).error!==null).map(e=>[e,this.assets.get(e)])}};function od(e){return fetch(e).then(t=>{if(!t.ok)throw new Error(`Failed to fetch "${e}"`);return t})}function Es(e){return od(e).then(t=>t.json())}function WS(e){return od(e).then(t=>t.text())}function JS(e){return od(e).then(t=>t.arrayBuffer())}function YS(e){return e!==void 0&&(x.assets.urlPrefix=e),x.assets.urlPrefix}function XS(e,t){return x.assets.custom.add(e,Es(pr(t)))}function Ts(e){let t=new Image;return t.crossOrigin="anonymous",t.src=e,new Promise((n,i)=>{t.onload=()=>n(t),t.onerror=()=>i(new Error(`Failed to load image from "${e}"`))})}function Gn(){let e=[x.assets.sprites,x.assets.sounds,x.assets.shaders,x.assets.fonts,x.assets.bitmapFonts,x.assets.custom];return e.reduce((t,n)=>t+n.progress(),0)/e.length}function cy(){return[x.assets.sprites,x.assets.sounds,x.assets.shaders,x.assets.fonts,x.assets.bitmapFonts,x.assets.custom].reduce((e,t)=>e.concat(t.getFailedAssets()),[])}function QS(e){return x.assets.custom.get(e)??null}function Fl(e){return x.assets.custom.add(null,e)}var ek=(e,t)=>({urlPrefix:"",sprites:new Ii,fonts:new Ii,bitmapFonts:new Ii,sounds:new Ii,shaders:new Ii,custom:new Ii,music:{},packer:new HS(e,2048,2048,t),loaded:!1}),tk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA1CAYAAADyMeOEAAAAAXNSR0IArs4c6QAAAoVJREFUaIHdm7txwkAQhheGAqACiCHzOKQDQrqgILpwSAeEDBnEUAF0gCMxZ7G72qce/mec2Lpf9+3unaS78wgSNZ8uX5729+d1FNWXUuGmXlBOUUEIMckEpeQJgBu6C+BSFngztBR2vd+ovY+7g+p6LbgaWgJrAeUkDYIUXgXdBBwNi6kpABJwMTQH3AZsXRR8GHTfgEth8E3gjdAUcNewpbTgY85sCMCUuOokozE0YM0YRzM9NGAAXd8+omAF5h4lnmBRvpSnZHyLoLEbaN+aKB9KWv/KWw0tAbbANnlG+UvB2dm77NxxdwgBpjrF/d7rW9cbmpvio2A5z8iAYpVU8pGZlo6/2+MSco2lHfd3rv9jAP038e1xef9o2mjvYb2OqpqKE81028/jeietlSEVO5FRWsxWsJit1G3aFpW8iWe5RwpiCZAk25QvV6nz6fIlynRGuTd5WqpJ4guAlDfVKBK87hXljflgv1ON6fV+4+5gVlA17SfeG0heKqQd4l4jI/wrmaA9N9R4ar+wpHJDZyrrfcH0nB66PqAzPi76pn+faSyJk/vzOorYhGurQrzj/P68jtBMawHaHBIR9xoD5O34dy0qQOSYHvqExq2TpT2nf76+w7y251OYF0CRaU+J920TwLUa6inx6OxE6g80lu2ux7Y2eJLF/rCXE6zEPdnenk9o+4ih9AEdnW2q81HXl5LuU6OTl2fXUhqganbXAGq3g6jJOWV/OnoesO6YqqEB/GdNsjf7uHtwj2DzmRNpp7iOZfm6D9oAxB6Yi1gC4oIYeo4MIPdopEQRB+cAko5J1tW386HpB2Kz1eop4Epdwls/kgZ1sh8gZsEjdcWkr//D8Qu3Z3l5Nl1NtAAAAABJRU5ErkJggg==",yn=class Co{constructor(t,n,i={},r=null){D(this,"tex");D(this,"frames",[new ct(0,0,1,1)]);D(this,"anims",{});D(this,"slice9",null);this.tex=t,n&&(this.frames=n),this.anims=i,this.slice9=r}get width(){return this.tex.width*this.frames[0].w}get height(){return this.tex.height*this.frames[0].h}static from(t,n={}){return typeof t=="string"?Co.fromURL(t,n):Promise.resolve(Co.fromImage(t,n))}static fromImage(t,n={}){let[i,r]=n.singular?x.assets.packer.addSingle(t):x.assets.packer.add(t),o=n.frames?n.frames.map(a=>new ct(r.x+a.x*r.w,r.y+a.y*r.h,a.w*r.w,a.h*r.h)):dy(n.sliceX||1,n.sliceY||1,r.x,r.y,r.w,r.h);return new Co(i,o,n.anims,n.slice9)}static fromURL(t,n={}){return Ts(t).then(i=>Co.fromImage(i,n))}};function fs(e){if(typeof e=="string"){let t=ly(e);if(t)return t;if(Gn()<1)return null;throw new Error(`Sprite not found: ${e}`)}else{if(e instanceof yn)return mr.loaded(e);if(e instanceof mr)return e;throw new Error(`Invalid sprite: ${e}`)}}function ly(e){return x.assets.sprites.get(e)??null}function Uo(e,t,n={sliceX:1,sliceY:1,anims:{}}){return t=pr(t),Array.isArray(t)?t.some(i=>typeof i=="string")?x.assets.sprites.add(e,Promise.all(t.map(i=>typeof i=="string"?Ts(i):Promise.resolve(i))).then(i=>Tv(i,n))):x.assets.sprites.addLoaded(e,Tv(t,n)):typeof t=="string"?x.assets.sprites.add(e,yn.from(t,n)):x.assets.sprites.addLoaded(e,yn.fromImage(t,n))}function dy(e=1,t=1,n=0,i=0,r=1,o=1){let a=[],s=r/e,l=o/t;for(let d=0;d<t;d++)for(let m=0;m<e;m++)a.push(new ct(n+m*s,i+d*l,s,l));return a}function Tv(e,t={}){let n=document.createElement("canvas"),i=e[0].width,r=e[0].height;n.width=i*e.length,n.height=r;let o=n.getContext("2d");if(!o)throw new Error("Failed to create canvas context");e.forEach((s,l)=>{s instanceof ImageData?o.putImageData(s,l*i,0):o.drawImage(s,l*i,0)});let a=o.getImageData(0,0,e.length*i,r);return yn.fromImage(a,{...t,sliceX:e.length,sliceY:1})}function rk(e="bean"){return Uo(e,tk)}function nk(e,t,n){t=pr(t),n=pr(n),typeof t=="string"&&!n&&(n=oS(t)+".json");let i=typeof n=="string"?Es(n):Promise.resolve(n);return x.assets.sprites.add(e,i.then(r=>{let o=r.meta.size,a=r.frames.map(l=>new ct(l.frame.x/o.w,l.frame.y/o.h,l.frame.w/o.w,l.frame.h/o.h)),s={};for(let l of r.meta.frameTags)l.from===l.to?s[l.name]=l.from:s[l.name]={from:l.from,to:l.to,speed:10,loop:!0,pingpong:l.direction==="pingpong"};return yn.from(t,{frames:a,anims:s})}))}var ps=class{constructor(e,t={}){D(this,"fontface");D(this,"filter",Rl);D(this,"outline",null);D(this,"size",64);if(this.fontface=e,this.filter=t.filter??Rl,this.size=t.size??64,this.size>256)throw new Error("Max font size: 256");t.outline&&(this.outline={width:1,color:Ye(0,0,0)},typeof t.outline=="number"?this.outline.width=t.outline:typeof t.outline=="object"&&(t.outline.width&&(this.outline.width=t.outline.width),t.outline.color&&(this.outline.color=t.outline.color)))}};function fy(e){if(!e)return fy(x.globalOpt.font??B$);if(typeof e=="string"){let t=my(e),n=py(e);if(t)return t.data??t;if(n)return n.data??n;if(document.fonts.check(`64px ${e}`))return e;if(Gn()<1)return null;throw new Error(`Font not found: ${e}`)}else if(e instanceof mr)return e.data?e.data:e;return e}function py(e){return x.assets.fonts.get(e)??null}function ik(e,t,n={}){let i=pr(t),r=new FontFace(e,typeof t=="string"?`url(${i})`:i);return document.fonts.add(r),x.assets.fonts.add(e,r.load().catch(o=>{throw new Error(`Failed to load font from "${i}": ${o}`)}).then(o=>new ps(o,n)))}function ok(e,t,n,i){let r=e.width/t,o={},a=i.split("").entries();for(let[s,l]of a)o[l]=new ct(s%r*t,Math.floor(s/r)*n,t,n);return{tex:e,map:o,size:n}}function my(e){return x.assets.bitmapFonts.get(e)??null}function ak(e,t,n,i,r={}){let o=pr(t);return x.assets.bitmapFonts.add(e,Ts(o).then(a=>ok(gn.fromImage(x.gfx.ggl,a,r),n,i,r.chars??Xv)))}function sk(e,t){return t=pr(t),x.assets.sprites.add(e,new Promise(async n=>{let i=typeof t=="string"?await Es(t):t,r=await Promise.all(i.frames.map(Ts)),o=document.createElement("canvas");o.width=i.width,o.height=i.height*i.frames.length;let a=o.getContext("2d");if(!a)throw new Error("Failed to create canvas context");r.forEach((l,d)=>{a.drawImage(l,0,d*i.height)});let s=await Uo(null,o,{sliceY:i.frames.length,anims:i.anims});n(s)}))}var uk=class{constructor(e,t,n,i){D(this,"ctx");D(this,"glProgram");this.ctx=e,e.onDestroy(()=>this.free());let r=e.gl,o=r.createShader(r.VERTEX_SHADER),a=r.createShader(r.FRAGMENT_SHADER);if(!o||!a)throw new Error("Failed to create shader");r.shaderSource(o,t),r.shaderSource(a,n),r.compileShader(o),r.compileShader(a);let s=r.createProgram();if(this.glProgram=s,r.attachShader(s,o),r.attachShader(s,a),i.forEach((l,d)=>r.bindAttribLocation(s,d,l)),r.linkProgram(s),!r.getProgramParameter(s,r.LINK_STATUS)){let l=r.getShaderInfoLog(o);if(l)throw new Error("VERTEX SHADER "+l);let d=r.getShaderInfoLog(a);if(d)throw new Error("FRAGMENT SHADER "+d)}r.deleteShader(o),r.deleteShader(a)}bind(){this.ctx.pushProgram(this.glProgram)}unbind(){this.ctx.popProgram()}send(e){let t=this.ctx.gl;for(let n in e){let i=e[n],r=t.getUniformLocation(this.glProgram,n);if(typeof i=="number")t.uniform1f(r,i);else if(i instanceof Rr)t.uniformMatrix4fv(r,!1,new Float32Array(i.m));else if(i instanceof Le)t.uniform3f(r,i.r,i.g,i.b);else if(i instanceof G)t.uniform2f(r,i.x,i.y);else if(Array.isArray(i)){let o=i[0];tS(i)?t.uniform1fv(r,i):eS(i)?t.uniform2fv(r,i.map(a=>[a.x,a.y]).flat()):Q$(i)&&t.uniform3fv(r,i.map(a=>[a.r,a.g,a.b]).flat())}else throw new Error("Unsupported uniform data type")}}free(){this.ctx.gl.deleteProgram(this.glProgram)}};function ad(e,t=Cl,n=jl){let i=G$.replace("{{user}}",t??Cl),r=H$.replace("{{user}}",n??jl);try{return new uk(e,i,r,td.map(o=>o.name))}catch(o){let a=/(?<type>^\w+) SHADER ERROR: 0:(?<line>\d+): (?<msg>.+)/,s=aS(o).match(a);if(!s?.groups)throw o;let l=Number(s.groups.line)-14,d=s.groups.msg.trim(),m=s.groups.type.toLowerCase();throw new Error(`${m} shader line ${l}: ${d}`)}}function ck(e){if(!e)return x.gfx.defShader;if(typeof e=="string"){let t=hy(e);if(t)return t.data??t;if(Gn()<1)return null;throw new Error(`Shader not found: ${e}`)}else if(e instanceof mr)return e.data?e.data:e;return e}function hy(e){return x.assets.shaders.get(e)??null}function lk(e,t,n){return x.assets.shaders.addLoaded(e,ad(x.gfx.ggl,t,n))}function dk(e,t,n){t=pr(t),n=pr(n);let i=o=>o?WS(o):Promise.resolve(null),r=Promise.all([i(t),i(n)]).then(([o,a])=>ad(x.gfx.ggl,o,a));return x.assets.shaders.add(e,r)}var Zo=class ms{constructor(t){D(this,"buf");this.buf=t}static fromArrayBuffer(t){return new Promise((n,i)=>x.audio.ctx.decodeAudioData(t,n,i)).then(n=>new ms(n))}static fromURL(t){return oy(t)?ms.fromArrayBuffer(nS(t)):JS(t).then(n=>ms.fromArrayBuffer(n))}};function fk(e){if(typeof e=="string"){let t=gy(e);if(t)return t;if(Gn()<1)return null;throw new Error(`Sound not found: ${e}`)}else{if(e instanceof Zo)return mr.loaded(e);if(e instanceof mr)return e;throw new Error(`Invalid sound: ${e}`)}}function gy(e){return x.assets.sounds.get(e)??null}function pk(e,t){return t=pr(t),x.assets.sounds.add(e,typeof t=="string"?Zo.fromURL(t):Zo.fromArrayBuffer(t))}function mk(e,t){let n=pr(t),i=new Audio(n);return i.preload="auto",x.assets.music[e]=n}function vy(e,t){return e=pr(e),Fl(typeof t=="string"?new Promise((n,i)=>{Es(t).then(r=>{vy(e,r).then(n).catch(i)})}):yn.from(e).then(n=>{let i={};for(let r in t){let o=t[r],a=n.frames[0],s=2048*a.w,l=2048*a.h,d=o.frames?o.frames.map(v=>new ct(a.x+(o.x+v.x)/s*a.w,a.y+(o.y+v.y)/l*a.h,v.w/s*a.w,v.h/l*a.h)):dy(o.sliceX||1,o.sliceY||1,a.x+o.x/s*a.w,a.y+o.y/l*a.h,o.width/s*a.w,o.height/l*a.h),m=new yn(n.tex,d,o.anims);x.assets.sprites.addLoaded(r,m),i[r]=m}return i}))}function bn(e,t,n=!1,i,r,o={}){let a=i??x.gfx.defTex,s=r??x.gfx.defShader,l=ck(s);if(!l||l instanceof mr)return;let d=x.gfx.fixed||n?x.gfx.transform:x.game.cam.transform.mult(x.gfx.transform),m=[];for(let v of e){let h=ZS(d.multVec2(v.pos));m.push(h.x,h.y,v.uv.x,v.uv.y,v.color.r/255,v.color.g/255,v.color.b/255,v.opacity)}x.gfx.renderer.push(x.gfx.ggl.gl.TRIANGLES,m,t,l,a,o)}function hn(e){if(!e.pts)throw new Error('drawPolygon() requires property "pts".');let t=e.pts.length;if(!(t<3)){if(lr(),ft(e.pos),Bo(e.scale),ki(e.angle),ft(e.offset),e.fill!==!1){let n=e.color??Le.WHITE,i=e.pts.map((o,a)=>({pos:new G(o.x,o.y),uv:e.uv?e.uv[a]:new G(0,0),color:e.colors&&e.colors[a]?e.colors[a].mult(n):n,opacity:e.opacity??1})),r;e.triangulate?r=Yv(e.pts).map(o=>o.map(a=>e.pts.indexOf(a))).flat():r=[...Array(t-2).keys()].map(o=>[0,o+1,o+2]).flat(),bn(i,e.indices??r,e.fixed,e.uv?e.tex:x.gfx.defTex,e.shader,e.uniform??void 0)}e.outline&&sd({pts:[...e.pts,e.pts[0]],radius:e.radius,width:e.outline.width,color:e.outline.color,join:e.outline.join,uniform:e.uniform,fixed:e.fixed,opacity:e.opacity??e.outline.opacity}),Vt()}}function yy(e){if(e.radiusX===void 0||e.radiusY===void 0)throw new Error('drawEllipse() requires properties "radiusX" and "radiusY".');if(e.radiusX===0||e.radiusY===0)return;let t=e.start??0,n=e.end??360,i=Ei(e.anchor??"center").scale(new G(-e.radiusX,-e.radiusY)),r=Ro(i,e.radiusX,e.radiusY,t,n,e.resolution);r.unshift(i);let o=Object.assign({},e,{pts:r,radius:0,...e.gradient?{colors:[e.gradient[0],...Array(r.length-1).fill(e.gradient[1])]}:{}});if(n-t>=360&&e.outline){e.fill!==!1&&hn(Object.assign({},o,{outline:null})),hn(Object.assign({},o,{pts:r.slice(1),fill:!1}));return}hn(o)}function Ti(e){if(typeof e.radius!="number")throw new Error('drawCircle() requires property "radius".');e.radius!==0&&yy(Object.assign({},e,{radiusX:e.radius,radiusY:e.radius,angle:0}))}function jo(e){let{p1:t,p2:n}=e;if(!t||!n)throw new Error('drawLine() requires properties "p1" and "p2".');let i=e.width||1,r=n.sub(t).unit().normal().scale(i*.5),o=[t.sub(r),t.add(r),n.add(r),n.sub(r)].map(a=>({pos:new G(a.x,a.y),uv:new G(0),color:e.color??Le.WHITE,opacity:e.opacity??1}));bn(o,[0,1,3,1,2,3],e.fixed,x.gfx.defTex,e.shader,e.uniform??void 0)}function hk(e){let t=e.pts,n=[],i=(e.width||1)*.5,r=t[0]===t[t.length-1]||t[0].eq(t[t.length-1]),o=e.pos||U(0,0),a;r?a=t[0].sub(t[t.length-2]):a=t[1].sub(t[0]);let s=a.len(),l=a.normal().scale(-i/s),d,m=t[0];if(!r)switch(e.cap){case"square":{let _=a.scale(-i/s);n.push(m.add(_).add(l)),n.push(m.add(_).sub(l));break}case"round":{let _=Math.max(i,10),E=Math.PI/_,S=l.scale(-1),T=Math.cos(E),Z=Math.sin(E);for(let H=0;H<_;H++)n.push(m),n.push(m.sub(S)),S=U(S.x*T-S.y*Z,S.x*Z+S.y*T)}}for(let _=1;_<t.length;_++){if(m===t[_]||m.eq(t[_]))continue;d=m,m=t[_];let E=m.sub(d),S=E.len(),T=E.normal().scale(-i/S),Z=a.cross(E);if(Math.abs(Z)/(s*S)<.05){n.push(d.add(l)),n.push(d.sub(l)),a.dot(E)<0&&(n.push(d.sub(l)),n.push(d.add(l))),a=E,s=S,l=T;continue}let H=T.sub(l).cross(E)/Z,re=l.add(a.scale(H));Z>0?(n.push(d.add(re)),n.push(d.sub(l)),n.push(d.add(re)),n.push(d.sub(T))):(n.push(d.add(l)),n.push(d.sub(re)),n.push(d.add(T)),n.push(d.sub(re))),a=E,s=S,l=T}if(!r)switch(n.push(m.add(l)),n.push(m.sub(l)),e.cap){case"square":{let _=a.scale(i/s);n.push(m.add(_).add(l)),n.push(m.add(_).sub(l));break}case"round":{let _=Math.max(i,10),E=Math.PI/_,S=l.scale(1),T=Math.cos(E),Z=Math.sin(E);for(let H=0;H<_;H++)S=U(S.x*T-S.y*Z,S.x*Z+S.y*T),n.push(m),n.push(m.sub(S))}}if(n.length<4)return;let v=n.map(_=>({pos:o.add(_),uv:U(),color:e.color||Le.WHITE,opacity:e.opacity??1})),h=[],b=0;for(let _=0;_<n.length-2;_+=2)h[b++]=_+1,h[b++]=_,h[b++]=_+2,h[b++]=_+2,h[b++]=_+3,h[b++]=_+1;r&&(h[b++]=n.length-1,h[b++]=n.length-2,h[b++]=0,h[b++]=0,h[b++]=1,h[b++]=n.length-1),bn(v,h,e.fixed,x.gfx.defTex,e.shader,e.uniform??void 0)}function gk(e){let t=e.pts,n=[],i=(e.width||1)*.5,r=t[0]===t[t.length-1]||t[0].eq(t[t.length-1]),o=e.pos||U(0,0),a;r?a=t[0].sub(t[t.length-2]):a=t[1].sub(t[0]);let s=a.len(),l=a.normal().scale(-i/s),d,m=t[0];if(!r)switch(e.cap){case"square":{let _=a.scale(-i/s);n.push(m.add(_).add(l)),n.push(m.add(_).sub(l));break}case"round":{let _=Math.max(i,10),E=Math.PI/_,S=l.scale(-1),T=Math.cos(E),Z=Math.sin(E);for(let H=0;H<_;H++)n.push(m),n.push(m.sub(S)),S=U(S.x*T-S.y*Z,S.x*Z+S.y*T)}}for(let _=1;_<t.length;_++){if(m===t[_]||m.eq(t[_]))continue;d=m,m=t[_];let E=m.sub(d),S=E.len(),T=E.normal().scale(-i/S),Z=a.cross(E);if(Math.abs(Z)/(s*S)<.05){n.push(d.add(l)),n.push(d.sub(l)),a.dot(E)<0&&(n.push(d.sub(l)),n.push(d.add(l))),a=E,s=S,l=T;continue}let H=T.sub(l).cross(E)/Z,re=l.add(a.scale(H));if(Z>0){let K=d.add(re),z=Math.max(i,10),O=yt(l.angleBetween(T)/z),W=l,se=Math.cos(O),pe=Math.sin(O);for(let be=0;be<z;be++)n.push(K),n.push(d.sub(W)),W=U(W.x*se-W.y*pe,W.x*pe+W.y*se)}else{let K=d.sub(re),z=Math.max(i,10),O=yt(l.angleBetween(T)/z),W=l,se=Math.cos(O),pe=Math.sin(O);for(let be=0;be<z;be++)n.push(d.add(W)),n.push(K),W=U(W.x*se-W.y*pe,W.x*pe+W.y*se)}a=E,s=S,l=T}if(!r)switch(n.push(m.add(l)),n.push(m.sub(l)),e.cap){case"square":{let _=a.scale(i/s);n.push(m.add(_).add(l)),n.push(m.add(_).sub(l));break}case"round":{let _=Math.max(i,10),E=Math.PI/_,S=l.scale(1),T=Math.cos(E),Z=Math.sin(E);for(let H=0;H<_;H++)S=U(S.x*T-S.y*Z,S.x*Z+S.y*T),n.push(m),n.push(m.sub(S))}}if(n.length<4)return;let v=n.map(_=>({pos:o.add(_),uv:U(),color:e.color||Le.WHITE,opacity:e.opacity??1})),h=[],b=0;for(let _=0;_<n.length-2;_+=2)h[b++]=_+1,h[b++]=_,h[b++]=_+2,h[b++]=_+2,h[b++]=_+3,h[b++]=_+1;r&&(h[b++]=n.length-1,h[b++]=n.length-2,h[b++]=0,h[b++]=0,h[b++]=1,h[b++]=n.length-1),bn(v,h,e.fixed,x.gfx.defTex,e.shader,e.uniform??void 0)}function vk(e){let t=e.pts,n=[],i=(e.width||1)*.5,r=t[0]===t[t.length-1]||t[0].eq(t[t.length-1]),o=e.pos||U(0,0),a;r?a=t[0].sub(t[t.length-2]):a=t[1].sub(t[0]);let s=a.len(),l=a.normal().scale(-i/s),d,m=t[0];if(!r)switch(e.cap){case"square":{let _=a.scale(-i/s);n.push(m.add(_).add(l)),n.push(m.add(_).sub(l));break}case"round":{let _=Math.max(i,10),E=Math.PI/_,S=l.scale(-1),T=Math.cos(E),Z=Math.sin(E);for(let H=0;H<_;H++)n.push(m),n.push(m.sub(S)),S=U(S.x*T-S.y*Z,S.x*Z+S.y*T)}}for(let _=1;_<t.length;_++){if(m===t[_]||m.eq(t[_]))continue;d=m,m=t[_];let E=m.sub(d),S=E.len(),T=E.normal().scale(-i/S),Z=a.cross(E);if(Math.abs(Z)/(s*S)<.05){n.push(d.add(l)),n.push(d.sub(l)),a.dot(E)<0&&(n.push(d.sub(l)),n.push(d.add(l))),a=E,s=S,l=T;continue}let H=T.sub(l).cross(E)/Z,re=l.add(a.scale(H));n.push(d.add(re)),n.push(d.sub(re)),a=E,s=S,l=T}if(!r)switch(n.push(m.add(l)),n.push(m.sub(l)),e.cap){case"square":{let _=a.scale(i/s);n.push(m.add(_).add(l)),n.push(m.add(_).sub(l));break}case"round":{let _=Math.max(i,10),E=Math.PI/_,S=l.scale(1),T=Math.cos(E),Z=Math.sin(E);for(let H=0;H<_;H++)S=U(S.x*T-S.y*Z,S.x*Z+S.y*T),n.push(m),n.push(m.sub(S))}}if(n.length<4)return;let v=n.map(_=>({pos:o.add(_),uv:U(),color:e.color||Le.WHITE,opacity:e.opacity??1})),h=[],b=0;for(let _=0;_<n.length-2;_+=2)h[b++]=_+1,h[b++]=_,h[b++]=_+2,h[b++]=_+2,h[b++]=_+3,h[b++]=_+1;r&&(h[b++]=n.length-1,h[b++]=n.length-2,h[b++]=0,h[b++]=0,h[b++]=1,h[b++]=n.length-1),bn(v,h,e.fixed,x.gfx.defTex,e.shader,e.uniform??void 0)}function sd(e){let t=e.pts,n=e.width??1;if(!t)throw new Error('drawLines() requires property "pts".');if(!(t.length<2)){if(t.length>2)switch(e.join){case"bevel":return hk(e);case"round":return gk(e);case"miter":return vk(e)}if(e.radius&&t.length>=3){jo(Object.assign({},e,{p1:t[0],p2:t[1]}));for(let i=1;i<t.length-2;i++){let r=t[i],o=t[i+1];jo(Object.assign({},e,{p1:r,p2:o}))}jo(Object.assign({},e,{p1:t[t.length-2],p2:t[t.length-1]}))}else for(let i=0;i<t.length-1;i++)jo(Object.assign({},e,{p1:t[i],p2:t[i+1]})),e.join!=="none"&&Ti(Object.assign({},e,{pos:t[i],radius:n/2}))}}function by(e,t){let n=t.segments??16,i=[];for(let r=0;r<=n;r++)i.push(e(r/n));sd({pts:i,width:t.width||1,pos:t.pos,color:t.color,opacity:t.opacity})}function yk(e){by(t=>ed(e.pt1,e.pt2,e.pt3,e.pt4,t),e)}var gn=class xy{constructor(t,n,i,r={}){D(this,"ctx");D(this,"src",null);D(this,"glTex");D(this,"width");D(this,"height");this.ctx=t;let o=t.gl,a=t.gl.createTexture();if(!a)throw new Error("Failed to create texture");this.glTex=a,t.onDestroy(()=>this.free()),this.width=n,this.height=i;let s={linear:o.LINEAR,nearest:o.NEAREST}[r.filter??t.opts.texFilter??"nearest"],l={repeat:o.REPEAT,clampToEdge:o.CLAMP_TO_EDGE}[r.wrap??"clampToEdge"];this.bind(),n&&i&&o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n,i,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,l),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,l),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this.unbind()}static fromImage(t,n,i={}){let r=new xy(t,n.width,n.height,i);return r.update(n),r.src=n,r}update(t,n=0,i=0){let r=this.ctx.gl;this.bind(),r.texSubImage2D(r.TEXTURE_2D,0,n,i,r.RGBA,r.UNSIGNED_BYTE,t),this.unbind()}bind(){this.ctx.pushTexture2D(this.glTex)}unbind(){this.ctx.popTexture2D()}free(){this.ctx.gl.deleteTexture(this.glTex)}},xs=class{constructor(e,t,n,i={}){D(this,"ctx");D(this,"tex");D(this,"glFramebuffer");D(this,"glRenderbuffer");this.ctx=e;let r=e.gl;e.onDestroy(()=>this.free()),this.tex=new gn(e,t,n,i);let o=r.createFramebuffer(),a=r.createRenderbuffer();if(!o||!a)throw new Error("Failed to create framebuffer");this.glFramebuffer=o,this.glRenderbuffer=a,this.bind(),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.tex.glTex,0),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,this.glRenderbuffer),this.unbind()}get width(){return this.tex.width}get height(){return this.tex.height}toImageData(){let e=this.ctx.gl,t=new Uint8ClampedArray(this.width*this.height*4);this.bind(),e.readPixels(0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,t),this.unbind();let n=this.width*4,i=new Uint8Array(n);for(let r=0;r<(this.height/2|0);r++){let o=r*n,a=(this.height-r-1)*n;i.set(t.subarray(o,o+n)),t.copyWithin(o,a,a+n),t.set(i,a)}return new ImageData(t,this.width,this.height)}toDataURL(){let e=document.createElement("canvas"),t=e.getContext("2d");if(e.width=this.width,e.height=this.height,!t)throw new Error("Failed to get 2d context");return t.putImageData(this.toImageData(),0,0),e.toDataURL()}clear(){let e=this.ctx.gl;e.clear(e.COLOR_BUFFER_BIT)}draw(e){this.bind(),e(),this.unbind()}bind(){this.ctx.pushFramebuffer(this.glFramebuffer),this.ctx.pushRenderbuffer(this.glRenderbuffer),this.ctx.pushViewport({x:0,y:0,w:this.width,h:this.height})}unbind(){this.ctx.popFramebuffer(),this.ctx.popRenderbuffer(),this.ctx.popViewport()}free(){let e=this.ctx.gl;e.deleteFramebuffer(this.glFramebuffer),e.deleteRenderbuffer(this.glRenderbuffer),this.tex.free()}},bk=class{constructor(e,t,n,i){D(this,"ctx");D(this,"glVBuf");D(this,"glIBuf");D(this,"vqueue",[]);D(this,"iqueue",[]);D(this,"stride");D(this,"maxVertices");D(this,"maxIndices");D(this,"vertexFormat");D(this,"numDraws",0);D(this,"curPrimitive",null);D(this,"curTex",null);D(this,"curShader",null);D(this,"curUniform",{});let r=e.gl;this.vertexFormat=t,this.ctx=e,this.stride=t.reduce((a,s)=>a+s.size,0),this.maxVertices=n,this.maxIndices=i;let o=r.createBuffer();if(!o)throw new Error("Failed to create vertex buffer");this.glVBuf=o,e.pushArrayBuffer(this.glVBuf),r.bufferData(r.ARRAY_BUFFER,n*4,r.DYNAMIC_DRAW),e.popArrayBuffer(),this.glIBuf=r.createBuffer(),e.pushElementArrayBuffer(this.glIBuf),r.bufferData(r.ELEMENT_ARRAY_BUFFER,i*4,r.DYNAMIC_DRAW),e.popElementArrayBuffer()}push(e,t,n,i,r=null,o={}){(e!==this.curPrimitive||r!==this.curTex||i!==this.curShader||!nd(this.curUniform,o)||this.vqueue.length+t.length*this.stride>this.maxVertices||this.iqueue.length+n.length>this.maxIndices)&&this.flush();let a=this.vqueue.length/this.stride;for(let s of t)this.vqueue.push(s);for(let s of n)this.iqueue.push(s+a);this.curPrimitive=e,this.curShader=i,this.curTex=r,this.curUniform=o}flush(){if(!this.curPrimitive||!this.curShader||this.vqueue.length===0||this.iqueue.length===0)return;let e=this.ctx.gl;this.ctx.pushArrayBuffer(this.glVBuf),e.bufferSubData(e.ARRAY_BUFFER,0,new Float32Array(this.vqueue)),this.ctx.pushElementArrayBuffer(this.glIBuf),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,new Uint16Array(this.iqueue)),this.ctx.setVertexFormat(this.vertexFormat),this.curShader.bind(),this.curShader.send(this.curUniform),this.curTex?.bind(),e.drawElements(this.curPrimitive,this.iqueue.length,e.UNSIGNED_SHORT,0),this.curTex?.unbind(),this.curShader.unbind(),this.ctx.popArrayBuffer(),this.ctx.popElementArrayBuffer(),this.vqueue=[],this.iqueue=[],this.numDraws++}free(){let e=this.ctx.gl;e.deleteBuffer(this.glVBuf),e.deleteBuffer(this.glIBuf)}};function Bn(e){let t=[],n=o=>{t.push(o),e(o)},i=()=>{t.pop(),e(r()??null)},r=()=>t[t.length-1];return[n,i,r]}function xk(e,t={}){let n=[];function i(K){n.push(K)}function r(){n.forEach(z=>z());let K=e.getExtension("WEBGL_lose_context");K&&K.loseContext()}let o=null;function a(K){if(nd(K,o))return;o=K;let z=K.reduce((O,W)=>O+W.size,0);K.reduce((O,W,se)=>(e.vertexAttribPointer(se,W.size,e.FLOAT,!1,z*4,O),e.enableVertexAttribArray(se),O+W.size*4),0)}let[s,l]=Bn(K=>e.bindTexture(e.TEXTURE_2D,K)),[d,m]=Bn(K=>e.bindBuffer(e.ARRAY_BUFFER,K)),[v,h]=Bn(K=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,K)),[b,_]=Bn(K=>e.bindFramebuffer(e.FRAMEBUFFER,K)),[E,S]=Bn(K=>e.bindRenderbuffer(e.RENDERBUFFER,K)),[T,Z]=Bn(K=>{if(!K)return;let{x:z,y:O,w:W,h:se}=K;e.viewport(z,O,W,se)}),[H,re]=Bn(K=>e.useProgram(K));return T({x:0,y:0,w:e.drawingBufferWidth,h:e.drawingBufferHeight}),{gl:e,opts:t,onDestroy:i,destroy:r,pushTexture2D:s,popTexture2D:l,pushArrayBuffer:d,popArrayBuffer:m,pushElementArrayBuffer:v,popElementArrayBuffer:h,pushFramebuffer:b,popFramebuffer:_,pushRenderbuffer:E,popRenderbuffer:S,pushViewport:T,popViewport:Z,pushProgram:H,popProgram:re,setVertexFormat:a}}var El={};function Pv(e,t){if(t.override){Object.assign(e,t);return}t.pos&&(e.pos=e.pos.add(t.pos)),t.scale&&(e.scale=e.scale.scale(U(t.scale))),t.angle&&(e.angle+=t.angle),t.color&&e.ch.length===1&&(e.color=e.color.mult(t.color)),t.opacity!=null&&(e.opacity*=t.opacity)}function Ll(e){let t={},n="",i=[],r=String(e),o=a=>{i.length>0&&(t[n.length]=i.slice()),n+=a};for(;r!=="";){if(r[0]==="\\"){if(r.length===1)throw new Error("Styled text error: \\ at end of string");o(r[1]),r=r.slice(2);continue}if(r[0]==="["){let a=/^\[(\/)?(\w+?)\]/.exec(r);if(!a){o(r[0]),r=r.slice(1);continue}let[s,l,d]=a;if(l!==void 0){let m=i.pop();if(m!==d)throw m!==void 0?new Error(`Styled text error: mismatched tags. Expected [/${m}], got [/${d}]`):new Error(`Styled text error: stray end tag [/${d}]`)}else i.push(d);r=r.slice(s.length);continue}o(r[0]),r=r.slice(1)}if(i.length>0)throw new Error(`Styled text error: unclosed tags ${i}`);return{charStyleMap:t,text:n}}function Hn(e){if(e.text===void 0)throw new Error('formatText() requires property "text".');let t=fy(e.font);if(!e.text||e.text===""||t instanceof mr||!t)return{width:0,height:0,chars:[],opt:e,renderedText:""};let{charStyleMap:n,text:i}=Ll(e.text+""),r=cS(i);if(t instanceof ps||typeof t=="string"){let H=t instanceof ps?t.fontface.family:t,re=t instanceof ps?{outline:t.outline,filter:t.filter}:{outline:null,filter:Rl},K=El[H]??{font:{tex:new gn(x.gfx.ggl,2048,2048,{filter:re.filter}),map:{},size:64},cursor:new G(0),maxHeight:0,outline:re.outline};El[H]||(El[H]=K),t=K.font;for(let z of r)if(!K.font.map[z]){let O=x.fontCacheC2d;if(!O)throw new Error("fontCacheC2d is not defined.");if(!x.fontCacheCanvas)throw new Error("fontCacheCanvas is not defined.");O.clearRect(0,0,x.fontCacheCanvas.width,x.fontCacheCanvas.height),O.font=`${t.size}px ${H}`,O.textBaseline="top",O.textAlign="left",O.fillStyle="#ffffff";let W=O.measureText(z),se=Math.ceil(W.width);if(!se)continue;let pe=Math.ceil(Math.abs(W.actualBoundingBoxAscent))+Math.ceil(Math.abs(W.actualBoundingBoxDescent));K.outline&&K.outline.width&&K.outline.color&&(O.lineJoin="round",O.lineWidth=K.outline.width*2,O.strokeStyle=K.outline.color.toHex(),O.strokeText(z,K.outline.width,K.outline.width),se+=K.outline.width*2,pe+=K.outline.width*3),O.fillText(z,K.outline?.width??0,K.outline?.width??0);let be=O.getImageData(0,0,se,pe);if(K.cursor.x+se>2048&&(K.cursor.x=0,K.cursor.y+=K.maxHeight,K.maxHeight=0,K.cursor.y>2048))throw new Error("Font atlas exceeds character limit");t.tex.update(be,K.cursor.x,K.cursor.y),t.map[z]=new ct(K.cursor.x,K.cursor.y,se,pe),K.cursor.x+=se+1,K.maxHeight=Math.max(K.maxHeight,pe)}}let o=e.size||t.size,a=U(e.scale??1).scale(o/t.size),s=e.lineSpacing??0,l=e.letterSpacing??0,d=0,m=0,v=0,h=[],b=[],_=0,E=null,S=0,T;for(;_<r.length;){let H=r[_];if(H===`
`)v+=o+s,h.push({width:d-l,chars:b}),E=null,S=0,d=0,b=[],T=void 0;else{let re=t.map[H];if(re){let K=re.w*a.x;e.width&&d+K>e.width&&(v+=o+s,E!=null&&(_-=b.length-E,H=r[_],re=t.map[H],K=re.w*a.x,b=b.slice(0,E-1),d=S),E=null,S=0,h.push({width:d-l,chars:b}),d=T??0,b=[]),b.push({tex:t.tex,width:re.w,height:re.h,quad:new ct(re.x/t.tex.width,re.y/t.tex.height,re.w/t.tex.width,re.h/t.tex.height),ch:H,pos:new G(d,v),opacity:e.opacity??1,color:e.color??Le.WHITE,scale:U(a),angle:0}),H===" "&&(E=b.length,S=d),e.indentAll&&T===void 0&&/\S/.test(H)&&(T=d),d+=K,m=Math.max(m,d),d+=l}}_++}h.push({width:d-l,chars:b}),v+=o,e.width&&(m=e.width);let Z=[];for(let H=0;H<h.length;H++){let re=(m-h[H].width)*MS(e.align??"left");for(let K of h[H].chars){let z=t.map[K.ch],O=Z.length+H;if(K.pos=K.pos.add(re,0).add(z.w*a.x*.5,z.h*a.y*.5),e.transform){let W=typeof e.transform=="function"?e.transform(O,K.ch):e.transform;W&&Pv(K,W)}if(n[O]){let W=n[O];for(let se of W){let pe=e.styles?.[se],be=typeof pe=="function"?pe(O,K.ch):pe;be&&Pv(K,be)}}Z.push(K)}}return{width:m,height:v,chars:Z,opt:e,renderedText:i}}function Ko(e){if(e.width===void 0||e.height===void 0)throw new Error('drawUVQuad() requires property "width" and "height".');if(e.width<=0||e.height<=0)return;let t=e.width,n=e.height,i=Ei(e.anchor||As).scale(new G(t,n).scale(-.5)),r=e.quad||new ct(0,0,1,1),o=e.color||Ye(255,255,255),a=e.opacity??1,s=e.tex?.1/e.tex.width:0,l=e.tex?.1/e.tex.height:0,d=r.x+s,m=r.y+l,v=r.w-s*2,h=r.h-l*2;lr(),ft(e.pos),ki(e.angle),Bo(e.scale),ft(i),bn([{pos:new G(-t/2,n/2),uv:new G(e.flipX?d+v:d,e.flipY?m:m+h),color:o,opacity:a},{pos:new G(-t/2,-n/2),uv:new G(e.flipX?d+v:d,e.flipY?m+h:m),color:o,opacity:a},{pos:new G(t/2,-n/2),uv:new G(e.flipX?d:d+v,e.flipY?m+h:m),color:o,opacity:a},{pos:new G(t/2,n/2),uv:new G(e.flipX?d:d+v,e.flipY?m:m+h),color:o,opacity:a}],[0,1,3,1,2,3],e.fixed,e.tex,e.shader,e.uniform??void 0),Vt()}function Wn(e){lr(),ft(e.opt.pos),ki(e.opt.angle),ft(Ei(e.opt.anchor??"topleft").add(1,1).scale(e.width,e.height).scale(-.5)),e.chars.forEach(t=>{Ko({tex:t.tex,width:t.width,height:t.height,pos:t.pos,scale:t.scale,angle:t.angle,color:t.color,opacity:t.opacity,quad:t.quad,anchor:"center",uniform:e.opt.uniform,shader:e.opt.shader,fixed:e.opt.fixed})}),Vt()}function fr(e){if(e.width===void 0||e.height===void 0)throw new Error('drawRect() requires property "width" and "height".');if(e.width<=0||e.height<=0)return;let t=e.width,n=e.height,i=Ei(e.anchor||As).add(1,1).scale(new G(t,n).scale(-.5)),r=[new G(0,0),new G(t,0),new G(t,n),new G(0,n)];if(e.radius){let o=Math.min(t,n)/2,a=Array.isArray(e.radius)?e.radius.map(s=>Math.min(o,s)):new Array(4).fill(Math.min(o,e.radius));r=[new G(a[0],0),...a[1]?Ro(new G(t-a[1],a[1]),a[1],a[1],270,360):[U(t,0)],...a[2]?Ro(new G(t-a[2],n-a[2]),a[2],a[2],0,90):[U(t,n)],...a[3]?Ro(new G(a[3],n-a[3]),a[3],a[3],90,180):[U(0,n)],...a[0]?Ro(new G(a[0],a[0]),a[0],a[0],180,270):[]]}hn(Object.assign({},e,{offset:i,pts:r,...e.gradient?{colors:e.horizontal?[e.gradient[0],e.gradient[1],e.gradient[1],e.gradient[0]]:[e.gradient[0],e.gradient[0],e.gradient[1],e.gradient[1]]}:{}}))}function mn(e){dr();let t=x.gfx.width,n=x.gfx.height;x.gfx.width=x.gfx.viewport.width,x.gfx.height=x.gfx.viewport.height,e(),dr(),x.gfx.width=t,x.gfx.height=n}function Dv(e,t){mn(()=>{let n=U(8);lr(),ft(e);let i=Hn({text:t,font:ys,size:16,pos:n,color:Ye(255,255,255),fixed:!0}),r=i.width+n.x*2,o=i.height+n.x*2;e.x+r>=kt()&&ft(U(-r,0)),e.y+o>=zt()&&ft(U(0,-o)),fr({width:r,height:o,color:Ye(0,0,0),radius:4,opacity:.8,fixed:!0}),Wn(i),Vt()})}function wy(e){if(!e.p1||!e.p2||!e.p3)throw new Error('drawTriangle() requires properties "p1", "p2" and "p3".');return hn(Object.assign({},e,{pts:[e.p1,e.p2,e.p3]}))}function wk(){if(x.debug.inspect){let e=null;for(let t of x.game.root.get("*",{recursive:!0}))if(t.has("area")&&t.isHovering()){e=t;break}if(x.game.root.drawInspect(),e){let t=[],n=e.inspect();for(let i in n)n[i]?t.push(`${n[i]}`):t.push(`${i}`);Dv(wS(x.k.mousePos()),t.join(`
`))}Dv(U(8),`FPS: ${x.debug.fps()}`)}x.debug.paused&&mn(()=>{lr(),ft(kt(),0),ft(-8,8);let e=32;fr({width:e,height:e,anchor:"topright",color:Ye(0,0,0),opacity:.8,radius:4,fixed:!0});for(let t=1;t<=2;t++)fr({width:4,height:e*.6,anchor:"center",pos:U(-e/3*t,e*.5),color:Ye(255,255,255),radius:2,fixed:!0});Vt()}),x.debug.timeScale!==1&&mn(()=>{lr(),ft(kt(),zt()),ft(-8,-8);let e=8,t=Hn({text:x.debug.timeScale.toFixed(1),font:ys,size:16,color:Ye(255,255,255),pos:U(-e),anchor:"botright",fixed:!0});fr({width:t.width+e*2+e*4,height:t.height+e*2,anchor:"botright",color:Ye(0,0,0),opacity:.8,radius:4,fixed:!0});for(let n=0;n<2;n++){let i=x.debug.timeScale<1;wy({p1:U(-t.width-e*(i?2:3.5),-e),p2:U(-t.width-e*(i?2:3.5),-e-t.height),p3:U(-t.width-e*(i?3.5:2),-e-t.height/2),pos:U(-n*e*1+(i?-e*.5:0),0),color:Ye(255,255,255),fixed:!0})}Wn(t),Vt()}),x.debug.curRecording&&mn(()=>{lr(),ft(0,zt()),ft(24,-24),Ti({radius:12,color:Ye(255,0,0),opacity:Cv(0,1,x.app.time()*4),fixed:!0}),Vt()}),x.debug.showLog&&x.game.logs.length>0&&mn(()=>{lr(),ft(0,zt()),ft(8,-8);let e=8,t=[];for(let i of x.game.logs){let r="",o=i.msg instanceof Error?"error":"info";r+=`[time]${i.time.toFixed(2)}[/time]`,r+=" ",r+=`[${o}]${ql(i.msg)}[/${o}]`,t.push(r)}x.game.logs=x.game.logs.filter(i=>x.app.time()-i.time<(x.globalOpt.logTime||4));let n=Hn({text:t.join(`
`),font:ys,pos:U(e,-e),anchor:"botleft",size:16,width:kt()*.6,lineSpacing:e/2,fixed:!0,styles:{time:{color:Ye(127,127,127)},info:{color:Ye(255,255,255)},error:{color:Ye(255,0,127)}}});fr({width:n.width+e*2,height:n.height+e*2,anchor:"botleft",color:Ye(0,0,0),radius:4,opacity:.8,fixed:!0}),Wn(n),Vt()})}function ql(e,t=!1,n=new Set){if(n.has(e))return"<recursive>";var i="",r;return t&&typeof e=="string"&&(e=JSON.stringify(e)),Array.isArray(e)&&(i=["[",e.map(o=>ql(o,!0,n.union(new Set([e])))).join(", "),"]"].join(""),e=i),e===null?"null":(typeof e=="object"&&e.toString===Object.prototype.toString&&(e.constructor!==Object&&(i+=e.constructor.name+" "),i+=["{",(r=Object.getOwnPropertyNames(e).map(o=>`${/^\w+$/.test(o)?o:JSON.stringify(o)}: ${ql(e[o],!0,n.union(new Set([e])))}`).join(", "))?` ${r} `:"","}"].join(""),e=i),String(e).replaceAll(/(?<!\\)\[/g,"\\["))}function _k(){let e=x.game.cam,t=G.fromAngle(wt(0,360)).scale(e.shake);e.shake=Gt(e.shake,0,5*_t()),e.transform=new Rr().translate(bs()).scale(e.scale).rotate(e.angle).translate((e.pos??bs()).scale(-1).add(t)),x.game.root.draw(),dr()}function Ik(){let e=Gn();x.game.events.numListeners("loading")>0?x.game.events.trigger("loading",e):mn(()=>{let t=kt()/2,n=24,i=U(kt()/2,zt()/2).sub(U(t/2,n/2));fr({pos:U(0),width:kt(),height:zt(),color:Ye(0,0,0)}),fr({pos:i,width:t,height:n,fill:!1,outline:{width:4}}),fr({pos:i,width:t*e,height:n})})}function _y(e,t,n){let i=x.gfx.ggl.gl;dr(),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST),i.stencilFunc(i.NEVER,1,255),i.stencilOp(i.REPLACE,i.REPLACE,i.REPLACE),t(),dr(),i.stencilFunc(n,1,255),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),e(),dr(),i.disable(i.STENCIL_TEST)}function $k(e,t){let n=x.gfx.ggl.gl;_y(e,t,n.EQUAL)}function ws(e){if(!e.tex)throw new Error('drawTexture() requires property "tex".');let t=e.quad??new ct(0,0,1,1),n=e.tex.width*t.w,i=e.tex.height*t.h,r=new G(1);if(e.tiled){let o=Ei(e.anchor||As),a=(e.pos?.x||0)-(o.x+1)*.5*(e.width||n),s=(e.pos?.y||0)-(o.y+1)*.5*(e.height||i),l=(e.width||n)/n,d=(e.height||i)/i,m=Math.floor(l),v=Math.floor(d),h=l-m,b=d-v,_=(m+h?1:0)*(v+b?1:0),E=new Array(_*6),S=new Array(_*4),T=0,Z=(H,re,K,z,O)=>{E[T*6+0]=T*4+0,E[T*6+1]=T*4+1,E[T*6+2]=T*4+3,E[T*6+3]=T*4+1,E[T*6+4]=T*4+2,E[T*6+5]=T*4+3,S[T*4+0]={pos:new G(H-o.x,re-o.y),uv:new G(O.x,O.y),color:e.color||Le.WHITE,opacity:e.opacity||1},S[T*4+1]={pos:new G(H+K-o.x,re-o.y),uv:new G(O.x+O.w,O.y),color:e.color||Le.WHITE,opacity:e.opacity||1},S[T*4+2]={pos:new G(H+K-o.x,re+z-o.y),uv:new G(O.x+O.w,O.y+O.h),color:e.color||Le.WHITE,opacity:e.opacity||1},S[T*4+3]={pos:new G(H-o.x,re+z-o.y),uv:new G(O.x,O.y+O.h),color:e.color||Le.WHITE,opacity:e.opacity||1},T++};for(let H=0;H<v;H++){for(let re=0;re<m;re++)Z(re*n,H*i,n,i,t);h&&Z(m*n,H*i,n*h,i,new ct(t.x,t.y,t.w*h,t.h))}if(b){for(let H=0;H<m;H++)Z(H*n,v*i,n,i*b,new ct(t.x,t.y,t.w,t.h*b));h&&Z(m*n,v*i,n*h,i*b,new ct(t.x,t.y,t.w*h,t.h*b))}bn(S,E,e.fixed,e.tex,e.shader,e.uniform??void 0)}else e.width&&e.height?(r.x=e.width/n,r.y=e.height/i):e.width?(r.x=e.width/n,r.y=r.x):e.height&&(r.y=e.height/i,r.x=r.y),Ko(Object.assign({},e,{scale:r.scale(e.scale||new G(1)),tex:e.tex,quad:t,width:n,height:i}))}function Sk(e){if(!e.sprite)throw new Error('drawSprite() requires property "sprite"');let t=fs(e.sprite);if(!t||!t.data)return;let n=t.data.frames[e.frame??0];if(!n)throw new Error(`Frame not found: ${e.frame??0}`);ws(Object.assign({},e,{tex:t.data.tex,quad:n.scale(e.quad??new ct(0,0,1,1))}))}function kk(e,t){let n=x.gfx.ggl.gl;_y(e,t,n.NOTEQUAL)}function zv(e){Wn(Hn(e))}var Ak=(e,t)=>{let n=ad(t,Cl,jl),i=e.pixelDensity??1,r=e.scale??1,{gl:o}=t,a=gn.fromImage(t,new ImageData(new Uint8ClampedArray([255,255,255,255]),1,1)),s=e.width&&e.height?new xs(t,e.width*i*r,e.height*i*r):new xs(t,o.drawingBufferWidth,o.drawingBufferHeight),l=null,d=1;e.background&&(typeof e.background=="string"?l=Ye(e.background):(l=Ye(...e.background),d=e.background[3]??1),o.clearColor(l.r/255,l.g/255,l.b/255,d??1)),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA);let m=new bk(t,td,K$,V$),v=gn.fromImage(t,new ImageData(new Uint8ClampedArray([128,128,128,255,190,190,190,255,190,190,190,255,128,128,128,255]),2,2),{wrap:"repeat",filter:"nearest"});return{lastDrawCalls:0,ggl:t,defShader:n,defTex:a,frameBuffer:s,postShader:null,postShaderUniform:null,renderer:m,transform:new Rr,transformStack:[],bgTex:v,bgColor:l,bgAlpha:d,width:e.width??o.drawingBufferWidth/i/r,height:e.height??o.drawingBufferHeight/i/r,viewport:{x:0,y:0,width:o.drawingBufferWidth,height:o.drawingBufferHeight,scale:1},fixed:!1}};function Kn(e){return e.fixed?!0:e.parent?Kn(e.parent):!1}function Jn(e){return{color:e.color,opacity:e.opacity,anchor:e.anchor,outline:e.outline,shader:e.shader,uniform:e.uniform}}function Ek(e,t={}){return{id:"circle",radius:e,draw(){Ti(Object.assign(Jn(this),{radius:this.radius,fill:t.fill}))},renderArea(){return new at(new G(this.anchor?0:-this.radius),this.radius*2,this.radius*2)},inspect(){return`radius: ${Math.ceil(this.radius)}`}}}function Iy(...e){return{id:"color",color:Ye(...e),inspect(){return`color: ${this.color.toString()}`}}}function Tk(e){return{add(){this.canvas=e}}}function Pk(e=1){let t,n=0,i=!1;return{require:["opacity"],add(){t=this.opacity,this.opacity=0},update(){i||(n+=_t(),this.opacity=zr(n,0,e,0,t),n>=e&&(this.opacity=t,i=!0))}}}function Dk(e="intersect"){return{id:"mask",mask:e}}function $y(e){return{id:"opacity",opacity:e??1,fadeIn(t=1,n=x.k.easings.linear){return x.game.root.tween(0,this.opacity,t,i=>this.opacity=i,n)},fadeOut(t=1,n=x.k.easings.linear){return x.game.root.tween(this.opacity,0,t,i=>this.opacity=i,n)},inspect(){return`opacity: ${Ml(this.opacity,1)}`}}}function zk(e=1,t=Ye(0,0,0),n=1,i="miter",r=10,o="butt"){return{id:"outline",outline:{width:e,color:t,opacity:n,join:i,miterLimit:r,cap:o},inspect(){return`outline: ${this.outline.width}px, ${this.outline.color}`}}}var Ok=class{constructor(){D(this,"pos",U(0));D(this,"vel",U(0));D(this,"acc",U(0));D(this,"angle",0);D(this,"angularVelocity",0);D(this,"damping",0);D(this,"t");D(this,"lt",null);D(this,"gc");this.t=0,this.gc=!0}get progress(){return this.lt?this.t/this.lt:this.t}};function Rk(e,t){let n=t.lifetime,i=[],r=e.colors||[Le.WHITE],o=e.opacities||[1],a=e.quads||[new ct(0,0,1,1)],s=e.scales||[1],l=e.lifeTime,d=t.direction,m=t.spread,v=e.speed||[0,0],h=e.angle||[0,0],b=e.angularVelocity||[0,0],_=e.acceleration||[U(0),U(0)],E=e.damping||[0,0],S=[],T=new Array(e.max),Z=0,H=0;for(let z=0;z<e.max;z++){S[z*6+0]=z*4+0,S[z*6+1]=z*4+1,S[z*6+2]=z*4+3,S[z*6+3]=z*4+1,S[z*6+4]=z*4+2,S[z*6+5]=z*4+3;for(let O=0;O<4;O++)T[z*4+O]={pos:new G(0,0),uv:new G(0,0),color:Ye(255,255,255),opacity:1};i[z]=new Ok}let re=new Ft;function K(z=0){for(;z<e.max;){if(i[z].gc)return z;z++}return null}return{id:"particles",emit(z){let O=0;for(let W=0;W<z;W++){if(O=K(O),O==null)return;let se=wt(d-m,d+m),pe=G.fromAngle(se).scale(wt(v[0],v[1])),be=wt(h[0],h[1]),$e=wt(b[0],b[1]),Me=U(wt(_[0].x,_[1].x),wt(_[0].y,_[1].y)),je=wt(E[0],E[1]),Ue=l?wt(l[0],l[1]):null,Pe=t.shape?t.shape.random():U(),_e=i[O];_e.lt=Ue,_e.pos=Pe,_e.vel=pe,_e.acc=Me,_e.angle=be,_e.angularVelocity=$e,_e.damping=je,_e.angularVelocity=$e,_e.gc=!1}Z+=z},update(){if(n!==void 0&&n<=0)return;let z=_t();for(let O of i)if(!O.gc){if(O.t+=z,O.lt&&O.t>=O.lt){O.gc=!0,Z--;continue}O.vel=O.vel.add(O.acc.scale(z)).scale(1-O.damping*z),O.pos=O.pos.add(O.vel.scale(z)),O.angle+=O.angularVelocity*z}for(n!==void 0&&(n-=z,n<=0&&re.trigger()),H+=z;Z<e.max&&t.rate&&H>t.rate;)this.emit(1),Z++,H-=t.rate},draw(){if(!(n!==void 0&&n<=0)){for(let z=0;z<i.length;z++){let O=i[z];if(O.gc)continue;let W=O.progress,se=Math.floor(O.progress*r.length),pe=se<r.length-1?Gt(r[se],r[se+1],zr(W,se/r.length,(se+1)/r.length,0,1)):r[se],be=Math.floor(O.progress*o.length),$e=be<o.length-1?Gt(o[be],o[be+1],zr(W,be/o.length,(be+1)/o.length,0,1)):o[be],Me=Math.floor(O.progress*a.length),je=a[Me],Ue=Math.floor(O.progress*s.length),Pe=s[Ue],_e=Math.cos(O.angle*Math.PI/180),Ge=Math.sin(O.angle*Math.PI/180),Fe=(e.texture?e.texture.width:10)*je.w/2,Je=(e.texture?e.texture.height:10)*je.h/2,pt=z*4,ke=T[pt];ke.pos.x=O.pos.x+-Fe*Pe*_e- -Je*Pe*Ge,ke.pos.y=O.pos.y+-Fe*Pe*Ge+-Je*Pe*_e,ke.uv.x=je.x,ke.uv.y=je.y,ke.color.r=pe.r,ke.color.g=pe.g,ke.color.b=pe.b,ke.opacity=$e,ke=T[pt+1],ke.pos.x=O.pos.x+Fe*Pe*_e- -Je*Pe*Ge,ke.pos.y=O.pos.y+Fe*Pe*Ge+-Je*Pe*_e,ke.uv.x=je.x+je.w,ke.uv.y=je.y,ke.color.r=pe.r,ke.color.g=pe.g,ke.color.b=pe.b,ke.opacity=$e,ke=T[pt+2],ke.pos.x=O.pos.x+Fe*Pe*_e-Je*Pe*Ge,ke.pos.y=O.pos.y+Fe*Pe*Ge+Je*Pe*_e,ke.uv.x=je.x+je.w,ke.uv.y=je.y+je.h,ke.color.r=pe.r,ke.color.g=pe.g,ke.color.b=pe.b,ke.opacity=$e,ke=T[pt+3],ke.pos.x=O.pos.x+-Fe*Pe*_e-Je*Pe*Ge,ke.pos.y=O.pos.y+-Fe*Pe*Ge+Je*Pe*_e,ke.uv.x=je.x,ke.uv.y=je.y+je.h,ke.color.r=pe.r,ke.color.g=pe.g,ke.color.b=pe.b,ke.opacity=$e}bn(T,S,this.fixed,e.texture,this.shader,this.uniform)}},onEnd(z){return re.add(z)},inspect(){return`count: ${Z}/${e.max}`}}}function Ck(e,t={}){if(e.length<3)throw new Error(`Polygon's need more than two points, ${e.length} points provided`);return{id:"polygon",pts:e,colors:t.colors,uv:t.uv,tex:t.tex,radius:t.radius,draw(){hn(Object.assign(Jn(this),{pts:this.pts,colors:this.colors,uv:this.uv,tex:this.tex,radius:this.radius,fill:t.fill,triangulate:t.triangulate}))},renderArea(){return new Lt(this.pts)},inspect(){return`polygon: ${this.pts.map(n=>`[${n.x},${n.y}]`).join(",")}`}}}function Sy(e,t,n){let i;return x.game.root.get("area").forEach(r=>{if(n&&n.some(a=>r.is(a)))return;let o=r.worldArea().raycast(e,t);o&&(i?o.fraction<i.fraction&&(i=o,i.object=r):(i=o,i.object=r))}),i}function ky(e,t,n={}){return{id:"rect",width:e,height:t,radius:n.radius||0,draw(){fr(Object.assign(Jn(this),{width:this.width,height:this.height,radius:this.radius,fill:n.fill}))},renderArea(){return new at(U(0),this.width,this.height)},inspect(){return`rect: (${Math.ceil(this.width)}w, ${Math.ceil(this.height)}h)`}}}function jk(e,t){return{id:"shader",shader:e,...typeof t=="function"?{uniform:t(),update(){this.uniform=t()}}:{uniform:t},inspect(){return`shader: ${e}`}}}function Mk(e,t){if(!t.tileWidth||!t.tileHeight)throw new Error("Must provide tileWidth and tileHeight.");let n=x.game.root.add([_s(t.pos??U(0))]),i=e.length,r=0,o=null,a=null,s=null,l=null,d=z=>z.x+z.y*r,m=z=>U(Math.floor(z%r),Math.floor(z/r)),v=()=>{o=[];for(let z of n.children)h(z)},h=z=>{let O=d(z.tilePos);o[O]?o[O].push(z):o[O]=[z]},b=z=>{let O=d(z.tilePos);if(o[O]){let W=o[O].indexOf(z);W>=0&&o[O].splice(W,1)}},_=()=>{let z=!1;for(let O of n.children){let W=n.pos2Tile(O.pos);(O.tilePos.x!=W.x||O.tilePos.y!=W.y)&&(z=!0,b(O),O.tilePos.x=W.x,O.tilePos.y=W.y,h(O))}z&&n.trigger("spatialMapChanged")},E=()=>{let z=n.getSpatialMap(),O=n.numRows()*n.numColumns();a?a.length=O:a=new Array(O),a.fill(1,0,O);for(let W=0;W<z.length;W++){let se=z[W];if(se){let pe=0;for(let be of se)if(be.isObstacle){pe=1/0;break}else pe+=be.cost;a[W]=pe||1}}},S=()=>{let z=n.getSpatialMap(),O=n.numRows()*n.numColumns();s?s.length=O:s=new Array(O),s.fill(15,0,O);for(let W=0;W<z.length;W++){let se=z[W];if(se){let pe=se.length,be=15;for(let $e=0;$e<pe;$e++)be|=se[$e].edgeMask;s[W]=be}}},T=()=>{let z=n.numRows()*n.numColumns(),O=(se,pe)=>{let be=[];for(be.push(se);be.length>0;){let $e=be.pop();re($e).forEach(Me=>{l[Me]<0&&(l[Me]=pe,be.push(Me))})}};l?l.length=z:l=new Array(z),l.fill(-1,0,z);let W=0;for(let se=0;se<a.length;se++){if(l[se]>=0){W++;continue}O(se,W),W++}},Z=(z,O)=>a[O],H=(z,O)=>{let W=m(z),se=m(O);return W.dist(se)},re=(z,O)=>{let W=[],se=Math.floor(z%r),pe=se>0&&s[z]&1&&a[z-1]!==1/0,be=z>=r&&s[z]&2&&a[z-r]!==1/0,$e=se<r-1&&s[z]&4&&a[z+1]!==1/0,Me=z<r*i-r-1&&s[z]&8&&a[z+r]!==1/0;return O?(pe&&(be&&W.push(z-r-1),W.push(z-1),Me&&W.push(z+r-1)),be&&W.push(z-r),$e&&(be&&W.push(z-r+1),W.push(z+1),Me&&W.push(z+r+1)),Me&&W.push(z+r)):(pe&&W.push(z-1),be&&W.push(z-r),$e&&W.push(z+1),Me&&W.push(z+r)),W},K={id:"level",tileWidth(){return t.tileWidth},tileHeight(){return t.tileHeight},spawn(z,...O){let W=U(...O),se=(()=>{if(typeof z=="string"){if(t.tiles[z]){if(typeof t.tiles[z]!="function")throw new Error("Level symbol def must be a function returning a component list");return t.tiles[z](W)}else if(t.wildcardTile)return t.wildcardTile(z,W)}else{if(Array.isArray(z))return z;throw new Error("Expected a symbol or a component list")}})();if(!se)return null;let pe=!1,be=!1;for(let Me of se)Me.id==="tile"&&(be=!0),Me.id==="pos"&&(pe=!0);pe||se.push(_s(this.tile2Pos(W))),be||se.push(Zy());let $e=n.add(se);return pe&&($e.tilePosOffset=$e.pos.clone()),$e.tilePos=W,$e.transform=No($e),o&&(h($e),this.trigger("spatialMapChanged"),this.trigger("navigationMapInvalid")),$e},numColumns(){return r},numRows(){return i},levelWidth(){return r*this.tileWidth()},levelHeight(){return i*this.tileHeight()},tile2Pos(...z){return U(...z).scale(this.tileWidth(),this.tileHeight())},pos2Tile(...z){let O=U(...z);return U(Math.floor(O.x/this.tileWidth()),Math.floor(O.y/this.tileHeight()))},getSpatialMap(){return o||v(),o},removeFromSpatialMap:b,insertIntoSpatialMap:h,onSpatialMapChanged(z){return this.on("spatialMapChanged",z)},onNavigationMapInvalid(z){return this.on("navigationMapInvalid",z)},getAt(z){o||v();let O=d(z);return o[O]||[]},raycast(z,O){let W=this.toWorld(z),se=this.toWorld(z.add(O)).sub(W),pe=1/this.tileWidth(),be=z.scale(pe),$e=y$(be,O,Me=>{let je=this.getAt(Me);if(je.some(Pe=>Pe.isObstacle))return!0;let Ue=null;for(let Pe of je)if(Pe.has("area")){let _e=Pe.worldArea().raycast(W,se);_e&&(Ue?_e.fraction<Ue.fraction&&(Ue=_e,Ue.object=Pe):(Ue=_e,Ue.object=Pe))}return Ue&&(Ue.point=this.fromWorld(Ue.point).scale(pe)),Ue||!1},64);return $e&&($e.point=$e.point.scale(this.tileWidth())),$e},update(){o&&_()},invalidateNavigationMap(){a=null,s=null,l=null},onNavigationMapChanged(z){return this.on("navigationMapChanged",z)},getTilePath(z,O,W={}){if(a||E(),s||S(),l||T(),z.x<0||z.x>=r||z.y<0||z.y>=i||O.x<0||O.x>=r||O.y<0||O.y>=i)return null;let se=d(z),pe=d(O);if(a[pe]===1/0)return null;if(se===pe)return[];if(l[se]!=-1&&l[se]!==l[pe])return null;let be=new ny((_e,Ge)=>_e.cost<Ge.cost);be.insert({cost:0,node:se});let $e=new Map;$e.set(se,se);let Me=new Map;for(Me.set(se,0);be.length!==0;){let _e=be.remove()?.node;if(_e===pe)break;let Ge=re(_e,W.allowDiagonals);for(let Fe of Ge){let Je=(Me.get(_e)||0)+Z(_e,Fe)+H(Fe,pe);(!Me.has(Fe)||Je<Me.get(Fe))&&(Me.set(Fe,Je),be.insert({cost:Je,node:Fe}),$e.set(Fe,_e))}}let je=[],Ue=pe,Pe=m(Ue);for(je.push(Pe);Ue!==se;){let _e=$e.get(Ue);if(_e===void 0)throw new Error("Bug in pathfinding algorithm");Ue=_e;let Ge=m(Ue);je.push(Ge)}return je.reverse()},getPath(z,O,W={}){let se=this.tileWidth(),pe=this.tileHeight(),be=this.getTilePath(this.pos2Tile(z),this.pos2Tile(O),W);return be?[z,...be.slice(1,-1).map($e=>$e.scale(se,pe).add(se/2,pe/2)),O]:null}};return n.use(K),n.onNavigationMapInvalid(()=>{n.invalidateNavigationMap(),n.trigger("navigationMapChanged")}),e.forEach((z,O)=>{let W=z.split("");r=Math.max(W.length,r),W.forEach((se,pe)=>{n.spawn(se,U(pe,O))})}),n}function Jt(e,t,n){return x.game.objEvents.registers[e]||(x.game.objEvents.registers[e]=new ty),x.game.objEvents.on(e,(i,...r)=>{i.is(t)&&n(i,...r)})}var Nk=(e,t,...n)=>{for(let i of x.game.root.children)i.is(t)&&i.trigger(e,n)},Uk=st(e=>{let t=x.game.root.add([{fixedUpdate:e}]);return{get paused(){return t.paused},set paused(n){t.paused=n},cancel:()=>t.destroy()}},(e,t)=>Jt("fixedUpdate",e,t)),Ay=st(e=>{let t=x.game.root.add([{update:e}]);return{get paused(){return t.paused},set paused(n){t.paused=n},cancel:()=>t.destroy()}},(e,t)=>Jt("update",e,t)),Fk=st(e=>{let t=x.game.root.add([{draw:e}]);return{get paused(){return t.hidden},set paused(n){t.hidden=n},cancel:()=>t.destroy()}},(e,t)=>Jt("draw",e,t)),Ey=st(e=>x.game.events.on("add",e),(e,t)=>Jt("add",e,t)),Lk=st(e=>x.game.events.on("destroy",e),(e,t)=>Jt("destroy",e,t)),qk=st(e=>x.game.events.on("use",e),(e,t)=>Jt("use",e,t)),Bk=st(e=>x.game.events.on("unuse",e),(e,t)=>Jt("unuse",e,t)),Ty=st(e=>x.game.events.on("tag",e),(e,t)=>Jt("tag",e,t)),Zk=st(e=>x.game.events.on("untag",e),(e,t)=>Jt("untag",e,t));function Kk(e,t,n){return Jt("collide",e,(i,r,o)=>r.is(t)&&n(i,r,o))}function Vk(e,t,n){return Jt("collideUpdate",e,(i,r,o)=>r.is(t)&&n(i,r,o))}function Gk(e,t,n){return Jt("collideEnd",e,(i,r,o)=>r.is(t)&&n(i,r,o))}function Ps(e,t){x.game.root.get(e,{recursive:!0}).forEach(t),Ey(e,t),Ty((n,i)=>{i===e&&t(n)})}var Hk=st(e=>x.app.onMousePress(e),(e,t)=>{let n=[];return Ps(e,i=>{if(!i.area)throw new Error("onClick() requires the object to have area() component");n.push(i.onClick(()=>t(i)))}),Yn.join(n)});function Wk(e,t){let n=[];return Ps(e,i=>{if(!i.area)throw new Error("onHover() requires the object to have area() component");n.push(i.onHover(()=>t(i)))}),Yn.join(n)}function Jk(e,t){let n=[];return Ps(e,i=>{if(!i.area)throw new Error("onHoverUpdate() requires the object to have area() component");n.push(i.onHoverUpdate(()=>t(i)))}),Yn.join(n)}function Yk(e,t){let n=[];return Ps(e,i=>{if(!i.area)throw new Error("onHoverEnd() requires the object to have area() component");n.push(i.onHoverEnd(()=>t(i)))}),Yn.join(n)}function Xk(e){x.game.events.on("loading",e)}function Qk(e){x.app.onResize(e)}function eA(e){x.game.events.on("error",e)}function ud(e){x.assets.loaded?e():x.game.events.on("load",e)}function tA(e){if(x.assets.loaded)cy().forEach(t=>e(...t));else return x.game.events.on("loadError",e)}function Py(...e){x.game.cam.pos=U(...e)}function Dy(){return x.game.cam.pos?x.game.cam.pos.clone():bs()}function zy(...e){x.game.cam.scale=U(...e)}function Oy(){return x.game.cam.scale.clone()}function Ry(e){x.game.cam.angle=e}function Cy(){return x.game.cam.angle}function rA(){return x.game.cam.transform.clone()}function jy(e=Ye(255,255,255),t=1){let n=x.game.root.add([ky(kt(),zt()),Iy(e),$y(1),Gy()]),i=n.fadeOut(t);return i.onEnd(()=>By(n)),i}function nA(){return x.game.cam.transform.clone()}function iA(e=12){x.game.cam.shake+=e}function Bl(e){return x.game.cam.transform.multVec2(e)}function My(e){return x.game.cam.transform.invert().multVec2(e)}function oA(...e){return Ai("camPos","setCamPos / getCamPos"),e.length>0&&Py(...e),Dy()}function aA(...e){return Ai("camScale","setCamScale / getCamScale"),e.length>0&&zy(...e),Oy()}function sA(e){return Ai("camRot","setCamRot / getCamRot"),e!==void 0&&Ry(e),Cy()}function uA(e=Ye(255,255,255),t=1){return Ai("camFlash","flash"),jy(e,t)}function cd(e=[]){let t=new Map,n=[],i={},r=new Lo,o=[],a=new Set("*"),s=x.globalOpt.tagsAsComponents,l=null,d=!1,m={id:bS(),hidden:!1,transform:new Rr,children:[],parent:null,set paused(h){if(h!==d){d=h;for(let b of o)b.paused=h}},get paused(){return d},get tags(){return Array.from(a)},add(h){let b=Array.isArray(h)?cd(h):h;if(b.parent)throw new Error("Cannot add a game obj that already has a parent.");return b.parent=this,b.transform=No(b),this.children.push(b),b.trigger("add",b),x.game.events.trigger("add",b),b},readd(h){let b=this.children.indexOf(h);return b!==-1&&(this.children.splice(b,1),this.children.push(h)),h},remove(h){let b=this.children.indexOf(h);if(b!==-1){h.parent=null,this.children.splice(b,1);let _=E=>{E.trigger("destroy"),x.game.events.trigger("destroy",E),E.children.forEach(S=>_(S))};_(h)}},removeAll(h){if(h)this.get(h).forEach(b=>this.remove(b));else for(let b of[...this.children])this.remove(b)},fixedUpdate(){this.paused||(this.children.forEach(h=>h.fixedUpdate()),this.trigger("fixedUpdate"))},update(){this.paused||(this.children.forEach(h=>h.update()),this.trigger("update"))},draw(){if(this.hidden)return;this.canvas&&(dr(),this.canvas.bind());let h=x.gfx.fixed;this.fixed&&(x.gfx.fixed=!0),lr(),ft(this.pos),Bo(this.scale),ki(this.angle);let b=this.children.sort((_,E)=>{let S=_.layerIndex??x.game.defaultLayerIndex,T=E.layerIndex??x.game.defaultLayerIndex;return S-T||(_.z??0)-(E.z??0)});if(this.mask){let _={intersect:x.k.drawMasked,subtract:x.k.drawSubtracted}[this.mask];if(!_)throw new Error(`Invalid mask func: "${this.mask}"`);_(()=>{b.forEach(E=>E.draw())},()=>{this.trigger("draw")})}else this.trigger("draw"),b.forEach(_=>_.draw());Vt(),x.gfx.fixed=h,this.canvas&&(dr(),this.canvas.unbind())},drawInspect(){this.hidden||(lr(),ft(this.pos),Bo(this.scale),ki(this.angle),this.children.forEach(h=>h.drawInspect()),this.trigger("drawInspect"),Vt())},use(h){if(typeof h=="string")return a.add(h);if(!h||typeof h!="object")throw new Error(`You can only pass a component or a string to .use(), you passed a "${typeof h}"`);let b=[];h.id?(this.unuse(h.id),i[h.id]=[],b=i[h.id],t.set(h.id,h),s&&a.add(h.id)):n.push(h);for(let E in h){if(W$.has(E))continue;let S=Object.getOwnPropertyDescriptor(h,E);if(S)if(typeof S.value=="function"&&(h[E]=h[E].bind(this)),S.set&&Object.defineProperty(h,E,{set:S.set.bind(this)}),S.get&&Object.defineProperty(h,E,{get:S.get.bind(this)}),J$.has(E)){let T=E==="add"?()=>{l=Z=>b.push(Z),h[E]?.(),l=null}:h[E];b.push(this.on(E,T).cancel)}else if(this[E]===void 0)Object.defineProperty(this,E,{get:()=>h[E],set:T=>h[E]=T,configurable:!0,enumerable:!0}),b.push(()=>delete this[E]);else{let T=t.values().find(Z=>Z[E]!==void 0)?.id;throw new Error(`Duplicate component property: "${E}" while adding component "${h.id}"`+(T?` (originally added by "${T}")`:""))}}let _=()=>{if(h.require){for(let E of h.require)if(!this.c(E))throw new Error(`Component "${h.id}" requires component "${E}"`)}};h.destroy&&b.push(h.destroy.bind(this)),this.exists()?(_(),h.add&&(l=E=>b.push(E),h.add.call(this),l=null),h.id&&(this.trigger("use",h.id),x.game.events.trigger("use",this,h.id))):h.require&&b.push(this.on("add",_).cancel)},unuse(h){if(t.has(h)){for(let b of t.values())if(b.require&&b.require.includes(h))throw new Error(`Can't unuse. Component "${b.id}" requires component "${h}"`);t.delete(h),this.trigger("unuse",h),x.game.events.trigger("unuse",this,h)}else s&&a.has(h)&&a.delete(h);i[h]&&(i[h].forEach(b=>b()),delete i[h])},c(h){return t.get(h)??null},get(h,b={}){let _=(S,T)=>b.only==="comps"?S.has(T):b.only==="tags"?S.is(T):S.is(T)||S.has(T),E=b.recursive?this.children.flatMap(function S(T){return[T,...T.children.flatMap(S)]}):this.children;if(E=E.filter(S=>h?_(S,h):!0),b.liveUpdate){let S=Z=>b.recursive?this.isAncestorOf(Z):Z.parent===this,T=[];T.push(x.k.onAdd(Z=>{S(Z)&&_(Z,h)&&E.push(Z)})),T.push(x.k.onDestroy(Z=>{if(S(Z)&&_(Z,h)){let H=E.findIndex(re=>re.id===Z.id);H!==-1&&E.splice(H,1)}})),this.onDestroy(()=>{for(let Z of T)Z.cancel()})}return E},query(h){let b=h.hierarchy||"children",_=h.include,E=h.exclude,S=[];switch(b){case"children":S=this.children;break;case"siblings":S=this.parent?this.parent.children.filter(Z=>Z!==this):[];break;case"ancestors":let T=this.parent;for(;T;)S.push(T),T=T.parent;break;case"descendants":S=this.children.flatMap(function Z(H){return[H,...H.children.flatMap(Z)]});break}if(_&&((h.includeOp||"and")==="and"||!Array.isArray(h.include)?S=S.filter(T=>T.is(_)):S=S.filter(T=>h.include.some(Z=>T.is(Z)))),E&&((h.includeOp||"and")==="and"||!Array.isArray(h.include)?S=S.filter(T=>!T.is(E)):S=S.filter(T=>!h.exclude.some(Z=>T.is(Z)))),h.visible===!0&&(S=S.filter(T=>T.visible)),h.distance){if(!this.pos)throw Error("Can't do a distance query from an object without pos");let T=h.distanceOp||"near",Z=h.distance*h.distance;T==="near"?S=S.filter(H=>H.pos&&this.pos.sdist(H.pos)<=Z):S=S.filter(H=>H.pos&&this.pos.sdist(H.pos)>Z)}return h.name&&(S=S.filter(T=>T.name===h.name)),S},isAncestorOf(h){return h.parent?h.parent===this||this.isAncestorOf(h.parent):!1},exists(){return x.game.root.isAncestorOf(this)},is(h,b="and"){return Array.isArray(h)?b==="and"?h.every(_=>a.has(_)):h.some(_=>a.has(_)):a.has(h)},tag(h){if(Array.isArray(h))for(let b of h)a.add(b),this.trigger("tag",b),x.game.events.trigger("tag",this,b);else a.add(h),this.trigger("tag",h),x.game.events.trigger("tag",this,h)},untag(h){if(Array.isArray(h))for(let b of h)a.delete(b),this.trigger("untag",b),x.game.events.trigger("untag",this,b);else a.delete(h),this.trigger("untag",h),x.game.events.trigger("untag",this,h)},has(h,b="and"){return Array.isArray(h)?b==="and"?h.every(_=>t.has(_)):h.some(_=>t.has(_)):t.has(h)},on(h,b){let _=r.on(h,b.bind(this));return l&&l(()=>_.cancel()),_},trigger(h,...b){r.trigger(h,...b),x.game.objEvents.trigger(h,this,...b)},destroy(){this.parent&&this.parent.remove(this)},inspect(){let h={};for(let[b,_]of t)h[b]=_.inspect?.()??null;for(let[b,_]of n.entries()){if(_.inspect){h[b]=_.inspect();continue}for(let[E,S]of Object.entries(_))typeof S!="function"&&(h[E]=`${E}: ${S}`)}return h},onAdd(h){return this.on("add",h)},onFixedUpdate(h){return this.on("fixedUpdate",h)},onUpdate(h){return this.on("update",h)},onDraw(h){return this.on("draw",h)},onDestroy(h){return this.on("destroy",h)},onUse(h){return this.on("use",h)},onUnuse(h){return this.on("unuse",h)},clearEvents(){r.clear()}},v=["onKeyPress","onKeyPressRepeat","onKeyDown","onKeyRelease","onMousePress","onMouseDown","onMouseRelease","onMouseMove","onCharInput","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onScroll","onGamepadButtonPress","onGamepadButtonDown","onGamepadButtonRelease","onGamepadStick","onButtonPress","onButtonDown","onButtonRelease"];for(let h of v)m[h]=(...b)=>{let _=x.app[h]?.(...b);return o.push(_),m.onDestroy(()=>_.cancel()),m.on("sceneEnter",()=>{o.splice(o.indexOf(_),1);let E=x.app[h]?.(...b);Yn.replace(_,E),o.push(_)}),_};for(let h of e)m.use(h);return m}var cA=()=>({events:new Lo,objEvents:new Lo,root:cd([]),gravity:null,scenes:{},currentScene:null,layers:null,defaultLayerIndex:0,logs:[],cam:{pos:null,scale:new G(1),angle:0,shake:0,transform:new Rr}});function lA(e){x.game.gravity=e?(x.game.gravity||U(0,1)).unit().scale(e):null}function dA(){return x.game.gravity?x.game.gravity.len():0}function fA(e){x.game.gravity=e.unit().scale(x.game.gravity?x.game.gravity.len():1)}function Fo(){return x.game.gravity?x.game.gravity.unit():U(0,1)}var pA=WI("//uUBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAATAAAeAAANDQ0NDRoaGhoaKCgoKCg1NTU1NTVDQ0NDQ1BQUFBQXl5eXl5ra2tra2t5eXl5eYaGhoaGlJSUlJShoaGhoaGvr6+vr7y8vLy8ysrKysrX19fX19fl5eXl5fLy8vLy//////8AAAA5TEFNRTMuMTAwAaoAAAAAAAAAABSAJAOPhgAAgAAAHgBaqIlmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uUBAAP8h1kPIABR4BEDGeQAEbkSb2RAACBFMEyMiAAASJw4xjgwAGyRvfIoZT2QKGV5YNw/tKID9+X93qXtBQUFBQ/e+EFKTQUT/dy3f5dK/3d04rkXHpufCClDAaH7jDMgFAQEGfPt+jI352U9vU4GLRpzkUDeeeTQggQe2ggF3d7/3j697DnhCH5iGf38//iNj9oy2Jk71oj+CBAABGNB4RJNMwgCABCB//8//l////1z6XEGd73az07sOkwZD9VYgjzjmQ6j4EMfZM86OJ7GUWwvFw3ZPcdVEtczf9RNf6xMyxLjZZgjMQ7KDkLSU8g2E12UDUWrf//////9LdtFdeeqKwSitW9SJL59VM5pyUGiBNiK0jIGO0j7p3pUpWpaeqi1nTvqP3b43mGmM6HeXFjIlRwiFiIDQRRAGgkDQhxMMv//+f1//6XM/PfMvysJa3993MjDjhaRkrV3cRPXjGptDDGTHtFKUeMHU0K5STvVfMtVX/UXHctt1Z1//uUBB0AgnZkQAAgRTBMzIgAACiqCdB9E1QRgAFuIuGmhjABPZRJRCHi4etY2gcEYRwFw5KFBMMRV/////z6kX2ppnJszEzKbkZKEumm+pBRUDBg9IsgXGXrazn1QhmGjBrLVjT5Xvir0HT7d//HSZh18IZdji2N5JZgbA3DwQAahogSDqUhQuNtpJmBTwAGMY2QP3c/dy4EKsAABoXEJEFmlf/c4TgYtwcAbwfD4gOOoS1QIH7jDnNzYVe1x4mNFyD2jMVaaykjV29ePMARwXcUOgAFr+UjhVz4jhwMDFxPKgYs3cDFpohVgAAYAIO7u8eAAjRNA7hBFAwN3ACDvu7nETkLMrnyIj8v/9fNwhF9vKRfm82P5zPPmLV/WKs9G3d16n/v3rubEN0zgs7RdWrHne9brdv5bI4EwEAM6lj7aVdTKtXQHgLdzCKQ2kcihe4FyMcD1r3nR4TWxuax5EOZJEs3DEQnjyqyB8cSfrI6GEcoJxiHBDEfrTOFYrO1//uUBCgAA406ym5hgAB1R1ktzDwACxDBZzj0gAFhGrA3HoACypAXH9HY4umZan4ZlZKldajczMzMzOTnzMvnb77f/1IuSzHIbnJLJdapWmwUAQBXqWPtqV1OyqVqXhB9abR90OyKEsM51pIJK/nXplbDPtKz2dH+oVWeZSm8z7nvAZ19bneqhk3qeBhrhZiLbCc8sRnXb520RnPFd61/AgSR4f8CVlfWpD/////+N6/jv8v4f/6Ln///06c8YYcQIaGmAJ9VhMHEZYc9Kn0TOOYKv2cibDoZieAaGy4Cd6AfGkxQQr+agomAw+dC7AkjOxklIZEpUgmHxXP7/znl/4qT9Z/8+T2a0WF9/lvpv39if/KZnV6Gp1vQRmN1rYDAADfLGQxVR2d49LQLXdImm5n40smwjQ4aIYKMeKCOEw0OBV5cHA8cFV8mB5LyIIeksHspy79/iTv9SH+v66f2Wn/i+Lt//x9y//5MohgAAXiTCVBil4RUZ7XUvPRCD9Uc//uUBAoAAro3Wzc9AABXRutm56AACrUhc6eYT0FWpC508wnoO35hs9j6x7PQOB0PF0JWIkYwigNPoXUBA0cKA6JwDB7lRKDm/93r/mb6iEqL5lv3Vq//6YgYd1AgECi4xACCYbHyukYAAF4kwlQYpeEVGe11Lz0Qg/VHDt+YbPY+sez0DgdDxdCViJGMIoDT6F1AQNHCgOicAwe5USg5v/d6/5m+ohKi+Zb91av/+mIGHdQIBAouMQAgmGx8rptmoLKSACTuBBUPFsH6RlCz+UhoKeVfJy/eqOspBG4PScFOnOxYJJcf/nVzmyfR42Zwxy//hfSUrPq1SzFnO7q/SzNUzst+GQpnZ/kLwzVZ9xJ2lVa02zUFlJABJ3AgqHi2D9IyhZ/KQ0FPKvk5fvVHWUgjcHpOCnTnYsEkuP/zq5zZPo8bM4Y5f/wvpKVn1apZiznd1fpZmqZ2W/DIUzs/yF4Zqs+4k7SqtaYkWgEGMgppYQlMVdKcos2bWFZbFIJp//uUBAsAAr0wWe1hAABXpgs9rCAACwS5azj0gAFgly1nHpAAVgWmZa3LaUWCcGh5HgOEYkViyQUjrX+G5FUr5Dla1ZhtXDf7ckpazXwzeusqq+zXwUePSw8NYzlZKWfbyzod4dCRItAIMZBTSwhKYq6U5RZs2sKy2KQTSrAtMy1uW0osE4NDyPAcIxIrFkgpHWv8NyKpXyHK1qzDauG/25JS1mvhm9dZVV9mvgo8elh4axnKyUs+3lnQ7w6EkIEIIZFKlBSAGwRMrEIEuM658s5gvyVtFDrQtgTY2YSPlAJcgwlXLmokM8sUQJYJOm3eaW04jWVsoghX+ZBt3SHFZOypVez//VONpL+du6U+4WLXBC79cuhAhBDIpUoKQA2CJlYhAlxnXPlnMF+StoodaFsCbGzCR8oBLkGEq5c1EhnliiBLBJ027zS2nEaytlEEK/zINu6Q4rJ2VKr2f/6pxtJfzt3Sn3Cxa4IXfrl6IGEh4icUSUDRZk/k88VFEmCy//uUBAkAAociWgZh4ABQ5EtAzDwAC6zBXBmXgAF1mCuDMvAART7WmhWQ9QwYJexoKJ+z1bcQqfEFmtDtXH8lUg2omFi2b/4+UhW/j+bHgwAM8SqMAQFxYj9wqAwhlftf//sSQMJDxE4okoGizJ/J54qKJMFkin2tNCsh6hgwS9jQUT9nq24hU+ILNaHauP5KpBtRMLFs3/x8pCt/H82PBgAZ4lUYAgLixH7hUBhDK/a///YmHznKbibgJd0lEi0TfuHXCfhZ0faHA6GL3GuUpLTgTwnd/upcFAbo+BGMfzKxWE9PNg+sbrEwwRLn6uFElWTc/zN8Yvf5V3xV29///8OO/f7j3cT0mgMTPP9uPEwIQ+c5TcTcBLukokWib9w64T8LOj7Q4HQxe41ylJacCeE7v91LgoDdHwIxj+ZWKwnp5sH1jdYmGCJc/Vwokqybn+ZvjF7/Ku+Ku3v///hx37/ce7iek0BiZ5/tx4mBCmI5QXQAgigG+j0P8fdg2Xjs//uUBAiAAqwlWwY94ABVhKtgx7wACoilZ7z0AAFUlOz3noAAii2PkO1AMBYBIssJqQ5PtEdSQ2WE3xIF22b19axY89F5QQmWCwxJrf51h5mt74jRvBahCxQkS0MgJxY15ITjX3sb+vlGI5QXQAgigG+j0P8fdg2Xjsii2PkO1AMBYBIssJqQ5PtEdSQ2WE3xIF22b19axY89F5QQmWCwxJrf51h5mt74jRvBahCxQkS0MgJxY15ITjX3sb+vlEBsAgCSkHfwmFY/MMKQyg4tjhHeuR2mpSZWstSwEQAw00wZaogwgZL3PPVWw9vuB51zUXf3Df/ytV917DjxQEGA+0mbu4YYg4TnkRcMGQsxH/Ioc1AbAIAkpB38JhWPzDCkMoOLY4R3rkdpqUmVrLUsBEAMNNMGWqIMIGS9zz1VsPb7gedc1F39w3/8rVfdew48UQIFwus29HKDIAW8tcsSGAOKXK/jHmF1AkIAAC8ZUaEFwTHUylbannoarv7HwxH8//uUBAwEAtAx18sMQuBVJisaYSJeCmhnX6eZLQFZJy208wmidE7zXIRk0ZLYCqc1eg1sKc3HZuweFNeSCHHGg+JyhTcd8RE3/+rJXIdH6UpI2qUdVtHGRCOewEOXGUfKG2/v+RIoA0MAAAByh2gABL0EpLTwNTz0qzjM2ER8SF2lsSRLESGiqG5JXMCauo+aTB1GQKTyJd6SDnG6Iv8rkaoYeRihQbVGzJSSQ4sOghQh7vhkf+T0agMeCYAcAABBO40gsg/gOpfIiHoQgldEIGLVK9EaTFmFH9jkkvLA41VT/4q0XDJLUopJkJmWHAqZyRAPJOvBUS+NYSLC4FFjoJkUfGP/La3XNJCMJPep5CkIaRQCSTuM4ikUepPHAnZLEErtHuqs1EWDizBAvsdVeWBxqqn9aiS9FK24Z0KUhvVkY7ZbylKV/SrKiK0yrKqFkPe3/sZ//8xt6t2dajIDpFMRf6tSU9FIlJJKChTJIgq2hhZlrTlNcpaB/Xv5rDOU//uUBA2AAoQl1lVgwARQxLrKrBgAjCyVTrmngAGFkqnXNPAAg4ANdH9PKxIijn/xmvyjW2ZISnLe5yUtyv2ufSTfVJUGyoFiU6s6Crgyd2PEyn5Ul/85kUElPRSJSSSgoUySIKtoYWZa05TXKWgf17+awzlIOADXR/TxLEiKOf/GZ/KNbZkhKct7nJS3K/a59JN9UlQbKgWJTqzoKuDJ3Y8TKflSX/zmRQSCs10kCQCFAcBJCZCbl2c0bF5RBELfoQBmp3G2m3m3lgZoN0/BmhutukeGPbe/GtGj9jtiXNZdfDjIwYiYvnePS27ebO75y/Edksl4SONB/PlBrg6dNh8h+pW2//lktFhYcFZrpIEgEKA4CSEyE3Ls5o2LyiCIW/QgDNTuNtNvNvLAzQbp+DNDdbdI8Me29+NaNH7HbEuay6+HGRgxExfO8elt282d3zl+I7JZLwkcaD+fKDXB06bD5D9Stt//LJaLCw4AhAEAACKEywIJz0PRwTBn6tS2//uUBAmAAmUjVNdhAABMpGqa7CAACWiNUay8pYEtEao1l5SwsvqET9LUv/TIpAROYdsSHIoHxzccjRUPRZmVQnHLH7FYdB9rF8Q11yOCAKeHZHyIhMO///lWz0JPcAQgCAABFCZYEE56Ho4Jgz9WpbWX1CJ+lqX/pkUgInMO2JDkUD45uORoqHoszKoTjlj9isOg+1i+Ia65HBAFPDsj5EQmHf//yrZ6EnuACgcjEAKT2Dfl0wUuCCDwOHgDLjMYs6OLViO840e/fHfBZmadNu+NYYNVT84fPkYRCJ/K5V3vsq0Gh0H0YgBP+moubbodw+IHr/kgAoHIxACk9g35dMFLggg8Dh4Ay4zGLOji1YjvONHv3x3wWZmnTbvjWGDVU/OHz5GEQifyuVd77KtBodB9GIAT/pqLm26HcPiB6/5KAE6OeESRRgDMViF4jCI2bT5fbThs6iKGQfPTVaYtXdjMROEbiIqKlZk1KJAzpcWEnNs6FapfKXq1jerLEhaS//uUBB+BAmUqVWsMKrhMpUqtYYVXCTSlTzWSgAE0lKp2sFAAqcgRPyRHxKsBPAQVtIgCdHPCJIowBmKxC8RhEbNp8vtpw2dRFDIPnpqtMWruxmInCNxEVFSsyalEgZ0uLCTm2dCtUvlL1axvVliQtJVOQIn5Ij4lWAngIK2kQCHQhVnhkMD1BlLGveBt13z8bjbsI+MtfqdjdaAQiJFeBGV0AQFB2Qr8QDBc8iiATM25R8+fqp/Izn9CHGC7CEg5BTqd6jM4IBoADCiIYSTWAeAwKIoGBRr+EfZ3bjcbhhdDLX6nY3WgEIiRXgRloICoOyFfiA4+RRAJmbco+fP1U/kZz+hDjBdhCQcgp1O9QZnAQAbiCQAm485bonLdZ5NLqAAAEaPfiGAJsDpfUrAhC8wIZFkkEsiX6UBGvscp3FQfN5VNjWCnQ6AGqvk/UqZBbG3rpCt0gR7qtiNBxOfSeTupa6fMjXaMuYTclIn9ZIVayP2pYMiVUajtVYufukCu//uUBDWABAw9Uu5p4AKDx9qdzLwAiiyjShmngAFFlGlDNPAAm9bW7Vct6q61jNa/e6f/0cL33T31CoACacjUkabckdbjkoAAQ2Pe5fJoCshU+EXmCMRGkCbpN6UCNfKFHfcVB8kSOgSgDsuTAAtXyfqVMgtjb10hW6QI91XCQyZP85jl1K90+ZGuz5Ewl0gGT+skKsGAr0weA/JVRqO1Vi5+6QK6b1tbtFct6q61jNa+26fG/RwvfdPeIpm6BswQctcoCeIAYEYf1mWXRGbxQSwlUiCoY91ytUSo4mqDAgHrhQ3Y/4l2ptfeDG/xHfQXlda18S59aW+rZz8/Gtf7vXU0aFeJUKxkREA+tA5tnJGCDlrlATxADAjD+syy6IzeKCWEqkQVDHuuVqiVHE1QYEA9cKG7H/Eu1Nr7wY3+I76C8rrWviXPrS31bOfn41r/d66mjQrxKhWMiIgH1oHNs5Iw4nNwugqcGVUIoOnFryq5YBVMFyLPEAM4rxNXgSVW//uUBA+AAtkszwZtgABapZngzbAACxyZTzmkgAljkynnNJABzA8PYTFvx2VIR78NqPytscLolrRXGbLUv3rfHNp37BGU77n4xv9NNmu7larWfrk294JgJMNJQ9k6Z//3mHE5uF0FTgyqhFB04teVXLAKpguRZ4gBnFeJq8CSq2YHh7CYt+OypCPfhtR+VtjhdEtaK4zZal+9b45tO/YIynfc/GN/pps13crVaz9cm3vBMBJhpKLJ0z//vAA/m9Y8//8wALImAAl3wUQQSnfKuPXkDS5Ql5I8JfOufQG0twDlAxToCFKYarEoVqWFNJ6nNVd9fnX5/O72D/GEfeJf1TBIwjlyh7XHDg+dW/e///9oGG0YAH83rHn//mABZEwAEu+CiCCU75Vx68gaXKEvJHhL51z6A2luAcoGKdAQpTDVYlCtSwppPU5qrvr86/P53ewf4wj7xL+qYJGEcuUPa44cHzq373///tAw2joy5iMKijE5A82dFg4+liKoGBQF//uUBAmAAqobToZt4ABVI2nQzbwAClBrX7j0gBFKDWv3HpACuAcKpXhYKYZtV8OtethxIYxrF3onBiRVg0Z5VNJHjodV8sWdI031RiPzue4vQ9IA5zgUawg6s0J1ixM4H0rkVfR6DLmIwqKMTkDzZ0WDj6WIqgYFAW4BwqleFgphm1Xw6162HEhjGsXeicGJFWDRnlU2I8dDqvlizpGm+qMR+dz3F6HpAHOcCjWEHVmhOsWJnA+lcir6PQCI3I43G43HIxGIwIABFJObxBmwXEYYlhzHKcYl4ccyEKlyI6ONNnSpVx1pORjqKXEvGgpRqN/VI1tIQnEAogesbyZtJhhEj7rQutav+WB4ClRCCI3I43G43HIxGIwIABFJObxBmwXEYYlhzHKcYl4ccyEKlyI6ONNnSpVx1pORjqKXEvGgpRqN/VI1tIQnEAogesbyZtJhhEj7rQutav+WB4ClRDWAElxIBP/fgA5BRsQaBJEcORBgUrqXzDOmyQ7B8Js0//uUBA+AAnIbz+9swABNA3nq7ZgACYxbKSxpgQEzi6UljTAh0ph0igLRRPKosl/+21oMFkUfTMlPbu5vLWMhsIpBoJlEBWacSYwqxs0adkSycpqwAugFfb4AMMU0BUCAJUc6VBAkwaXzDlPhDsnkNmmlMVAKAOiieBJHkv/22tBkzUfXZJ+37zy1jILgmkGjpRAVmnCVjCrGzRozkSydWoAAhAKsACEHAmDZAyOJvjXlQsCbLAhfALBGnDuUyMsKxSWoyN41Ma1yzl81ldaycS4FmOc/HeG0F0EouNMvOJY8wRknQ2MHFgo50O9wABCAVYAEIOBMGyBkcTfGvKhYE2WBC+AWCNOHcpkZYViktRkbxqY1rlnL5rK61k4lwLMc5+Od4vceyz2aZfD2t6Yf1T8VpbBUmvyf/6WSCIaFJmBQHBBPnChjBCJpALOEZzWEOoXAjEVcJwU6QNMnCQemw5lYr1wP4Yrd7Kh813KsJITdZtDZdO/Nb/EeIEOq6mn9//uUBCMMglwayou4eTBKg1lRdw8mCRxbKCzswxEuGGWdow2oj0ziXaKZIIhoUmYFAcEE+cKGMEImkAs4RnNYQ6hcCMRVwnBTpA0ycJB6bDmVivXA/hit3sqHzXcqwkhN1m0Nl0781v8R4gQ3qup/2PTcl2geDKLS0Dlz62OeezARhAXGxQHQWEYYrFAT3TZw4FCwS4JDTF8AkaliQVaJoBk2ZlkiTQ2GgZmiQ1TzBSo+AA7JnYoKkVD1ZLuX4AtuEAwAFeAsHNMiPlXBIxSunQZU2GQTJoCe6bOHAoWCXBIaYvkUWljkvhpGS5mWFUrqaky+ZUivDyLT+PkTH9Nf5Jc8MPCT5LS5agFKBGvwAEGuOYUBgViPhKwULrvceUN2EYE5cfjEPVa76oYHc8iajBh079LyeBx+8xsatjP5+f/v9moz085O0y92c1/TLeIQBc5iarAMAtQBhIDsHMLAswKiDlZBMLgFd7jyhuwXBjO4/GIeq131ERQsohipJqEF//uUBDuAAl4rSc1swABNpWkWriAAT6S1N7msABH4Fqa3NYACK3Y2lxKnyqWlj4I9evjntWStpWltoH3a1c9wPfBQe51tv4QIRW5JWpHY2wmAQCAA3Ez8JQ0wQP/M2RNaIDhCYutAAONBBkAlvb4j4+qi40CU4Bh3bhxXygTVd/7vSq0iY6iSWWXrsXQ29eVJCqUsoXWy7X/vdWvP1JZg/tBEovFId////7rne699onXkM9DUl/+GAZBQDf8JEQCKo//+ogQCRyuRRuRthMAgEABkJp6CMpiBP+aMybcYnwznWkEqoAuaC5GfvF8HZFWg/FXSa8blglIwmKgd/7XpVaYZFGTZZe5DuQPushJSpXIpuwbX/vdWvL6kswcmPQFF4Ef3////LXO917pQHTyGedqP//DAMgoD3/CREAiqP/2eqv////////3dk90KlpVV3eUWVjHLZSMUp5hxnpOcO1WpXVXu4ijKYTSd3IJ7Kzt6Wp7FWiGQUEGFRgdCgpRM//uUBB8P8lRjwIcAoABJLFgQ4BQASJmNAgAFHEkIsiAAAaegRMowxhYVZBMOCoAh7/////////79CTkvIITTqZkZjVGEMPHvEBE7IZXMpGVFYqsKyOYw5jjmOZkFDdkZLkW+9NjEIZxbiYixXO5QkcoRVQoYBgYPlK+XmRGbwXaEFZGvWIpZLWEizxltQ9uELQV7E73d3HESrONG7w3dTdpF6Skf/zNT3I6rIKxJy1oKCtGGjj5FDxcKB+HpYd/3//i3rZFOT0N05+QpgWZYZ3pi5biJNCj4fRQQwYK8p48BQUTWPDTbNjkPn8+1VXKvJ7dJ5Gb2mESWLjnHOYNH07r6//////////icK81KXqTXuvQEteLGdY0DKwrjQVTIMKbgE0b41Egi1KxtuNwUpf9X+bNqTUlXbDClWgIlS4wMVc1F0QZc3/N/yto/7eUShjGUstRgIUZXKUrFYwU5SgKOxgYE+krfVkf6St/VpnMaYwpwoCjoZwoCZwqFC4LH//uUBD+P4jNjPwAjN8I7THfwAEnqR8mAugCAcQkHsheEERr40LUwj//hIzL//9k/9rJZ9lks+yyVDL/////81YHZUMj//yZZLHIy7/5qwMHHIyZZL/sslQyNWt/I1DBQYRxPYaxS/////5kn///6on0VEVP/6on/7OVFVO5QwUGEOzyhgaoqKhQwMGCUjt////8qaLdr/qTiyzLxaJxpRTt6RBhIhDZMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),mA=()=>(()=>{let e=new(window.AudioContext||window.webkitAudioContext),t=e.createGain();t.connect(e.destination);let n=new Zo(NS(e));return e.decodeAudioData(pA.buffer.slice(0)).then(i=>{n.buf=i}).catch(i=>{console.error("Failed to load burp: ",i)}),{ctx:e,masterNode:t,burpSnd:n}})();function hA(e,t={}){let n=new Ft,i=new Audio(e);i.crossOrigin="anonymous",i.loop=!!t.loop,x.audio.ctx.createMediaElementSource(i).connect(x.audio.masterNode);function r(){x.debug.paused||x.app.isHidden()&&!x.globalOpt.backgroundAudio||x.audio.ctx.resume()}function o(){r(),i.play()}return t.paused||o(),i.onended=()=>n.trigger(),{play(){o()},seek(a){i.currentTime=a},stop(){i.pause(),this.seek(0)},set loop(a){i.loop=a},get loop(){return i.loop},set paused(a){a?i.pause():o()},get paused(){return i.paused},time(){return i.currentTime},duration(){return i.duration},set volume(a){i.volume=Or(a,0,1)},get volume(){return i.volume},set speed(a){i.playbackRate=Math.max(a,0)},get speed(){return i.playbackRate},set detune(a){},get detune(){return 0},onEnd(a){return n.add(a)},then(a){return this.onEnd(a)}}}function gA(e,t={}){if(typeof e=="string"&&x.assets.music[e])return hA(x.assets.music[e],t);let n=x.audio.ctx,i=t.paused??!1,r=n.createBufferSource(),o=new Ft,a=n.createGain(),s=n.createStereoPanner(),l=t.seek??0,d=0,m=0,v=!1;r.loop=!!t.loop,r.detune.value=t.detune??0,r.playbackRate.value=t.speed??1,r.connect(s),r.onended=()=>{_()>=(r.buffer?.duration??Number.POSITIVE_INFINITY)&&o.trigger()},s.pan.value=t.pan??0,s.connect(a),a.connect(x.audio.masterNode),a.gain.value=t.volume??1;let h=S=>{r.buffer=S.buf,i||(d=n.currentTime,r.start(0,l),v=!0)},b=fk(e);b instanceof mr&&b.onLoad(h);let _=()=>{if(!r.buffer)return 0;let S=i?m-d:n.currentTime-d,T=r.buffer.duration;return r.loop?S%T:Math.min(S,T)},E=S=>{let T=n.createBufferSource();return T.buffer=S.buffer,T.loop=S.loop,T.playbackRate.value=S.playbackRate.value,T.detune.value=S.detune.value,T.onended=S.onended,T.connect(s),T};return{stop(){this.paused=!0,this.seek(0)},set paused(S){if(i!==S)if(i=S,S)v&&(r.stop(),v=!1),m=n.currentTime;else{r=E(r);let T=m-d;r.start(0,T),v=!0,d=n.currentTime-T,m=0}},get paused(){return i},play(S=0){this.seek(S),this.paused=!1},seek(S){r.buffer?.duration&&(S>r.buffer.duration||(i?(r=E(r),d=m-S):(r.stop(),r=E(r),d=n.currentTime-S,r.start(0,S),v=!0,m=0)))},set speed(S){r.playbackRate.value=S},get speed(){return r.playbackRate.value},set detune(S){r.detune.value=S},get detune(){return r.detune.value},set volume(S){a.gain.value=Math.max(S,0)},get volume(){return a.gain.value},set pan(S){s.pan.value=S},get pan(){return s.pan.value},set loop(S){r.loop=S},get loop(){return r.loop},duration(){return r.buffer?.duration??0},time(){return _()%this.duration()},onEnd(S){return o.add(S)},then(S){return this.onEnd(S)}}}function Ny(e){return x.k.play(x.audio.burpSnd,e)}function Uy(e){x.audio.masterNode.gain.value=e}function Fy(){return x.audio.masterNode.gain.value}function vA(e){return Ai("volume","setVolume / getVolume"),e!==void 0&&Uy(e),Fy()}function Ly(){x.app.onHide(()=>{x.globalOpt.backgroundAudio||x.audio.ctx.suspend()}),x.app.onShow(()=>{!x.globalOpt.backgroundAudio&&!x.debug.paused&&x.audio.ctx.resume()}),x.app.onResize(()=>{if(x.app.isFullscreen())return;let e=x.globalOpt.width&&x.globalOpt.height;e&&!x.globalOpt.stretch&&!x.globalOpt.letterbox||(x.canvas.width=x.canvas.offsetWidth*x.pixelDensity,x.canvas.height=x.canvas.offsetHeight*x.pixelDensity,ay(),e||(x.gfx.frameBuffer.free(),x.gfx.frameBuffer=new xs(x.gfx.ggl,x.gfx.ggl.gl.drawingBufferWidth,x.gfx.ggl.gl.drawingBufferHeight),x.gfx.width=x.gfx.ggl.gl.drawingBufferWidth/x.pixelDensity/x.gscale,x.gfx.height=x.gfx.ggl.gl.drawingBufferHeight/x.pixelDensity/x.gscale))}),x.globalOpt.debug!==!1&&(x.app.onKeyPress(x.globalOpt.debugKey??"f1",()=>x.debug.inspect=!x.debug.inspect),x.app.onKeyPress("f2",()=>x.debug.clearLog()),x.app.onKeyPress("f8",()=>x.debug.paused=!x.debug.paused),x.app.onKeyPress("f7",()=>{x.debug.timeScale=Ml(Or(x.debug.timeScale-.2,0,2),1)}),x.app.onKeyPress("f9",()=>{x.debug.timeScale=Ml(Or(x.debug.timeScale+.2,0,2),1)}),x.app.onKeyPress("f10",()=>x.debug.stepFrame())),x.globalOpt.burp&&x.app.onKeyPress("b",()=>Ny())}function yA(e,t={}){let n=x.game.root.add([_s(e),Vy()]),i=(t.speed||1)*5,r=t.scale||1;n.add([Zl(x.boomSprite),Is(0),Gl("center"),Rv(i,r),...t.comps??[]]);let o=n.add([Zl(x.kaSprite),Is(0),Gl("center"),Kl(),...t.comps??[]]);return o.wait(.4/i,()=>o.use(Rv(i,r))),o.onDestroy(()=>n.destroy()),n}function qy(e,t){if(x.game.layers)throw Error("Layers can only be assigned once.");let n=e.indexOf(t);if(n==-1)throw Error("The default layer name should be present in the layers list.");x.game.layers=e,x.game.defaultLayerIndex=n}function bA(){return x.game.layers}function xA(){return x.game.layers?.[x.game.defaultLayerIndex]??null}function wA(e,t){Ai("layers","setLayers"),qy(e,t)}function By(e){e.destroy()}function _A(){return x.game.root}function IA(e,t){x.game.scenes[e]=t}function $A(e,...t){if(!x.game.scenes[e])throw new Error(`Scene not found: ${e}`);x.game.events.onOnce("frameEnd",()=>{x.game.events.trigger("sceneLeave",e),x.app.events.clear(),x.game.events.clear(),x.game.objEvents.clear(),[...x.game.root.children].forEach(n=>{!n.stay||n.scenesToStay&&!n.scenesToStay.includes(e)?x.game.root.remove(n):n.trigger("sceneEnter",e)}),x.game.root.clearEvents(),Ly(),x.game.cam={pos:null,scale:U(1),angle:0,shake:0,transform:new Rr},x.game.scenes[e](...t)}),x.game.currentScene=e}function SA(e){return x.game.events.on("sceneLeave",e)}function kA(){return x.game.currentScene}function Zl(e,t={}){let n=null,i=null,r=null,o=new Ft;if(!e)throw new Error("Please pass the resource name or data to sprite()");let a=(d,m,v,h)=>{let b=U(1,1);return v&&h?(b.x=v/(d.width*m.w),b.y=h/(d.height*m.h)):v?(b.x=v/(d.width*m.w),b.y=b.x):h&&(b.y=h/(d.height*m.h),b.x=b.y),b},s=(d,m)=>{if(!m)return;let v=m.frames[0].clone();t.quad&&(v=v.scale(t.quad));let h=a(m.tex,v,t.width,t.height);if(d.width=m.tex.width*v.w*h.x,d.height=m.tex.height*v.h*h.y,m.anims)for(let b in m.anims){let _=m.anims[b];typeof _!="number"&&(_.frames=l(_))}n=m,o.trigger(n),t.anim&&d.play(t.anim)},l=d=>{if(d.frames)return d.frames;let m=[];if(d.from===void 0||d.to===void 0)throw new Error("Sprite anim 'from' and 'to' must be defined if 'frames' is not defined");let v=Math.abs(d.to-d.from)+1;for(let h=0;h<v;h++)m.push(d.from+h*Math.sign(d.to-d.from));if(d.pingpong)for(let h=v-2;h>0;h--)m.push(m[h]);return m};return{id:"sprite",width:0,height:0,frame:t.frame||0,quad:t.quad||new ct(0,0,1,1),animSpeed:t.animSpeed??1,flipX:t.flipX??!1,flipY:t.flipY??!1,get sprite(){return e.toString()},set sprite(d){let m=fs(d);m&&m.onLoad(v=>s(this,v))},get animFrame(){if(!n||!i||r===null)return this.frame;let d=n.anims[i.name];return typeof d=="number"?d:d.from===void 0||d.to===void 0?i.frameIndex:this.frame-Math.min(d.from,d.to)},draw(){if(!n)return;let d=n.frames[this.frame??0];if(!d)throw new Error(`Frame not found: ${this.frame??0}`);if(n.slice9){let{left:m,right:v,top:h,bottom:b}=n.slice9,_=n.tex.width*d.w,E=n.tex.height*d.h,S=this.width-m-v,T=this.height-h-b,Z=m/_,H=v/_,re=1-Z-H,K=h/E,z=b/E,O=1-K-z,W=[vt(0,0,Z,K),vt(Z,0,re,K),vt(Z+re,0,H,K),vt(0,K,Z,O),vt(Z,K,re,O),vt(Z+re,K,H,O),vt(0,K+O,Z,z),vt(Z,K+O,re,z),vt(Z+re,K+O,H,z),vt(0,0,m,h),vt(m,0,S,h),vt(m+S,0,v,h),vt(0,h,m,T),vt(m,h,S,T),vt(m+S,h,v,T),vt(0,h+T,m,b),vt(m,h+T,S,b),vt(m+S,h+T,v,b)];for(let se=0;se<9;se++){let pe=W[se],be=W[se+9];ws(Object.assign(Jn(this),{pos:be.pos(),tex:n.tex,quad:d.scale(pe),flipX:this.flipX,flipY:this.flipY,tiled:t.tiled,width:be.w,height:be.h}))}}else ws(Object.assign(Jn(this),{tex:n.tex,quad:d.scale(this.quad??new ct(0,0,1,1)),flipX:this.flipX,flipY:this.flipY,tiled:t.tiled,width:this.width,height:this.height}))},add(){let d=fs(e);d?d.onLoad(m=>s(this,m)):ud(()=>s(this,fs(e).data))},update(){if(!n||!i||r===null)return;let d=n.anims[i.name];if(typeof d=="number"){this.frame=d;return}if(d.speed===0)throw new Error("Sprite anim speed cannot be 0");if(i.timer+=_t()*this.animSpeed,i.timer>=1/i.speed){i.timer=0,i.frameIndex+=r;let m=d.frames;if(i.frameIndex>=m.length)if(i.pingpong&&!d.pingpong)r=-1,i.frameIndex=m.length-2;else if(i.loop)i.frameIndex=0;else{this.frame=m.at(-1),i.onEnd(),this.stop();return}else if(i.frameIndex<0)if(i.pingpong&&i.loop)r=1,i.frameIndex=1;else if(i.loop)i.frameIndex=m.length-1;else{this.frame=m[0],i.onEnd(),this.stop();return}this.frame=m[i.frameIndex]}},play(d,m={}){if(!n){o.add(()=>this.play(d,m));return}let v=n.anims[d];if(v===void 0)throw new Error(`Anim not found: ${d}`);i&&this.stop(),i=typeof v=="number"?{name:d,timer:0,loop:!1,pingpong:!1,speed:0,frameIndex:0,onEnd:()=>{}}:{name:d,timer:0,loop:m.loop??v.loop??!1,pingpong:m.pingpong??v.pingpong??!1,speed:m.speed??v.speed??10,frameIndex:0,onEnd:m.onEnd??(()=>{})},r=typeof v=="number"?null:1,this.frame=typeof v=="number"?v:v.frames[0],this.trigger("animStart",d)},stop(){if(!i)return;let d=i.name;i=null,this.trigger("animEnd",d)},numFrames(){return n?.frames.length??0},getCurAnim(){return i},curAnim(){return i?.name},getAnim(d){return n?.anims[d]??null},hasAnim(d){return!!this.getAnim(d)},onAnimEnd(d){return this.on("animEnd",d)},onAnimStart(d){return this.on("animStart",d)},renderArea(){return new at(U(0),this.width,this.height)},inspect(){return typeof e=="string"?`sprite: "${e}"`:null}}}function AA(e,t={}){function n(r){let o=Hn(Object.assign(Jn(r),{text:r.text+"",size:r.textSize,font:r.font,width:t.width&&r.width,align:r.align,letterSpacing:r.letterSpacing,lineSpacing:r.lineSpacing,transform:r.textTransform,styles:r.textStyles,indentAll:t.indentAll}));return t.width||(r.width=o.width/(r.scale?.x||1)),r.height=o.height/(r.scale?.y||1),o}let i={id:"text",set text(r){e=r,n(this),this.renderedText=Ll(e).text},get text(){return e},textSize:t.size??36,font:t.font,width:t.width??0,height:0,align:t.align,lineSpacing:t.lineSpacing,letterSpacing:t.letterSpacing,textTransform:t.transform,textStyles:t.styles,renderedText:e?Ll(e).text:"",add(){ud(()=>n(this))},draw(){Wn(n(this))},renderArea(){return new at(U(0),this.width,this.height)}};return n(i),i}function EA(e,t){return{id:"rect",width:e,height:t,draw(){Ko(Object.assign(Jn(this),{width:this.width,height:this.height}))},renderArea(){return new at(U(0),this.width,this.height)},inspect(){return`uvquad: (${Math.ceil(this.width)}w, ${Math.ceil(this.height)})h`}}}function TA(e={}){let t=null,n=null,i=null,r=null;return{id:"agent",require:["pos","tile"],agentSpeed:e.speed??100,allowDiagonals:e.allowDiagonals??!0,getDistanceToTarget(){return t?this.pos.dist(t):0},getNextLocation(){return n&&i?n[i]:null},getPath(){return n?n.slice():null},getTarget(){return t},isNavigationFinished(){return n?i===null:!0},isTargetReachable(){return n!==null},isTargetReached(){return t?this.pos.eq(t):!0},setTarget(o){t=o,n=this.getLevel().getPath(this.pos,t,{allowDiagonals:this.allowDiagonals}),i=n?0:null,n&&i!==null?(r||(r=this.getLevel().onNavigationMapChanged(()=>{t&&n&&i!==null&&(n=this.getLevel().getPath(this.pos,t,{allowDiagonals:this.allowDiagonals}),n?(i=0,this.trigger("navigationNext",this,n[i])):(i=null,this.trigger("navigationEnded",this)))}),this.onDestroy(()=>r?.cancel())),this.trigger("navigationStarted",this),this.trigger("navigationNext",this,n[i])):this.trigger("navigationEnded",this)},update(){if(t&&n&&i!==null){if(this.pos.sdist(n[i])<2)if(i===n.length-1){this.pos=t.clone(),i=null,this.trigger("navigationEnded",this),this.trigger("targetReached",this);return}else i++,this.trigger("navigationNext",this,n[i]);this.moveTo(n[i],this.agentSpeed)}},onNavigationStarted(o){return this.on("navigationStarted",o)},onNavigationNext(o){return this.on("navigationNext",o)},onNavigationEnded(o){return this.on("navigationEnded",o)},onTargetReached(o){return this.on("targetReached",o)},inspect(){return"agent: "+JSON.stringify({target:JSON.stringify(t),path:JSON.stringify(n)})}}}function PA(e){let t=e.graph;return{id:"pathfinder",require:["pos"],navigateTo(n){return this.graph?.getWaypointPath(this.pos,n,e.navigationOpt)},get graph(){if(t)return t;let n=this.parent;for(;n;){if(n.has("pathfinderMap"))return n.graph;n=n.parent}},set graph(n){t=n}}}function DA(e={}){let t=e.waypoints,n=e.speed||100,i=e.endBehavior||"stop",r=0,o=t!=null;return{id:"patrol",require:["pos"],get patrolSpeed(){return n},set patrolSpeed(a){n=a},get waypoints(){return t},set waypoints(a){t=a,r=0,o=!1},get nextLocation(){return t?t[r]:void 0},update(){let a=this.nextLocation;if(!(!t||!a||o)&&(this.moveTo(a,n),this.pos.sdist(a)<9))switch(i){case"loop":r=(r+1)%t.length;break;case"ping-pong":r=r+1,r==t.length&&(t.reverse(),r=0);break;case"stop":r<t.length-1?r+=1:o||(o=!0,this.trigger("patrolFinished",this));break}},onPatrolFinished(a){return this.on("patrolFinished",a)}}}function zA(e,t={}){let n=typeof e=="function"?e:()=>x.game.root.query(e),i=t.checkFrequency||1,r=typeof t.direction=="number"?G.fromAngle(t.direction):t.direction,o=0;return{id:"sentry",require:["pos"],direction:typeof t.direction=="number"?G.fromAngle(t.direction):t.direction,spotted:[],set directionAngle(a){this.direction=a!==void 0?G.fromAngle(a):void 0},get directionAngle(){return this.direction?this.direction.angle():void 0},fieldOfView:t.fieldOfView||200,isWithinFieldOfView(a,s,l){let d=(typeof s=="number"?G.fromAngle(s):s)||r,m=l||t.fieldOfView;if(!d||!m||m>=360)return!0;let v=m/2;return a.pos&&d.angleBetween(a.pos.sub(this.pos))<=v},hasLineOfSight(a){let s=Sy(this.pos,a.pos.sub(this.pos),t.raycastExclude);return s!=null&&s.object===a},update(){if(o+=_t(),o>i){o-=i;let a=n();if(a.length&&r&&this.fieldOfView&&this.fieldOfView<360){let s=this.fieldOfView/2;a=a.filter(l=>l.pos&&r.angleBetween(l.pos.sub(this.pos))<=s)}a.length&&t.lineOfSight&&(a=a.filter(s=>s.pos&&this.hasLineOfSight(s))),a.length>0&&(this.spotted=a,this.trigger("objectSpotted",a))}},onObjectsSpotted(a){return this.on("objectSpotted",a)}}}function Zy(e={}){let t=U(0),n=e.isObstacle??!1,i=e.cost??0,r=e.edges??[],o=()=>{let s={left:1,top:2,right:4,bottom:8};return r.map(l=>s[l]||0).reduce((l,d)=>l|d,0)},a=o();return{id:"tile",tilePosOffset:e.offset??U(0),set tilePos(s){let l=this.getLevel();t=s.clone(),this.pos=U(this.tilePos.x*l.tileWidth(),this.tilePos.y*l.tileHeight()).add(this.tilePosOffset)},get tilePos(){return t},set isObstacle(s){n!==s&&(n=s,this.getLevel().invalidateNavigationMap())},get isObstacle(){return n},set cost(s){i!==s&&(i=s,this.getLevel().invalidateNavigationMap())},get cost(){return i},set edges(s){r=s,a=o(),this.getLevel().invalidateNavigationMap()},get edges(){return r},get edgeMask(){return a},getLevel(){return this.parent},tileMove(s){let l=this.getLevel();l.removeFromSpatialMap(this),this.tilePos=this.tilePos.add(s),l.insertIntoSpatialMap(this),l.trigger("spatialMapChanged")},moveLeft(){this.tileMove(U(-1,0))},moveRight(){this.tileMove(U(1,0))},moveUp(){this.tileMove(U(0,-1))},moveDown(){this.tileMove(U(0,1))}}}var ld=class{constructor(e,t,n){D(this,"name");D(this,"duration");D(this,"loops");D(this,"direction");D(this,"easing");D(this,"interpolation");D(this,"isFinished");D(this,"timing");D(this,"easings");D(this,"relative");this.name=e,this.duration=t.duration,this.loops=t.loops||0,this.direction=t.direction||"forward",this.easing=t.easing||qo.linear,this.interpolation=t.interpolation||"linear",this.isFinished=!1,this.timing=t.timing,this.easings=t.easings,this.relative=n}update(e,t){return!0}getLowerKeyIndexAndRelativeTime(e,t,n){let i=t-1,r=e/this.duration;if(this.loops!==0&&r>=this.loops)return[i,0,!0];let o=Math.trunc(r);if(r-=o,(this.direction=="reverse"||this.direction=="ping-pong"&&o&1)&&(r=1-r),n){let a=0;for(;n[a+1]!==void 0&&n[a+1]<r;)a++;return a>=i?[i,0,!0]:[a,(r-n[a])/(n[a+1]-n[a]),!1]}else{let a=Math.floor((t-1)*r);return[a,(r-a/i)*i,!1]}}setValue(e,t,n){if(this.relative)switch(t){case"pos":e.pos=e.base.pos.add(n);break;case"angle":e.angle=e.base.angle+n;break;case"scale":e.scale=e.base.scale.scale(n);break;case"opacity":e.opacity=e.base.opacity*n;break;default:e[t]=n}else e[t]=n}serialize(){let e={duration:this.duration,keys:[]};return this.loops&&(e.loops=this.loops),this.direction!=="forward"&&(e.direction=this.direction),this.easing!=qo.linear&&(e.easing=this.easing.name),this.interpolation!=="linear"&&(e.interpolation=this.interpolation),this.timing&&(e.timing=this.timing),this.easings&&(e.easings=this.easings.map(t=>this.easing.name)),e}};function Ov(e,t){return t.add(t.sub(e))}var OA=class extends ld{constructor(t,n,i,r){super(t,i,r);D(this,"keys");this.keys=n}update(t,n){let[i,r,o]=this.getLowerKeyIndexAndRelativeTime(n,this.keys.length,this.timing);if(r==0||this.interpolation==="none")this.setValue(t,this.name,this.keys[i]);else{let a=this.easings?this.easings[i]:this.easing;this.setValue(t,this.name,Gt(this.keys[i],this.keys[i+1],a(r)))}return o}serialize(){return Object.assign(super.serialize(),{keys:this.keys})}},RA=class extends ld{constructor(t,n,i,r,o){super(t,i,r);D(this,"keys");D(this,"curves");D(this,"dcurves");if(this.keys=n,this.interpolation==="spline"){this.curves=[],o&&(this.dcurves=[]);for(let a=0;a<this.keys.length-1;a++){let s=this.keys[a],l=a+1,d=this.keys[l],m=a>0?this.keys[a-1]:Ov(d,s),v=l<this.keys.length-1?this.keys[l+1]:Ov(s,d);this.curves.push(vs(m,s,d,v)),o&&this.dcurves?.push(vs(m,s,d,v,D$))}}}update(t,n){let[i,r,o]=this.getLowerKeyIndexAndRelativeTime(n,this.keys.length,this.timing);if(r==0||this.interpolation==="none")this.setValue(t,this.name,this.keys[i]);else{let a=this.easings?this.easings[i]:this.easing;switch(this.interpolation){case"linear":this.setValue(t,this.name,this.keys[i].lerp(this.keys[i+1],a(r)));break;case"slerp":this.setValue(t,this.name,this.keys[i].slerp(this.keys[i+1],a(r)));break;case"spline":if(this.curves){this.setValue(t,this.name,this.curves[i](a(r))),this.dcurves&&this.setValue(t,"angle",this.dcurves[i](a(r)).angle());break}}}return o}serialize(){return Object.assign(super.serialize(),{keys:this.keys.map(t=>[t.x,t.y])})}},CA=class extends ld{constructor(t,n,i,r){super(t,i,r);D(this,"keys");this.keys=n}update(t,n){let[i,r,o]=this.getLowerKeyIndexAndRelativeTime(n,this.keys.length,this.timing);if(r==0||this.interpolation=="none")this.setValue(t,this.name,this.keys[i]);else{let a=this.easings?this.easings[i]:this.easing;this.setValue(t,this.name,this.keys[i].lerp(this.keys[i+1],a(r)))}return o}serialize(){return Object.assign(super.serialize(),{keys:this.keys})}};function jA(e={}){let t=[],n=0,i=!1;return{id:"animate",require:e.followMotion?["rotate"]:void 0,base:{pos:U(0,0),angle:0,scale:U(1,1),opacity:1},animation:{paused:!1,seek(r){n=Or(r,0,this.duration),t.forEach(o=>{o.isFinished=!1}),i=!1},get duration(){return t.reduce((r,o)=>Math.max(o.duration,r),0)}},add(){e.relative&&(this.has("pos")&&(this.base.pos=this.pos.clone()),this.has("rotate")&&(this.base.angle=this.angle),this.has("scale")&&(this.base.scale=this.scale),this.has("opacity")&&(this.base.opacity=this.opacity))},update(){if(this.animation.paused)return;let r=!0,o;n+=_t();for(let a of t)o=a.update(this,n),o&&!a.isFinished&&(a.isFinished=!0,this.trigger("animateChannelFinished",a.name)),r&&(r=o);r&&!i&&(i=!0,this.trigger("animateFinished"))},animate(r,o,a){i=!1,this.unanimate(r),typeof o[0]=="number"?t.push(new OA(r,o,a,e.relative||!1)):o[0]instanceof G?t.push(new RA(r,o,a,e.relative||!1,r==="pos"&&(e.followMotion||!1))):o[0]instanceof Le&&t.push(new CA(r,o,a,e.relative||!1))},unanimate(r){let o=t.findIndex(a=>a.name===r);o>=0&&t.splice(o,1)},unanimateAll(){t.splice(0,t.length)},onAnimateFinished(r){return this.on("animateFinished",r)},onAnimateChannelFinished(r){return this.on("animateChannelFinished",r)},serializeAnimationChannels(){return t.reduce((r,o)=>(r[o.name]=o.serialize(),r),{})},serializeAnimationOptions(){let r={};return e.followMotion&&(r.followMotion=!0),e.relative&&(r.relative=!0),r}}}function Ky(e,t){let n={name:e.name};return e.has("animate")&&(n.channels=e.serializeAnimationChannels(),Object.assign(n,e.serializeAnimationOptions())),e.children.length>0&&(n.children=e.children.filter(i=>i.has("named")).map(i=>Ky(i,i.name))),n}function Rv(e=2,t=1){let n=0;return{require:["scale"],update(){let i=Math.sin(n*e)*t;i<0&&this.destroy(),this.scale=U(i),n+=_t()}}}function MA(e,t){if(e==null)throw new Error("health() requires the initial amount of hp");return{id:"health",hurt(n=1){this.setHP(e-n),this.trigger("hurt",n)},heal(n=1){let i=e;this.setHP(e+n),this.trigger("heal",e-i)},hp(){return e},maxHP(){return t??null},setMaxHP(n){t=n},setHP(n){e=t?Math.min(t,n):n,e<=0&&this.trigger("death")},onHurt(n){return this.on("hurt",n)},onHeal(n){return this.on("heal",n)},onDeath(n){return this.on("death",n)},inspect(){return`health: ${e}`}}}function NA(e,t={}){if(e==null)throw new Error("lifespan() requires time");let n=t.fade??0;return{id:"lifespan",require:["opacity"],add(){x.game.root.wait(e,()=>{this.opacity=this.opacity??1,n>0?x.game.root.tween(this.opacity,0,n,i=>this.opacity=i,qo.linear).onEnd(()=>{this.destroy()}):this.destroy()})}}}function UA(e){return{id:"named",name:e}}function FA(e,t,n){if(!e)throw new Error("state() requires an initial state");let i={};function r(l){i[l]||(i[l]={enter:new Ft,end:new Ft,update:new Ft,draw:new Ft})}function o(l,d,m){return r(d),i[d][l].add(m)}function a(l,d,...m){r(d),i[d][l].trigger(...m)}let s=!1;return{id:"state",state:e,enterState(l,...d){if(s=!0,t&&!t.includes(l))throw new Error(`State not found: ${l}`);let m=this.state;if(n){if(!n?.[m])return;let v=typeof n[m]=="string"?[n[m]]:n[m];if(!v.includes(l))throw new Error(`Cannot transition state from "${m}" to "${l}". Available transitions: ${v.map(h=>`"${h}"`).join(", ")}`)}a("end",m,...d),this.state=l,a("enter",l,...d),a("enter",`${m} -> ${l}`,...d)},onStateTransition(l,d,m){return o("enter",`${l} -> ${d}`,m)},onStateEnter(l,d){return o("enter",l,d)},onStateUpdate(l,d){return o("update",l,d)},onStateDraw(l,d){return o("draw",l,d)},onStateEnd(l,d){return o("end",l,d)},update(){s||(a("enter",e),s=!0),a("update",this.state)},draw(){a("draw",this.state)},inspect(){return`state: ${this.state}`}}}function Vy(e){return{id:"stay",stay:!0,scenesToStay:e}}function LA(e=!0,t){let n,i;return{id:"textInput",hasFocus:e,require:["text"],typedText:"",add(){let r=()=>{this.text=this.typedText.replace(/([\[\\])/g,"\\$1")};n=x.k.onCharInput(o=>{this.hasFocus&&(!t||this.typedText.length<t)&&(x.k.isKeyDown("shift")?this.typedText+=o.toUpperCase():this.typedText+=o,r())}),i=x.k.onKeyPressRepeat("backspace",()=>{this.hasFocus&&(this.typedText=this.typedText.slice(0,-1),r())})},destroy(){n.cancel(),i.cancel()}}}function Kl(e=1e3){return{id:"timer",maxLoopsPerFrame:e,loop(t,n,i=1/0,r=!1){let o=r?0:t,a=new Ft,s=this.onUpdate(()=>{o+=x.app.state.dt;for(let l=0;o>=t&&l<this.maxLoopsPerFrame;l++)if(i--,n(),o-=t,i<=0){s.cancel(),a.trigger();return}});return{get paused(){return s.paused},set paused(l){s.paused=l},cancel:s.cancel,onEnd(l){a.add(l)},then(l){return a.add(l),this}}},wait(t,n){return this.loop(t,n??(()=>{}),1,!0)},tween(t,n,i,r,o=qo.linear){let a=0,s=[],l=this.onUpdate(()=>{a+=x.app.state.dt;let d=Math.min(a/i,1);r(Gt(t,n,o(d))),d===1&&(l.cancel(),r(n),s.forEach(m=>m()))});return{get paused(){return l.paused},set paused(d){l.paused=d},onEnd(d){s.push(d)},then(d){return this.onEnd(d),this},cancel(){l.cancel()},finish(){l.cancel(),r(n),s.forEach(d=>d())}}}}}var Vl=0;function qA(){return Vl>0}function BA(e={}){let t={},n=new Set,i=[];return{id:"area",collisionIgnore:e.collisionIgnore??[],add(){Vl++,this.area.cursor&&i.push(this.onHover(()=>x.app.setCursor(this.area.cursor))),i.push(this.onCollideUpdate((r,o)=>{if(!r.id)throw new Error("area() requires the object to have an id");t[r.id]||this.trigger("collide",r,o),o&&(t[r.id]=o,n.add(r.id))}))},destroy(){Vl--;for(let r of i)r.cancel()},fixedUpdate(){for(let r in t)n.has(Number(r))||(this.trigger("collideEnd",t[r].target),delete t[r]);n.clear()},drawInspect(){let r=this.localArea();lr(),ft(this.area.offset);let o={outline:{width:4/sy(),color:Ye(0,0,255)},anchor:this.anchor,fill:!1,fixed:Kn(this)};r instanceof at?fr({...o,pos:r.pos,width:r.width*this.area.scale.x,height:r.height*this.area.scale.y}):r instanceof Lt?hn({...o,pts:r.pts,scale:this.area.scale}):r instanceof Ht&&Ti({...o,pos:r.center,radius:r.radius}),Vt()},area:{shape:e.shape??null,scale:e.scale?U(e.scale):U(1),offset:e.offset??U(0),cursor:e.cursor??null},isClicked(){return x.app.isMousePressed()&&this.isHovering()},isHovering(){let r=Kn(this)?x.k.mousePos():x.k.toWorld(x.k.mousePos());return this.hasPoint(r)},checkCollision(r){if(!r.id)throw new Error("checkCollision() requires the object to have an id");return t[r.id]??null},getCollisions(){return Object.values(t)},isColliding(r){if(!r.id)throw new Error("isColliding() requires the object to have an id");return!!t[r.id]},isOverlapping(r){if(!r.id)throw new Error("isOverlapping() requires the object to have an id");let o=t[r.id];return o&&o.hasOverlap()},onClick(r,o="left"){let a=this.onMousePress(o,()=>{this.isHovering()&&r()});return i.push(a),a},onHover(r){let o=!1;return this.onUpdate(()=>{o?o=this.isHovering():this.isHovering()&&(o=!0,r())})},onHoverUpdate(r){return this.onUpdate(()=>{this.isHovering()&&r()})},onHoverEnd(r){let o=!1;return this.onUpdate(()=>{o?this.isHovering()||(o=!1,r()):o=this.isHovering()})},onCollide(r,o){if(typeof r=="function"&&o===void 0)return this.on("collide",r);if(typeof r=="string")return this.onCollide((a,s)=>{a.is(r)&&o?.(a,s)});throw new Error("onCollide() requires either a function or a tag")},onCollideUpdate(r,o){if(typeof r=="function"&&o===void 0)return this.on("collideUpdate",r);if(typeof r=="string")return this.on("collideUpdate",(a,s)=>a.is(r)&&o?.(a,s));throw new Error("onCollideUpdate() requires either a function or a tag")},onCollideEnd(r,o){if(typeof r=="function"&&o===void 0)return this.on("collideEnd",r);if(typeof r=="string")return this.on("collideEnd",a=>a.is(r)&&o?.(a));throw new Error("onCollideEnd() requires either a function or a tag")},hasPoint(r){return vn(this.worldArea(),r)},resolveCollision(r){let o=this.checkCollision(r);o&&!o.resolved&&(this.pos=this.pos.add(o.displacement),o.resolved=!0)},localArea(){return this.area.shape?this.area.shape:this.renderArea()},worldArea(){let r=this.localArea();if(!(r instanceof Lt||r instanceof at))throw new Error("Only support polygon and rect shapes for now");let o=this.transform.clone().translate(this.area.offset).scale(U(this.area.scale??1));if(r instanceof at){let a=Ei(this.anchor||As).add(1,1).scale(-.5).scale(r.width,r.height);o.translate(a)}return r.transform(o)},screenArea(){let r=this.worldArea();return Kn(this)?r:r.transform(x.game.cam.transform)},inspect(){return this.area.scale?.x==this.area.scale?.y?`area: ${this.area.scale?.x?.toFixed(1)}x`:`area: (${this.area.scale?.x?.toFixed(1)}x, ${this.area.scale.y?.toFixed(1)}y)`}}}function ZA(e={}){let t=null,n=null,i=!1,r=U(0),o=null,a=null,s;return{id:"body",require:["pos"],vel:U(0),drag:e.drag??0,jumpForce:e.jumpForce??Y$,gravityScale:e.gravityScale??1,isStatic:e.isStatic??!1,mass:e.mass??1,add(){if(o=this.pos.clone(),a=this.pos.clone(),s=this.pos.clone(),this.mass===0)throw new Error("Can't set body mass to 0");this.has("area")&&(this.onCollideUpdate((l,d)=>{if(!d||!l.has("body")||d.resolved)return;this.trigger("beforePhysicsResolve",d);let m=d.reverse();if(l.trigger("beforePhysicsResolve",m),!(d.resolved||m.resolved)&&!(this.isStatic&&l.isStatic)){if(!this.isStatic&&!l.isStatic){let v=this.mass+l.mass;this.pos=this.pos.add(d.displacement.scale(l.mass/v)),l.pos=l.pos.add(d.displacement.scale(-this.mass/v)),this.transform=No(this),l.transform=No(l)}else{let v=!this.isStatic&&l.isStatic?d:d.reverse();v.source.pos=v.source.pos.add(v.displacement),v.source.transform=No(v.source)}d.resolved=!0,this.trigger("physicsResolve",d),l.trigger("physicsResolve",d.reverse())}}),this.onPhysicsResolve(l=>{if(x.game.gravity)if(l.isBottom()&&this.isFalling()){this.vel=this.vel.reject(x.game.gravity.unit());let d=t;t=l.target,d!=t&&(n=l.target.pos),i?i=!1:d||(this.trigger("ground",t),l.target.trigger("land",this))}else l.isTop()&&this.isJumping()&&(this.vel=this.vel.reject(x.game.gravity.unit()),this.trigger("headbutt",l.target),l.target.trigger("headbutted",this))}))},update(){t&&this.isColliding(t)&&t.exists()&&t.has("body")&&(n&&!t.pos.eq(n)&&e.stickToPlatform!==!1&&this.moveBy(t.pos.sub(n)),n=t.pos);let l=Ul();l&&(this.pos.x==s.x&&(this.pos.x=Gt(o.x,a.x,l/Nl()),s.x=this.pos.x),this.pos.y==s.y&&(this.pos.y=Gt(o.y,a.y,l/Nl()),s.y=this.pos.y))},fixedUpdate(){if(o&&(this.pos.x==s.x&&(this.pos.x=o.x),this.pos.y==s.y&&(this.pos.y=o.y),o=null),x.game.gravity&&!this.isStatic){i&&(t=null,n=null,this.trigger("fallOff"),i=!1),t&&(!this.isColliding(t)||!t.exists()||!t.has("body"))&&(i=!0);let l=this.vel.clone();this.vel=this.vel.add(x.game.gravity.scale(this.gravityScale*_t()));let d=e.maxVelocity??X$;this.vel.slen()>d*d&&(this.vel=this.vel.unit().scale(d)),l.dot(x.game.gravity)<0&&this.vel.dot(x.game.gravity)>=0&&this.trigger("fall")}if(this.vel.x+=r.x*_t(),this.vel.y+=r.y*_t(),this.vel.x*=1-this.drag*_t(),this.vel.y*=1-this.drag*_t(),this.move(this.vel),Ul()){o=this.pos.clone();let l=this.vel.add(r.scale(_t()));a=this.pos.add(l.scale(_t())),s=this.pos.clone()}r.x=0,r.y=0},onPhysicsResolve(l){return this.on("physicsResolve",l)},onBeforePhysicsResolve(l){return this.on("beforePhysicsResolve",l)},curPlatform(){return t},isGrounded(){return t!==null},isFalling(){return this.vel.dot(Fo())>0},isJumping(){return this.vel.dot(Fo())<0},applyImpulse(l){this.isStatic||(this.vel=this.vel.add(l))},addForce(l){this.isStatic||(r.x+=l.x/this.mass,r.y+=l.y/this.mass)},jump(l){this.isStatic||(t=null,n=null,this.vel=Fo().scale(-l||-this.jumpForce))},onGround(l){return this.on("ground",l)},onFall(l){return this.on("fall",l)},onFallOff(l){return this.on("fallOff",l)},onHeadbutt(l){return this.on("headbutt",l)},onLand(l){return this.on("land",l)},onHeadbutted(l){return this.on("headbutted",l)},inspect(){return`gravityScale: ${this.gravityScale}x`}}}function KA(e=2){let t=e;return{id:"doubleJump",require:["body"],numJumps:e,add(){this.onGround(()=>{t=this.numJumps})},doubleJump(n){t<=0||(t<this.numJumps&&this.trigger("doubleJump"),t--,this.jump(n))},onDoubleJump(n){return this.on("doubleJump",n)},inspect(){return`jumpsLeft: ${t}`}}}function VA(e){return{id:"surfaceEffector",require:["area"],speed:e.speed,speedVariation:e.speedVariation??0,forceScale:e.speedVariation??.9,add(){this.onCollideUpdate("body",(t,n)=>{let i=n?.normal.normal(),r=t.vel.project(i),o=i?.scale(this.speed)?.sub(r);t.addForce(o?.scale(t.mass*this.forceScale))})}}}function GA(e){return{id:"areaEffector",require:["area"],useGlobalAngle:e.useGlobalAngle||!1,forceAngle:e.forceAngle,forceMagnitude:e.forceMagnitude,forceVariation:e.forceVariation??0,linearDrag:e.linearDrag??0,add(){this.onCollideUpdate("body",(t,n)=>{if(!t.has("body"))return;let i=G.fromAngle(this.forceAngle).scale(this.forceMagnitude);t.addForce(i),this.linearDrag&&t.addForce(t.vel.scale(-this.linearDrag))})}}}function HA(e){return{id:"pointEffector",require:["area","pos"],forceMagnitude:e.forceMagnitude,forceVariation:e.forceVariation??0,distanceScale:e.distanceScale??1,forceMode:e.forceMode||"inverseLinear",linearDrag:e.linearDrag??0,add(){this.onCollideUpdate("body",(t,n)=>{let i=this.pos.sub(t.pos),r=i.len(),o=r*this.distanceScale/10,a=this.forceMode==="constant"?1:this.forceMode==="inverseLinear"?1/o:1/o**2,s=i.scale(this.forceMagnitude*a/r);t.addForce(s),this.linearDrag&&t.addForce(t.vel.scale(-this.linearDrag))})}}}function WA(e){return{id:"constantForce",require:["body"],force:e.force,update(){this.force&&this.addForce(this.force)}}}function JA(e){return{id:"platformEffector",require:["area","body"],surfaceArc:e.surfaceArc??180,useOneWay:e.useOneWay??!1,add(){this.onBeforePhysicsResolve(t=>{let n=t.target.vel,i=Fo().scale(-1).angleBetween(n);Math.abs(i)>this.surfaceArc/2&&t.preventResolution()})}}}function YA(e){return{id:"buoyancyEffector",require:["area"],surfaceLevel:e.surfaceLevel,density:e.density??1,linearDrag:e.linearDrag??1,angularDrag:e.angularDrag??.2,flowAngle:e.flowAngle??0,flowMagnitude:e.flowMagnitude??0,flowVariation:e.flowVariation??0,add(){this.onCollideUpdate("body",(t,n)=>{let i=t,r=i.worldArea(),[o,a]=r.cut(U(-100,this.surfaceLevel),U(100,this.surfaceLevel));o&&(this.applyBuoyancy(i,o),this.applyDrag(i,o)),this.flowMagnitude&&i.addForce(G.fromAngle(this.flowAngle).scale(this.flowMagnitude))})},applyBuoyancy(t,n){let i=this.density*n.area(),r=U(0,1).scale(-i);t.addForce(r)},applyDrag(t,n){let i=t.vel,r=this.density*this.linearDrag,o=i.scale(-r);t.addForce(o)}}}function Gl(e){if(!e)throw new Error("Please define an anchor");return{id:"anchor",anchor:e,inspect(){return typeof this.anchor=="string"?"anchor: "+this.anchor:"anchor: "+this.anchor.toString()}}}function Gy(){return{id:"fixed",fixed:!0}}function XA(e,t){return{id:"follow",require:["pos"],follow:{obj:e,offset:t??U(0)},add(){e.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))},update(){e.exists()&&(this.pos=this.follow.obj.pos.add(this.follow.offset))}}}function QA(e){let t=x.game.layers?.indexOf(e);return{id:"layer",get layerIndex(){return t??null},get layer(){return t?x.game.layers?.[t]??null:null},set layer(n){if(t=x.game.layers?.indexOf(n),t==-1)throw Error("Invalid layer name")},inspect(){return`layer: ${this.layer}`}}}function e1(e,t){let n=typeof e=="number"?G.fromAngle(e):e.unit();return{id:"move",require:["pos"],update(){this.move(n.scale(t))}}}function t1(e={}){let t=!1,n=new at(U(0),kt(),zt()),i=new at(U(0),0,0),r=o=>{o.isOffScreen()?(t||(o.trigger("exitView"),t=!0),e.hide&&(o.hidden=!0),e.pause&&(o.paused=!0),e.destroy&&o.destroy()):(t&&(o.trigger("enterView"),t=!1),e.hide&&(o.hidden=!1),e.pause&&(o.paused=!1))};return{id:"offscreen",require:["pos"],offscreenDistance:e.distance??wv,isOffScreen(){let o=this.screenPos();if(!o)return!1;if(n.width=kt(),n.height=zt(),!this.offscreenDistance&&this.width&&this.height)return i.width=this.width,i.height=this.height,i.pos=this.pos,i.collides(n);let a=this.offscreenDistance?this.offscreenDistance:wv;return!$s(n,o)&&n.sdistToPoint(o)>a*a},onExitScreen(o){return this.on("exitView",o)},onEnterScreen(o){return this.on("enterView",o)},add(){e.pause&&e.unpause?Ay(()=>r(this)):this.onUpdate(()=>r(this))}}}function _s(...e){return{id:"pos",pos:U(...e),moveBy(...t){this.pos=this.pos.add(U(...t))},move(...t){this.moveBy(U(...t).scale(_t()))},moveTo(...t){if(typeof t[0]=="number"&&typeof t[1]=="number")return this.moveTo(U(t[0],t[1]),t[2]);let n=t[0],i=t[1];if(i===void 0){this.pos=U(n);return}let r=n.sub(this.pos);if(r.len()<=i*_t()){this.pos=U(n);return}this.move(r.unit().scale(i))},worldPos(t=null){return t?(this.pos=this.pos.add(this.fromWorld(t)),null):this.parent?this.parent.transform.multVec2(this.pos):this.pos},toWorld(t){return this.parent?this.parent.transform.multVec2(this.pos.add(t)):this.pos.add(t)},fromWorld(t){return this.parent?this.parent.transform.invert().multVec2(t).sub(this.pos):t.sub(this.pos)},screenPos(t=null){if(t)return this.pos=this.pos.add(this.fromScreen(t)),null;{let n=this.worldPos();return n?Kn(this)?n:Bl(n):null}},toScreen(t){let n=this.toWorld(t);return Kn(this)?n:Bl(n)},fromScreen(t){return Kn(this)?this.fromWorld(t):this.fromWorld(My(t))},toOther(t,n){return t.fromWorld(this.toWorld(n))},fromOther(t,n){return t.toOther(this,n)},inspect(){return`pos: (${Math.round(this.pos.x)}x, ${Math.round(this.pos.y)}y)`},drawInspect(){Ti({color:Ye(255,0,0),radius:4/sy()})}}}function r1(e){return{id:"rotate",angle:e??0,rotateBy(t){this.angle+=t},rotateTo(t){this.angle=t},inspect(){return`angle: ${Math.round(this.angle)}`}}}function Is(...e){if(e.length===0)return Is(1);let t=U(...e);return{id:"scale",set scale(n){if(!(n instanceof G))throw Error("The scale property on scale is a vector. Use scaleTo or scaleBy to set the scale with a number.");t=U(n)},get scale(){return t},scaleTo(...n){t=U(...n)},scaleBy(...n){t=t.scale(U(...n))},inspect(){return t.x==t.y?`scale: ${t.x.toFixed(1)}x`:`scale: (${t.x.toFixed(1)}x, ${t.y.toFixed(1)}y)`}}}function n1(e){return{id:"z",z:e,inspect(){return`z: ${this.z}`}}}var i1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOcAAACDCAYAAAB2kQxsAAAAAXNSR0IArs4c6QAABqxJREFUeJztnU1yFDkQRtMEB+AG7Fk6fBPO6ZsQLGc/N5gbMAtosJvqKv2kpPxS763A0W5XSXqVqZ+SngzgF58/fflx/7N///vnacW1gBkFD2Z2LOYNBF3Dx9UXAGs5kxLWwhNxU2qlJHrOhwLfkNZoiaBzIa3dCFJYLXgSboKXmETPeVDQyamR8vX55fe/v37/9vBzCDoH0tqktEpZ+t0IOh4KOBm16euZmETPtVDAiRgRLRF0HRRuEkrFrE1hzR4Lipxj+bD6AqCPz5++/Bgp5tXfdv1CeAdPPmFmSkn0nE+a0drdFm6XiOkdKWEuKRptTXqlLuqqFNaM6Dkb+T5nbb+npo8WjZVinqFantFJk9bWojaRThq7HzKN8wiPJ7aCoJHEZN5zHvJp7RE1DTV6SnZ1fa/PL1MjJtF5HmnT2tJF3GZ/BIj05I8ULUtR6ypER7ogjxpw61rRGxEal4KYjNyORzatbUlHSxr06tFcBTHPiN5NUEJWzlZKG/aKRqYk5tl1IKgPafucZ7w+vxSluLP6olHnL6MQQfYV6bpk/+BRZXm+cXHEiApSipZHlE6tRBDMkxmyysl5VsmtjXiFoJmiZU35ZWK0oNv1OY+omSv0GDDKJCaMI42cHg25dvFCi6QZxVS6ViVSpLUz38A4oiS9ySjlW2althGWKZrN6XNuOVpbwq0ReIzqZhfTrHwE/PZZuEYqcnqO0tZQGxVqRylprLGIEDXNkLOKEakbYsYiiphmiQaEZuD9BghixiKSmGYJIueqBt4TRZEyHtHENCNyNtMaRREzHhHFNBOKnKv7myVcVXKka4WfRBXTjMjpypl8iBmP6MsOmed0Bgk1UHjxXlpORIAWIqeybyGtha1QEdNMRM5s7wLCGpTENBORE6AXNTHNkBM2QFFMM4F5ToX5TYiLqphmRE7YmMhimiEnJEb9XBdJOUlp4Qp1Mc1E5QQ4I/qyvFJCy8n8JnijEjXNAi3fQ0TwIEM6e2OqnAgII8kkptkgOZEQZlN6BquZjqhVFxlBOkZq4Z6WASAFQQ8jZwQJ70FK8CTiaeb3fDSLJyMiwiwiS/q0SkwEBE+85jYjSTpcTiSE2WQRtVlOpAMVemVdtjXmlZxICFlQk/TJjHcmYS96JJ0p6KmcZggKeWmVdPopYwgKuxJVUuQE+EU0Sd99KYICxJH0ry9DUIA/rFy3WyWnGYLCnqyQ9PCXERTgmJmSPvwlBAU4p1bUWklPP1yytA9JYWdGRtLLDyEowDUjomiRwQgKUIZnJC3OgREUoByPSDpkDyEkBfhJj6RNQ7xEUYA6aiS9Cdo8SUoUBaijVtCuFQwICtBGiajdawARFKCNK0HdVtEjKUAd0+Q0q9v/FklhJ1rmP4e8JEoUBejfq2jYNgtEUdgJzwN7u6dSSkBQyMSME7O7FyHUQpoLCqw8rv5o+d6Uw3NvfzjagUkAZvOlLH1lLMyx8wCzWBEhW3ZDmLZ7NTsrwCpmyui5A1+IPidigjcjhZy14/vytBYxwRsPMVcf/2c2QU72wQUVIgj5lqFyIiZEJ5qQb1me1gLMJLKM93wY9cVETYiGkphmg+RETFhJljY2LHICQB/uchI1AXxwlRMxAfwgrYVtUHvxwk1OoiaAL8MjJ2ICtOEip1q6APnJEBS6VwiRzp4vtM5YBvf3m/EeI8DyvUZK33z4+v1bqsZ7dN+3n2W6zwgMO44hY0X1vIqkXh419x7lXh9ds8oyviFyRqmcXrxf2FUtF89ymFkG6nI2p7WZB4FGvUWfLcVt4ahsdy+TR7ifz6lc0F5v0GfalmXldpE3esrr6PrTR84sjNjS4kpQhQhaUi4lD6KR1xK9DHupfoKoR02vSFDy9FWNoKVivv1/lG7OfZkqR043OZUbWgmtFaomaGl51ZTHCnFv5bqNnFGjZvRtEFUEHSHmI1ZHWgVBXZ5+sxvX7ANlPChpjKsknSllKaPlRU4nZo0Yjq6wiIJGFPMML2mj3M8ZRRe4QkzF6FhCJEFbBn4i0iKswn11yenZiLLKeMRqQdWiZSmlkqrcV9d0gPfksAcqBW+2ZqAoq5gZGSrnTtGwlVmCIqUepxWxerj7iIyNZ7SgiKmJhJw7NJpRgiKmLuHl3KnReA4UIaU+y+WkcbzHQ1DEzMGQ9aJH0BDK6RE0y9wlTDp2HuppERQxc0FFBaZGUMTMB5UlQG/fHyk1odJEaBUUMXWh4oSoFRQxtaHyxMi2uBseQwUKciUoYuaAShTlkaCImQcqUph7QREzF/8DSS/2GZ2/N/sAAAAASUVORK5CYII=",o1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOcAAACDCAYAAAB2kQxsAAAAAXNSR0IArs4c6QAABdRJREFUeJzt3d3N3TYMgGG16ADdoAhyl7UyV9bqXRB0g2zQXgRGDcOWSIoUaX3vAwQBknMk/4gWLcnHrQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACDEb9kb8FH99eeXf6Wf/efn35ynDyj1pEsb6G6NUxOYZ7sdB/QtPdnWRnn29gbKMYDUspPs0SgPb22cHANo/JG9AZF6wWBp3JLgeir36bvff3x9LOvzp2/dbSFA97bk5I4a9VMD7TXOUcP0uJ+d6emu5d6V1QvMs5nj8FZPx37X/b2TFpzShtnafeP0DipJMFnLnN3/w1OQ7tZgP+pA4VVKcHo0TG36KNULKGt5XsHZmi1APS5WM2Vqg0i7vbsG6YcIznN9vRTxXHavgdxtv6Tc3vc1pAHqdaG6ipwKYprpf1sFp6aH0gRTrxxLubPB2avHu+c/l3mICvqnsr//+Cq+qGrK1Xw/wzbBaRkNvSv3yew9cq+cu89L6nu6F/cMzCgzF1ftANlbe+Otp1IkDVxyVfbo6Z481f3507dhvXfbrk3HpdtjKTNqKuio8678c7mzF6ns6arfMyrVNoA75wMfNU2hKSeCx3Fq7dc+SPfDc39H9Vqn2CT//4bsYeT1PecOJyGSJdh6PZOlbElPZz2PHtlD1cUeS4LT4z5IOihwfNaD5ERm9qxH/dZ7Vmt9M999CtCZbdLUP/p3r2zFQ0paG8lr4Eb6+ZWBcSeq/qhyK6bXUfXOSgtO7/tOb9eT1NveqKttpYbiyXu/euV51JV16/T6e86zyF5TUp731V5Sp+Z7M71h9QvFNWWuvr0Sy4LzLfNvrel6zRX1e+hN2VzrnNlfaYD0xhCs++851lDh3vNV95xe6YvHgb8bwbNcuc+f09wbaUj2dzYgjz93//5kh94t0quCM8OKK6glKKuM0EYHfhUZWd8WwenZa0rLsp6s2YY66o0k9WUvS4NManBaGuo1eDIHgUZ1ePdkntsfFaCz5VZJdStsxyt7ziMNXHEAK5yk1mqmhrMPf1fcp57Vqe3SqZTMEduZhqAZyaywFne0DVHngHTZ11bznE88l/1lBZ9meP8851plWkBCO7drmQvWnL/sY/fKtFaqN3iy6iofsQxNktJnTMgfPXJUz3w3VaP5vOQ7Iyszvy2DczSi+aYFET2jINUEqFcAS4+rV480WlwRWXe07dLa0YGvfl9kmbTvPZJ1TXGvn4t4yuRp+2aMgk27wkm63DIztU3vOVfueC8wK4zKWtK0M+nvJXmOdlt65MgFFCva06qsKz044SvjIiN5TjLaaHxhtNyyouXBGZ1WSn66Ivt+M7pRZAWoZsDq+t2emeM1am/WtHxFG9runrO1/n1CxLK7CilxJM/H4bwuTJJBvWtgvm0gcNu01uvpd8la1soLE7xkpYDea4Ot6W3GOSzRc3o/qHw2M9qmXWA+uw+jbd0hyO9Yz0+vJ9QGcO/8ZV2YUqYVPN8dImXp3aJ/w1XTGGYfKZN+P7IXiXqO1uINLzFOm/Pz+BV4C03PNEqpZl//ELXP1ro8nhLyKLPHMyAiXyvh4cMFZ2uyAJXc62gzgJl1nhrSLMEzcLx+5qQnIhgqv6qhTHC2Zmus1tUuowCVDkRU6j0jgiJqhLPSSq2q7wMtMSBkdbcQWjNCq2nMlRrTnajAPP/t+c5Sj3K8VNueQ+pGzaa2MyOb2sZseW2dpL6ZnjMzfeQFt/Fe3XP2WIfGvRY6a569jCJ9TaIlcCS9KQE5p1TP2VrMbwLNDlZEvpE5AkGxh9f2nLO/QOetytIwAnMf6SfS2ns+jaZ6B4i2sWvSvF0HWOAj/aRGNFAaPXbw2rS2Rzr0T/ChshKNM3qd4135BCaqK9VAKy+lAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/4DBC0k0jFtF9wAAAAASUVORK5CYII=",a1=JI.version,x={k:null,globalOpt:null,gfx:null,game:null,app:null,assets:null,fontCacheCanvas:null,fontCacheC2d:null,debug:null,audio:null,pixelDensity:null,canvas:null,gscale:null,kaSprite:null,boomSprite:null},s1=(e={tagsAsComponents:!0})=>{x.k&&(console.warn("KAPLAY already initialized, you are calling kaplay() multiple times, it may lead bugs!"),x.k.quit()),x.globalOpt=e;let t=e.root??document.body;t===document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.body.style.margin="0px",document.documentElement.style.width="100%",document.documentElement.style.height="100%");let n=e.canvas??t.appendChild(document.createElement("canvas"));x.canvas=n;let i=e.scale??1;x.gscale=i;let r=e.width&&e.height&&!e.stretch&&!e.letterbox;r?(n.width=e.width*i,n.height=e.height*i):(n.width=n.parentElement.offsetWidth,n.height=n.parentElement.offsetHeight);let o=["outline: none","cursor: default"];if(r){let xe=n.width,Ae=n.height;o.push(`width: ${xe}px`),o.push(`height: ${Ae}px`)}else o.push("width: 100%"),o.push("height: 100%");e.crisp&&(o.push("image-rendering: pixelated"),o.push("image-rendering: crisp-edges")),n.style.cssText=o.join(";");let a=e.pixelDensity||1;x.pixelDensity=a,n.width*=a,n.height*=a,n.tabIndex=0;let s=document.createElement("canvas");s.width=256,s.height=256,x.fontCacheCanvas=s;let l=s.getContext("2d",{willReadFrequently:!0});x.fontCacheC2d=l;let d=AS({canvas:n,touchToMouse:e.touchToMouse,gamepads:e.gamepads,pixelDensity:e.pixelDensity,maxFPS:e.maxFPS,buttons:e.buttons});x.app=d;let m=[],v=d.canvas.getContext("webgl",{antialias:!0,depth:!0,stencil:!0,alpha:!0,preserveDrawingBuffer:!0});if(!v)throw new Error("WebGL not supported");let h=v,b=xk(h,{texFilter:e.texFilter}),_=Ak(e,b);x.gfx=_;let E=mA();x.audio=E;let S=ek(b,e.spriteAtlasPadding??0);x.assets=S;let T=cA();x.game=T,T.root.use(Kl());function Z(xe,Ae){let Te=new xs(b,xe,Ae);return{clear:()=>Te.clear(),free:()=>Te.free(),toDataURL:()=>Te.toDataURL(),toImageData:()=>Te.toImageData(),width:Te.width,height:Te.height,draw:Xe=>{dr(),Te.bind(),Xe(),dr(),Te.unbind()},get fb(){return Te}}}function H(){h.clear(h.COLOR_BUFFER_BIT),_.frameBuffer.bind(),h.clear(h.COLOR_BUFFER_BIT),_.bgColor||mn(()=>{Ko({width:kt(),height:zt(),quad:new ct(0,0,kt()/64,zt()/64),tex:_.bgTex,fixed:!0})}),_.renderer.numDraws=0,_.fixed=!1,_.transformStack.length=0,_.transform=new Rr}function re(xe,Ae){_.postShader=xe,_.postShaderUniform=Ae??null}function K(){dr(),_.lastDrawCalls=_.renderer.numDraws,_.frameBuffer.unbind(),h.viewport(0,0,h.drawingBufferWidth,h.drawingBufferHeight);let xe=_.width,Ae=_.height;_.width=h.drawingBufferWidth/a,_.height=h.drawingBufferHeight/a,ws({flipY:!0,tex:_.frameBuffer.tex,pos:new G(_.viewport.x,_.viewport.y),width:_.viewport.width,height:_.viewport.height,shader:_.postShader,uniform:typeof _.postShaderUniform=="function"?_.postShaderUniform():_.postShaderUniform,fixed:!0}),dr(),_.width=xe,_.height=Ae}let z=!1,O={inspect:!1,set timeScale(xe){x.app.state.timeScale=xe},get timeScale(){return x.app.state.timeScale},showLog:!0,fps:()=>d.fps(),numFrames:()=>d.numFrames(),stepFrame:Mt,drawCalls:()=>_.lastDrawCalls,clearLog:()=>T.logs=[],log:(...xe)=>{let Ae=e.logMax??8,Te=xe.length>1?xe.concat(" ").join(" "):xe[0];T.logs.unshift({msg:Te,time:d.time()}),T.logs.length>Ae&&(T.logs=T.logs.slice(0,Ae))},error:xe=>O.log(new Error(xe.toString?xe.toString():xe)),curRecording:null,numObjects:()=>Pe("*",{recursive:!0}).length,get paused(){return z},set paused(xe){z=xe,xe?E.ctx.suspend():E.ctx.resume()}};x.debug=O;function W(xe,Ae){try{return JSON.parse(window.localStorage[xe])}catch{return Ae?(se(xe,Ae),Ae):null}}function se(xe,Ae){window.localStorage[xe]=JSON.stringify(Ae)}function pe(xe,...Ae){let Te=xe(ir),Xe;typeof Te=="function"?Xe=Te(...Ae)(ir):Xe=Te;for(let gt in Xe)ir[gt]=Xe[gt],e.global!==!1&&(window[gt]=Xe[gt]);return ir}function be(xe){let Ae=d.canvas.captureStream(xe),Te=E.ctx.createMediaStreamDestination();E.masterNode.connect(Te);let Xe=new MediaRecorder(Ae),gt=[];return Xe.ondataavailable=le=>{le.data.size>0&&gt.push(le.data)},Xe.onerror=()=>{E.masterNode.disconnect(Te),Ae.getTracks().forEach(le=>le.stop())},Xe.start(),{resume(){Xe.resume()},pause(){Xe.pause()},stop(){return Xe.stop(),E.masterNode.disconnect(Te),Ae.getTracks().forEach(le=>le.stop()),new Promise(le=>{Xe.onstop=()=>{le(new Blob(gt,{type:"video/mp4"}))}})},download(le="kaboom.mp4"){this.stop().then(xt=>_v(le,xt))}}}function $e(){return document.activeElement===d.canvas}let Me=T.root.add.bind(T.root),je=T.root.readd.bind(T.root),Ue=T.root.removeAll.bind(T.root),Pe=T.root.get.bind(T.root),_e=T.root.wait.bind(T.root),Ge=T.root.loop.bind(T.root),Fe=T.root.query.bind(T.root),Je=T.root.tween.bind(T.root),pt=Uo(null,o1),ke=Uo(null,i1);x.kaSprite=pt,x.boomSprite=ke;function Fr(){T.root.fixedUpdate()}function Mt(){T.root.update()}class nr{constructor(Ae,Te,Xe,gt,le=!1){D(this,"source");D(this,"target");D(this,"normal");D(this,"distance");D(this,"resolved",!1);this.source=Ae,this.target=Te,this.normal=Xe,this.distance=gt,this.resolved=le}get displacement(){return this.normal.scale(this.distance)}reverse(){return new nr(this.target,this.source,this.normal.scale(-1),this.distance,this.resolved)}hasOverlap(){return!this.displacement.isZero()}isLeft(){return this.displacement.cross(T.gravity||U(0,1))>0}isRight(){return this.displacement.cross(T.gravity||U(0,1))<0}isTop(){return this.displacement.dot(T.gravity||U(0,1))>0}isBottom(){return this.displacement.dot(T.gravity||U(0,1))<0}preventResolution(){this.resolved=!0}}function Nt(){if(!qA())return;let xe={},Ae=e.hashGridSize||64,Te=new Rr,Xe=[];function gt(le){if(Xe.push(Te.clone()),le.pos&&Te.translate(le.pos),le.scale&&Te.scale(le.scale),le.angle&&Te.rotate(le.angle),le.transform=Te.clone(),le.c("area")&&!le.paused){let xt=le,kr=xt.worldArea().bbox(),on=Math.floor(kr.pos.x/Ae),Ke=Math.floor(kr.pos.y/Ae),Lr=Math.ceil((kr.pos.x+kr.width)/Ae),go=Math.ceil((kr.pos.y+kr.height)/Ae),or=new Set;for(let ar=on;ar<=Lr;ar++)for(let Ar=Ke;Ar<=go;Ar++)if(!xe[ar])xe[ar]={},xe[ar][Ar]=[xt];else if(!xe[ar][Ar])xe[ar][Ar]=[xt];else{let fi=xe[ar][Ar];e:for(let Pt of fi){if(Pt.paused||!Pt.exists()||or.has(Pt.id))continue;for(let mt of xt.collisionIgnore)if(Pt.is(mt))continue e;for(let mt of Pt.collisionIgnore)if(xt.is(mt))continue e;let qr=M$(xt.worldArea(),Pt.worldArea());if(qr){let mt=new nr(xt,Pt,qr.normal,qr.distance);xt.trigger("collideUpdate",Pt,mt);let Rn=mt.reverse();Rn.resolved=mt.resolved,Pt.trigger("collideUpdate",xt,Rn)}or.add(Pt.id)}fi.push(xt)}}le.children.forEach(gt),Te=Xe.pop()}gt(T.root)}function nn(xe){console.error(xe),E.ctx.suspend();let Ae=xe.message??String(xe)??"Unknown error, check console for more info";d.run(()=>{},()=>{H(),mn(()=>{let Te=kt(),Xe=zt(),gt={size:36,width:Te-32*2,letterSpacing:4,lineSpacing:4,font:ys,fixed:!0};fr({width:Te,height:Xe,color:Ye(0,0,255),fixed:!0});let le=Hn({...gt,text:"Error",pos:U(32),color:Ye(255,128,0),fixed:!0});Wn(le),zv({...gt,text:Ae,pos:U(32,32+le.height+16),fixed:!0}),Vt(),T.events.trigger("error",xe)}),K()})}function ho(xe){m.push(xe)}function di(){T.events.onOnce("frameEnd",()=>{d.quit(),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT|h.STENCIL_BUFFER_BIT);let xe=h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS);for(let Ae=0;Ae<xe;Ae++)h.activeTexture(h.TEXTURE0+Ae),h.bindTexture(h.TEXTURE_2D,null),h.bindTexture(h.TEXTURE_CUBE_MAP,null);h.bindBuffer(h.ARRAY_BUFFER,null),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null),h.bindRenderbuffer(h.RENDERBUFFER,null),h.bindFramebuffer(h.FRAMEBUFFER,null),b.destroy(),m.forEach(Ae=>Ae())})}let Sr=!0;d.run(()=>{try{S.loaded&&(O.paused||Fr(),Nt())}catch(xe){nn(xe)}},(xe,Ae)=>{try{xe(),S.loaded||Gn()===1&&!Sr&&(S.loaded=!0,cy().forEach(Te=>T.events.trigger("loadError",...Te)),T.events.trigger("load")),!S.loaded&&e.loadingScreen!==!1||Sr?(H(),Ik(),K()):(O.paused||Mt(),Nt(),H(),_k(),e.debug!==!1&&wk(),K()),Sr&&(Sr=!1),T.events.trigger("frameEnd"),Ae()}catch(Te){nn(Te)}}),ay(),Ly();let ir={_k:x,VERSION:a1,loadRoot:YS,loadProgress:Gn,loadSprite:Uo,loadSpriteAtlas:vy,loadSound:pk,loadMusic:mk,loadBitmapFont:ak,loadFont:ik,loadShader:lk,loadShaderURL:dk,loadAseprite:nk,loadPedit:sk,loadBean:rk,loadJSON:XS,load:Fl,getSound:gy,getFont:py,getBitmapFont:my,getSprite:ly,getShader:hy,getAsset:QS,Asset:mr,SpriteData:yn,SoundData:Zo,width:kt,height:zt,center:bs,dt:_t,fixedDt:Nl,restDt:Ul,time:d.time,screenshot:d.screenshot,record:be,isFocused:$e,setCursor:d.setCursor,getCursor:d.getCursor,setCursorLocked:d.setCursorLocked,isCursorLocked:d.isCursorLocked,setFullscreen:d.setFullscreen,isFullscreen:d.isFullscreen,isTouchscreen:d.isTouchscreen,onLoad:ud,onLoadError:tA,onLoading:Xk,onResize:Qk,onGamepadConnect:d.onGamepadConnect,onGamepadDisconnect:d.onGamepadDisconnect,onError:eA,onCleanup:ho,flash:jy,setCamPos:Py,getCamPos:Dy,setCamRot:Ry,getCamRot:Cy,setCamScale:zy,getCamScale:Oy,getCamTransform:rA,camPos:oA,camScale:aA,camFlash:uA,camRot:sA,camTransform:nA,shake:iA,toScreen:Bl,toWorld:My,setGravity:lA,getGravity:dA,setGravityDirection:fA,getGravityDirection:Fo,setBackground:KS,getBackground:VS,getGamepads:d.getGamepads,getTreeRoot:_A,add:Me,make:cd,destroy:By,destroyAll:Ue,get:Pe,query:Fe,readd:je,pos:_s,scale:Is,rotate:r1,color:Iy,opacity:$y,anchor:Gl,area:BA,sprite:Zl,text:AA,polygon:Ck,rect:ky,circle:Ek,uvquad:EA,outline:zk,particles:Rk,body:ZA,platformEffector:JA,surfaceEffector:VA,areaEffector:GA,pointEffector:HA,buoyancyEffector:YA,constantForce:WA,doubleJump:KA,shader:jk,textInput:LA,timer:Kl,fixed:Gy,stay:Vy,health:MA,lifespan:NA,named:UA,state:FA,z:n1,layer:QA,move:e1,offscreen:t1,follow:XA,fadeIn:Pk,mask:Dk,drawon:Tk,raycast:Sy,tile:Zy,animate:jA,serializeAnimation:Ky,agent:TA,sentry:zA,patrol:DA,pathfinder:PA,trigger:Nk,on:Jt,onFixedUpdate:Uk,onUpdate:Ay,onDraw:Fk,onAdd:Ey,onDestroy:Lk,onTag:Ty,onUntag:Zk,onUse:qk,onUnuse:Bk,onClick:Hk,onCollide:Kk,onCollideUpdate:Vk,onCollideEnd:Gk,onHover:Wk,onHoverUpdate:Jk,onHoverEnd:Yk,onKeyDown:d.onKeyDown,onKeyPress:d.onKeyPress,onKeyPressRepeat:d.onKeyPressRepeat,onKeyRelease:d.onKeyRelease,onMouseDown:d.onMouseDown,onMousePress:d.onMousePress,onMouseRelease:d.onMouseRelease,onMouseMove:d.onMouseMove,onCharInput:d.onCharInput,onTouchStart:d.onTouchStart,onTouchMove:d.onTouchMove,onTouchEnd:d.onTouchEnd,onScroll:d.onScroll,onHide:d.onHide,onShow:d.onShow,onGamepadButtonDown:d.onGamepadButtonDown,onGamepadButtonPress:d.onGamepadButtonPress,onGamepadButtonRelease:d.onGamepadButtonRelease,onGamepadStick:d.onGamepadStick,onButtonPress:d.onButtonPress,onButtonDown:d.onButtonDown,onButtonRelease:d.onButtonRelease,mousePos:d.mousePos,mouseDeltaPos:d.mouseDeltaPos,isKeyDown:d.isKeyDown,isKeyPressed:d.isKeyPressed,isKeyPressedRepeat:d.isKeyPressedRepeat,isKeyReleased:d.isKeyReleased,isMouseDown:d.isMouseDown,isMousePressed:d.isMousePressed,isMouseReleased:d.isMouseReleased,isMouseMoved:d.isMouseMoved,isGamepadButtonPressed:d.isGamepadButtonPressed,isGamepadButtonDown:d.isGamepadButtonDown,isGamepadButtonReleased:d.isGamepadButtonReleased,getGamepadStick:d.getGamepadStick,isButtonPressed:d.isButtonPressed,isButtonDown:d.isButtonDown,isButtonReleased:d.isButtonReleased,setButton:d.setButton,getButton:d.getButton,pressButton:d.pressButton,releaseButton:d.releaseButton,getLastInputDeviceType:d.getLastInputDeviceType,charInputted:d.charInputted,loop:Ge,wait:_e,play:gA,setVolume:Uy,getVolume:Fy,volume:vA,burp:Ny,audioCtx:E.ctx,Line:Wt,Rect:at,Circle:Ht,Ellipse:Hr,Point:b$,Polygon:Lt,Vec2:G,Color:Le,Mat4:Rr,Quad:ct,RNG:jv,rand:wt,randi:Mv,randSeed:t$,vec2:U,rgb:Ye,hsl2rgb:YI,quad:vt,choose:i$,chooseMultiple:n$,shuffle:Nv,chance:r$,lerp:Gt,tween:Je,easings:qo,map:zr,mapc:XI,wave:Cv,deg2rad:yt,rad2deg:Vn,clamp:Or,evaluateQuadratic:w$,evaluateQuadraticFirstDerivative:_$,evaluateQuadraticSecondDerivative:I$,evaluateBezier:ed,evaluateBezierFirstDerivative:$$,evaluateBezierSecondDerivative:S$,evaluateCatmullRom:k$,evaluateCatmullRomFirstDerivative:A$,curveLengthApproximation:Hv,normalizedCurve:E$,hermite:Go,cardinal:Wv,catmullRom:vs,bezier:T$,kochanekBartels:P$,easingSteps:j$,easingLinear:R$,easingCubicBezier:C$,testLineLine:Hl,testRectRect:Uv,testRectLine:Wl,testRectPoint:$s,testCirclePolygon:ks,testLinePoint:Jl,testLineCircle:Vo,isConvex:q$,triangulate:Yv,NavMesh:BS,drawSprite:Sk,drawText:zv,formatText:Hn,drawRect:fr,drawLine:jo,drawLines:sd,drawTriangle:wy,drawCircle:Ti,drawEllipse:yy,drawUVQuad:Ko,drawPolygon:hn,drawCurve:by,drawBezier:yk,drawFormattedText:Wn,drawMasked:$k,drawSubtracted:kk,pushTransform:lr,popTransform:Vt,pushTranslate:ft,pushScale:Bo,pushRotate:ki,pushMatrix:GS,usePostEffect:re,makeCanvas:Z,debug:O,scene:IA,getSceneName:kA,go:$A,onSceneLeave:SA,layers:wA,getLayers:bA,setLayers:qy,getDefaultLayer:xA,addLevel:Mk,getData:W,setData:se,download:rd,downloadJSON:iS,downloadText:iy,downloadBlob:_v,plug:pe,ASCII_CHARS:Xv,canvas:d.canvas,addKaboom:yA,LEFT:G.LEFT,RIGHT:G.RIGHT,UP:G.UP,DOWN:G.DOWN,RED:Le.RED,GREEN:Le.GREEN,BLUE:Le.BLUE,YELLOW:Le.YELLOW,MAGENTA:Le.MAGENTA,CYAN:Le.CYAN,WHITE:Le.WHITE,BLACK:Le.BLACK,quit:di,KEvent:Ft,KEventHandler:Lo,KEventController:Yn,cancel:()=>ey};x.k=ir;let yr=e.plugins;if(yr&&yr.forEach(pe),e.global!==!1)for(let xe in ir)window[xe]=ir[xe];return e.focus!==!1&&d.canvas.focus(),ir},Hy=s1;var N={};Kr(N,{$brand:()=>Ds,$input:()=>Dp,$output:()=>Pp,NEVER:()=>dd,TimePrecision:()=>Cp,ZodAny:()=>$h,ZodArray:()=>Eh,ZodBase64:()=>ic,ZodBase64URL:()=>oc,ZodBigInt:()=>oo,ZodBigIntFormat:()=>uc,ZodBoolean:()=>io,ZodCIDRv4:()=>rc,ZodCIDRv6:()=>nc,ZodCUID:()=>Wu,ZodCUID2:()=>Ju,ZodCatch:()=>Jh,ZodCodec:()=>gc,ZodCustom:()=>Sa,ZodCustomStringFormat:()=>ro,ZodDate:()=>xa,ZodDefault:()=>Zh,ZodDiscriminatedUnion:()=>Ph,ZodE164:()=>ac,ZodEmail:()=>Vu,ZodEmoji:()=>Gu,ZodEnum:()=>eo,ZodError:()=>CT,ZodExactOptional:()=>Lh,ZodFile:()=>Uh,ZodFirstPartyTypeKind:()=>ug,ZodFunction:()=>og,ZodGUID:()=>ha,ZodIPv4:()=>ec,ZodIPv6:()=>tc,ZodISODate:()=>Fu,ZodISODateTime:()=>Uu,ZodISODuration:()=>qu,ZodISOTime:()=>Lu,ZodIntersection:()=>Dh,ZodIssueCode:()=>MT,ZodJWT:()=>sc,ZodKSUID:()=>Qu,ZodLazy:()=>rg,ZodLiteral:()=>Nh,ZodMAC:()=>vh,ZodMap:()=>jh,ZodNaN:()=>Xh,ZodNanoID:()=>Hu,ZodNever:()=>kh,ZodNonOptional:()=>mc,ZodNull:()=>_h,ZodNullable:()=>Bh,ZodNumber:()=>no,ZodNumberFormat:()=>ai,ZodObject:()=>_a,ZodOptional:()=>pc,ZodPipe:()=>hc,ZodPrefault:()=>Vh,ZodPromise:()=>ig,ZodReadonly:()=>Qh,ZodRealError:()=>Zt,ZodRecord:()=>$a,ZodSet:()=>Mh,ZodString:()=>to,ZodStringFormat:()=>tt,ZodSuccess:()=>Wh,ZodSymbol:()=>xh,ZodTemplateLiteral:()=>tg,ZodTransform:()=>Fh,ZodTuple:()=>Oh,ZodType:()=>ze,ZodULID:()=>Yu,ZodURL:()=>ba,ZodUUID:()=>Nr,ZodUndefined:()=>wh,ZodUnion:()=>Ia,ZodUnknown:()=>Sh,ZodVoid:()=>Ah,ZodXID:()=>Xu,ZodXor:()=>Th,_ZodString:()=>Ku,_default:()=>Kh,_function:()=>A0,any:()=>o0,array:()=>wa,base64:()=>qx,base64url:()=>Bx,bigint:()=>e0,boolean:()=>bh,catch:()=>Yh,check:()=>E0,cidrv4:()=>Fx,cidrv6:()=>Lx,clone:()=>Ot,codec:()=>$0,coerce:()=>cg,config:()=>lt,core:()=>Yr,cuid:()=>zx,cuid2:()=>Ox,custom:()=>T0,date:()=>s0,decode:()=>lh,decodeAsync:()=>fh,describe:()=>P0,discriminatedUnion:()=>p0,e164:()=>Zx,email:()=>_x,emoji:()=>Px,encode:()=>ch,encodeAsync:()=>dh,endsWith:()=>Zi,enum:()=>dc,exactOptional:()=>qh,file:()=>x0,flattenError:()=>ra,float32:()=>Jx,float64:()=>Yx,formatError:()=>na,fromJSONSchema:()=>M0,function:()=>A0,getErrorMap:()=>UT,globalRegistry:()=>It,gt:()=>jr,gte:()=>Rt,guid:()=>Ix,hash:()=>Wx,hex:()=>Hx,hostname:()=>Gx,httpUrl:()=>Tx,includes:()=>qi,instanceof:()=>z0,int:()=>Zu,int32:()=>Xx,int64:()=>t0,intersection:()=>zh,ipv4:()=>Mx,ipv6:()=>Ux,iso:()=>Qi,json:()=>R0,jwt:()=>Kx,keyof:()=>u0,ksuid:()=>jx,lazy:()=>ng,length:()=>ii,literal:()=>b0,locales:()=>da,looseObject:()=>d0,looseRecord:()=>h0,lowercase:()=>Fi,lt:()=>Cr,lte:()=>Xt,mac:()=>Nx,map:()=>g0,maxLength:()=>ni,maxSize:()=>kn,meta:()=>D0,mime:()=>Ki,minLength:()=>Jr,minSize:()=>Mr,multipleOf:()=>Sn,nan:()=>I0,nanoid:()=>Dx,nativeEnum:()=>y0,negative:()=>Tu,never:()=>cc,nonnegative:()=>Du,nonoptional:()=>Hh,nonpositive:()=>Pu,normalize:()=>Vi,null:()=>Ih,nullable:()=>va,nullish:()=>w0,number:()=>yh,object:()=>c0,optional:()=>ga,overwrite:()=>Ir,parse:()=>oh,parseAsync:()=>ah,partialRecord:()=>m0,pipe:()=>ya,positive:()=>Eu,prefault:()=>Gh,preprocess:()=>C0,prettifyError:()=>Id,promise:()=>k0,property:()=>zu,readonly:()=>eg,record:()=>Ch,refine:()=>ag,regex:()=>Ui,regexes:()=>gr,registry:()=>su,safeDecode:()=>mh,safeDecodeAsync:()=>gh,safeEncode:()=>ph,safeEncodeAsync:()=>hh,safeParse:()=>sh,safeParseAsync:()=>uh,set:()=>v0,setErrorMap:()=>NT,size:()=>ri,slugify:()=>Ji,startsWith:()=>Bi,strictObject:()=>l0,string:()=>Bu,stringFormat:()=>Vx,stringbool:()=>O0,success:()=>_0,superRefine:()=>sg,symbol:()=>n0,templateLiteral:()=>S0,toJSONSchema:()=>ju,toLowerCase:()=>Hi,toUpperCase:()=>Wi,transform:()=>fc,treeifyError:()=>_d,trim:()=>Gi,tuple:()=>Rh,uint32:()=>Qx,uint64:()=>r0,ulid:()=>Rx,undefined:()=>i0,union:()=>lc,unknown:()=>oi,uppercase:()=>Li,url:()=>Ex,util:()=>oe,uuid:()=>$x,uuidv4:()=>Sx,uuidv6:()=>kx,uuidv7:()=>Ax,void:()=>a0,xid:()=>Cx,xor:()=>f0});var Yr={};Kr(Yr,{$ZodAny:()=>Xf,$ZodArray:()=>np,$ZodAsyncError:()=>_r,$ZodBase64:()=>qf,$ZodBase64URL:()=>Bf,$ZodBigInt:()=>eu,$ZodBigIntFormat:()=>Hf,$ZodBoolean:()=>sa,$ZodCIDRv4:()=>Uf,$ZodCIDRv6:()=>Ff,$ZodCUID:()=>Af,$ZodCUID2:()=>Ef,$ZodCatch:()=>wp,$ZodCheck:()=>nt,$ZodCheckBigIntFormat:()=>rf,$ZodCheckEndsWith:()=>hf,$ZodCheckGreaterThan:()=>Gs,$ZodCheckIncludes:()=>pf,$ZodCheckLengthEquals:()=>cf,$ZodCheckLessThan:()=>Vs,$ZodCheckLowerCase:()=>df,$ZodCheckMaxLength:()=>sf,$ZodCheckMaxSize:()=>nf,$ZodCheckMimeType:()=>vf,$ZodCheckMinLength:()=>uf,$ZodCheckMinSize:()=>of,$ZodCheckMultipleOf:()=>ef,$ZodCheckNumberFormat:()=>tf,$ZodCheckOverwrite:()=>yf,$ZodCheckProperty:()=>gf,$ZodCheckRegex:()=>lf,$ZodCheckSizeEquals:()=>af,$ZodCheckStartsWith:()=>mf,$ZodCheckStringFormat:()=>Mi,$ZodCheckUpperCase:()=>ff,$ZodCodec:()=>ca,$ZodCustom:()=>Tp,$ZodCustomStringFormat:()=>Vf,$ZodDate:()=>rp,$ZodDefault:()=>vp,$ZodDiscriminatedUnion:()=>ap,$ZodE164:()=>Zf,$ZodEmail:()=>If,$ZodEmoji:()=>Sf,$ZodEncodeError:()=>xn,$ZodEnum:()=>dp,$ZodError:()=>ta,$ZodExactOptional:()=>hp,$ZodFile:()=>pp,$ZodFunction:()=>kp,$ZodGUID:()=>wf,$ZodIPv4:()=>jf,$ZodIPv6:()=>Mf,$ZodISODate:()=>Of,$ZodISODateTime:()=>zf,$ZodISODuration:()=>Cf,$ZodISOTime:()=>Rf,$ZodIntersection:()=>sp,$ZodJWT:()=>Kf,$ZodKSUID:()=>Df,$ZodLazy:()=>Ep,$ZodLiteral:()=>fp,$ZodMAC:()=>Nf,$ZodMap:()=>cp,$ZodNaN:()=>_p,$ZodNanoID:()=>kf,$ZodNever:()=>ep,$ZodNonOptional:()=>bp,$ZodNull:()=>Yf,$ZodNullable:()=>gp,$ZodNumber:()=>Qs,$ZodNumberFormat:()=>Gf,$ZodObject:()=>wb,$ZodObjectJIT:()=>ip,$ZodOptional:()=>ru,$ZodPipe:()=>Ip,$ZodPrefault:()=>yp,$ZodPromise:()=>Ap,$ZodReadonly:()=>$p,$ZodRealError:()=>Bt,$ZodRecord:()=>up,$ZodRegistry:()=>au,$ZodSet:()=>lp,$ZodString:()=>ti,$ZodStringFormat:()=>et,$ZodSuccess:()=>xp,$ZodSymbol:()=>Wf,$ZodTemplateLiteral:()=>Sp,$ZodTransform:()=>mp,$ZodTuple:()=>tu,$ZodType:()=>Ee,$ZodULID:()=>Tf,$ZodURL:()=>$f,$ZodUUID:()=>_f,$ZodUndefined:()=>Jf,$ZodUnion:()=>ua,$ZodUnknown:()=>Qf,$ZodVoid:()=>tp,$ZodXID:()=>Pf,$ZodXor:()=>op,$brand:()=>Ds,$constructor:()=>C,$input:()=>Dp,$output:()=>Pp,Doc:()=>aa,JSONSchema:()=>xx,JSONSchemaGenerator:()=>Mu,NEVER:()=>dd,TimePrecision:()=>Cp,_any:()=>rm,_array:()=>cm,_base64:()=>$u,_base64url:()=>Su,_bigint:()=>Wp,_boolean:()=>Gp,_catch:()=>AT,_check:()=>bx,_cidrv4:()=>_u,_cidrv6:()=>Iu,_coercedBigint:()=>Jp,_coercedBoolean:()=>Hp,_coercedDate:()=>sm,_coercedNumber:()=>Lp,_coercedString:()=>Op,_cuid:()=>hu,_cuid2:()=>gu,_custom:()=>dm,_date:()=>am,_decode:()=>Ms,_decodeAsync:()=>Us,_default:()=>$T,_discriminatedUnion:()=>fT,_e164:()=>ku,_email:()=>uu,_emoji:()=>pu,_encode:()=>js,_encodeAsync:()=>Ns,_endsWith:()=>Zi,_enum:()=>yT,_file:()=>lm,_float32:()=>Bp,_float64:()=>Zp,_gt:()=>jr,_gte:()=>Rt,_guid:()=>fa,_includes:()=>qi,_int:()=>qp,_int32:()=>Kp,_int64:()=>Yp,_intersection:()=>pT,_ipv4:()=>xu,_ipv6:()=>wu,_isoDate:()=>Mp,_isoDateTime:()=>jp,_isoDuration:()=>Up,_isoTime:()=>Np,_jwt:()=>Au,_ksuid:()=>bu,_lazy:()=>DT,_length:()=>ii,_literal:()=>xT,_lowercase:()=>Fi,_lt:()=>Cr,_lte:()=>Xt,_mac:()=>Rp,_map:()=>gT,_max:()=>Xt,_maxLength:()=>ni,_maxSize:()=>kn,_mime:()=>Ki,_min:()=>Rt,_minLength:()=>Jr,_minSize:()=>Mr,_multipleOf:()=>Sn,_nan:()=>um,_nanoid:()=>mu,_nativeEnum:()=>bT,_negative:()=>Tu,_never:()=>im,_nonnegative:()=>Du,_nonoptional:()=>ST,_nonpositive:()=>Pu,_normalize:()=>Vi,_null:()=>tm,_nullable:()=>IT,_number:()=>Fp,_optional:()=>_T,_overwrite:()=>Ir,_parse:()=>Oi,_parseAsync:()=>Ri,_pipe:()=>ET,_positive:()=>Eu,_promise:()=>zT,_property:()=>zu,_readonly:()=>TT,_record:()=>hT,_refine:()=>fm,_regex:()=>Ui,_safeDecode:()=>Ls,_safeDecodeAsync:()=>Bs,_safeEncode:()=>Fs,_safeEncodeAsync:()=>qs,_safeParse:()=>Ci,_safeParseAsync:()=>ji,_set:()=>vT,_size:()=>ri,_slugify:()=>Ji,_startsWith:()=>Bi,_string:()=>zp,_stringFormat:()=>Yi,_stringbool:()=>gm,_success:()=>kT,_superRefine:()=>pm,_symbol:()=>Qp,_templateLiteral:()=>PT,_toLowerCase:()=>Hi,_toUpperCase:()=>Wi,_transform:()=>wT,_trim:()=>Gi,_tuple:()=>mT,_uint32:()=>Vp,_uint64:()=>Xp,_ulid:()=>vu,_undefined:()=>em,_union:()=>lT,_unknown:()=>nm,_uppercase:()=>Li,_url:()=>pa,_uuid:()=>cu,_uuidv4:()=>lu,_uuidv6:()=>du,_uuidv7:()=>fu,_void:()=>om,_xid:()=>yu,_xor:()=>dT,clone:()=>Ot,config:()=>lt,createStandardJSONSchemaMethod:()=>Xi,createToJSONSchemaMethod:()=>vm,decode:()=>C1,decodeAsync:()=>M1,describe:()=>mm,encode:()=>R1,encodeAsync:()=>j1,extractDefs:()=>En,finalize:()=>Tn,flattenError:()=>ra,formatError:()=>na,globalConfig:()=>Ho,globalRegistry:()=>It,initializeContext:()=>An,isValidBase64:()=>Lf,isValidBase64URL:()=>vb,isValidJWT:()=>yb,locales:()=>da,meta:()=>hm,parse:()=>Rs,parseAsync:()=>Cs,prettifyError:()=>Id,process:()=>He,regexes:()=>gr,registry:()=>su,safeDecode:()=>U1,safeDecodeAsync:()=>L1,safeEncode:()=>N1,safeEncodeAsync:()=>F1,safeParse:()=>$d,safeParseAsync:()=>Sd,toDotPath:()=>Qy,toJSONSchema:()=>ju,treeifyError:()=>_d,util:()=>oe,version:()=>bf});var dd=Object.freeze({status:"aborted"});function C(e,t,n){function i(s,l){if(s._zod||Object.defineProperty(s,"_zod",{value:{def:l,constr:a,traits:new Set},enumerable:!1}),s._zod.traits.has(e))return;s._zod.traits.add(e),t(s,l);let d=a.prototype,m=Object.keys(d);for(let v=0;v<m.length;v++){let h=m[v];h in s||(s[h]=d[h].bind(s))}}let r=n?.Parent??Object;class o extends r{}Object.defineProperty(o,"name",{value:e});function a(s){var l;let d=n?.Parent?new o:this;i(d,s),(l=d._zod).deferred??(l.deferred=[]);for(let m of d._zod.deferred)m();return d}return Object.defineProperty(a,"init",{value:i}),Object.defineProperty(a,Symbol.hasInstance,{value:s=>n?.Parent&&s instanceof n.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}var Ds=Symbol("zod_brand"),_r=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},xn=class extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}},Ho={};function lt(e){return e&&Object.assign(Ho,e),Ho}var oe={};Kr(oe,{BIGINT_FORMAT_RANGES:()=>wd,Class:()=>pd,NUMBER_FORMAT_RANGES:()=>xd,aborted:()=>$n,allowsEval:()=>gd,assert:()=>f1,assertEqual:()=>u1,assertIs:()=>l1,assertNever:()=>d1,assertNotEqual:()=>c1,assignProp:()=>_n,base64ToUint8Array:()=>Jy,base64urlToUint8Array:()=>T1,cached:()=>Di,captureStackTrace:()=>Os,cleanEnum:()=>E1,cleanRegex:()=>Yo,clone:()=>Ot,cloneDef:()=>m1,createTransparentProxy:()=>x1,defineLazy:()=>Ce,esc:()=>zs,escapeRegex:()=>hr,extend:()=>I1,finalizeIssue:()=>qt,floatSafeRemainder:()=>md,getElementAtPath:()=>h1,getEnumValues:()=>Jo,getLengthableOrigin:()=>ea,getParsedType:()=>b1,getSizableOrigin:()=>Qo,hexToUint8Array:()=>D1,isObject:()=>Qn,isPlainObject:()=>In,issue:()=>zi,joinValues:()=>L,jsonStringifyReplacer:()=>Pi,merge:()=>S1,mergeDefs:()=>Wr,normalizeParams:()=>ue,nullish:()=>wn,numKeys:()=>y1,objectClone:()=>p1,omit:()=>_1,optionalKeys:()=>bd,parsedType:()=>ie,partial:()=>k1,pick:()=>w1,prefixIssues:()=>Yt,primitiveTypes:()=>yd,promiseAllObject:()=>g1,propertyKeyTypes:()=>Xo,randomString:()=>v1,required:()=>A1,safeExtend:()=>$1,shallowClone:()=>vd,slugify:()=>hd,stringifyPrimitive:()=>ne,uint8ArrayToBase64:()=>Yy,uint8ArrayToBase64url:()=>P1,uint8ArrayToHex:()=>z1,unwrapMessage:()=>Wo});function u1(e){return e}function c1(e){return e}function l1(e){}function d1(e){throw new Error("Unexpected value in exhaustive check")}function f1(e){}function Jo(e){let t=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>t.indexOf(+i)===-1).map(([i,r])=>r)}function L(e,t="|"){return e.map(n=>ne(n)).join(t)}function Pi(e,t){return typeof t=="bigint"?t.toString():t}function Di(e){return{get value(){{let n=e();return Object.defineProperty(this,"value",{value:n}),n}throw new Error("cached value already set")}}}function wn(e){return e==null}function Yo(e){let t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function md(e,t){let n=(e.toString().split(".")[1]||"").length,i=t.toString(),r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){let l=i.match(/\d?e-(\d?)/);l?.[1]&&(r=Number.parseInt(l[1]))}let o=n>r?n:r,a=Number.parseInt(e.toFixed(o).replace(".","")),s=Number.parseInt(t.toFixed(o).replace(".",""));return a%s/10**o}var Wy=Symbol("evaluating");function Ce(e,t,n){let i;Object.defineProperty(e,t,{get(){if(i!==Wy)return i===void 0&&(i=Wy,i=n()),i},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function p1(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function _n(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Wr(...e){let t={};for(let n of e){let i=Object.getOwnPropertyDescriptors(n);Object.assign(t,i)}return Object.defineProperties({},t)}function m1(e){return Wr(e._zod.def)}function h1(e,t){return t?t.reduce((n,i)=>n?.[i],e):e}function g1(e){let t=Object.keys(e),n=t.map(i=>e[i]);return Promise.all(n).then(i=>{let r={};for(let o=0;o<t.length;o++)r[t[o]]=i[o];return r})}function v1(e=10){let t="abcdefghijklmnopqrstuvwxyz",n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n}function zs(e){return JSON.stringify(e)}function hd(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var Os="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Qn(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var gd=Di(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function In(e){if(Qn(e)===!1)return!1;let t=e.constructor;if(t===void 0||typeof t!="function")return!0;let n=t.prototype;return!(Qn(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function vd(e){return In(e)?{...e}:Array.isArray(e)?[...e]:e}function y1(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}var b1=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Xo=new Set(["string","number","symbol"]),yd=new Set(["string","number","bigint","boolean","symbol","undefined"]);function hr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ot(e,t,n){let i=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(i._zod.parent=e),i}function ue(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function x1(e){let t;return new Proxy({},{get(n,i,r){return t??(t=e()),Reflect.get(t,i,r)},set(n,i,r,o){return t??(t=e()),Reflect.set(t,i,r,o)},has(n,i){return t??(t=e()),Reflect.has(t,i)},deleteProperty(n,i){return t??(t=e()),Reflect.deleteProperty(t,i)},ownKeys(n){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(n,i){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,i)},defineProperty(n,i,r){return t??(t=e()),Reflect.defineProperty(t,i,r)}})}function ne(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function bd(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}var xd={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},wd={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function w1(e,t){let n=e._zod.def,i=n.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");let o=Wr(e._zod.def,{get shape(){let a={};for(let s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(a[s]=n.shape[s])}return _n(this,"shape",a),a},checks:[]});return Ot(e,o)}function _1(e,t){let n=e._zod.def,i=n.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");let o=Wr(e._zod.def,{get shape(){let a={...e._zod.def.shape};for(let s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete a[s]}return _n(this,"shape",a),a},checks:[]});return Ot(e,o)}function I1(e,t){if(!In(t))throw new Error("Invalid input to extend: expected a plain object");let n=e._zod.def.checks;if(n&&n.length>0){let o=e._zod.def.shape;for(let a in t)if(Object.getOwnPropertyDescriptor(o,a)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let r=Wr(e._zod.def,{get shape(){let o={...e._zod.def.shape,...t};return _n(this,"shape",o),o}});return Ot(e,r)}function $1(e,t){if(!In(t))throw new Error("Invalid input to safeExtend: expected a plain object");let n=Wr(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t};return _n(this,"shape",i),i}});return Ot(e,n)}function S1(e,t){let n=Wr(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t._zod.def.shape};return _n(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return Ot(e,n)}function k1(e,t,n){let r=t._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");let a=Wr(t._zod.def,{get shape(){let s=t._zod.def.shape,l={...s};if(n)for(let d in n){if(!(d in s))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(l[d]=e?new e({type:"optional",innerType:s[d]}):s[d])}else for(let d in s)l[d]=e?new e({type:"optional",innerType:s[d]}):s[d];return _n(this,"shape",l),l},checks:[]});return Ot(t,a)}function A1(e,t,n){let i=Wr(t._zod.def,{get shape(){let r=t._zod.def.shape,o={...r};if(n)for(let a in n){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(o[a]=new e({type:"nonoptional",innerType:r[a]}))}else for(let a in r)o[a]=new e({type:"nonoptional",innerType:r[a]});return _n(this,"shape",o),o}});return Ot(t,i)}function $n(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Yt(e,t){return t.map(n=>{var i;return(i=n).path??(i.path=[]),n.path.unshift(e),n})}function Wo(e){return typeof e=="string"?e:e?.message}function qt(e,t,n){let i={...e,path:e.path??[]};if(!e.message){let r=Wo(e.inst?._zod.def?.error?.(e))??Wo(t?.error?.(e))??Wo(n.customError?.(e))??Wo(n.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function Qo(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function ea(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function ie(e){let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"nan":"number";case"object":{if(e===null)return"null";if(Array.isArray(e))return"array";let n=e;if(n&&Object.getPrototypeOf(n)!==Object.prototype&&"constructor"in n&&n.constructor)return n.constructor.name}}return t}function zi(...e){let[t,n,i]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:i}:{...t}}function E1(e){return Object.entries(e).filter(([t,n])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function Jy(e){let t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function Yy(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function T1(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),n="=".repeat((4-t.length%4)%4);return Jy(t+n)}function P1(e){return Yy(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function D1(e){let t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");let n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i/2]=Number.parseInt(t.slice(i,i+2),16);return n}function z1(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}var pd=class{constructor(...t){}};var Xy=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Pi,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ta=C("$ZodError",Xy),Bt=C("$ZodError",Xy,{Parent:Error});function ra(e,t=n=>n.message){let n={},i=[];for(let r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):i.push(t(r));return{formErrors:i,fieldErrors:n}}function na(e,t=n=>n.message){let n={_errors:[]},i=r=>{for(let o of r.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>i({issues:a}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)n._errors.push(t(o));else{let a=n,s=0;for(;s<o.path.length;){let l=o.path[s];s===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],s++}}};return i(e),n}function _d(e,t=n=>n.message){let n={errors:[]},i=(r,o=[])=>{var a,s;for(let l of r.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>i({issues:d},l.path));else if(l.code==="invalid_key")i({issues:l.issues},l.path);else if(l.code==="invalid_element")i({issues:l.issues},l.path);else{let d=[...o,...l.path];if(d.length===0){n.errors.push(t(l));continue}let m=n,v=0;for(;v<d.length;){let h=d[v],b=v===d.length-1;typeof h=="string"?(m.properties??(m.properties={}),(a=m.properties)[h]??(a[h]={errors:[]}),m=m.properties[h]):(m.items??(m.items=[]),(s=m.items)[h]??(s[h]={errors:[]}),m=m.items[h]),b&&m.errors.push(t(l)),v++}}};return i(e),n}function Qy(e){let t=[],n=e.map(i=>typeof i=="object"?i.key:i);for(let i of n)typeof i=="number"?t.push(`[${i}]`):typeof i=="symbol"?t.push(`[${JSON.stringify(String(i))}]`):/[^\w$]/.test(i)?t.push(`[${JSON.stringify(i)}]`):(t.length&&t.push("."),t.push(i));return t.join("")}function Id(e){let t=[],n=[...e.issues].sort((i,r)=>(i.path??[]).length-(r.path??[]).length);for(let i of n)t.push(`\u2716 ${i.message}`),i.path?.length&&t.push(`  \u2192 at ${Qy(i.path)}`);return t.join(`
`)}var Oi=e=>(t,n,i,r)=>{let o=i?Object.assign(i,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise)throw new _r;if(a.issues.length){let s=new(r?.Err??e)(a.issues.map(l=>qt(l,o,lt())));throw Os(s,r?.callee),s}return a.value},Rs=Oi(Bt),Ri=e=>async(t,n,i,r)=>{let o=i?Object.assign(i,{async:!0}):{async:!0},a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){let s=new(r?.Err??e)(a.issues.map(l=>qt(l,o,lt())));throw Os(s,r?.callee),s}return a.value},Cs=Ri(Bt),Ci=e=>(t,n,i)=>{let r=i?{...i,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},r);if(o instanceof Promise)throw new _r;return o.issues.length?{success:!1,error:new(e??ta)(o.issues.map(a=>qt(a,r,lt())))}:{success:!0,data:o.value}},$d=Ci(Bt),ji=e=>async(t,n,i)=>{let r=i?Object.assign(i,{async:!0}):{async:!0},o=t._zod.run({value:n,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(a=>qt(a,r,lt())))}:{success:!0,data:o.value}},Sd=ji(Bt),js=e=>(t,n,i)=>{let r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Oi(e)(t,n,r)},R1=js(Bt),Ms=e=>(t,n,i)=>Oi(e)(t,n,i),C1=Ms(Bt),Ns=e=>async(t,n,i)=>{let r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ri(e)(t,n,r)},j1=Ns(Bt),Us=e=>async(t,n,i)=>Ri(e)(t,n,i),M1=Us(Bt),Fs=e=>(t,n,i)=>{let r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ci(e)(t,n,r)},N1=Fs(Bt),Ls=e=>(t,n,i)=>Ci(e)(t,n,i),U1=Ls(Bt),qs=e=>async(t,n,i)=>{let r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ji(e)(t,n,r)},F1=qs(Bt),Bs=e=>async(t,n,i)=>ji(e)(t,n,i),L1=Bs(Bt);var gr={};Kr(gr,{base64:()=>Ld,base64url:()=>Zs,bigint:()=>Gd,boolean:()=>Wd,browserEmail:()=>W1,cidrv4:()=>Ud,cidrv6:()=>Fd,cuid:()=>kd,cuid2:()=>Ad,date:()=>Bd,datetime:()=>Kd,domain:()=>X1,duration:()=>zd,e164:()=>qd,email:()=>Rd,emoji:()=>Cd,extendedDuration:()=>q1,guid:()=>Od,hex:()=>Q1,hostname:()=>Y1,html5Email:()=>V1,idnEmail:()=>H1,integer:()=>Hd,ipv4:()=>jd,ipv6:()=>Md,ksuid:()=>Pd,lowercase:()=>Xd,mac:()=>Nd,md5_base64:()=>tE,md5_base64url:()=>rE,md5_hex:()=>eE,nanoid:()=>Dd,null:()=>Jd,number:()=>Ks,rfc5322Email:()=>G1,sha1_base64:()=>iE,sha1_base64url:()=>oE,sha1_hex:()=>nE,sha256_base64:()=>sE,sha256_base64url:()=>uE,sha256_hex:()=>aE,sha384_base64:()=>lE,sha384_base64url:()=>dE,sha384_hex:()=>cE,sha512_base64:()=>pE,sha512_base64url:()=>mE,sha512_hex:()=>fE,string:()=>Vd,time:()=>Zd,ulid:()=>Ed,undefined:()=>Yd,unicodeEmail:()=>eb,uppercase:()=>Qd,uuid:()=>ei,uuid4:()=>B1,uuid6:()=>Z1,uuid7:()=>K1,xid:()=>Td});var kd=/^[cC][^\s-]{8,}$/,Ad=/^[0-9a-z]+$/,Ed=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Td=/^[0-9a-vA-V]{20}$/,Pd=/^[A-Za-z0-9]{27}$/,Dd=/^[a-zA-Z0-9_-]{21}$/,zd=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,q1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Od=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ei=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,B1=ei(4),Z1=ei(6),K1=ei(7),Rd=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,V1=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,G1=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,eb=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,H1=eb,W1=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,J1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Cd(){return new RegExp(J1,"u")}var jd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Md=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Nd=e=>{let t=hr(e??":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},Ud=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Fd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ld=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Zs=/^[A-Za-z0-9_-]*$/,Y1=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,X1=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,qd=/^\+[1-9]\d{6,14}$/,tb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Bd=new RegExp(`^${tb}$`);function rb(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Zd(e){return new RegExp(`^${rb(e)}$`)}function Kd(e){let t=rb({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let i=`${t}(?:${n.join("|")})`;return new RegExp(`^${tb}T(?:${i})$`)}var Vd=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Gd=/^-?\d+n?$/,Hd=/^-?\d+$/,Ks=/^-?\d+(?:\.\d+)?$/,Wd=/^(?:true|false)$/i,Jd=/^null$/i;var Yd=/^undefined$/i;var Xd=/^[^A-Z]*$/,Qd=/^[^a-z]*$/,Q1=/^[0-9a-fA-F]*$/;function ia(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function oa(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var eE=/^[0-9a-fA-F]{32}$/,tE=ia(22,"=="),rE=oa(22),nE=/^[0-9a-fA-F]{40}$/,iE=ia(27,"="),oE=oa(27),aE=/^[0-9a-fA-F]{64}$/,sE=ia(43,"="),uE=oa(43),cE=/^[0-9a-fA-F]{96}$/,lE=ia(64,""),dE=oa(64),fE=/^[0-9a-fA-F]{128}$/,pE=ia(86,"=="),mE=oa(86);var nt=C("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),ib={number:"number",bigint:"bigint",object:"date"},Vs=C("$ZodCheckLessThan",(e,t)=>{nt.init(e,t);let n=ib[typeof t.value];e._zod.onattach.push(i=>{let r=i._zod.bag,o=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value<=t.value:i.value<t.value)||i.issues.push({origin:n,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gs=C("$ZodCheckGreaterThan",(e,t)=>{nt.init(e,t);let n=ib[typeof t.value];e._zod.onattach.push(i=>{let r=i._zod.bag,o=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=i=>{(t.inclusive?i.value>=t.value:i.value>t.value)||i.issues.push({origin:n,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:i.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ef=C("$ZodCheckMultipleOf",(e,t)=>{nt.init(e,t),e._zod.onattach.push(n=>{var i;(i=n._zod.bag).multipleOf??(i.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):md(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),tf=C("$ZodCheckNumberFormat",(e,t)=>{nt.init(e,t),t.format=t.format||"float64";let n=t.format?.includes("int"),i=n?"int":"number",[r,o]=xd[t.format];e._zod.onattach.push(a=>{let s=a._zod.bag;s.format=t.format,s.minimum=r,s.maximum=o,n&&(s.pattern=Hd)}),e._zod.check=a=>{let s=a.value;if(n){if(!Number.isInteger(s)){a.issues.push({expected:i,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!t.abort});return}}s<r&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),s>o&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),rf=C("$ZodCheckBigIntFormat",(e,t)=>{nt.init(e,t);let[n,i]=wd[t.format];e._zod.onattach.push(r=>{let o=r._zod.bag;o.format=t.format,o.minimum=n,o.maximum=i}),e._zod.check=r=>{let o=r.value;o<n&&r.issues.push({origin:"bigint",input:o,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),o>i&&r.issues.push({origin:"bigint",input:o,code:"too_big",maximum:i,inclusive:!0,inst:e,continue:!t.abort})}}),nf=C("$ZodCheckMaxSize",(e,t)=>{var n;nt.init(e,t),(n=e._zod.def).when??(n.when=i=>{let r=i.value;return!wn(r)&&r.size!==void 0}),e._zod.onattach.push(i=>{let r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{let r=i.value;r.size<=t.maximum||i.issues.push({origin:Qo(r),code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),of=C("$ZodCheckMinSize",(e,t)=>{var n;nt.init(e,t),(n=e._zod.def).when??(n.when=i=>{let r=i.value;return!wn(r)&&r.size!==void 0}),e._zod.onattach.push(i=>{let r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{let r=i.value;r.size>=t.minimum||i.issues.push({origin:Qo(r),code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),af=C("$ZodCheckSizeEquals",(e,t)=>{var n;nt.init(e,t),(n=e._zod.def).when??(n.when=i=>{let r=i.value;return!wn(r)&&r.size!==void 0}),e._zod.onattach.push(i=>{let r=i._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=i=>{let r=i.value,o=r.size;if(o===t.size)return;let a=o>t.size;i.issues.push({origin:Qo(r),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),sf=C("$ZodCheckMaxLength",(e,t)=>{var n;nt.init(e,t),(n=e._zod.def).when??(n.when=i=>{let r=i.value;return!wn(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{let r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(i._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{let r=i.value;if(r.length<=t.maximum)return;let a=ea(r);i.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),uf=C("$ZodCheckMinLength",(e,t)=>{var n;nt.init(e,t),(n=e._zod.def).when??(n.when=i=>{let r=i.value;return!wn(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{let r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(i._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{let r=i.value;if(r.length>=t.minimum)return;let a=ea(r);i.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),cf=C("$ZodCheckLengthEquals",(e,t)=>{var n;nt.init(e,t),(n=e._zod.def).when??(n.when=i=>{let r=i.value;return!wn(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{let r=i._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=i=>{let r=i.value,o=r.length;if(o===t.length)return;let a=ea(r),s=o>t.length;i.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),Mi=C("$ZodCheckStringFormat",(e,t)=>{var n,i;nt.init(e,t),e._zod.onattach.push(r=>{let o=r._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=e._zod).check??(i.check=()=>{})}),lf=C("$ZodCheckRegex",(e,t)=>{Mi.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),df=C("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Xd),Mi.init(e,t)}),ff=C("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Qd),Mi.init(e,t)}),pf=C("$ZodCheckIncludes",(e,t)=>{nt.init(e,t);let n=hr(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=i,e._zod.onattach.push(r=>{let o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),mf=C("$ZodCheckStartsWith",(e,t)=>{nt.init(e,t);let n=new RegExp(`^${hr(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{let r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),hf=C("$ZodCheckEndsWith",(e,t)=>{nt.init(e,t);let n=new RegExp(`.*${hr(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(i=>{let r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}});function nb(e,t,n){e.issues.length&&t.issues.push(...Yt(n,e.issues))}var gf=C("$ZodCheckProperty",(e,t)=>{nt.init(e,t),e._zod.check=n=>{let i=t.schema._zod.run({value:n.value[t.property],issues:[]},{});if(i instanceof Promise)return i.then(r=>nb(r,n,t.property));nb(i,n,t.property)}}),vf=C("$ZodCheckMimeType",(e,t)=>{nt.init(e,t);let n=new Set(t.mime);e._zod.onattach.push(i=>{i._zod.bag.mime=t.mime}),e._zod.check=i=>{n.has(i.value.type)||i.issues.push({code:"invalid_value",values:t.mime,input:i.value.type,inst:e,continue:!t.abort})}}),yf=C("$ZodCheckOverwrite",(e,t)=>{nt.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});var aa=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let i=t.split(`
`).filter(a=>a),r=Math.min(...i.map(a=>a.length-a.trimStart().length)),o=i.map(a=>a.slice(r)).map(a=>" ".repeat(this.indent*2)+a);for(let a of o)this.content.push(a)}compile(){let t=Function,n=this?.args,r=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...n,r.join(`
`))}};var bf={major:4,minor:3,patch:6};var Ee=C("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=bf;let i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(let r of i)for(let o of r._zod.onattach)o(e);if(i.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let r=(a,s,l)=>{let d=$n(a),m;for(let v of s){if(v._zod.def.when){if(!v._zod.def.when(a))continue}else if(d)continue;let h=a.issues.length,b=v._zod.check(a);if(b instanceof Promise&&l?.async===!1)throw new _r;if(m||b instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await b,a.issues.length!==h&&(d||(d=$n(a,h)))});else{if(a.issues.length===h)continue;d||(d=$n(a,h))}}return m?m.then(()=>a):a},o=(a,s,l)=>{if($n(a))return a.aborted=!0,a;let d=r(s,i,l);if(d instanceof Promise){if(l.async===!1)throw new _r;return d.then(m=>e._zod.parse(m,l))}return e._zod.parse(d,l)};e._zod.run=(a,s)=>{if(s.skipChecks)return e._zod.parse(a,s);if(s.direction==="backward"){let d=e._zod.parse({value:a.value,issues:[]},{...s,skipChecks:!0});return d instanceof Promise?d.then(m=>o(m,a,s)):o(d,a,s)}let l=e._zod.parse(a,s);if(l instanceof Promise){if(s.async===!1)throw new _r;return l.then(d=>r(d,i,s))}return r(l,i,s)}}Ce(e,"~standard",()=>({validate:r=>{try{let o=$d(e,r);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return Sd(e,r).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),ti=C("$ZodString",(e,t)=>{Ee.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Vd(e._zod.bag),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),et=C("$ZodStringFormat",(e,t)=>{Mi.init(e,t),ti.init(e,t)}),wf=C("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Od),et.init(e,t)}),_f=C("$ZodUUID",(e,t)=>{if(t.version){let i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ei(i))}else t.pattern??(t.pattern=ei());et.init(e,t)}),If=C("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Rd),et.init(e,t)}),$f=C("$ZodURL",(e,t)=>{et.init(e,t),e._zod.check=n=>{try{let i=n.value.trim(),r=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=r.href:n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Sf=C("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Cd()),et.init(e,t)}),kf=C("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Dd),et.init(e,t)}),Af=C("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=kd),et.init(e,t)}),Ef=C("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Ad),et.init(e,t)}),Tf=C("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Ed),et.init(e,t)}),Pf=C("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Td),et.init(e,t)}),Df=C("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Pd),et.init(e,t)}),zf=C("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Kd(t)),et.init(e,t)}),Of=C("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Bd),et.init(e,t)}),Rf=C("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Zd(t)),et.init(e,t)}),Cf=C("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=zd),et.init(e,t)}),jf=C("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=jd),et.init(e,t),e._zod.bag.format="ipv4"}),Mf=C("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Md),et.init(e,t),e._zod.bag.format="ipv6",e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Nf=C("$ZodMAC",(e,t)=>{t.pattern??(t.pattern=Nd(t.delimiter)),et.init(e,t),e._zod.bag.format="mac"}),Uf=C("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ud),et.init(e,t)}),Ff=C("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Fd),et.init(e,t),e._zod.check=n=>{let i=n.value.split("/");try{if(i.length!==2)throw new Error;let[r,o]=i;if(!o)throw new Error;let a=Number(o);if(`${a}`!==o)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Lf(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}var qf=C("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Ld),et.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=n=>{Lf(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function vb(e){if(!Zs.test(e))return!1;let t=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Lf(n)}var Bf=C("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Zs),et.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=n=>{vb(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Zf=C("$ZodE164",(e,t)=>{t.pattern??(t.pattern=qd),et.init(e,t)});function yb(e,t=null){try{let n=e.split(".");if(n.length!==3)return!1;let[i]=n;if(!i)return!1;let r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}var Kf=C("$ZodJWT",(e,t)=>{et.init(e,t),e._zod.check=n=>{yb(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Vf=C("$ZodCustomStringFormat",(e,t)=>{et.init(e,t),e._zod.check=n=>{t.fn(n.value)||n.issues.push({code:"invalid_format",format:t.format,input:n.value,inst:e,continue:!t.abort})}}),Qs=C("$ZodNumber",(e,t)=>{Ee.init(e,t),e._zod.pattern=e._zod.bag.pattern??Ks,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}let r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;let o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...o?{received:o}:{}}),n}}),Gf=C("$ZodNumberFormat",(e,t)=>{tf.init(e,t),Qs.init(e,t)}),sa=C("$ZodBoolean",(e,t)=>{Ee.init(e,t),e._zod.pattern=Wd,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=!!n.value}catch{}let r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),eu=C("$ZodBigInt",(e,t)=>{Ee.init(e,t),e._zod.pattern=Gd,e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),Hf=C("$ZodBigIntFormat",(e,t)=>{rf.init(e,t),eu.init(e,t)}),Wf=C("$ZodSymbol",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;return typeof r=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:r,inst:e}),n}}),Jf=C("$ZodUndefined",(e,t)=>{Ee.init(e,t),e._zod.pattern=Yd,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(n,i)=>{let r=n.value;return typeof r>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),n}}),Yf=C("$ZodNull",(e,t)=>{Ee.init(e,t),e._zod.pattern=Jd,e._zod.values=new Set([null]),e._zod.parse=(n,i)=>{let r=n.value;return r===null||n.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),n}}),Xf=C("$ZodAny",(e,t)=>{Ee.init(e,t),e._zod.parse=n=>n}),Qf=C("$ZodUnknown",(e,t)=>{Ee.init(e,t),e._zod.parse=n=>n}),ep=C("$ZodNever",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)}),tp=C("$ZodVoid",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;return typeof r>"u"||n.issues.push({expected:"void",code:"invalid_type",input:r,inst:e}),n}}),rp=C("$ZodDate",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{if(t.coerce)try{n.value=new Date(n.value)}catch{}let r=n.value,o=r instanceof Date;return o&&!Number.isNaN(r.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:r,...o?{received:"Invalid Date"}:{},inst:e}),n}});function ab(e,t,n){e.issues.length&&t.issues.push(...Yt(n,e.issues)),t.value[n]=e.value}var np=C("$ZodArray",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);let o=[];for(let a=0;a<r.length;a++){let s=r[a],l=t.element._zod.run({value:s,issues:[]},i);l instanceof Promise?o.push(l.then(d=>ab(d,n,a))):ab(l,n,a)}return o.length?Promise.all(o).then(()=>n):n}});function Xs(e,t,n,i,r){if(e.issues.length){if(r&&!(n in i))return;t.issues.push(...Yt(n,e.issues))}e.value===void 0?n in i&&(t.value[n]=void 0):t.value[n]=e.value}function bb(e){let t=Object.keys(e.shape);for(let i of t)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);let n=bd(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function xb(e,t,n,i,r,o){let a=[],s=r.keySet,l=r.catchall._zod,d=l.def.type,m=l.optout==="optional";for(let v in t){if(s.has(v))continue;if(d==="never"){a.push(v);continue}let h=l.run({value:t[v],issues:[]},i);h instanceof Promise?e.push(h.then(b=>Xs(b,n,v,t,m))):Xs(h,n,v,t,m)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:o}),e.length?Promise.all(e).then(()=>n):n}var wb=C("$ZodObject",(e,t)=>{if(Ee.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){let s=t.shape;Object.defineProperty(t,"shape",{get:()=>{let l={...s};return Object.defineProperty(t,"shape",{value:l}),l}})}let i=Di(()=>bb(t));Ce(e._zod,"propValues",()=>{let s=t.shape,l={};for(let d in s){let m=s[d]._zod;if(m.values){l[d]??(l[d]=new Set);for(let v of m.values)l[d].add(v)}}return l});let r=Qn,o=t.catchall,a;e._zod.parse=(s,l)=>{a??(a=i.value);let d=s.value;if(!r(d))return s.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),s;s.value={};let m=[],v=a.shape;for(let h of a.keys){let b=v[h],_=b._zod.optout==="optional",E=b._zod.run({value:d[h],issues:[]},l);E instanceof Promise?m.push(E.then(S=>Xs(S,s,h,d,_))):Xs(E,s,h,d,_)}return o?xb(m,d,s,l,i.value,e):m.length?Promise.all(m).then(()=>s):s}}),ip=C("$ZodObjectJIT",(e,t)=>{wb.init(e,t);let n=e._zod.parse,i=Di(()=>bb(t)),r=h=>{let b=new aa(["shape","payload","ctx"]),_=i.value,E=H=>{let re=zs(H);return`shape[${re}]._zod.run({ value: input[${re}], issues: [] }, ctx)`};b.write("const input = payload.value;");let S=Object.create(null),T=0;for(let H of _.keys)S[H]=`key_${T++}`;b.write("const newResult = {};");for(let H of _.keys){let re=S[H],K=zs(H),O=h[H]?._zod?.optout==="optional";b.write(`const ${re} = ${E(H)};`),O?b.write(`
        if (${re}.issues.length) {
          if (${K} in input) {
            payload.issues = payload.issues.concat(${re}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${K}, ...iss.path] : [${K}]
            })));
          }
        }
        
        if (${re}.value === undefined) {
          if (${K} in input) {
            newResult[${K}] = undefined;
          }
        } else {
          newResult[${K}] = ${re}.value;
        }
        
      `):b.write(`
        if (${re}.issues.length) {
          payload.issues = payload.issues.concat(${re}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${K}, ...iss.path] : [${K}]
          })));
        }
        
        if (${re}.value === undefined) {
          if (${K} in input) {
            newResult[${K}] = undefined;
          }
        } else {
          newResult[${K}] = ${re}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let Z=b.compile();return(H,re)=>Z(h,H,re)},o,a=Qn,s=!Ho.jitless,d=s&&gd.value,m=t.catchall,v;e._zod.parse=(h,b)=>{v??(v=i.value);let _=h.value;return a(_)?s&&d&&b?.async===!1&&b.jitless!==!0?(o||(o=r(t.shape)),h=o(h,b),m?xb([],_,h,b,v,e):h):n(h,b):(h.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),h)}});function sb(e,t,n,i){for(let o of e)if(o.issues.length===0)return t.value=o.value,t;let r=e.filter(o=>!$n(o));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(a=>qt(a,i,lt())))}),t)}var ua=C("$ZodUnion",(e,t)=>{Ee.init(e,t),Ce(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Ce(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Ce(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),Ce(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){let r=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>Yo(o.source)).join("|")})$`)}});let n=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(r,o)=>{if(n)return i(r,o);let a=!1,s=[];for(let l of t.options){let d=l._zod.run({value:r.value,issues:[]},o);if(d instanceof Promise)s.push(d),a=!0;else{if(d.issues.length===0)return d;s.push(d)}}return a?Promise.all(s).then(l=>sb(l,r,e,o)):sb(s,r,e,o)}});function ub(e,t,n,i){let r=e.filter(o=>o.issues.length===0);return r.length===1?(t.value=r[0].value,t):(r.length===0?t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(o=>o.issues.map(a=>qt(a,i,lt())))}):t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:[],inclusive:!1}),t)}var op=C("$ZodXor",(e,t)=>{ua.init(e,t),t.inclusive=!1;let n=t.options.length===1,i=t.options[0]._zod.run;e._zod.parse=(r,o)=>{if(n)return i(r,o);let a=!1,s=[];for(let l of t.options){let d=l._zod.run({value:r.value,issues:[]},o);d instanceof Promise?(s.push(d),a=!0):s.push(d)}return a?Promise.all(s).then(l=>ub(l,r,e,o)):ub(s,r,e,o)}}),ap=C("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,ua.init(e,t);let n=e._zod.parse;Ce(e._zod,"propValues",()=>{let r={};for(let o of t.options){let a=o._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(let[s,l]of Object.entries(a)){r[s]||(r[s]=new Set);for(let d of l)r[s].add(d)}}return r});let i=Di(()=>{let r=t.options,o=new Map;for(let a of r){let s=a._zod.propValues?.[t.discriminator];if(!s||s.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(let l of s){if(o.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);o.set(l,a)}}return o});e._zod.parse=(r,o)=>{let a=r.value;if(!Qn(a))return r.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),r;let s=i.value.get(a?.[t.discriminator]);return s?s._zod.run(r,o):t.unionFallback?n(r,o):(r.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),r)}}),sp=C("$ZodIntersection",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value,o=t.left._zod.run({value:r,issues:[]},i),a=t.right._zod.run({value:r,issues:[]},i);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([l,d])=>cb(n,l,d)):cb(n,o,a)}});function xf(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(In(e)&&In(t)){let n=Object.keys(t),i=Object.keys(e).filter(o=>n.indexOf(o)!==-1),r={...e,...t};for(let o of i){let a=xf(e[o],t[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};r[o]=a.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let i=0;i<e.length;i++){let r=e[i],o=t[i],a=xf(r,o);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function cb(e,t,n){let i=new Map,r;for(let s of t.issues)if(s.code==="unrecognized_keys"){r??(r=s);for(let l of s.keys)i.has(l)||i.set(l,{}),i.get(l).l=!0}else e.issues.push(s);for(let s of n.issues)if(s.code==="unrecognized_keys")for(let l of s.keys)i.has(l)||i.set(l,{}),i.get(l).r=!0;else e.issues.push(s);let o=[...i].filter(([,s])=>s.l&&s.r).map(([s])=>s);if(o.length&&r&&e.issues.push({...r,keys:o}),$n(e))return e;let a=xf(t.value,n.value);if(!a.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(a.mergeErrorPath)}`);return e.value=a.data,e}var tu=C("$ZodTuple",(e,t)=>{Ee.init(e,t);let n=t.items;e._zod.parse=(i,r)=>{let o=i.value;if(!Array.isArray(o))return i.issues.push({input:o,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];let a=[],s=[...n].reverse().findIndex(m=>m._zod.optin!=="optional"),l=s===-1?0:n.length-s;if(!t.rest){let m=o.length>n.length,v=o.length<l-1;if(m||v)return i.issues.push({...m?{code:"too_big",maximum:n.length,inclusive:!0}:{code:"too_small",minimum:n.length},input:o,inst:e,origin:"array"}),i}let d=-1;for(let m of n){if(d++,d>=o.length&&d>=l)continue;let v=m._zod.run({value:o[d],issues:[]},r);v instanceof Promise?a.push(v.then(h=>Hs(h,i,d))):Hs(v,i,d)}if(t.rest){let m=o.slice(n.length);for(let v of m){d++;let h=t.rest._zod.run({value:v,issues:[]},r);h instanceof Promise?a.push(h.then(b=>Hs(b,i,d))):Hs(h,i,d)}}return a.length?Promise.all(a).then(()=>i):i}});function Hs(e,t,n){e.issues.length&&t.issues.push(...Yt(n,e.issues)),t.value[n]=e.value}var up=C("$ZodRecord",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;if(!In(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),n;let o=[],a=t.keyType._zod.values;if(a){n.value={};let s=new Set;for(let d of a)if(typeof d=="string"||typeof d=="number"||typeof d=="symbol"){s.add(typeof d=="number"?d.toString():d);let m=t.valueType._zod.run({value:r[d],issues:[]},i);m instanceof Promise?o.push(m.then(v=>{v.issues.length&&n.issues.push(...Yt(d,v.issues)),n.value[d]=v.value})):(m.issues.length&&n.issues.push(...Yt(d,m.issues)),n.value[d]=m.value)}let l;for(let d in r)s.has(d)||(l=l??[],l.push(d));l&&l.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:l})}else{n.value={};for(let s of Reflect.ownKeys(r)){if(s==="__proto__")continue;let l=t.keyType._zod.run({value:s,issues:[]},i);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof s=="string"&&Ks.test(s)&&l.issues.length){let v=t.keyType._zod.run({value:Number(s),issues:[]},i);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(l=v)}if(l.issues.length){t.mode==="loose"?n.value[s]=r[s]:n.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(v=>qt(v,i,lt())),input:s,path:[s],inst:e});continue}let m=t.valueType._zod.run({value:r[s],issues:[]},i);m instanceof Promise?o.push(m.then(v=>{v.issues.length&&n.issues.push(...Yt(s,v.issues)),n.value[l.value]=v.value})):(m.issues.length&&n.issues.push(...Yt(s,m.issues)),n.value[l.value]=m.value)}}return o.length?Promise.all(o).then(()=>n):n}}),cp=C("$ZodMap",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;if(!(r instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:r,inst:e}),n;let o=[];n.value=new Map;for(let[a,s]of r){let l=t.keyType._zod.run({value:a,issues:[]},i),d=t.valueType._zod.run({value:s,issues:[]},i);l instanceof Promise||d instanceof Promise?o.push(Promise.all([l,d]).then(([m,v])=>{lb(m,v,n,a,r,e,i)})):lb(l,d,n,a,r,e,i)}return o.length?Promise.all(o).then(()=>n):n}});function lb(e,t,n,i,r,o,a){e.issues.length&&(Xo.has(typeof i)?n.issues.push(...Yt(i,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:r,inst:o,issues:e.issues.map(s=>qt(s,a,lt()))})),t.issues.length&&(Xo.has(typeof i)?n.issues.push(...Yt(i,t.issues)):n.issues.push({origin:"map",code:"invalid_element",input:r,inst:o,key:i,issues:t.issues.map(s=>qt(s,a,lt()))})),n.value.set(e.value,t.value)}var lp=C("$ZodSet",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;if(!(r instanceof Set))return n.issues.push({input:r,inst:e,expected:"set",code:"invalid_type"}),n;let o=[];n.value=new Set;for(let a of r){let s=t.valueType._zod.run({value:a,issues:[]},i);s instanceof Promise?o.push(s.then(l=>db(l,n))):db(s,n)}return o.length?Promise.all(o).then(()=>n):n}});function db(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}var dp=C("$ZodEnum",(e,t)=>{Ee.init(e,t);let n=Jo(t.entries),i=new Set(n);e._zod.values=i,e._zod.pattern=new RegExp(`^(${n.filter(r=>Xo.has(typeof r)).map(r=>typeof r=="string"?hr(r):r.toString()).join("|")})$`),e._zod.parse=(r,o)=>{let a=r.value;return i.has(a)||r.issues.push({code:"invalid_value",values:n,input:a,inst:e}),r}}),fp=C("$ZodLiteral",(e,t)=>{if(Ee.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");let n=new Set(t.values);e._zod.values=n,e._zod.pattern=new RegExp(`^(${t.values.map(i=>typeof i=="string"?hr(i):i?hr(i.toString()):String(i)).join("|")})$`),e._zod.parse=(i,r)=>{let o=i.value;return n.has(o)||i.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),i}}),pp=C("$ZodFile",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{let r=n.value;return r instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:r,inst:e}),n}}),mp=C("$ZodTransform",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new xn(e.constructor.name);let r=t.transform(n.value,n);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(a=>(n.value=a,n));if(r instanceof Promise)throw new _r;return n.value=r,n}});function fb(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}var ru=C("$ZodOptional",(e,t)=>{Ee.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Ce(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Ce(e._zod,"pattern",()=>{let n=t.innerType._zod.pattern;return n?new RegExp(`^(${Yo(n.source)})?$`):void 0}),e._zod.parse=(n,i)=>{if(t.innerType._zod.optin==="optional"){let r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>fb(o,n.value)):fb(r,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,i)}}),hp=C("$ZodExactOptional",(e,t)=>{ru.init(e,t),Ce(e._zod,"values",()=>t.innerType._zod.values),Ce(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(n,i)=>t.innerType._zod.run(n,i)}),gp=C("$ZodNullable",(e,t)=>{Ee.init(e,t),Ce(e._zod,"optin",()=>t.innerType._zod.optin),Ce(e._zod,"optout",()=>t.innerType._zod.optout),Ce(e._zod,"pattern",()=>{let n=t.innerType._zod.pattern;return n?new RegExp(`^(${Yo(n.source)}|null)$`):void 0}),Ce(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,i)=>n.value===null?n:t.innerType._zod.run(n,i)}),vp=C("$ZodDefault",(e,t)=>{Ee.init(e,t),e._zod.optin="optional",Ce(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);if(n.value===void 0)return n.value=t.defaultValue,n;let r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>pb(o,t)):pb(r,t)}});function pb(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var yp=C("$ZodPrefault",(e,t)=>{Ee.init(e,t),e._zod.optin="optional",Ce(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>(i.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,i))}),bp=C("$ZodNonOptional",(e,t)=>{Ee.init(e,t),Ce(e._zod,"values",()=>{let n=t.innerType._zod.values;return n?new Set([...n].filter(i=>i!==void 0)):void 0}),e._zod.parse=(n,i)=>{let r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>mb(o,e)):mb(r,e)}});function mb(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var xp=C("$ZodSuccess",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new xn("ZodSuccess");let r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>(n.value=o.issues.length===0,n)):(n.value=r.issues.length===0,n)}}),wp=C("$ZodCatch",(e,t)=>{Ee.init(e,t),Ce(e._zod,"optin",()=>t.innerType._zod.optin),Ce(e._zod,"optout",()=>t.innerType._zod.optout),Ce(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);let r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(a=>qt(a,i,lt()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(o=>qt(o,i,lt()))},input:n.value}),n.issues=[]),n)}}),_p=C("$ZodNaN",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:e,expected:"nan",code:"invalid_type"}),n)}),Ip=C("$ZodPipe",(e,t)=>{Ee.init(e,t),Ce(e._zod,"values",()=>t.in._zod.values),Ce(e._zod,"optin",()=>t.in._zod.optin),Ce(e._zod,"optout",()=>t.out._zod.optout),Ce(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,i)=>{if(i.direction==="backward"){let o=t.out._zod.run(n,i);return o instanceof Promise?o.then(a=>Ws(a,t.in,i)):Ws(o,t.in,i)}let r=t.in._zod.run(n,i);return r instanceof Promise?r.then(o=>Ws(o,t.out,i)):Ws(r,t.out,i)}});function Ws(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}var ca=C("$ZodCodec",(e,t)=>{Ee.init(e,t),Ce(e._zod,"values",()=>t.in._zod.values),Ce(e._zod,"optin",()=>t.in._zod.optin),Ce(e._zod,"optout",()=>t.out._zod.optout),Ce(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,i)=>{if((i.direction||"forward")==="forward"){let o=t.in._zod.run(n,i);return o instanceof Promise?o.then(a=>Js(a,t,i)):Js(o,t,i)}else{let o=t.out._zod.run(n,i);return o instanceof Promise?o.then(a=>Js(a,t,i)):Js(o,t,i)}}});function Js(e,t,n){if(e.issues.length)return e.aborted=!0,e;if((n.direction||"forward")==="forward"){let r=t.transform(e.value,e);return r instanceof Promise?r.then(o=>Ys(e,o,t.out,n)):Ys(e,r,t.out,n)}else{let r=t.reverseTransform(e.value,e);return r instanceof Promise?r.then(o=>Ys(e,o,t.in,n)):Ys(e,r,t.in,n)}}function Ys(e,t,n,i){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:t,issues:e.issues},i)}var $p=C("$ZodReadonly",(e,t)=>{Ee.init(e,t),Ce(e._zod,"propValues",()=>t.innerType._zod.propValues),Ce(e._zod,"values",()=>t.innerType._zod.values),Ce(e._zod,"optin",()=>t.innerType?._zod?.optin),Ce(e._zod,"optout",()=>t.innerType?._zod?.optout),e._zod.parse=(n,i)=>{if(i.direction==="backward")return t.innerType._zod.run(n,i);let r=t.innerType._zod.run(n,i);return r instanceof Promise?r.then(hb):hb(r)}});function hb(e){return e.value=Object.freeze(e.value),e}var Sp=C("$ZodTemplateLiteral",(e,t)=>{Ee.init(e,t);let n=[];for(let i of t.parts)if(typeof i=="object"&&i!==null){if(!i._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...i._zod.traits].shift()}`);let r=i._zod.pattern instanceof RegExp?i._zod.pattern.source:i._zod.pattern;if(!r)throw new Error(`Invalid template literal part: ${i._zod.traits}`);let o=r.startsWith("^")?1:0,a=r.endsWith("$")?r.length-1:r.length;n.push(r.slice(o,a))}else if(i===null||yd.has(typeof i))n.push(hr(`${i}`));else throw new Error(`Invalid template literal part: ${i}`);e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(i,r)=>typeof i.value!="string"?(i.issues.push({input:i.value,inst:e,expected:"string",code:"invalid_type"}),i):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(i.value)||i.issues.push({input:i.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),i)}),kp=C("$ZodFunction",(e,t)=>(Ee.init(e,t),e._def=t,e._zod.def=t,e.implement=n=>{if(typeof n!="function")throw new Error("implement() must be called with a function");return function(...i){let r=e._def.input?Rs(e._def.input,i):i,o=Reflect.apply(n,this,r);return e._def.output?Rs(e._def.output,o):o}},e.implementAsync=n=>{if(typeof n!="function")throw new Error("implementAsync() must be called with a function");return async function(...i){let r=e._def.input?await Cs(e._def.input,i):i,o=await Reflect.apply(n,this,r);return e._def.output?await Cs(e._def.output,o):o}},e._zod.parse=(n,i)=>typeof n.value!="function"?(n.issues.push({code:"invalid_type",expected:"function",input:n.value,inst:e}),n):(e._def.output&&e._def.output._zod.def.type==="promise"?n.value=e.implementAsync(n.value):n.value=e.implement(n.value),n),e.input=(...n)=>{let i=e.constructor;return Array.isArray(n[0])?new i({type:"function",input:new tu({type:"tuple",items:n[0],rest:n[1]}),output:e._def.output}):new i({type:"function",input:n[0],output:e._def.output})},e.output=n=>{let i=e.constructor;return new i({type:"function",input:e._def.input,output:n})},e)),Ap=C("$ZodPromise",(e,t)=>{Ee.init(e,t),e._zod.parse=(n,i)=>Promise.resolve(n.value).then(r=>t.innerType._zod.run({value:r,issues:[]},i))}),Ep=C("$ZodLazy",(e,t)=>{Ee.init(e,t),Ce(e._zod,"innerType",()=>t.getter()),Ce(e._zod,"pattern",()=>e._zod.innerType?._zod?.pattern),Ce(e._zod,"propValues",()=>e._zod.innerType?._zod?.propValues),Ce(e._zod,"optin",()=>e._zod.innerType?._zod?.optin??void 0),Ce(e._zod,"optout",()=>e._zod.innerType?._zod?.optout??void 0),e._zod.parse=(n,i)=>e._zod.innerType._zod.run(n,i)}),Tp=C("$ZodCustom",(e,t)=>{nt.init(e,t),Ee.init(e,t),e._zod.parse=(n,i)=>n,e._zod.check=n=>{let i=n.value,r=t.fn(i);if(r instanceof Promise)return r.then(o=>gb(o,n,i,e));gb(r,n,i,e)}});function gb(e,t,n,i){if(!e){let r={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),t.issues.push(zi(r))}}var da={};Kr(da,{ar:()=>_b,az:()=>Ib,be:()=>Sb,bg:()=>kb,ca:()=>Ab,cs:()=>Eb,da:()=>Tb,de:()=>Pb,en:()=>nu,eo:()=>Db,es:()=>zb,fa:()=>Ob,fi:()=>Rb,fr:()=>Cb,frCA:()=>jb,he:()=>Mb,hu:()=>Nb,hy:()=>Fb,id:()=>Lb,is:()=>qb,it:()=>Bb,ja:()=>Zb,ka:()=>Kb,kh:()=>Vb,km:()=>iu,ko:()=>Gb,lt:()=>Wb,mk:()=>Jb,ms:()=>Yb,nl:()=>Xb,no:()=>Qb,ota:()=>ex,pl:()=>rx,ps:()=>tx,pt:()=>nx,ru:()=>ox,sl:()=>ax,sv:()=>sx,ta:()=>ux,th:()=>cx,tr:()=>lx,ua:()=>dx,uk:()=>ou,ur:()=>fx,uz:()=>px,vi:()=>mx,yo:()=>vx,zhCN:()=>hx,zhTW:()=>gx});var gE=()=>{let e={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function t(r){return e[r]??null}let n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 instanceof ${r.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${s}`:`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${o}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${s}`}case"invalid_value":return r.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${ne(r.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${r.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${r.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${r.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${r.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${r.minimum.toString()} ${a.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${r.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${r.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${n[o.format]??r.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${r.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${r.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${r.keys.length>1?"\u0629":""}: ${L(r.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${r.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${r.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function _b(){return{localeError:gE()}}var vE=()=>{let e={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function t(r){return e[r]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n instanceof ${r.expected}, daxil olan ${s}`:`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${o}, daxil olan ${s}`}case"invalid_value":return r.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${ne(r.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${r.origin??"d\u0259y\u0259r"} ${o}${r.maximum.toString()} ${a.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${r.origin??"d\u0259y\u0259r"} ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${r.origin} ${o}${r.minimum.toString()} ${a.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[o.format]??r.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${r.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${r.keys.length>1?"lar":""}: ${L(r.keys,", ")}`;case"invalid_key":return`${r.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${r.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function Ib(){return{localeError:vE()}}function $b(e,t,n,i){let r=Math.abs(e),o=r%10,a=r%100;return a>=11&&a<=19?i:o===1?t:o>=2&&o<=4?n:i}var yE=()=>{let e={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function t(r){return e[r]??null}let n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"},i={nan:"NaN",number:"\u043B\u0456\u043A",array:"\u043C\u0430\u0441\u0456\u045E"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F instanceof ${r.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${s}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${o}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${s}`}case"invalid_value":return r.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${ne(r.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);if(a){let s=Number(r.maximum),l=$b(s,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${r.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${o}${r.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${r.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);if(a){let s=Number(r.minimum),l=$b(s,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${r.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${o}${r.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${r.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[o.format]??r.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${r.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${r.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${L(r.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${r.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${r.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function Sb(){return{localeError:yE()}}var bE=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function t(r){return e[r]??null}let n={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"},i={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D instanceof ${r.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${s}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${o}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${s}`}case"invalid_value":return r.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${ne(r.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${r.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${o}${r.minimum.toString()} ${a.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${r.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;if(o.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${o.prefix}"`;if(o.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${o.suffix}"`;if(o.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${o.includes}"`;if(o.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${o.pattern}`;let a="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return o.format==="emoji"&&(a="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="datetime"&&(a="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="date"&&(a="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),o.format==="time"&&(a="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),o.format==="duration"&&(a="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${a} ${n[o.format]??r.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${r.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${r.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${r.keys.length>1?"\u043E\u0432\u0435":""}: ${L(r.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${r.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${r.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function kb(){return{localeError:bE()}}var xE=()=>{let e={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(r){return e[r]??null}let n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Tipus inv\xE0lid: s'esperava instanceof ${r.expected}, s'ha rebut ${s}`:`Tipus inv\xE0lid: s'esperava ${o}, s'ha rebut ${s}`}case"invalid_value":return r.values.length===1?`Valor inv\xE0lid: s'esperava ${ne(r.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${L(r.values," o ")}`;case"too_big":{let o=r.inclusive?"com a m\xE0xim":"menys de",a=t(r.origin);return a?`Massa gran: s'esperava que ${r.origin??"el valor"} contingu\xE9s ${o} ${r.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s'esperava que ${r.origin??"el valor"} fos ${o} ${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?"com a m\xEDnim":"m\xE9s de",a=t(r.origin);return a?`Massa petit: s'esperava que ${r.origin} contingu\xE9s ${o} ${r.minimum.toString()} ${a.unit}`:`Massa petit: s'esperava que ${r.origin} fos ${o} ${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${n[o.format]??r.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${r.divisor}`;case"unrecognized_keys":return`Clau${r.keys.length>1?"s":""} no reconeguda${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${r.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${r.origin}`;default:return"Entrada inv\xE0lida"}}};function Ab(){return{localeError:xE()}}var wE=()=>{let e={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function t(r){return e[r]??null}let n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"},i={nan:"NaN",number:"\u010D\xEDslo",string:"\u0159et\u011Bzec",function:"funkce",array:"pole"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no instanceof ${r.expected}, obdr\u017Eeno ${s}`:`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${o}, obdr\u017Eeno ${s}`}case"invalid_value":return r.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${ne(r.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${r.origin??"hodnota"} mus\xED m\xEDt ${o}${r.maximum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${r.origin??"hodnota"} mus\xED b\xFDt ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${r.origin??"hodnota"} mus\xED m\xEDt ${o}${r.minimum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${r.origin??"hodnota"} mus\xED b\xFDt ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${n[o.format]??r.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${r.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${L(r.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${r.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${r.origin}`;default:return"Neplatn\xFD vstup"}}};function Eb(){return{localeError:wE()}}var _E=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function t(r){return e[r]??null}let n={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},i={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Ugyldigt input: forventede instanceof ${r.expected}, fik ${s}`:`Ugyldigt input: forventede ${o}, fik ${s}`}case"invalid_value":return r.values.length===1?`Ugyldig v\xE6rdi: forventede ${ne(r.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin),s=i[r.origin]??r.origin;return a?`For stor: forventede ${s??"value"} ${a.verb} ${o} ${r.maximum.toString()} ${a.unit??"elementer"}`:`For stor: forventede ${s??"value"} havde ${o} ${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin),s=i[r.origin]??r.origin;return a?`For lille: forventede ${s} ${a.verb} ${o} ${r.minimum.toString()} ${a.unit}`:`For lille: forventede ${s} havde ${o} ${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Ugyldig streng: skal starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: skal ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: skal indeholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${n[o.format]??r.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${L(r.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${r.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${r.origin}`;default:return"Ugyldigt input"}}};function Tb(){return{localeError:_E()}}var IE=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(r){return e[r]??null}let n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},i={nan:"NaN",number:"Zahl",array:"Array"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Ung\xFCltige Eingabe: erwartet instanceof ${r.expected}, erhalten ${s}`:`Ung\xFCltige Eingabe: erwartet ${o}, erhalten ${s}`}case"invalid_value":return r.values.length===1?`Ung\xFCltige Eingabe: erwartet ${ne(r.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Zu gro\xDF: erwartet, dass ${r.origin??"Wert"} ${o}${r.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${r.origin??"Wert"} ${o}${r.maximum.toString()} ist`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Zu klein: erwartet, dass ${r.origin} ${o}${r.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${r.origin} ${o}${r.minimum.toString()} ist`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${n[o.format]??r.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${r.divisor} sein`;case"unrecognized_keys":return`${r.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${L(r.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${r.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${r.origin}`;default:return"Ung\xFCltige Eingabe"}}};function Pb(){return{localeError:IE()}}var $E=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function t(r){return e[r]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return`Invalid input: expected ${o}, received ${s}`}case"invalid_value":return r.values.length===1?`Invalid input: expected ${ne(r.values[0])}`:`Invalid option: expected one of ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Too big: expected ${r.origin??"value"} to have ${o}${r.maximum.toString()} ${a.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Too small: expected ${r.origin} to have ${o}${r.minimum.toString()} ${a.unit}`:`Too small: expected ${r.origin} to be ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function nu(){return{localeError:$E()}}var SE=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(r){return e[r]??null}let n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},i={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Nevalida enigo: atendi\u011Dis instanceof ${r.expected}, ricevi\u011Dis ${s}`:`Nevalida enigo: atendi\u011Dis ${o}, ricevi\u011Dis ${s}`}case"invalid_value":return r.values.length===1?`Nevalida enigo: atendi\u011Dis ${ne(r.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Tro granda: atendi\u011Dis ke ${r.origin??"valoro"} havu ${o}${r.maximum.toString()} ${a.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${r.origin??"valoro"} havu ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Tro malgranda: atendi\u011Dis ke ${r.origin} havu ${o}${r.minimum.toString()} ${a.unit}`:`Tro malgranda: atendi\u011Dis ke ${r.origin} estu ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${o.prefix}"`:o.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${o.suffix}"`:o.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${o.includes}"`:o.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${o.pattern}`:`Nevalida ${n[o.format]??r.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} \u015Dlosilo${r.keys.length>1?"j":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${r.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`;default:return"Nevalida enigo"}}};function Db(){return{localeError:SE()}}var kE=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function t(r){return e[r]??null}let n={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN",string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Entrada inv\xE1lida: se esperaba instanceof ${r.expected}, recibido ${s}`:`Entrada inv\xE1lida: se esperaba ${o}, recibido ${s}`}case"invalid_value":return r.values.length===1?`Entrada inv\xE1lida: se esperaba ${ne(r.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin),s=i[r.origin]??r.origin;return a?`Demasiado grande: se esperaba que ${s??"valor"} tuviera ${o}${r.maximum.toString()} ${a.unit??"elementos"}`:`Demasiado grande: se esperaba que ${s??"valor"} fuera ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin),s=i[r.origin]??r.origin;return a?`Demasiado peque\xF1o: se esperaba que ${s} tuviera ${o}${r.minimum.toString()} ${a.unit}`:`Demasiado peque\xF1o: se esperaba que ${s} fuera ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${o.prefix}"`:o.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${o.suffix}"`:o.format==="includes"?`Cadena inv\xE1lida: debe incluir "${o.includes}"`:o.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${o.pattern}`:`Inv\xE1lido ${n[o.format]??r.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${r.divisor}`;case"unrecognized_keys":return`Llave${r.keys.length>1?"s":""} desconocida${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${i[r.origin]??r.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${i[r.origin]??r.origin}`;default:return"Entrada inv\xE1lida"}}};function zb(){return{localeError:kE()}}var AE=()=>{let e={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function t(r){return e[r]??null}let n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"},i={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0622\u0631\u0627\u06CC\u0647"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A instanceof ${r.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${s} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`:`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${o} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${s} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`}case"invalid_value":return r.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${ne(r.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${L(r.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${r.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${r.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${r.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${r.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${r.origin} \u0628\u0627\u06CC\u062F ${o}${r.minimum.toString()} ${a.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${r.origin} \u0628\u0627\u06CC\u062F ${o}${r.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[o.format]??r.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${r.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${r.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${L(r.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${r.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${r.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function Ob(){return{localeError:AE()}}var EE=()=>{let e={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function t(r){return e[r]??null}let n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Virheellinen tyyppi: odotettiin instanceof ${r.expected}, oli ${s}`:`Virheellinen tyyppi: odotettiin ${o}, oli ${s}`}case"invalid_value":return r.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${ne(r.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Liian suuri: ${a.subject} t\xE4ytyy olla ${o}${r.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Liian pieni: ${a.subject} t\xE4ytyy olla ${o}${r.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${n[o.format]??r.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${r.divisor} monikerta`;case"unrecognized_keys":return`${r.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${L(r.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function Rb(){return{localeError:EE()}}var TE=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(r){return e[r]??null}let n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},i={nan:"NaN",number:"nombre",array:"tableau"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Entr\xE9e invalide : instanceof ${r.expected} attendu, ${s} re\xE7u`:`Entr\xE9e invalide : ${o} attendu, ${s} re\xE7u`}case"invalid_value":return r.values.length===1?`Entr\xE9e invalide : ${ne(r.values[0])} attendu`:`Option invalide : une valeur parmi ${L(r.values,"|")} attendue`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Trop grand : ${r.origin??"valeur"} doit ${a.verb} ${o}${r.maximum.toString()} ${a.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${r.origin??"valeur"} doit \xEAtre ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Trop petit : ${r.origin} doit ${a.verb} ${o}${r.minimum.toString()} ${a.unit}`:`Trop petit : ${r.origin} doit \xEAtre ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${n[o.format]??r.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xE9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${L(r.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${r.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return"Entr\xE9e invalide"}}};function Cb(){return{localeError:TE()}}var PE=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(r){return e[r]??null}let n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Entr\xE9e invalide : attendu instanceof ${r.expected}, re\xE7u ${s}`:`Entr\xE9e invalide : attendu ${o}, re\xE7u ${s}`}case"invalid_value":return r.values.length===1?`Entr\xE9e invalide : attendu ${ne(r.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"\u2264":"<",a=t(r.origin);return a?`Trop grand : attendu que ${r.origin??"la valeur"} ait ${o}${r.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${r.origin??"la valeur"} soit ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?"\u2265":">",a=t(r.origin);return a?`Trop petit : attendu que ${r.origin} ait ${o}${r.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${r.origin} soit ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${n[o.format]??r.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${r.divisor}`;case"unrecognized_keys":return`Cl\xE9${r.keys.length>1?"s":""} non reconnue${r.keys.length>1?"s":""} : ${L(r.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${r.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${r.origin}`;default:return"Entr\xE9e invalide"}}};function jb(){return{localeError:PE()}}var DE=()=>{let e={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},t={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},n=d=>d?e[d]:void 0,i=d=>{let m=n(d);return m?m.label:d??e.unknown.label},r=d=>`\u05D4${i(d)}`,o=d=>(n(d)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA",a=d=>d?t[d]??null:null,s={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}},l={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let m=d.expected,v=l[m??""]??i(m),h=ie(d.input),b=l[h]??e[h]?.label??h;return/^[A-Z]/.test(d.expected)?`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA instanceof ${d.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${b}`:`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${v}, \u05D4\u05EA\u05E7\u05D1\u05DC ${b}`}case"invalid_value":{if(d.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${ne(d.values[0])}`;let m=d.values.map(b=>ne(b));if(d.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${m[0]} \u05D0\u05D5 ${m[1]}`;let v=m[m.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${m.slice(0,-1).join(", ")} \u05D0\u05D5 ${v}`}case"too_big":{let m=a(d.origin),v=r(d.origin??"value");if(d.origin==="string")return`${m?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${v} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.maximum.toString()} ${m?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(d.origin==="number"){let _=d.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${d.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${v} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${_}`}if(d.origin==="array"||d.origin==="set"){let _=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",E=d.inclusive?`${d.maximum} ${m?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${d.maximum} ${m?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${v} ${_} \u05DC\u05D4\u05DB\u05D9\u05DC ${E}`.trim()}let h=d.inclusive?"<=":"<",b=o(d.origin??"value");return m?.unit?`${m.longLabel} \u05DE\u05D3\u05D9: ${v} ${b} ${h}${d.maximum.toString()} ${m.unit}`:`${m?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${v} ${b} ${h}${d.maximum.toString()}`}case"too_small":{let m=a(d.origin),v=r(d.origin??"value");if(d.origin==="string")return`${m?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${v} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${d.minimum.toString()} ${m?.unit??""} ${d.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(d.origin==="number"){let _=d.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${d.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${d.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${v} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${_}`}if(d.origin==="array"||d.origin==="set"){let _=d.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(d.minimum===1&&d.inclusive){let S=(d.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${v} ${_} \u05DC\u05D4\u05DB\u05D9\u05DC ${S}`}let E=d.inclusive?`${d.minimum} ${m?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${d.minimum} ${m?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${v} ${_} \u05DC\u05D4\u05DB\u05D9\u05DC ${E}`.trim()}let h=d.inclusive?">=":">",b=o(d.origin??"value");return m?.unit?`${m.shortLabel} \u05DE\u05D3\u05D9: ${v} ${b} ${h}${d.minimum.toString()} ${m.unit}`:`${m?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${v} ${b} ${h}${d.minimum.toString()}`}case"invalid_format":{let m=d;if(m.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${m.prefix}"`;if(m.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${m.suffix}"`;if(m.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${m.includes}"`;if(m.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${m.pattern}`;let v=s[m.format],h=v?.label??m.format,_=(v?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${h} \u05DC\u05D0 ${_}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${d.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${d.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${d.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${L(d.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${r(d.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function Mb(){return{localeError:DE()}}var zE=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(r){return e[r]??null}let n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"},i={nan:"NaN",number:"sz\xE1m",array:"t\xF6mb"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k instanceof ${r.expected}, a kapott \xE9rt\xE9k ${s}`:`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${o}, a kapott \xE9rt\xE9k ${s}`}case"invalid_value":return r.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${ne(r.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`T\xFAl nagy: ${r.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${r.maximum.toString()} ${a.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${r.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${r.origin} m\xE9rete t\xFAl kicsi ${o}${r.minimum.toString()} ${a.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${r.origin} t\xFAl kicsi ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[o.format]??r.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${r.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${r.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${r.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function Nb(){return{localeError:zE()}}function Ub(e,t,n){return Math.abs(e)===1?t:n}function Ni(e){if(!e)return"";let t=["\u0561","\u0565","\u0568","\u056B","\u0578","\u0578\u0582","\u0585"],n=e[e.length-1];return e+(t.includes(n)?"\u0576":"\u0568")}var OE=()=>{let e={string:{unit:{one:"\u0576\u0577\u0561\u0576",many:"\u0576\u0577\u0561\u0576\u0576\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},file:{unit:{one:"\u0562\u0561\u0575\u0569",many:"\u0562\u0561\u0575\u0569\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},array:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"},set:{unit:{one:"\u057F\u0561\u0580\u0580",many:"\u057F\u0561\u0580\u0580\u0565\u0580"},verb:"\u0578\u0582\u0576\u0565\u0576\u0561\u056C"}};function t(r){return e[r]??null}let n={regex:"\u0574\u0578\u0582\u057F\u0584",email:"\u0567\u056C. \u0570\u0561\u057D\u0581\u0565",url:"URL",emoji:"\u0567\u0574\u0578\u057B\u056B",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E \u0587 \u056A\u0561\u0574",date:"ISO \u0561\u0574\u057D\u0561\u0569\u056B\u057E",time:"ISO \u056A\u0561\u0574",duration:"ISO \u057F\u0587\u0578\u0572\u0578\u0582\u0569\u0575\u0578\u0582\u0576",ipv4:"IPv4 \u0570\u0561\u057D\u0581\u0565",ipv6:"IPv6 \u0570\u0561\u057D\u0581\u0565",cidrv4:"IPv4 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",cidrv6:"IPv6 \u0574\u056B\u057B\u0561\u056F\u0561\u0575\u0584",base64:"base64 \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",base64url:"base64url \u0571\u0587\u0561\u0579\u0561\u0583\u0578\u057E \u057F\u0578\u0572",json_string:"JSON \u057F\u0578\u0572",e164:"E.164 \u0570\u0561\u0574\u0561\u0580",jwt:"JWT",template_literal:"\u0574\u0578\u0582\u057F\u0584"},i={nan:"NaN",number:"\u0569\u056B\u057E",array:"\u0566\u0561\u0576\u0563\u057E\u0561\u056E"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 instanceof ${r.expected}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${s}`:`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${o}, \u057D\u057F\u0561\u0581\u057E\u0565\u056C \u0567 ${s}`}case"invalid_value":return r.values.length===1?`\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 ${ne(r.values[1])}`:`\u054D\u056D\u0561\u056C \u057F\u0561\u0580\u0562\u0565\u0580\u0561\u056F\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567\u0580 \u0570\u0565\u057F\u0587\u0575\u0561\u056C\u0576\u0565\u0580\u056B\u0581 \u0574\u0565\u056F\u0568\u055D ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);if(a){let s=Number(r.maximum),l=Ub(s,a.unit.one,a.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${Ni(r.origin??"\u0561\u0580\u056A\u0565\u0584")} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${o}${r.maximum.toString()} ${l}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0574\u0565\u056E \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${Ni(r.origin??"\u0561\u0580\u056A\u0565\u0584")} \u056C\u056B\u0576\u056B ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);if(a){let s=Number(r.minimum),l=Ub(s,a.unit.one,a.unit.many);return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${Ni(r.origin)} \u056F\u0578\u0582\u0576\u0565\u0576\u0561 ${o}${r.minimum.toString()} ${l}`}return`\u0549\u0561\u0583\u0561\u0566\u0561\u0576\u0581 \u0583\u0578\u0584\u0580 \u0561\u0580\u056A\u0565\u0584\u2024 \u057D\u057A\u0561\u057D\u057E\u0578\u0582\u0574 \u0567, \u0578\u0580 ${Ni(r.origin)} \u056C\u056B\u0576\u056B ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057D\u056F\u057D\u057E\u056B "${o.prefix}"-\u0578\u057E`:o.format==="ends_with"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0561\u057E\u0561\u0580\u057F\u057E\u056B "${o.suffix}"-\u0578\u057E`:o.format==="includes"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u057A\u0561\u0580\u0578\u0582\u0576\u0561\u056F\u056B "${o.includes}"`:o.format==="regex"?`\u054D\u056D\u0561\u056C \u057F\u0578\u0572\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0570\u0561\u0574\u0561\u057A\u0561\u057F\u0561\u057D\u056D\u0561\u0576\u056B ${o.pattern} \u0571\u0587\u0561\u0579\u0561\u0583\u056B\u0576`:`\u054D\u056D\u0561\u056C ${n[o.format]??r.format}`}case"not_multiple_of":return`\u054D\u056D\u0561\u056C \u0569\u056B\u057E\u2024 \u057A\u0565\u057F\u0584 \u0567 \u0562\u0561\u0566\u0574\u0561\u057A\u0561\u057F\u056B\u056F \u056C\u056B\u0576\u056B ${r.divisor}-\u056B`;case"unrecognized_keys":return`\u0549\u0573\u0561\u0576\u0561\u0579\u057E\u0561\u056E \u0562\u0561\u0576\u0561\u056C\u056B${r.keys.length>1?"\u0576\u0565\u0580":""}. ${L(r.keys,", ")}`;case"invalid_key":return`\u054D\u056D\u0561\u056C \u0562\u0561\u0576\u0561\u056C\u056B ${Ni(r.origin)}-\u0578\u0582\u0574`;case"invalid_union":return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574";case"invalid_element":return`\u054D\u056D\u0561\u056C \u0561\u0580\u056A\u0565\u0584 ${Ni(r.origin)}-\u0578\u0582\u0574`;default:return"\u054D\u056D\u0561\u056C \u0574\u0578\u0582\u057F\u0584\u0561\u0563\u0580\u0578\u0582\u0574"}}};function Fb(){return{localeError:OE()}}var RE=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(r){return e[r]??null}let n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Input tidak valid: diharapkan instanceof ${r.expected}, diterima ${s}`:`Input tidak valid: diharapkan ${o}, diterima ${s}`}case"invalid_value":return r.values.length===1?`Input tidak valid: diharapkan ${ne(r.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Terlalu besar: diharapkan ${r.origin??"value"} memiliki ${o}${r.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${r.origin??"value"} menjadi ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Terlalu kecil: diharapkan ${r.origin} memiliki ${o}${r.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${r.origin} menjadi ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${n[o.format]??r.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${r.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${r.origin}`;default:return"Input tidak valid"}}};function Lb(){return{localeError:RE()}}var CE=()=>{let e={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function t(r){return e[r]??null}let n={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"},i={nan:"NaN",number:"n\xFAmer",array:"fylki"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Rangt gildi: \xDE\xFA sl\xF3st inn ${s} \xFEar sem \xE1 a\xF0 vera instanceof ${r.expected}`:`Rangt gildi: \xDE\xFA sl\xF3st inn ${s} \xFEar sem \xE1 a\xF0 vera ${o}`}case"invalid_value":return r.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${ne(r.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin??"gildi"} hafi ${o}${r.maximum.toString()} ${a.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin??"gildi"} s\xE9 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin} hafi ${o}${r.minimum.toString()} ${a.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin} s\xE9 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${o.prefix}"`:o.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${o.suffix}"`:o.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${o.includes}"`:o.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${o.pattern}`:`Rangt ${n[o.format]??r.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${L(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${r.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${r.origin}`;default:return"Rangt gildi"}}};function qb(){return{localeError:CE()}}var jE=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(r){return e[r]??null}let n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"numero",array:"vettore"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Input non valido: atteso instanceof ${r.expected}, ricevuto ${s}`:`Input non valido: atteso ${o}, ricevuto ${s}`}case"invalid_value":return r.values.length===1?`Input non valido: atteso ${ne(r.values[0])}`:`Opzione non valida: atteso uno tra ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Troppo grande: ${r.origin??"valore"} deve avere ${o}${r.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${r.origin??"valore"} deve essere ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Troppo piccolo: ${r.origin} deve avere ${o}${r.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${r.origin} deve essere ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${r.divisor}`;case"unrecognized_keys":return`Chiav${r.keys.length>1?"i":"e"} non riconosciut${r.keys.length>1?"e":"a"}: ${L(r.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${r.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${r.origin}`;default:return"Input non valido"}}};function Bb(){return{localeError:jE()}}var ME=()=>{let e={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function t(r){return e[r]??null}let n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"},i={nan:"NaN",number:"\u6570\u5024",array:"\u914D\u5217"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u7121\u52B9\u306A\u5165\u529B: instanceof ${r.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${s}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u5165\u529B: ${o}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${s}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`}case"invalid_value":return r.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${ne(r.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${L(r.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=r.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",a=t(r.origin);return a?`\u5927\u304D\u3059\u304E\u308B\u5024: ${r.origin??"\u5024"}\u306F${r.maximum.toString()}${a.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${r.origin??"\u5024"}\u306F${r.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=r.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",a=t(r.origin);return a?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${r.origin}\u306F${r.minimum.toString()}${a.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${r.origin}\u306F${r.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[o.format]??r.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${r.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${r.keys.length>1?"\u7FA4":""}: ${L(r.keys,"\u3001")}`;case"invalid_key":return`${r.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${r.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function Zb(){return{localeError:ME()}}var NE=()=>{let e={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function t(r){return e[r]??null}let n={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"},i={nan:"NaN",number:"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8",string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0",array:"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 instanceof ${r.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${s}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${s}`}case"invalid_value":return r.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${ne(r.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${L(r.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${a.verb} ${o}${r.maximum.toString()} ${a.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin} ${a.verb} ${o}${r.minimum.toString()} ${a.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${r.origin} \u10D8\u10E7\u10DD\u10E1 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.prefix}"-\u10D8\u10D7`:o.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${o.suffix}"-\u10D8\u10D7`:o.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${o.includes}"-\u10E1`:o.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${o.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${r.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${r.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${L(r.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${r.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${r.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function Kb(){return{localeError:NE()}}var UE=()=>{let e={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function t(r){return e[r]??null}let n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"},i={nan:"NaN",number:"\u179B\u17C1\u1781",array:"\u17A2\u17B6\u179A\u17C1 (Array)",null:"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A instanceof ${r.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${s}`:`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${o} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${s}`}case"invalid_value":return r.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${ne(r.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${r.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${r.maximum.toString()} ${a.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${r.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${r.origin} ${o} ${r.minimum.toString()} ${a.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${r.origin} ${o} ${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${r.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${L(r.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${r.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${r.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function iu(){return{localeError:UE()}}function Vb(){return iu()}var FE=()=>{let e={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function t(r){return e[r]??null}let n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 instanceof ${r.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${s}\uC785\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${o}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${s}\uC785\uB2C8\uB2E4`}case"invalid_value":return r.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${ne(r.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${L(r.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=r.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",a=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",s=t(r.origin),l=s?.unit??"\uC694\uC18C";return s?`${r.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${r.maximum.toString()}${l} ${o}${a}`:`${r.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${r.maximum.toString()} ${o}${a}`}case"too_small":{let o=r.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",a=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",s=t(r.origin),l=s?.unit??"\uC694\uC18C";return s?`${r.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${r.minimum.toString()}${l} ${o}${a}`:`${r.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${r.minimum.toString()} ${o}${a}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[o.format]??r.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${r.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${L(r.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${r.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${r.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function Gb(){return{localeError:FE()}}var la=e=>e.charAt(0).toUpperCase()+e.slice(1);function Hb(e){let t=Math.abs(e),n=t%10,i=t%100;return i>=11&&i<=19||n===0?"many":n===1?"one":"few"}var LE=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function t(r,o,a,s){let l=e[r]??null;return l===null?l:{unit:l.unit[o],verb:l.verb[s][a?"inclusive":"notInclusive"]}}let n={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"},i={nan:"NaN",number:"skai\u010Dius",bigint:"sveikasis skai\u010Dius",string:"eilut\u0117",boolean:"login\u0117 reik\u0161m\u0117",undefined:"neapibr\u0117\u017Eta reik\u0161m\u0117",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin\u0117 reik\u0161m\u0117"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Gautas tipas ${s}, o tik\u0117tasi - instanceof ${r.expected}`:`Gautas tipas ${s}, o tik\u0117tasi - ${o}`}case"invalid_value":return r.values.length===1?`Privalo b\u016Bti ${ne(r.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${L(r.values,"|")} pasirinkim\u0173`;case"too_big":{let o=i[r.origin]??r.origin,a=t(r.origin,Hb(Number(r.maximum)),r.inclusive??!1,"smaller");if(a?.verb)return`${la(o??r.origin??"reik\u0161m\u0117")} ${a.verb} ${r.maximum.toString()} ${a.unit??"element\u0173"}`;let s=r.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${la(o??r.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${r.maximum.toString()} ${a?.unit}`}case"too_small":{let o=i[r.origin]??r.origin,a=t(r.origin,Hb(Number(r.minimum)),r.inclusive??!1,"bigger");if(a?.verb)return`${la(o??r.origin??"reik\u0161m\u0117")} ${a.verb} ${r.minimum.toString()} ${a.unit??"element\u0173"}`;let s=r.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${la(o??r.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${r.minimum.toString()} ${a?.unit}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${o.prefix}"`:o.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${o.suffix}"`:o.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${o.includes}"`:o.format==="regex"?`Eilut\u0117 privalo atitikti ${o.pattern}`:`Neteisingas ${n[o.format]??r.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${r.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${r.keys.length>1?"i":"as"} rakt${r.keys.length>1?"ai":"as"}: ${L(r.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let o=i[r.origin]??r.origin;return`${la(o??r.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function Wb(){return{localeError:LE()}}var qE=()=>{let e={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function t(r){return e[r]??null}let n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"},i={nan:"NaN",number:"\u0431\u0440\u043E\u0458",array:"\u043D\u0438\u0437\u0430"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 instanceof ${r.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${s}`:`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${o}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${s}`}case"invalid_value":return r.values.length===1?`Invalid input: expected ${ne(r.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${r.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${r.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${r.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${r.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${r.minimum.toString()} ${a.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${r.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${n[o.format]??r.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${L(r.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${r.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${r.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function Jb(){return{localeError:qE()}}var BE=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(r){return e[r]??null}let n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"nombor"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Input tidak sah: dijangka instanceof ${r.expected}, diterima ${s}`:`Input tidak sah: dijangka ${o}, diterima ${s}`}case"invalid_value":return r.values.length===1?`Input tidak sah: dijangka ${ne(r.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Terlalu besar: dijangka ${r.origin??"nilai"} ${a.verb} ${o}${r.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${r.origin??"nilai"} adalah ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Terlalu kecil: dijangka ${r.origin} ${a.verb} ${o}${r.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${r.origin} adalah ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${n[o.format]??r.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${r.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${L(r.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${r.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${r.origin}`;default:return"Input tidak sah"}}};function Yb(){return{localeError:BE()}}var ZE=()=>{let e={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function t(r){return e[r]??null}let n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},i={nan:"NaN",number:"getal"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Ongeldige invoer: verwacht instanceof ${r.expected}, ontving ${s}`:`Ongeldige invoer: verwacht ${o}, ontving ${s}`}case"invalid_value":return r.values.length===1?`Ongeldige invoer: verwacht ${ne(r.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin),s=r.origin==="date"?"laat":r.origin==="string"?"lang":"groot";return a?`Te ${s}: verwacht dat ${r.origin??"waarde"} ${o}${r.maximum.toString()} ${a.unit??"elementen"} ${a.verb}`:`Te ${s}: verwacht dat ${r.origin??"waarde"} ${o}${r.maximum.toString()} is`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin),s=r.origin==="date"?"vroeg":r.origin==="string"?"kort":"klein";return a?`Te ${s}: verwacht dat ${r.origin} ${o}${r.minimum.toString()} ${a.unit} ${a.verb}`:`Te ${s}: verwacht dat ${r.origin} ${o}${r.minimum.toString()} is`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${n[o.format]??r.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${r.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${r.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${r.origin}`;default:return"Ongeldige invoer"}}};function Xb(){return{localeError:ZE()}}var KE=()=>{let e={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function t(r){return e[r]??null}let n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"tall",array:"liste"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Ugyldig input: forventet instanceof ${r.expected}, fikk ${s}`:`Ugyldig input: forventet ${o}, fikk ${s}`}case"invalid_value":return r.values.length===1?`Ugyldig verdi: forventet ${ne(r.values[0])}`:`Ugyldig valg: forventet en av ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`For stor(t): forventet ${r.origin??"value"} til \xE5 ha ${o}${r.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${r.origin??"value"} til \xE5 ha ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`For lite(n): forventet ${r.origin} til \xE5 ha ${o}${r.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${r.origin} til \xE5 ha ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${n[o.format]??r.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${L(r.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${r.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${r.origin}`;default:return"Ugyldig input"}}};function Qb(){return{localeError:KE()}}var VE=()=>{let e={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function t(r){return e[r]??null}let n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"},i={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`F\xE2sit giren: umulan instanceof ${r.expected}, al\u0131nan ${s}`:`F\xE2sit giren: umulan ${o}, al\u0131nan ${s}`}case"invalid_value":return r.values.length===1?`F\xE2sit giren: umulan ${ne(r.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Fazla b\xFCy\xFCk: ${r.origin??"value"}, ${o}${r.maximum.toString()} ${a.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${r.origin??"value"}, ${o}${r.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Fazla k\xFC\xE7\xFCk: ${r.origin}, ${o}${r.minimum.toString()} ${a.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${r.origin}, ${o}${r.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=r;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[o.format]??r.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${r.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${r.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function ex(){return{localeError:VE()}}var GE=()=>{let e={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function t(r){return e[r]??null}let n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"},i={nan:"NaN",number:"\u0639\u062F\u062F",array:"\u0627\u0631\u06D0"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F instanceof ${r.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${s} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`:`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${o} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${s} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`}case"invalid_value":return r.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${ne(r.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${L(r.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${r.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${r.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${r.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${r.maximum.toString()} \u0648\u064A`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${r.origin} \u0628\u0627\u06CC\u062F ${o}${r.minimum.toString()} ${a.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${r.origin} \u0628\u0627\u06CC\u062F ${o}${r.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[o.format]??r.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${r.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${r.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${L(r.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${r.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${r.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function tx(){return{localeError:GE()}}var HE=()=>{let e={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function t(r){return e[r]??null}let n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"},i={nan:"NaN",number:"liczba",array:"tablica"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano instanceof ${r.expected}, otrzymano ${s}`:`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${o}, otrzymano ${s}`}case"invalid_value":return r.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${ne(r.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${r.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${r.maximum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${r.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${r.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${r.minimum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${r.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[o.format]??r.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${r.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${r.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${r.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function rx(){return{localeError:HE()}}var WE=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(r){return e[r]??null}let n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"},i={nan:"NaN",number:"n\xFAmero",null:"nulo"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Tipo inv\xE1lido: esperado instanceof ${r.expected}, recebido ${s}`:`Tipo inv\xE1lido: esperado ${o}, recebido ${s}`}case"invalid_value":return r.values.length===1?`Entrada inv\xE1lida: esperado ${ne(r.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Muito grande: esperado que ${r.origin??"valor"} tivesse ${o}${r.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${r.origin??"valor"} fosse ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Muito pequeno: esperado que ${r.origin} tivesse ${o}${r.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${r.origin} fosse ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${n[o.format]??r.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${r.divisor}`;case"unrecognized_keys":return`Chave${r.keys.length>1?"s":""} desconhecida${r.keys.length>1?"s":""}: ${L(r.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${r.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${r.origin}`;default:return"Campo inv\xE1lido"}}};function nx(){return{localeError:WE()}}function ix(e,t,n,i){let r=Math.abs(e),o=r%10,a=r%100;return a>=11&&a<=19?i:o===1?t:o>=2&&o<=4?n:i}var JE=()=>{let e={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function t(r){return e[r]??null}let n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"},i={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0441\u0438\u0432"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C instanceof ${r.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${s}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${o}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${s}`}case"invalid_value":return r.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${ne(r.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);if(a){let s=Number(r.maximum),l=ix(s,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${r.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${r.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${r.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);if(a){let s=Number(r.minimum),l=ix(s,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${r.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${r.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${r.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${r.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${r.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${r.keys.length>1?"\u0438":""}: ${L(r.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${r.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${r.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function ox(){return{localeError:JE()}}var YE=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(r){return e[r]??null}let n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"},i={nan:"NaN",number:"\u0161tevilo",array:"tabela"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Neveljaven vnos: pri\u010Dakovano instanceof ${r.expected}, prejeto ${s}`:`Neveljaven vnos: pri\u010Dakovano ${o}, prejeto ${s}`}case"invalid_value":return r.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${ne(r.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Preveliko: pri\u010Dakovano, da bo ${r.origin??"vrednost"} imelo ${o}${r.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${r.origin??"vrednost"} ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Premajhno: pri\u010Dakovano, da bo ${r.origin} imelo ${o}${r.minimum.toString()} ${a.unit}`:`Premajhno: pri\u010Dakovano, da bo ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${n[o.format]??r.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${r.divisor}`;case"unrecognized_keys":return`Neprepoznan${r.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${L(r.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${r.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${r.origin}`;default:return"Neveljaven vnos"}}};function ax(){return{localeError:YE()}}var XE=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function t(r){return e[r]??null}let n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},i={nan:"NaN",number:"antal",array:"lista"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Ogiltig inmatning: f\xF6rv\xE4ntat instanceof ${r.expected}, fick ${s}`:`Ogiltig inmatning: f\xF6rv\xE4ntat ${o}, fick ${s}`}case"invalid_value":return r.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${ne(r.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`F\xF6r stor(t): f\xF6rv\xE4ntade ${r.origin??"v\xE4rdet"} att ha ${o}${r.maximum.toString()} ${a.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${r.origin??"v\xE4rdet"} att ha ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`F\xF6r lite(t): f\xF6rv\xE4ntade ${r.origin??"v\xE4rdet"} att ha ${o}${r.minimum.toString()} ${a.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${r.origin??"v\xE4rdet"} att ha ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${n[o.format]??r.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${r.divisor}`;case"unrecognized_keys":return`${r.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${L(r.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${r.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${r.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function sx(){return{localeError:XE()}}var QE=()=>{let e={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function t(r){return e[r]??null}let n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"},i={nan:"NaN",number:"\u0B8E\u0BA3\u0BCD",array:"\u0B85\u0BA3\u0BBF",null:"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 instanceof ${r.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${s}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${o}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${s}`}case"invalid_value":return r.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${ne(r.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${L(r.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${r.maximum.toString()} ${a.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${r.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r.origin} ${o}${r.minimum.toString()} ${a.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r.origin} ${o}${r.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${r.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${r.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${L(r.keys,", ")}`;case"invalid_key":return`${r.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${r.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function ux(){return{localeError:QE()}}var eT=()=>{let e={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function t(r){return e[r]??null}let n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"},i={nan:"NaN",number:"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02",array:"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)",null:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 instanceof ${r.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${s}`:`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${o} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${s}`}case"invalid_value":return r.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${ne(r.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",a=t(r.origin);return a?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${r.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${r.maximum.toString()} ${a.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${r.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",a=t(r.origin);return a?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${r.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${r.minimum.toString()} ${a.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${r.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[o.format]??r.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${r.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${L(r.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${r.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${r.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function cx(){return{localeError:eT()}}var tT=()=>{let e={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function t(r){return e[r]??null}let n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Ge\xE7ersiz de\u011Fer: beklenen instanceof ${r.expected}, al\u0131nan ${s}`:`Ge\xE7ersiz de\u011Fer: beklenen ${o}, al\u0131nan ${s}`}case"invalid_value":return r.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${ne(r.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\xC7ok b\xFCy\xFCk: beklenen ${r.origin??"de\u011Fer"} ${o}${r.maximum.toString()} ${a.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${r.origin??"de\u011Fer"} ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\xC7ok k\xFC\xE7\xFCk: beklenen ${r.origin} ${o}${r.minimum.toString()} ${a.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Ge\xE7ersiz metin: "${o.prefix}" ile ba\u015Flamal\u0131`:o.format==="ends_with"?`Ge\xE7ersiz metin: "${o.suffix}" ile bitmeli`:o.format==="includes"?`Ge\xE7ersiz metin: "${o.includes}" i\xE7ermeli`:o.format==="regex"?`Ge\xE7ersiz metin: ${o.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${n[o.format]??r.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${r.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${r.keys.length>1?"lar":""}: ${L(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${r.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function lx(){return{localeError:tT()}}var rT=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function t(r){return e[r]??null}let n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"},i={nan:"NaN",number:"\u0447\u0438\u0441\u043B\u043E",array:"\u043C\u0430\u0441\u0438\u0432"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F instanceof ${r.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${s}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${o}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${s}`}case"invalid_value":return r.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${ne(r.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${r.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${a.verb} ${o}${r.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${r.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${r.origin} ${a.verb} ${o}${r.minimum.toString()} ${a.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${r.origin} \u0431\u0443\u0434\u0435 ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${r.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${r.keys.length>1?"\u0456":""}: ${L(r.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${r.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${r.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function ou(){return{localeError:rT()}}function dx(){return ou()}var nT=()=>{let e={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function t(r){return e[r]??null}let n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"},i={nan:"NaN",number:"\u0646\u0645\u0628\u0631",array:"\u0622\u0631\u06D2",null:"\u0646\u0644"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: instanceof ${r.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${s} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`:`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${o} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${s} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`}case"invalid_value":return r.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${ne(r.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${L(r.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${r.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${r.maximum.toString()} ${a.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${r.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${r.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${r.origin} \u06A9\u06D2 ${o}${r.minimum.toString()} ${a.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${r.origin} \u06A9\u0627 ${o}${r.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${r.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${r.keys.length>1?"\u0632":""}: ${L(r.keys,"\u060C ")}`;case"invalid_key":return`${r.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${r.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function fx(){return{localeError:nT()}}var iT=()=>{let e={string:{unit:"belgi",verb:"bo\u2018lishi kerak"},file:{unit:"bayt",verb:"bo\u2018lishi kerak"},array:{unit:"element",verb:"bo\u2018lishi kerak"},set:{unit:"element",verb:"bo\u2018lishi kerak"}};function t(r){return e[r]??null}let n={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},i={nan:"NaN",number:"raqam",array:"massiv"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`Noto\u2018g\u2018ri kirish: kutilgan instanceof ${r.expected}, qabul qilingan ${s}`:`Noto\u2018g\u2018ri kirish: kutilgan ${o}, qabul qilingan ${s}`}case"invalid_value":return r.values.length===1?`Noto\u2018g\u2018ri kirish: kutilgan ${ne(r.values[0])}`:`Noto\u2018g\u2018ri variant: quyidagilardan biri kutilgan ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Juda katta: kutilgan ${r.origin??"qiymat"} ${o}${r.maximum.toString()} ${a.unit} ${a.verb}`:`Juda katta: kutilgan ${r.origin??"qiymat"} ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Juda kichik: kutilgan ${r.origin} ${o}${r.minimum.toString()} ${a.unit} ${a.verb}`:`Juda kichik: kutilgan ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Noto\u2018g\u2018ri satr: "${o.prefix}" bilan boshlanishi kerak`:o.format==="ends_with"?`Noto\u2018g\u2018ri satr: "${o.suffix}" bilan tugashi kerak`:o.format==="includes"?`Noto\u2018g\u2018ri satr: "${o.includes}" ni o\u2018z ichiga olishi kerak`:o.format==="regex"?`Noto\u2018g\u2018ri satr: ${o.pattern} shabloniga mos kelishi kerak`:`Noto\u2018g\u2018ri ${n[o.format]??r.format}`}case"not_multiple_of":return`Noto\u2018g\u2018ri raqam: ${r.divisor} ning karralisi bo\u2018lishi kerak`;case"unrecognized_keys":return`Noma\u2019lum kalit${r.keys.length>1?"lar":""}: ${L(r.keys,", ")}`;case"invalid_key":return`${r.origin} dagi kalit noto\u2018g\u2018ri`;case"invalid_union":return"Noto\u2018g\u2018ri kirish";case"invalid_element":return`${r.origin} da noto\u2018g\u2018ri qiymat`;default:return"Noto\u2018g\u2018ri kirish"}}};function px(){return{localeError:iT()}}var oT=()=>{let e={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function t(r){return e[r]??null}let n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"},i={nan:"NaN",number:"s\u1ED1",array:"m\u1EA3ng"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i instanceof ${r.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${s}`:`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${o}, nh\u1EADn \u0111\u01B0\u1EE3c ${s}`}case"invalid_value":return r.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${ne(r.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${r.origin??"gi\xE1 tr\u1ECB"} ${a.verb} ${o}${r.maximum.toString()} ${a.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${r.origin??"gi\xE1 tr\u1ECB"} ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${r.origin} ${a.verb} ${o}${r.minimum.toString()} ${a.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${n[o.format]??r.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${r.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${L(r.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${r.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${r.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function mx(){return{localeError:oT()}}var aT=()=>{let e={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function t(r){return e[r]??null}let n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"},i={nan:"NaN",number:"\u6570\u5B57",array:"\u6570\u7EC4",null:"\u7A7A\u503C(null)"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B instanceof ${r.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${s}`:`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${o}\uFF0C\u5B9E\u9645\u63A5\u6536 ${s}`}case"invalid_value":return r.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${ne(r.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${r.origin??"\u503C"} ${o}${r.maximum.toString()} ${a.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${r.origin??"\u503C"} ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${r.origin} ${o}${r.minimum.toString()} ${a.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${r.origin} ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${n[o.format]??r.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${r.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${L(r.keys,", ")}`;case"invalid_key":return`${r.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${r.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function hx(){return{localeError:aT()}}var sT=()=>{let e={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function t(r){return e[r]??null}let n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"},i={nan:"NaN"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA instanceof ${r.expected}\uFF0C\u4F46\u6536\u5230 ${s}`:`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${o}\uFF0C\u4F46\u6536\u5230 ${s}`}case"invalid_value":return r.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${ne(r.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${r.origin??"\u503C"} \u61C9\u70BA ${o}${r.maximum.toString()} ${a.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${r.origin??"\u503C"} \u61C9\u70BA ${o}${r.maximum.toString()}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${r.origin} \u61C9\u70BA ${o}${r.minimum.toString()} ${a.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${r.origin} \u61C9\u70BA ${o}${r.minimum.toString()}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${n[o.format]??r.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${r.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${r.keys.length>1?"\u5011":""}\uFF1A${L(r.keys,"\u3001")}`;case"invalid_key":return`${r.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${r.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function gx(){return{localeError:sT()}}var uT=()=>{let e={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function t(r){return e[r]??null}let n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"},i={nan:"NaN",number:"n\u1ECD\u0301mb\xE0",array:"akop\u1ECD"};return r=>{switch(r.code){case"invalid_type":{let o=i[r.expected]??r.expected,a=ie(r.input),s=i[a]??a;return/^[A-Z]/.test(r.expected)?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi instanceof ${r.expected}, \xE0m\u1ECD\u0300 a r\xED ${s}`:`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${o}, \xE0m\u1ECD\u0300 a r\xED ${s}`}case"invalid_value":return r.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${ne(r.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${L(r.values,"|")}`;case"too_big":{let o=r.inclusive?"<=":"<",a=t(r.origin);return a?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${r.origin??"iye"} ${a.verb} ${o}${r.maximum} ${a.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${r.maximum}`}case"too_small":{let o=r.inclusive?">=":">",a=t(r.origin);return a?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${r.origin} ${a.verb} ${o}${r.minimum} ${a.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${r.minimum}`}case"invalid_format":{let o=r;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${n[o.format]??r.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${r.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${L(r.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${r.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${r.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function vx(){return{localeError:uT()}}var yx,Pp=Symbol("ZodOutput"),Dp=Symbol("ZodInput"),au=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){let i=n[0];return this._map.set(t,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){let n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){let n=t._zod.parent;if(n){let i={...this.get(n)??{}};delete i.id;let r={...i,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};function su(){return new au}(yx=globalThis).__zod_globalRegistry??(yx.__zod_globalRegistry=su());var It=globalThis.__zod_globalRegistry;function zp(e,t){return new e({type:"string",...ue(t)})}function Op(e,t){return new e({type:"string",coerce:!0,...ue(t)})}function uu(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ue(t)})}function fa(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ue(t)})}function cu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ue(t)})}function lu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ue(t)})}function du(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ue(t)})}function fu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ue(t)})}function pa(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ue(t)})}function pu(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ue(t)})}function mu(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ue(t)})}function hu(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ue(t)})}function gu(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ue(t)})}function vu(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ue(t)})}function yu(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ue(t)})}function bu(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ue(t)})}function xu(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ue(t)})}function wu(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ue(t)})}function Rp(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...ue(t)})}function _u(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ue(t)})}function Iu(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ue(t)})}function $u(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ue(t)})}function Su(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ue(t)})}function ku(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ue(t)})}function Au(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ue(t)})}var Cp={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function jp(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ue(t)})}function Mp(e,t){return new e({type:"string",format:"date",check:"string_format",...ue(t)})}function Np(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...ue(t)})}function Up(e,t){return new e({type:"string",format:"duration",check:"string_format",...ue(t)})}function Fp(e,t){return new e({type:"number",checks:[],...ue(t)})}function Lp(e,t){return new e({type:"number",coerce:!0,checks:[],...ue(t)})}function qp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ue(t)})}function Bp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...ue(t)})}function Zp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...ue(t)})}function Kp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...ue(t)})}function Vp(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...ue(t)})}function Gp(e,t){return new e({type:"boolean",...ue(t)})}function Hp(e,t){return new e({type:"boolean",coerce:!0,...ue(t)})}function Wp(e,t){return new e({type:"bigint",...ue(t)})}function Jp(e,t){return new e({type:"bigint",coerce:!0,...ue(t)})}function Yp(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...ue(t)})}function Xp(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...ue(t)})}function Qp(e,t){return new e({type:"symbol",...ue(t)})}function em(e,t){return new e({type:"undefined",...ue(t)})}function tm(e,t){return new e({type:"null",...ue(t)})}function rm(e){return new e({type:"any"})}function nm(e){return new e({type:"unknown"})}function im(e,t){return new e({type:"never",...ue(t)})}function om(e,t){return new e({type:"void",...ue(t)})}function am(e,t){return new e({type:"date",...ue(t)})}function sm(e,t){return new e({type:"date",coerce:!0,...ue(t)})}function um(e,t){return new e({type:"nan",...ue(t)})}function Cr(e,t){return new Vs({check:"less_than",...ue(t),value:e,inclusive:!1})}function Xt(e,t){return new Vs({check:"less_than",...ue(t),value:e,inclusive:!0})}function jr(e,t){return new Gs({check:"greater_than",...ue(t),value:e,inclusive:!1})}function Rt(e,t){return new Gs({check:"greater_than",...ue(t),value:e,inclusive:!0})}function Eu(e){return jr(0,e)}function Tu(e){return Cr(0,e)}function Pu(e){return Xt(0,e)}function Du(e){return Rt(0,e)}function Sn(e,t){return new ef({check:"multiple_of",...ue(t),value:e})}function kn(e,t){return new nf({check:"max_size",...ue(t),maximum:e})}function Mr(e,t){return new of({check:"min_size",...ue(t),minimum:e})}function ri(e,t){return new af({check:"size_equals",...ue(t),size:e})}function ni(e,t){return new sf({check:"max_length",...ue(t),maximum:e})}function Jr(e,t){return new uf({check:"min_length",...ue(t),minimum:e})}function ii(e,t){return new cf({check:"length_equals",...ue(t),length:e})}function Ui(e,t){return new lf({check:"string_format",format:"regex",...ue(t),pattern:e})}function Fi(e){return new df({check:"string_format",format:"lowercase",...ue(e)})}function Li(e){return new ff({check:"string_format",format:"uppercase",...ue(e)})}function qi(e,t){return new pf({check:"string_format",format:"includes",...ue(t),includes:e})}function Bi(e,t){return new mf({check:"string_format",format:"starts_with",...ue(t),prefix:e})}function Zi(e,t){return new hf({check:"string_format",format:"ends_with",...ue(t),suffix:e})}function zu(e,t,n){return new gf({check:"property",property:e,schema:t,...ue(n)})}function Ki(e,t){return new vf({check:"mime_type",mime:e,...ue(t)})}function Ir(e){return new yf({check:"overwrite",tx:e})}function Vi(e){return Ir(t=>t.normalize(e))}function Gi(){return Ir(e=>e.trim())}function Hi(){return Ir(e=>e.toLowerCase())}function Wi(){return Ir(e=>e.toUpperCase())}function Ji(){return Ir(e=>hd(e))}function cm(e,t,n){return new e({type:"array",element:t,...ue(n)})}function lT(e,t,n){return new e({type:"union",options:t,...ue(n)})}function dT(e,t,n){return new e({type:"union",options:t,inclusive:!1,...ue(n)})}function fT(e,t,n,i){return new e({type:"union",options:n,discriminator:t,...ue(i)})}function pT(e,t,n){return new e({type:"intersection",left:t,right:n})}function mT(e,t,n,i){let r=n instanceof Ee,o=r?i:n,a=r?n:null;return new e({type:"tuple",items:t,rest:a,...ue(o)})}function hT(e,t,n,i){return new e({type:"record",keyType:t,valueType:n,...ue(i)})}function gT(e,t,n,i){return new e({type:"map",keyType:t,valueType:n,...ue(i)})}function vT(e,t,n){return new e({type:"set",valueType:t,...ue(n)})}function yT(e,t,n){let i=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new e({type:"enum",entries:i,...ue(n)})}function bT(e,t,n){return new e({type:"enum",entries:t,...ue(n)})}function xT(e,t,n){return new e({type:"literal",values:Array.isArray(t)?t:[t],...ue(n)})}function lm(e,t){return new e({type:"file",...ue(t)})}function wT(e,t){return new e({type:"transform",transform:t})}function _T(e,t){return new e({type:"optional",innerType:t})}function IT(e,t){return new e({type:"nullable",innerType:t})}function $T(e,t,n){return new e({type:"default",innerType:t,get defaultValue(){return typeof n=="function"?n():vd(n)}})}function ST(e,t,n){return new e({type:"nonoptional",innerType:t,...ue(n)})}function kT(e,t){return new e({type:"success",innerType:t})}function AT(e,t,n){return new e({type:"catch",innerType:t,catchValue:typeof n=="function"?n:()=>n})}function ET(e,t,n){return new e({type:"pipe",in:t,out:n})}function TT(e,t){return new e({type:"readonly",innerType:t})}function PT(e,t,n){return new e({type:"template_literal",parts:t,...ue(n)})}function DT(e,t){return new e({type:"lazy",getter:t})}function zT(e,t){return new e({type:"promise",innerType:t})}function dm(e,t,n){let i=ue(n);return i.abort??(i.abort=!0),new e({type:"custom",check:"custom",fn:t,...i})}function fm(e,t,n){return new e({type:"custom",check:"custom",fn:t,...ue(n)})}function pm(e){let t=bx(n=>(n.addIssue=i=>{if(typeof i=="string")n.issues.push(zi(i,n.value,t._zod.def));else{let r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(zi(r))}},e(n.value,n)));return t}function bx(e,t){let n=new nt({check:"custom",...ue(t)});return n._zod.check=e,n}function mm(e){let t=new nt({check:"describe"});return t._zod.onattach=[n=>{let i=It.get(n)??{};It.add(n,{...i,description:e})}],t._zod.check=()=>{},t}function hm(e){let t=new nt({check:"meta"});return t._zod.onattach=[n=>{let i=It.get(n)??{};It.add(n,{...i,...e})}],t._zod.check=()=>{},t}function gm(e,t){let n=ue(t),i=n.truthy??["true","1","yes","on","y","enabled"],r=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(i=i.map(b=>typeof b=="string"?b.toLowerCase():b),r=r.map(b=>typeof b=="string"?b.toLowerCase():b));let o=new Set(i),a=new Set(r),s=e.Codec??ca,l=e.Boolean??sa,d=e.String??ti,m=new d({type:"string",error:n.error}),v=new l({type:"boolean",error:n.error}),h=new s({type:"pipe",in:m,out:v,transform:(b,_)=>{let E=b;return n.case!=="sensitive"&&(E=E.toLowerCase()),o.has(E)?!0:a.has(E)?!1:(_.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...a],input:_.value,inst:h,continue:!1}),{})},reverseTransform:(b,_)=>b===!0?i[0]||"true":r[0]||"false",error:n.error});return h}function Yi(e,t,n,i={}){let r=ue(i),o={...ue(i),check:"string_format",type:"string",format:t,fn:typeof n=="function"?n:s=>n.test(s),...r};return n instanceof RegExp&&(o.pattern=n),new e(o)}function An(e){let t=e?.target??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??It,target:t,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function He(e,t,n={path:[],schemaPath:[]}){var i;let r=e._zod.def,o=t.seen.get(e);if(o)return o.count++,n.schemaPath.includes(e)&&(o.cycle=n.path),o.schema;let a={schema:{},count:1,cycle:void 0,path:n.path};t.seen.set(e,a);let s=e._zod.toJSONSchema?.();if(s)a.schema=s;else{let m={...n,schemaPath:[...n.schemaPath,e],path:n.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,a.schema,m);else{let h=a.schema,b=t.processors[r.type];if(!b)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);b(e,t,h,m)}let v=e._zod.parent;v&&(a.ref||(a.ref=v),He(v,t,m),t.seen.get(v).isParent=!0)}let l=t.metadataRegistry.get(e);return l&&Object.assign(a.schema,l),t.io==="input"&&Ct(e)&&(delete a.schema.examples,delete a.schema.default),t.io==="input"&&a.schema._prefault&&((i=a.schema).default??(i.default=a.schema._prefault)),delete a.schema._prefault,t.seen.get(e).schema}function En(e,t){let n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=new Map;for(let a of e.seen.entries()){let s=e.metadataRegistry.get(a[0])?.id;if(s){let l=i.get(s);if(l&&l!==a[0])throw new Error(`Duplicate schema id "${s}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(s,a[0])}}let r=a=>{let s=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){let v=e.external.registry.get(a[0])?.id,h=e.external.uri??(_=>_);if(v)return{ref:h(v)};let b=a[1].defId??a[1].schema.id??`schema${e.counter++}`;return a[1].defId=b,{defId:b,ref:`${h("__shared")}#/${s}/${b}`}}if(a[1]===n)return{ref:"#"};let d=`#/${s}/`,m=a[1].schema.id??`__schema${e.counter++}`;return{defId:m,ref:d+m}},o=a=>{if(a[1].schema.$ref)return;let s=a[1],{ref:l,defId:d}=r(a);s.def={...s.schema},d&&(s.defId=d);let m=s.schema;for(let v in m)delete m[v];m.$ref=l};if(e.cycles==="throw")for(let a of e.seen.entries()){let s=a[1];if(s.cycle)throw new Error(`Cycle detected: #/${s.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let a of e.seen.entries()){let s=a[1];if(t===a[0]){o(a);continue}if(e.external){let d=e.external.registry.get(a[0])?.id;if(t!==a[0]&&d){o(a);continue}}if(e.metadataRegistry.get(a[0])?.id){o(a);continue}if(s.cycle){o(a);continue}if(s.count>1&&e.reused==="ref"){o(a);continue}}}function Tn(e,t){let n=e.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=a=>{let s=e.seen.get(a);if(s.ref===null)return;let l=s.def??s.schema,d={...l},m=s.ref;if(s.ref=null,m){i(m);let h=e.seen.get(m),b=h.schema;if(b.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(l.allOf=l.allOf??[],l.allOf.push(b)):Object.assign(l,b),Object.assign(l,d),a._zod.parent===m)for(let E in l)E==="$ref"||E==="allOf"||E in d||delete l[E];if(b.$ref&&h.def)for(let E in l)E==="$ref"||E==="allOf"||E in h.def&&JSON.stringify(l[E])===JSON.stringify(h.def[E])&&delete l[E]}let v=a._zod.parent;if(v&&v!==m){i(v);let h=e.seen.get(v);if(h?.schema.$ref&&(l.$ref=h.schema.$ref,h.def))for(let b in l)b==="$ref"||b==="allOf"||b in h.def&&JSON.stringify(l[b])===JSON.stringify(h.def[b])&&delete l[b]}e.override({zodSchema:a,jsonSchema:l,path:s.path??[]})};for(let a of[...e.seen.entries()].reverse())i(a[0]);let r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){let a=e.external.registry.get(t)?.id;if(!a)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(a)}Object.assign(r,n.def??n.schema);let o=e.external?.defs??{};for(let a of e.seen.entries()){let s=a[1];s.def&&s.defId&&(o[s.defId]=s.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?r.$defs=o:r.definitions=o);try{let a=JSON.parse(JSON.stringify(r));return Object.defineProperty(a,"~standard",{value:{...t["~standard"],jsonSchema:{input:Xi(t,"input",e.processors),output:Xi(t,"output",e.processors)}},enumerable:!1,writable:!1}),a}catch{throw new Error("Error converting schema to JSON.")}}function Ct(e,t){let n=t??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);let i=e._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return Ct(i.element,n);if(i.type==="set")return Ct(i.valueType,n);if(i.type==="lazy")return Ct(i.getter(),n);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return Ct(i.innerType,n);if(i.type==="intersection")return Ct(i.left,n)||Ct(i.right,n);if(i.type==="record"||i.type==="map")return Ct(i.keyType,n)||Ct(i.valueType,n);if(i.type==="pipe")return Ct(i.in,n)||Ct(i.out,n);if(i.type==="object"){for(let r in i.shape)if(Ct(i.shape[r],n))return!0;return!1}if(i.type==="union"){for(let r of i.options)if(Ct(r,n))return!0;return!1}if(i.type==="tuple"){for(let r of i.items)if(Ct(r,n))return!0;return!!(i.rest&&Ct(i.rest,n))}return!1}var vm=(e,t={})=>n=>{let i=An({...n,processors:t});return He(e,i),En(i,e),Tn(i,e)},Xi=(e,t,n={})=>i=>{let{libraryOptions:r,target:o}=i??{},a=An({...r??{},target:o,io:t,processors:n});return He(e,a),En(a,e),Tn(a,e)};var OT={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},ym=(e,t,n,i)=>{let r=n;r.type="string";let{minimum:o,maximum:a,format:s,patterns:l,contentEncoding:d}=e._zod.bag;if(typeof o=="number"&&(r.minLength=o),typeof a=="number"&&(r.maxLength=a),s&&(r.format=OT[s]??s,r.format===""&&delete r.format,s==="time"&&delete r.format),d&&(r.contentEncoding=d),l&&l.size>0){let m=[...l];m.length===1?r.pattern=m[0].source:m.length>1&&(r.allOf=[...m.map(v=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},bm=(e,t,n,i)=>{let r=n,{minimum:o,maximum:a,format:s,multipleOf:l,exclusiveMaximum:d,exclusiveMinimum:m}=e._zod.bag;typeof s=="string"&&s.includes("int")?r.type="integer":r.type="number",typeof m=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.minimum=m,r.exclusiveMinimum=!0):r.exclusiveMinimum=m),typeof o=="number"&&(r.minimum=o,typeof m=="number"&&t.target!=="draft-04"&&(m>=o?delete r.minimum:delete r.exclusiveMinimum)),typeof d=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(r.maximum=d,r.exclusiveMaximum=!0):r.exclusiveMaximum=d),typeof a=="number"&&(r.maximum=a,typeof d=="number"&&t.target!=="draft-04"&&(d<=a?delete r.maximum:delete r.exclusiveMaximum)),typeof l=="number"&&(r.multipleOf=l)},xm=(e,t,n,i)=>{n.type="boolean"},wm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},_m=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},Im=(e,t,n,i)=>{t.target==="openapi-3.0"?(n.type="string",n.nullable=!0,n.enum=[null]):n.type="null"},$m=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},Sm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},km=(e,t,n,i)=>{n.not={}},Am=(e,t,n,i)=>{},Em=(e,t,n,i)=>{},Tm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},Pm=(e,t,n,i)=>{let r=e._zod.def,o=Jo(r.entries);o.every(a=>typeof a=="number")&&(n.type="number"),o.every(a=>typeof a=="string")&&(n.type="string"),n.enum=o},Dm=(e,t,n,i)=>{let r=e._zod.def,o=[];for(let a of r.values)if(a===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof a=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(a))}else o.push(a);if(o.length!==0)if(o.length===1){let a=o[0];n.type=a===null?"null":typeof a,t.target==="draft-04"||t.target==="openapi-3.0"?n.enum=[a]:n.const=a}else o.every(a=>typeof a=="number")&&(n.type="number"),o.every(a=>typeof a=="string")&&(n.type="string"),o.every(a=>typeof a=="boolean")&&(n.type="boolean"),o.every(a=>a===null)&&(n.type="null"),n.enum=o},zm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},Om=(e,t,n,i)=>{let r=n,o=e._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");r.type="string",r.pattern=o.source},Rm=(e,t,n,i)=>{let r=n,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:a,maximum:s,mime:l}=e._zod.bag;a!==void 0&&(o.minLength=a),s!==void 0&&(o.maxLength=s),l?l.length===1?(o.contentMediaType=l[0],Object.assign(r,o)):(Object.assign(r,o),r.anyOf=l.map(d=>({contentMediaType:d}))):Object.assign(r,o)},Cm=(e,t,n,i)=>{n.type="boolean"},jm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Mm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},Nm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Um=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},Fm=(e,t,n,i)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},Lm=(e,t,n,i)=>{let r=n,o=e._zod.def,{minimum:a,maximum:s}=e._zod.bag;typeof a=="number"&&(r.minItems=a),typeof s=="number"&&(r.maxItems=s),r.type="array",r.items=He(o.element,t,{...i,path:[...i.path,"items"]})},qm=(e,t,n,i)=>{let r=n,o=e._zod.def;r.type="object",r.properties={};let a=o.shape;for(let d in a)r.properties[d]=He(a[d],t,{...i,path:[...i.path,"properties",d]});let s=new Set(Object.keys(a)),l=new Set([...s].filter(d=>{let m=o.shape[d]._zod;return t.io==="input"?m.optin===void 0:m.optout===void 0}));l.size>0&&(r.required=Array.from(l)),o.catchall?._zod.def.type==="never"?r.additionalProperties=!1:o.catchall?o.catchall&&(r.additionalProperties=He(o.catchall,t,{...i,path:[...i.path,"additionalProperties"]})):t.io==="output"&&(r.additionalProperties=!1)},Ru=(e,t,n,i)=>{let r=e._zod.def,o=r.inclusive===!1,a=r.options.map((s,l)=>He(s,t,{...i,path:[...i.path,o?"oneOf":"anyOf",l]}));o?n.oneOf=a:n.anyOf=a},Bm=(e,t,n,i)=>{let r=e._zod.def,o=He(r.left,t,{...i,path:[...i.path,"allOf",0]}),a=He(r.right,t,{...i,path:[...i.path,"allOf",1]}),s=d=>"allOf"in d&&Object.keys(d).length===1,l=[...s(o)?o.allOf:[o],...s(a)?a.allOf:[a]];n.allOf=l},Zm=(e,t,n,i)=>{let r=n,o=e._zod.def;r.type="array";let a=t.target==="draft-2020-12"?"prefixItems":"items",s=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",l=o.items.map((h,b)=>He(h,t,{...i,path:[...i.path,a,b]})),d=o.rest?He(o.rest,t,{...i,path:[...i.path,s,...t.target==="openapi-3.0"?[o.items.length]:[]]}):null;t.target==="draft-2020-12"?(r.prefixItems=l,d&&(r.items=d)):t.target==="openapi-3.0"?(r.items={anyOf:l},d&&r.items.anyOf.push(d),r.minItems=l.length,d||(r.maxItems=l.length)):(r.items=l,d&&(r.additionalItems=d));let{minimum:m,maximum:v}=e._zod.bag;typeof m=="number"&&(r.minItems=m),typeof v=="number"&&(r.maxItems=v)},Km=(e,t,n,i)=>{let r=n,o=e._zod.def;r.type="object";let a=o.keyType,l=a._zod.bag?.patterns;if(o.mode==="loose"&&l&&l.size>0){let m=He(o.valueType,t,{...i,path:[...i.path,"patternProperties","*"]});r.patternProperties={};for(let v of l)r.patternProperties[v.source]=m}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(r.propertyNames=He(o.keyType,t,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=He(o.valueType,t,{...i,path:[...i.path,"additionalProperties"]});let d=a._zod.values;if(d){let m=[...d].filter(v=>typeof v=="string"||typeof v=="number");m.length>0&&(r.required=m)}},Vm=(e,t,n,i)=>{let r=e._zod.def,o=He(r.innerType,t,i),a=t.seen.get(e);t.target==="openapi-3.0"?(a.ref=r.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},Gm=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType},Hm=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType,n.default=JSON.parse(JSON.stringify(r.defaultValue))},Wm=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType,t.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},Jm=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType;let a;try{a=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=a},Ym=(e,t,n,i)=>{let r=e._zod.def,o=t.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;He(o,t,i);let a=t.seen.get(e);a.ref=o},Xm=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType,n.readOnly=!0},Qm=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType},Cu=(e,t,n,i)=>{let r=e._zod.def;He(r.innerType,t,i);let o=t.seen.get(e);o.ref=r.innerType},eh=(e,t,n,i)=>{let r=e._zod.innerType;He(r,t,i);let o=t.seen.get(e);o.ref=r},Ou={string:ym,number:bm,boolean:xm,bigint:wm,symbol:_m,null:Im,undefined:$m,void:Sm,never:km,any:Am,unknown:Em,date:Tm,enum:Pm,literal:Dm,nan:zm,template_literal:Om,file:Rm,success:Cm,custom:jm,function:Mm,transform:Nm,map:Um,set:Fm,array:Lm,object:qm,union:Ru,intersection:Bm,tuple:Zm,record:Km,nullable:Vm,nonoptional:Gm,default:Hm,prefault:Wm,catch:Jm,pipe:Ym,readonly:Xm,promise:Qm,optional:Cu,lazy:eh};function ju(e,t){if("_idmap"in e){let i=e,r=An({...t,processors:Ou}),o={};for(let l of i._idmap.entries()){let[d,m]=l;He(m,r)}let a={},s={registry:i,uri:t?.uri,defs:o};r.external=s;for(let l of i._idmap.entries()){let[d,m]=l;En(r,m),a[d]=Tn(r,m)}if(Object.keys(o).length>0){let l=r.target==="draft-2020-12"?"$defs":"definitions";a.__shared={[l]:o}}return{schemas:a}}let n=An({...t,processors:Ou});return He(e,n),En(n,e),Tn(n,e)}var Mu=class{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(t){this.ctx.counter=t}get seen(){return this.ctx.seen}constructor(t){let n=t?.target??"draft-2020-12";n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),this.ctx=An({processors:Ou,target:n,...t?.metadata&&{metadata:t.metadata},...t?.unrepresentable&&{unrepresentable:t.unrepresentable},...t?.override&&{override:t.override},...t?.io&&{io:t.io}})}process(t,n={path:[],schemaPath:[]}){return He(t,this.ctx,n)}emit(t,n){n&&(n.cycles&&(this.ctx.cycles=n.cycles),n.reused&&(this.ctx.reused=n.reused),n.external&&(this.ctx.external=n.external)),En(this.ctx,t);let i=Tn(this.ctx,t),{"~standard":r,...o}=i;return o}};var xx={};var ma={};Kr(ma,{ZodAny:()=>$h,ZodArray:()=>Eh,ZodBase64:()=>ic,ZodBase64URL:()=>oc,ZodBigInt:()=>oo,ZodBigIntFormat:()=>uc,ZodBoolean:()=>io,ZodCIDRv4:()=>rc,ZodCIDRv6:()=>nc,ZodCUID:()=>Wu,ZodCUID2:()=>Ju,ZodCatch:()=>Jh,ZodCodec:()=>gc,ZodCustom:()=>Sa,ZodCustomStringFormat:()=>ro,ZodDate:()=>xa,ZodDefault:()=>Zh,ZodDiscriminatedUnion:()=>Ph,ZodE164:()=>ac,ZodEmail:()=>Vu,ZodEmoji:()=>Gu,ZodEnum:()=>eo,ZodExactOptional:()=>Lh,ZodFile:()=>Uh,ZodFunction:()=>og,ZodGUID:()=>ha,ZodIPv4:()=>ec,ZodIPv6:()=>tc,ZodIntersection:()=>Dh,ZodJWT:()=>sc,ZodKSUID:()=>Qu,ZodLazy:()=>rg,ZodLiteral:()=>Nh,ZodMAC:()=>vh,ZodMap:()=>jh,ZodNaN:()=>Xh,ZodNanoID:()=>Hu,ZodNever:()=>kh,ZodNonOptional:()=>mc,ZodNull:()=>_h,ZodNullable:()=>Bh,ZodNumber:()=>no,ZodNumberFormat:()=>ai,ZodObject:()=>_a,ZodOptional:()=>pc,ZodPipe:()=>hc,ZodPrefault:()=>Vh,ZodPromise:()=>ig,ZodReadonly:()=>Qh,ZodRecord:()=>$a,ZodSet:()=>Mh,ZodString:()=>to,ZodStringFormat:()=>tt,ZodSuccess:()=>Wh,ZodSymbol:()=>xh,ZodTemplateLiteral:()=>tg,ZodTransform:()=>Fh,ZodTuple:()=>Oh,ZodType:()=>ze,ZodULID:()=>Yu,ZodURL:()=>ba,ZodUUID:()=>Nr,ZodUndefined:()=>wh,ZodUnion:()=>Ia,ZodUnknown:()=>Sh,ZodVoid:()=>Ah,ZodXID:()=>Xu,ZodXor:()=>Th,_ZodString:()=>Ku,_default:()=>Kh,_function:()=>A0,any:()=>o0,array:()=>wa,base64:()=>qx,base64url:()=>Bx,bigint:()=>e0,boolean:()=>bh,catch:()=>Yh,check:()=>E0,cidrv4:()=>Fx,cidrv6:()=>Lx,codec:()=>$0,cuid:()=>zx,cuid2:()=>Ox,custom:()=>T0,date:()=>s0,describe:()=>P0,discriminatedUnion:()=>p0,e164:()=>Zx,email:()=>_x,emoji:()=>Px,enum:()=>dc,exactOptional:()=>qh,file:()=>x0,float32:()=>Jx,float64:()=>Yx,function:()=>A0,guid:()=>Ix,hash:()=>Wx,hex:()=>Hx,hostname:()=>Gx,httpUrl:()=>Tx,instanceof:()=>z0,int:()=>Zu,int32:()=>Xx,int64:()=>t0,intersection:()=>zh,ipv4:()=>Mx,ipv6:()=>Ux,json:()=>R0,jwt:()=>Kx,keyof:()=>u0,ksuid:()=>jx,lazy:()=>ng,literal:()=>b0,looseObject:()=>d0,looseRecord:()=>h0,mac:()=>Nx,map:()=>g0,meta:()=>D0,nan:()=>I0,nanoid:()=>Dx,nativeEnum:()=>y0,never:()=>cc,nonoptional:()=>Hh,null:()=>Ih,nullable:()=>va,nullish:()=>w0,number:()=>yh,object:()=>c0,optional:()=>ga,partialRecord:()=>m0,pipe:()=>ya,prefault:()=>Gh,preprocess:()=>C0,promise:()=>k0,readonly:()=>eg,record:()=>Ch,refine:()=>ag,set:()=>v0,strictObject:()=>l0,string:()=>Bu,stringFormat:()=>Vx,stringbool:()=>O0,success:()=>_0,superRefine:()=>sg,symbol:()=>n0,templateLiteral:()=>S0,transform:()=>fc,tuple:()=>Rh,uint32:()=>Qx,uint64:()=>r0,ulid:()=>Rx,undefined:()=>i0,union:()=>lc,unknown:()=>oi,url:()=>Ex,uuid:()=>$x,uuidv4:()=>Sx,uuidv6:()=>kx,uuidv7:()=>Ax,void:()=>a0,xid:()=>Cx,xor:()=>f0});var Nu={};Kr(Nu,{endsWith:()=>Zi,gt:()=>jr,gte:()=>Rt,includes:()=>qi,length:()=>ii,lowercase:()=>Fi,lt:()=>Cr,lte:()=>Xt,maxLength:()=>ni,maxSize:()=>kn,mime:()=>Ki,minLength:()=>Jr,minSize:()=>Mr,multipleOf:()=>Sn,negative:()=>Tu,nonnegative:()=>Du,nonpositive:()=>Pu,normalize:()=>Vi,overwrite:()=>Ir,positive:()=>Eu,property:()=>zu,regex:()=>Ui,size:()=>ri,slugify:()=>Ji,startsWith:()=>Bi,toLowerCase:()=>Hi,toUpperCase:()=>Wi,trim:()=>Gi,uppercase:()=>Li});var Qi={};Kr(Qi,{ZodISODate:()=>Fu,ZodISODateTime:()=>Uu,ZodISODuration:()=>qu,ZodISOTime:()=>Lu,date:()=>rh,datetime:()=>th,duration:()=>ih,time:()=>nh});var Uu=C("ZodISODateTime",(e,t)=>{zf.init(e,t),tt.init(e,t)});function th(e){return jp(Uu,e)}var Fu=C("ZodISODate",(e,t)=>{Of.init(e,t),tt.init(e,t)});function rh(e){return Mp(Fu,e)}var Lu=C("ZodISOTime",(e,t)=>{Rf.init(e,t),tt.init(e,t)});function nh(e){return Np(Lu,e)}var qu=C("ZodISODuration",(e,t)=>{Cf.init(e,t),tt.init(e,t)});function ih(e){return Up(qu,e)}var wx=(e,t)=>{ta.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>na(e,n)},flatten:{value:n=>ra(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Pi,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Pi,2)}},isEmpty:{get(){return e.issues.length===0}}})},CT=C("ZodError",wx),Zt=C("ZodError",wx,{Parent:Error});var oh=Oi(Zt),ah=Ri(Zt),sh=Ci(Zt),uh=ji(Zt),ch=js(Zt),lh=Ms(Zt),dh=Ns(Zt),fh=Us(Zt),ph=Fs(Zt),mh=Ls(Zt),hh=qs(Zt),gh=Bs(Zt);var ze=C("ZodType",(e,t)=>(Ee.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:Xi(e,"input"),output:Xi(e,"output")}}),e.toJSONSchema=vm(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(oe.mergeDefs(t,{checks:[...t.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),e.with=e.check,e.clone=(n,i)=>Ot(e,n,i),e.brand=()=>e,e.register=(n,i)=>(n.add(e,i),e),e.parse=(n,i)=>oh(e,n,i,{callee:e.parse}),e.safeParse=(n,i)=>sh(e,n,i),e.parseAsync=async(n,i)=>ah(e,n,i,{callee:e.parseAsync}),e.safeParseAsync=async(n,i)=>uh(e,n,i),e.spa=e.safeParseAsync,e.encode=(n,i)=>ch(e,n,i),e.decode=(n,i)=>lh(e,n,i),e.encodeAsync=async(n,i)=>dh(e,n,i),e.decodeAsync=async(n,i)=>fh(e,n,i),e.safeEncode=(n,i)=>ph(e,n,i),e.safeDecode=(n,i)=>mh(e,n,i),e.safeEncodeAsync=async(n,i)=>hh(e,n,i),e.safeDecodeAsync=async(n,i)=>gh(e,n,i),e.refine=(n,i)=>e.check(ag(n,i)),e.superRefine=n=>e.check(sg(n)),e.overwrite=n=>e.check(Ir(n)),e.optional=()=>ga(e),e.exactOptional=()=>qh(e),e.nullable=()=>va(e),e.nullish=()=>ga(va(e)),e.nonoptional=n=>Hh(e,n),e.array=()=>wa(e),e.or=n=>lc([e,n]),e.and=n=>zh(e,n),e.transform=n=>ya(e,fc(n)),e.default=n=>Kh(e,n),e.prefault=n=>Gh(e,n),e.catch=n=>Yh(e,n),e.pipe=n=>ya(e,n),e.readonly=()=>eg(e),e.describe=n=>{let i=e.clone();return It.add(i,{description:n}),i},Object.defineProperty(e,"description",{get(){return It.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return It.get(e);let i=e.clone();return It.add(i,n[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=n=>n(e),e)),Ku=C("_ZodString",(e,t)=>{ti.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(i,r,o)=>ym(e,i,r,o);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...i)=>e.check(Ui(...i)),e.includes=(...i)=>e.check(qi(...i)),e.startsWith=(...i)=>e.check(Bi(...i)),e.endsWith=(...i)=>e.check(Zi(...i)),e.min=(...i)=>e.check(Jr(...i)),e.max=(...i)=>e.check(ni(...i)),e.length=(...i)=>e.check(ii(...i)),e.nonempty=(...i)=>e.check(Jr(1,...i)),e.lowercase=i=>e.check(Fi(i)),e.uppercase=i=>e.check(Li(i)),e.trim=()=>e.check(Gi()),e.normalize=(...i)=>e.check(Vi(...i)),e.toLowerCase=()=>e.check(Hi()),e.toUpperCase=()=>e.check(Wi()),e.slugify=()=>e.check(Ji())}),to=C("ZodString",(e,t)=>{ti.init(e,t),Ku.init(e,t),e.email=n=>e.check(uu(Vu,n)),e.url=n=>e.check(pa(ba,n)),e.jwt=n=>e.check(Au(sc,n)),e.emoji=n=>e.check(pu(Gu,n)),e.guid=n=>e.check(fa(ha,n)),e.uuid=n=>e.check(cu(Nr,n)),e.uuidv4=n=>e.check(lu(Nr,n)),e.uuidv6=n=>e.check(du(Nr,n)),e.uuidv7=n=>e.check(fu(Nr,n)),e.nanoid=n=>e.check(mu(Hu,n)),e.guid=n=>e.check(fa(ha,n)),e.cuid=n=>e.check(hu(Wu,n)),e.cuid2=n=>e.check(gu(Ju,n)),e.ulid=n=>e.check(vu(Yu,n)),e.base64=n=>e.check($u(ic,n)),e.base64url=n=>e.check(Su(oc,n)),e.xid=n=>e.check(yu(Xu,n)),e.ksuid=n=>e.check(bu(Qu,n)),e.ipv4=n=>e.check(xu(ec,n)),e.ipv6=n=>e.check(wu(tc,n)),e.cidrv4=n=>e.check(_u(rc,n)),e.cidrv6=n=>e.check(Iu(nc,n)),e.e164=n=>e.check(ku(ac,n)),e.datetime=n=>e.check(th(n)),e.date=n=>e.check(rh(n)),e.time=n=>e.check(nh(n)),e.duration=n=>e.check(ih(n))});function Bu(e){return zp(to,e)}var tt=C("ZodStringFormat",(e,t)=>{et.init(e,t),Ku.init(e,t)}),Vu=C("ZodEmail",(e,t)=>{If.init(e,t),tt.init(e,t)});function _x(e){return uu(Vu,e)}var ha=C("ZodGUID",(e,t)=>{wf.init(e,t),tt.init(e,t)});function Ix(e){return fa(ha,e)}var Nr=C("ZodUUID",(e,t)=>{_f.init(e,t),tt.init(e,t)});function $x(e){return cu(Nr,e)}function Sx(e){return lu(Nr,e)}function kx(e){return du(Nr,e)}function Ax(e){return fu(Nr,e)}var ba=C("ZodURL",(e,t)=>{$f.init(e,t),tt.init(e,t)});function Ex(e){return pa(ba,e)}function Tx(e){return pa(ba,{protocol:/^https?$/,hostname:gr.domain,...oe.normalizeParams(e)})}var Gu=C("ZodEmoji",(e,t)=>{Sf.init(e,t),tt.init(e,t)});function Px(e){return pu(Gu,e)}var Hu=C("ZodNanoID",(e,t)=>{kf.init(e,t),tt.init(e,t)});function Dx(e){return mu(Hu,e)}var Wu=C("ZodCUID",(e,t)=>{Af.init(e,t),tt.init(e,t)});function zx(e){return hu(Wu,e)}var Ju=C("ZodCUID2",(e,t)=>{Ef.init(e,t),tt.init(e,t)});function Ox(e){return gu(Ju,e)}var Yu=C("ZodULID",(e,t)=>{Tf.init(e,t),tt.init(e,t)});function Rx(e){return vu(Yu,e)}var Xu=C("ZodXID",(e,t)=>{Pf.init(e,t),tt.init(e,t)});function Cx(e){return yu(Xu,e)}var Qu=C("ZodKSUID",(e,t)=>{Df.init(e,t),tt.init(e,t)});function jx(e){return bu(Qu,e)}var ec=C("ZodIPv4",(e,t)=>{jf.init(e,t),tt.init(e,t)});function Mx(e){return xu(ec,e)}var vh=C("ZodMAC",(e,t)=>{Nf.init(e,t),tt.init(e,t)});function Nx(e){return Rp(vh,e)}var tc=C("ZodIPv6",(e,t)=>{Mf.init(e,t),tt.init(e,t)});function Ux(e){return wu(tc,e)}var rc=C("ZodCIDRv4",(e,t)=>{Uf.init(e,t),tt.init(e,t)});function Fx(e){return _u(rc,e)}var nc=C("ZodCIDRv6",(e,t)=>{Ff.init(e,t),tt.init(e,t)});function Lx(e){return Iu(nc,e)}var ic=C("ZodBase64",(e,t)=>{qf.init(e,t),tt.init(e,t)});function qx(e){return $u(ic,e)}var oc=C("ZodBase64URL",(e,t)=>{Bf.init(e,t),tt.init(e,t)});function Bx(e){return Su(oc,e)}var ac=C("ZodE164",(e,t)=>{Zf.init(e,t),tt.init(e,t)});function Zx(e){return ku(ac,e)}var sc=C("ZodJWT",(e,t)=>{Kf.init(e,t),tt.init(e,t)});function Kx(e){return Au(sc,e)}var ro=C("ZodCustomStringFormat",(e,t)=>{Vf.init(e,t),tt.init(e,t)});function Vx(e,t,n={}){return Yi(ro,e,t,n)}function Gx(e){return Yi(ro,"hostname",gr.hostname,e)}function Hx(e){return Yi(ro,"hex",gr.hex,e)}function Wx(e,t){let n=t?.enc??"hex",i=`${e}_${n}`,r=gr[i];if(!r)throw new Error(`Unrecognized hash format: ${i}`);return Yi(ro,i,r,t)}var no=C("ZodNumber",(e,t)=>{Qs.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(i,r,o)=>bm(e,i,r,o),e.gt=(i,r)=>e.check(jr(i,r)),e.gte=(i,r)=>e.check(Rt(i,r)),e.min=(i,r)=>e.check(Rt(i,r)),e.lt=(i,r)=>e.check(Cr(i,r)),e.lte=(i,r)=>e.check(Xt(i,r)),e.max=(i,r)=>e.check(Xt(i,r)),e.int=i=>e.check(Zu(i)),e.safe=i=>e.check(Zu(i)),e.positive=i=>e.check(jr(0,i)),e.nonnegative=i=>e.check(Rt(0,i)),e.negative=i=>e.check(Cr(0,i)),e.nonpositive=i=>e.check(Xt(0,i)),e.multipleOf=(i,r)=>e.check(Sn(i,r)),e.step=(i,r)=>e.check(Sn(i,r)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function yh(e){return Fp(no,e)}var ai=C("ZodNumberFormat",(e,t)=>{Gf.init(e,t),no.init(e,t)});function Zu(e){return qp(ai,e)}function Jx(e){return Bp(ai,e)}function Yx(e){return Zp(ai,e)}function Xx(e){return Kp(ai,e)}function Qx(e){return Vp(ai,e)}var io=C("ZodBoolean",(e,t)=>{sa.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>xm(e,n,i,r)});function bh(e){return Gp(io,e)}var oo=C("ZodBigInt",(e,t)=>{eu.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(i,r,o)=>wm(e,i,r,o),e.gte=(i,r)=>e.check(Rt(i,r)),e.min=(i,r)=>e.check(Rt(i,r)),e.gt=(i,r)=>e.check(jr(i,r)),e.gte=(i,r)=>e.check(Rt(i,r)),e.min=(i,r)=>e.check(Rt(i,r)),e.lt=(i,r)=>e.check(Cr(i,r)),e.lte=(i,r)=>e.check(Xt(i,r)),e.max=(i,r)=>e.check(Xt(i,r)),e.positive=i=>e.check(jr(BigInt(0),i)),e.negative=i=>e.check(Cr(BigInt(0),i)),e.nonpositive=i=>e.check(Xt(BigInt(0),i)),e.nonnegative=i=>e.check(Rt(BigInt(0),i)),e.multipleOf=(i,r)=>e.check(Sn(i,r));let n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function e0(e){return Wp(oo,e)}var uc=C("ZodBigIntFormat",(e,t)=>{Hf.init(e,t),oo.init(e,t)});function t0(e){return Yp(uc,e)}function r0(e){return Xp(uc,e)}var xh=C("ZodSymbol",(e,t)=>{Wf.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>_m(e,n,i,r)});function n0(e){return Qp(xh,e)}var wh=C("ZodUndefined",(e,t)=>{Jf.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>$m(e,n,i,r)});function i0(e){return em(wh,e)}var _h=C("ZodNull",(e,t)=>{Yf.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Im(e,n,i,r)});function Ih(e){return tm(_h,e)}var $h=C("ZodAny",(e,t)=>{Xf.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Am(e,n,i,r)});function o0(){return rm($h)}var Sh=C("ZodUnknown",(e,t)=>{Qf.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Em(e,n,i,r)});function oi(){return nm(Sh)}var kh=C("ZodNever",(e,t)=>{ep.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>km(e,n,i,r)});function cc(e){return im(kh,e)}var Ah=C("ZodVoid",(e,t)=>{tp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Sm(e,n,i,r)});function a0(e){return om(Ah,e)}var xa=C("ZodDate",(e,t)=>{rp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(i,r,o)=>Tm(e,i,r,o),e.min=(i,r)=>e.check(Rt(i,r)),e.max=(i,r)=>e.check(Xt(i,r));let n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function s0(e){return am(xa,e)}var Eh=C("ZodArray",(e,t)=>{np.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Lm(e,n,i,r),e.element=t.element,e.min=(n,i)=>e.check(Jr(n,i)),e.nonempty=n=>e.check(Jr(1,n)),e.max=(n,i)=>e.check(ni(n,i)),e.length=(n,i)=>e.check(ii(n,i)),e.unwrap=()=>e.element});function wa(e,t){return cm(Eh,e,t)}function u0(e){let t=e._zod.def.shape;return dc(Object.keys(t))}var _a=C("ZodObject",(e,t)=>{ip.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>qm(e,n,i,r),oe.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>dc(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:oi()}),e.loose=()=>e.clone({...e._zod.def,catchall:oi()}),e.strict=()=>e.clone({...e._zod.def,catchall:cc()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>oe.extend(e,n),e.safeExtend=n=>oe.safeExtend(e,n),e.merge=n=>oe.merge(e,n),e.pick=n=>oe.pick(e,n),e.omit=n=>oe.omit(e,n),e.partial=(...n)=>oe.partial(pc,e,n[0]),e.required=(...n)=>oe.required(mc,e,n[0])});function c0(e,t){let n={type:"object",shape:e??{},...oe.normalizeParams(t)};return new _a(n)}function l0(e,t){return new _a({type:"object",shape:e,catchall:cc(),...oe.normalizeParams(t)})}function d0(e,t){return new _a({type:"object",shape:e,catchall:oi(),...oe.normalizeParams(t)})}var Ia=C("ZodUnion",(e,t)=>{ua.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Ru(e,n,i,r),e.options=t.options});function lc(e,t){return new Ia({type:"union",options:e,...oe.normalizeParams(t)})}var Th=C("ZodXor",(e,t)=>{Ia.init(e,t),op.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Ru(e,n,i,r),e.options=t.options});function f0(e,t){return new Th({type:"union",options:e,inclusive:!1,...oe.normalizeParams(t)})}var Ph=C("ZodDiscriminatedUnion",(e,t)=>{Ia.init(e,t),ap.init(e,t)});function p0(e,t,n){return new Ph({type:"union",options:t,discriminator:e,...oe.normalizeParams(n)})}var Dh=C("ZodIntersection",(e,t)=>{sp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Bm(e,n,i,r)});function zh(e,t){return new Dh({type:"intersection",left:e,right:t})}var Oh=C("ZodTuple",(e,t)=>{tu.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Zm(e,n,i,r),e.rest=n=>e.clone({...e._zod.def,rest:n})});function Rh(e,t,n){let i=t instanceof Ee,r=i?n:t,o=i?t:null;return new Oh({type:"tuple",items:e,rest:o,...oe.normalizeParams(r)})}var $a=C("ZodRecord",(e,t)=>{up.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Km(e,n,i,r),e.keyType=t.keyType,e.valueType=t.valueType});function Ch(e,t,n){return new $a({type:"record",keyType:e,valueType:t,...oe.normalizeParams(n)})}function m0(e,t,n){let i=Ot(e);return i._zod.values=void 0,new $a({type:"record",keyType:i,valueType:t,...oe.normalizeParams(n)})}function h0(e,t,n){return new $a({type:"record",keyType:e,valueType:t,mode:"loose",...oe.normalizeParams(n)})}var jh=C("ZodMap",(e,t)=>{cp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Um(e,n,i,r),e.keyType=t.keyType,e.valueType=t.valueType,e.min=(...n)=>e.check(Mr(...n)),e.nonempty=n=>e.check(Mr(1,n)),e.max=(...n)=>e.check(kn(...n)),e.size=(...n)=>e.check(ri(...n))});function g0(e,t,n){return new jh({type:"map",keyType:e,valueType:t,...oe.normalizeParams(n)})}var Mh=C("ZodSet",(e,t)=>{lp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Fm(e,n,i,r),e.min=(...n)=>e.check(Mr(...n)),e.nonempty=n=>e.check(Mr(1,n)),e.max=(...n)=>e.check(kn(...n)),e.size=(...n)=>e.check(ri(...n))});function v0(e,t){return new Mh({type:"set",valueType:e,...oe.normalizeParams(t)})}var eo=C("ZodEnum",(e,t)=>{dp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(i,r,o)=>Pm(e,i,r,o),e.enum=t.entries,e.options=Object.values(t.entries);let n=new Set(Object.keys(t.entries));e.extract=(i,r)=>{let o={};for(let a of i)if(n.has(a))o[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new eo({...t,checks:[],...oe.normalizeParams(r),entries:o})},e.exclude=(i,r)=>{let o={...t.entries};for(let a of i)if(n.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new eo({...t,checks:[],...oe.normalizeParams(r),entries:o})}});function dc(e,t){let n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new eo({type:"enum",entries:n,...oe.normalizeParams(t)})}function y0(e,t){return new eo({type:"enum",entries:e,...oe.normalizeParams(t)})}var Nh=C("ZodLiteral",(e,t)=>{fp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Dm(e,n,i,r),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function b0(e,t){return new Nh({type:"literal",values:Array.isArray(e)?e:[e],...oe.normalizeParams(t)})}var Uh=C("ZodFile",(e,t)=>{pp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Rm(e,n,i,r),e.min=(n,i)=>e.check(Mr(n,i)),e.max=(n,i)=>e.check(kn(n,i)),e.mime=(n,i)=>e.check(Ki(Array.isArray(n)?n:[n],i))});function x0(e){return lm(Uh,e)}var Fh=C("ZodTransform",(e,t)=>{mp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Nm(e,n,i,r),e._zod.parse=(n,i)=>{if(i.direction==="backward")throw new xn(e.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(oe.issue(o,n.value,t));else{let a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),n.issues.push(oe.issue(a))}};let r=t.transform(n.value,n);return r instanceof Promise?r.then(o=>(n.value=o,n)):(n.value=r,n)}});function fc(e){return new Fh({type:"transform",transform:e})}var pc=C("ZodOptional",(e,t)=>{ru.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Cu(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function ga(e){return new pc({type:"optional",innerType:e})}var Lh=C("ZodExactOptional",(e,t)=>{hp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Cu(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function qh(e){return new Lh({type:"optional",innerType:e})}var Bh=C("ZodNullable",(e,t)=>{gp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Vm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function va(e){return new Bh({type:"nullable",innerType:e})}function w0(e){return ga(va(e))}var Zh=C("ZodDefault",(e,t)=>{vp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Hm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Kh(e,t){return new Zh({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():oe.shallowClone(t)}})}var Vh=C("ZodPrefault",(e,t)=>{yp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Wm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function Gh(e,t){return new Vh({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():oe.shallowClone(t)}})}var mc=C("ZodNonOptional",(e,t)=>{bp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Gm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function Hh(e,t){return new mc({type:"nonoptional",innerType:e,...oe.normalizeParams(t)})}var Wh=C("ZodSuccess",(e,t)=>{xp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Cm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function _0(e){return new Wh({type:"success",innerType:e})}var Jh=C("ZodCatch",(e,t)=>{wp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Jm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Yh(e,t){return new Jh({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var Xh=C("ZodNaN",(e,t)=>{_p.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>zm(e,n,i,r)});function I0(e){return um(Xh,e)}var hc=C("ZodPipe",(e,t)=>{Ip.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Ym(e,n,i,r),e.in=t.in,e.out=t.out});function ya(e,t){return new hc({type:"pipe",in:e,out:t})}var gc=C("ZodCodec",(e,t)=>{hc.init(e,t),ca.init(e,t)});function $0(e,t,n){return new gc({type:"pipe",in:e,out:t,transform:n.decode,reverseTransform:n.encode})}var Qh=C("ZodReadonly",(e,t)=>{$p.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Xm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function eg(e){return new Qh({type:"readonly",innerType:e})}var tg=C("ZodTemplateLiteral",(e,t)=>{Sp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Om(e,n,i,r)});function S0(e,t){return new tg({type:"template_literal",parts:e,...oe.normalizeParams(t)})}var rg=C("ZodLazy",(e,t)=>{Ep.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>eh(e,n,i,r),e.unwrap=()=>e._zod.def.getter()});function ng(e){return new rg({type:"lazy",getter:e})}var ig=C("ZodPromise",(e,t)=>{Ap.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Qm(e,n,i,r),e.unwrap=()=>e._zod.def.innerType});function k0(e){return new ig({type:"promise",innerType:e})}var og=C("ZodFunction",(e,t)=>{kp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>Mm(e,n,i,r)});function A0(e){return new og({type:"function",input:Array.isArray(e?.input)?Rh(e?.input):e?.input??wa(oi()),output:e?.output??oi()})}var Sa=C("ZodCustom",(e,t)=>{Tp.init(e,t),ze.init(e,t),e._zod.processJSONSchema=(n,i,r)=>jm(e,n,i,r)});function E0(e){let t=new nt({check:"custom"});return t._zod.check=e,t}function T0(e,t){return dm(Sa,e??(()=>!0),t)}function ag(e,t={}){return fm(Sa,e,t)}function sg(e){return pm(e)}var P0=mm,D0=hm;function z0(e,t={}){let n=new Sa({type:"custom",check:"custom",fn:i=>i instanceof e,abort:!0,...oe.normalizeParams(t)});return n._zod.bag.Class=e,n._zod.check=i=>{i.value instanceof e||i.issues.push({code:"invalid_type",expected:e.name,input:i.value,inst:n,path:[...n._zod.def.path??[]]})},n}var O0=(...e)=>gm({Codec:gc,Boolean:io,String:to},...e);function R0(e){let t=ng(()=>lc([Bu(e),yh(),bh(),Ih(),wa(t),Ch(Bu(),t)]));return t}function C0(e,t){return ya(fc(e),t)}var MT={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function NT(e){lt({customError:e})}function UT(){return lt().customError}var ug;ug||(ug={});var ge={...ma,...Nu,iso:Qi},FT=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function LT(e,t){let n=e.$schema;return n==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":n==="http://json-schema.org/draft-07/schema#"?"draft-7":n==="http://json-schema.org/draft-04/schema#"?"draft-4":t??"draft-2020-12"}function qT(e,t){if(!e.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");let n=e.slice(1).split("/").filter(Boolean);if(n.length===0)return t.rootSchema;let i=t.version==="draft-2020-12"?"$defs":"definitions";if(n[0]===i){let r=n[1];if(!r||!t.defs[r])throw new Error(`Reference not found: ${e}`);return t.defs[r]}throw new Error(`Reference not found: ${e}`)}function j0(e,t){if(e.not!==void 0){if(typeof e.not=="object"&&Object.keys(e.not).length===0)return ge.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(e.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(e.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(e.if!==void 0||e.then!==void 0||e.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(e.dependentSchemas!==void 0||e.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(e.$ref){let r=e.$ref;if(t.refs.has(r))return t.refs.get(r);if(t.processing.has(r))return ge.lazy(()=>{if(!t.refs.has(r))throw new Error(`Circular reference not resolved: ${r}`);return t.refs.get(r)});t.processing.add(r);let o=qT(r,t),a=At(o,t);return t.refs.set(r,a),t.processing.delete(r),a}if(e.enum!==void 0){let r=e.enum;if(t.version==="openapi-3.0"&&e.nullable===!0&&r.length===1&&r[0]===null)return ge.null();if(r.length===0)return ge.never();if(r.length===1)return ge.literal(r[0]);if(r.every(a=>typeof a=="string"))return ge.enum(r);let o=r.map(a=>ge.literal(a));return o.length<2?o[0]:ge.union([o[0],o[1],...o.slice(2)])}if(e.const!==void 0)return ge.literal(e.const);let n=e.type;if(Array.isArray(n)){let r=n.map(o=>{let a={...e,type:o};return j0(a,t)});return r.length===0?ge.never():r.length===1?r[0]:ge.union(r)}if(!n)return ge.any();let i;switch(n){case"string":{let r=ge.string();if(e.format){let o=e.format;o==="email"?r=r.check(ge.email()):o==="uri"||o==="uri-reference"?r=r.check(ge.url()):o==="uuid"||o==="guid"?r=r.check(ge.uuid()):o==="date-time"?r=r.check(ge.iso.datetime()):o==="date"?r=r.check(ge.iso.date()):o==="time"?r=r.check(ge.iso.time()):o==="duration"?r=r.check(ge.iso.duration()):o==="ipv4"?r=r.check(ge.ipv4()):o==="ipv6"?r=r.check(ge.ipv6()):o==="mac"?r=r.check(ge.mac()):o==="cidr"?r=r.check(ge.cidrv4()):o==="cidr-v6"?r=r.check(ge.cidrv6()):o==="base64"?r=r.check(ge.base64()):o==="base64url"?r=r.check(ge.base64url()):o==="e164"?r=r.check(ge.e164()):o==="jwt"?r=r.check(ge.jwt()):o==="emoji"?r=r.check(ge.emoji()):o==="nanoid"?r=r.check(ge.nanoid()):o==="cuid"?r=r.check(ge.cuid()):o==="cuid2"?r=r.check(ge.cuid2()):o==="ulid"?r=r.check(ge.ulid()):o==="xid"?r=r.check(ge.xid()):o==="ksuid"&&(r=r.check(ge.ksuid()))}typeof e.minLength=="number"&&(r=r.min(e.minLength)),typeof e.maxLength=="number"&&(r=r.max(e.maxLength)),e.pattern&&(r=r.regex(new RegExp(e.pattern))),i=r;break}case"number":case"integer":{let r=n==="integer"?ge.number().int():ge.number();typeof e.minimum=="number"&&(r=r.min(e.minimum)),typeof e.maximum=="number"&&(r=r.max(e.maximum)),typeof e.exclusiveMinimum=="number"?r=r.gt(e.exclusiveMinimum):e.exclusiveMinimum===!0&&typeof e.minimum=="number"&&(r=r.gt(e.minimum)),typeof e.exclusiveMaximum=="number"?r=r.lt(e.exclusiveMaximum):e.exclusiveMaximum===!0&&typeof e.maximum=="number"&&(r=r.lt(e.maximum)),typeof e.multipleOf=="number"&&(r=r.multipleOf(e.multipleOf)),i=r;break}case"boolean":{i=ge.boolean();break}case"null":{i=ge.null();break}case"object":{let r={},o=e.properties||{},a=new Set(e.required||[]);for(let[l,d]of Object.entries(o)){let m=At(d,t);r[l]=a.has(l)?m:m.optional()}if(e.propertyNames){let l=At(e.propertyNames,t),d=e.additionalProperties&&typeof e.additionalProperties=="object"?At(e.additionalProperties,t):ge.any();if(Object.keys(r).length===0){i=ge.record(l,d);break}let m=ge.object(r).passthrough(),v=ge.looseRecord(l,d);i=ge.intersection(m,v);break}if(e.patternProperties){let l=e.patternProperties,d=Object.keys(l),m=[];for(let h of d){let b=At(l[h],t),_=ge.string().regex(new RegExp(h));m.push(ge.looseRecord(_,b))}let v=[];if(Object.keys(r).length>0&&v.push(ge.object(r).passthrough()),v.push(...m),v.length===0)i=ge.object({}).passthrough();else if(v.length===1)i=v[0];else{let h=ge.intersection(v[0],v[1]);for(let b=2;b<v.length;b++)h=ge.intersection(h,v[b]);i=h}break}let s=ge.object(r);e.additionalProperties===!1?i=s.strict():typeof e.additionalProperties=="object"?i=s.catchall(At(e.additionalProperties,t)):i=s.passthrough();break}case"array":{let r=e.prefixItems,o=e.items;if(r&&Array.isArray(r)){let a=r.map(l=>At(l,t)),s=o&&typeof o=="object"&&!Array.isArray(o)?At(o,t):void 0;s?i=ge.tuple(a).rest(s):i=ge.tuple(a),typeof e.minItems=="number"&&(i=i.check(ge.minLength(e.minItems))),typeof e.maxItems=="number"&&(i=i.check(ge.maxLength(e.maxItems)))}else if(Array.isArray(o)){let a=o.map(l=>At(l,t)),s=e.additionalItems&&typeof e.additionalItems=="object"?At(e.additionalItems,t):void 0;s?i=ge.tuple(a).rest(s):i=ge.tuple(a),typeof e.minItems=="number"&&(i=i.check(ge.minLength(e.minItems))),typeof e.maxItems=="number"&&(i=i.check(ge.maxLength(e.maxItems)))}else if(o!==void 0){let a=At(o,t),s=ge.array(a);typeof e.minItems=="number"&&(s=s.min(e.minItems)),typeof e.maxItems=="number"&&(s=s.max(e.maxItems)),i=s}else i=ge.array(ge.any());break}default:throw new Error(`Unsupported type: ${n}`)}return e.description&&(i=i.describe(e.description)),e.default!==void 0&&(i=i.default(e.default)),i}function At(e,t){if(typeof e=="boolean")return e?ge.any():ge.never();let n=j0(e,t),i=e.type||e.enum!==void 0||e.const!==void 0;if(e.anyOf&&Array.isArray(e.anyOf)){let s=e.anyOf.map(d=>At(d,t)),l=ge.union(s);n=i?ge.intersection(n,l):l}if(e.oneOf&&Array.isArray(e.oneOf)){let s=e.oneOf.map(d=>At(d,t)),l=ge.xor(s);n=i?ge.intersection(n,l):l}if(e.allOf&&Array.isArray(e.allOf))if(e.allOf.length===0)n=i?n:ge.any();else{let s=i?n:At(e.allOf[0],t),l=i?0:1;for(let d=l;d<e.allOf.length;d++)s=ge.intersection(s,At(e.allOf[d],t));n=s}e.nullable===!0&&t.version==="openapi-3.0"&&(n=ge.nullable(n)),e.readOnly===!0&&(n=ge.readonly(n));let r={},o=["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"];for(let s of o)s in e&&(r[s]=e[s]);let a=["contentEncoding","contentMediaType","contentSchema"];for(let s of a)s in e&&(r[s]=e[s]);for(let s of Object.keys(e))FT.has(s)||(r[s]=e[s]);return Object.keys(r).length>0&&t.registry.add(n,r),n}function M0(e,t){if(typeof e=="boolean")return e?ge.any():ge.never();let n=LT(e,t?.defaultTarget),i=e.$defs||e.definitions||{},r={version:n,defs:i,refs:new Map,processing:new Set,rootSchema:e,registry:t?.registry??It};return At(e,r)}var cg={};Kr(cg,{bigint:()=>VT,boolean:()=>KT,date:()=>GT,number:()=>ZT,string:()=>BT});function BT(e){return Op(to,e)}function ZT(e){return Lp(no,e)}function KT(e){return Hp(io,e)}function VT(e){return Jp(oo,e)}function GT(e){return sm(xa,e)}lt(nu());var HT={actions:[{actionType:"move",group:"movement",requiresTarget:!1},{actionType:"train",group:"room",requiresTarget:!1,requiresRoomFeature:"training"},{actionType:"rest",group:"room",requiresTarget:!1},{actionType:"talk",group:"dialogue",requiresTarget:!1},{actionType:"search",group:"room",requiresTarget:!1},{actionType:"speak",group:"special",requiresTarget:!1},{actionType:"fight",group:"combat",requiresTarget:!0},{actionType:"flee",group:"combat",requiresTarget:!1,requiresEncounter:!0},{actionType:"choose_dialogue",group:"dialogue",requiresTarget:!1},{actionType:"live_stream",group:"special",requiresTarget:!1},{actionType:"steal",group:"combat",requiresTarget:!0},{actionType:"recruit",group:"combat",requiresTarget:!0},{actionType:"murder",group:"combat",requiresTarget:!0},{actionType:"evolve_skill",group:"special",requiresTarget:!1,requiresRoomFeature:"rune_forge"},{actionType:"use_item",group:"inventory",requiresTarget:!1},{actionType:"equip_item",group:"inventory",requiresTarget:!1},{actionType:"drop_item",group:"inventory",requiresTarget:!1},{actionType:"purchase",group:"special",requiresTarget:!1,requiresRoomFeature:"rune_forge"},{actionType:"re_equip",group:"special",requiresTarget:!1,requiresRoomFeature:"rune_forge"}]},WT={intents:[{actionType:"move",uiIntent:"navigate",uiScreen:"gridNavigation",uiPriority:10},{actionType:"train",uiIntent:"room_action",uiScreen:"gridActionMenu",uiPriority:40},{actionType:"rest",uiIntent:"room_action",uiScreen:"gridActionMenu",uiPriority:41},{actionType:"talk",uiIntent:"dialogue",uiScreen:"gridDialogue",uiPriority:20},{actionType:"search",uiIntent:"room_action",uiScreen:"gridActionMenu",uiPriority:42},{actionType:"speak",uiIntent:"narrative",uiScreen:"firstPerson",uiPriority:70},{actionType:"fight",uiIntent:"combat",uiScreen:"gridCombat",uiPriority:5},{actionType:"flee",uiIntent:"combat",uiScreen:"gridCombat",uiPriority:6},{actionType:"choose_dialogue",uiIntent:"dialogue",uiScreen:"gridDialogue",uiPriority:21},{actionType:"live_stream",uiIntent:"special",uiScreen:"gridActionMenu",uiPriority:60},{actionType:"steal",uiIntent:"conflict",uiScreen:"gridActionMenu",uiPriority:50},{actionType:"recruit",uiIntent:"social",uiScreen:"gridActionMenu",uiPriority:51},{actionType:"murder",uiIntent:"conflict",uiScreen:"gridActionMenu",uiPriority:52},{actionType:"evolve_skill",uiIntent:"rune_forge",uiScreen:"gridRuneForge",uiPriority:30},{actionType:"use_item",uiIntent:"inventory",uiScreen:"gridInventory",uiPriority:32},{actionType:"equip_item",uiIntent:"inventory",uiScreen:"gridInventory",uiPriority:33},{actionType:"drop_item",uiIntent:"inventory",uiScreen:"gridInventory",uiPriority:34},{actionType:"purchase",uiIntent:"rune_forge",uiScreen:"gridRuneForge",uiPriority:31},{actionType:"re_equip",uiIntent:"rune_forge",uiScreen:"gridRuneForge",uiPriority:35}]},JT={policies:[{policyId:"agent-play-default",label:"Agent Play Default",entityKindFilter:["player"],priorityOrder:["choose_dialogue","evolve_skill","fight","flee","steal","recruit","murder","search","talk","train","live_stream","move","rest","speak"]},{policyId:"dungeoneer-friendly",label:"Dungeoneer Friendly",entityKindFilter:["dungeoneer"],priorityOrder:["choose_dialogue","talk","search","rest","train","move","live_stream","speak"]},{policyId:"hostile-hunter",label:"Hostile Hunter",entityKindFilter:["hostile","boss"],priorityOrder:["fight","murder","move"]}]},YT={canonicalSeedV1:20260227,roomInfluenceScale:.05,deedProjection:{perFeatureCap:.22,globalBudget:.35},entityPressure:{cap:120,countItemsAsEntities:!0},actions:{train:{energyDelta:-.15,xpDelta:5,traitDelta:{Constraint:.07,Direction:.05},featureDelta:{Momentum:.1}},rest:{energyDeltaBase:.2,energyDeltaRestRoom:.3,traitDelta:{Equilibrium:.04,Levity:.02}},talk:{traitDelta:{Empathy:.05,Comprehension:.03},featureDelta:{Awareness:.05},noTargetTraitDelta:{Empathy:-.01}},searchEmpty:{traitDelta:{Comprehension:.01}},fight:{xpDelta:4,traitDelta:{Survival:.03,Direction:.03},featureDelta:{Momentum:.1}},flee:{traitDelta:{Survival:.01}},liveStream:{effortCost:10,traitDelta:{Projection:.03},featureDelta:{Momentum:.2}},steal:{traitDelta:{Constraint:.01,Survival:.02},featureDelta:{Guile:.15}},recruit:{traitDelta:{Empathy:.04},featureDelta:{Awareness:.1}},murder:{xpDelta:10,reputationDelta:-2,traitDelta:{Survival:.06,Constraint:-.04},featureDelta:{Momentum:.2}},useItem:{traitDelta:{Comprehension:.02},featureDelta:{Awareness:.02}},equipItem:{featureDelta:{Momentum:.03}},dropItem:{featureDelta:{Momentum:-.02}},purchase:{traitDelta:{Comprehension:.02,Constraint:.02},featureDelta:{Awareness:.05,Momentum:.03}},reEquip:{featureDelta:{Momentum:.04}}}},XT={archetypes:[{archetypeId:"wanderer",label:"Wanderer",description:"Flexible explorer with balanced growth and adaptation.",vectorProfile:{Comprehension:.12,Projection:.1,Survival:.1,Equilibrium:.1},featureProfile:{Awareness:.2,Momentum:.15},preferredSkills:["pulse_sense","keen_eye"]},{archetypeId:"delver",label:"Delver",description:"Resource-focused scavenger who excels in treasure and survival loops.",vectorProfile:{Construction:.2,Survival:.24,Constraint:.16},featureProfile:{Guile:.15,Awareness:.18},preferredSkills:["appraisal","shadow_hand"]},{archetypeId:"warden",label:"Warden",description:"Disciplined protector focused on control, defense, and attrition.",vectorProfile:{Direction:.24,Constraint:.2,Survival:.2,Empathy:.08},featureProfile:{Momentum:.2,Awareness:.12},preferredSkills:["guardian_step","riposte"]},{archetypeId:"hunter",label:"Hunter",description:"Aggressive pursuer optimized for combat pressure and momentum spikes.",vectorProfile:{Direction:.28,Survival:.25,Projection:.14},featureProfile:{Momentum:.26,Guile:.1},preferredSkills:["riposte","trap_vision"]},{archetypeId:"tactician",label:"Tactician",description:"Information-first strategist who converts insight into leverage.",vectorProfile:{Comprehension:.28,Construction:.22,Equilibrium:.18},featureProfile:{Awareness:.28,Momentum:.12},preferredSkills:["deep_appraisal","rune_smith"]},{archetypeId:"showrunner",label:"Showrunner",description:"Fame-driven performer who grows stronger through audience pressure.",vectorProfile:{Projection:.3,Direction:.2,Levity:.14},featureProfile:{Fame:.35,Momentum:.22},preferredSkills:["battle_broadcast","rumorcraft"]}]},QT={cutscenes:[{cutsceneId:"locked_cache",title:"A Locked Cache",once:!0},{cutsceneId:"steel_memory",title:"Steel Memory",once:!0},{cutsceneId:"signal_in_the_dark",title:"Signal in the Dark",once:!0},{cutsceneId:"hands_like_smoke",title:"Hands Like Smoke",once:!0},{cutsceneId:"chapter_closed",title:"Chapter Closed",once:!1},{cutsceneId:"surface_air",title:"Surface Air",once:!0}]},eP={clusters:[{clusterId:"treasure_cluster",title:"Treasure choices",centerVector:{Projection:.5,Survival:.4},radius:2,options:[{optionId:"loot_treasure",label:"Loot the treasure cache",line:"I pry open the cache and take what I can.",clusterId:"treasure_cluster",anchorVector:{Projection:.6,Survival:.5},radius:1.6,effectVector:{Construction:.1,Survival:.15},responseText:"You salvage useful supplies from the opened cache.",requiresItemTagPresent:"treasure",takeItemTag:"treasure"},{optionId:"wish_something_else_was_here",label:"Say: I wish something else was here",line:"I wish something else was here.",clusterId:"treasure_cluster",anchorVector:{Comprehension:.2,Projection:.25},radius:2.1,effectVector:{Comprehension:.06,Levity:-.02},responseText:"You stare at the empty corner and note what has changed.",requiresItemTagAbsent:"treasure"},{optionId:"appraise_cache",label:"Appraise the cache seals",line:"The lockwork tells a story if I read it closely.",clusterId:"treasure_cluster",anchorVector:{Comprehension:.36,Construction:.32},radius:1.8,effectVector:{Comprehension:.08,Construction:.03},responseText:"You map hidden mechanisms and extract cleaner salvage routes.",requiresItemTagPresent:"treasure",requiresSkillId:"appraisal"}]},{clusterId:"training_cluster",title:"Training mindset",centerVector:{Constraint:.5,Direction:.4},radius:2,options:[{optionId:"discipline_oath",label:"Make a discipline oath",line:"No wasted motion. No wasted turns.",clusterId:"training_cluster",anchorVector:{Constraint:.55,Direction:.35},radius:1.8,effectVector:{Constraint:.1,Direction:.08},responseText:"You lock into a strict routine.",requiresRoomFeature:"training"},{optionId:"ask_for_drill",label:"Ask for a sparring drill",line:"Push me to the edge. I need real pressure.",clusterId:"training_cluster",anchorVector:{Direction:.48,Survival:.32},radius:1.9,effectVector:{Direction:.08,Survival:.06},responseText:"The drill is brutal but your rhythm sharpens.",requiresRoomFeature:"training"}]},{clusterId:"social_cluster",title:"Social options",centerVector:{Empathy:.35,Comprehension:.25},radius:2,options:[{optionId:"ask_for_routes",label:"Ask about hidden routes",line:"Tell me what path you saw last.",clusterId:"social_cluster",anchorVector:{Empathy:.45,Comprehension:.35},radius:1.9,effectVector:{Comprehension:.09,Empathy:.06},responseText:"The reply gives you clues about nearby corridors.",nextOptionId:"trade_rumors",requiresRoomFeature:"dialogue"},{optionId:"trade_rumors",label:"Trade rumors",line:"I heard movement near the forge. What did you hear?",clusterId:"social_cluster",anchorVector:{Empathy:.32,Projection:.28},radius:2,effectVector:{Empathy:.04,Projection:.06},responseText:"The conversation reshapes what both of you think is true.",nextOptionId:"direct_interrogation",requiresRoomFeature:"dialogue"},{optionId:"direct_interrogation",label:"Direct interrogation",line:"Drop the story. Give me facts.",clusterId:"social_cluster",anchorVector:{Constraint:.3,Comprehension:.26},radius:1.9,effectVector:{Constraint:.05,Comprehension:.05,Empathy:-.03},responseText:"You get sharper details, but the room temperature drops.",requiresRoomFeature:"dialogue"},{optionId:"probe_warden_pattern",label:"Probe warden patrol pattern",line:"When does the Depth Warden switch rotations?",clusterId:"social_cluster",anchorVector:{Comprehension:.38,Direction:.24},radius:2,effectVector:{Comprehension:.07,Direction:.04},responseText:"You piece together patrol timings and mark a safer window.",requiresRoomFeature:"dialogue"}]},{clusterId:"rest_cluster",title:"Recovery choices",centerVector:{Equilibrium:.36,Levity:.26},radius:2.1,options:[{optionId:"guided_breathing",label:"Guided breathing",line:"Inhale four counts. Hold. Exhale slow.",clusterId:"rest_cluster",anchorVector:{Equilibrium:.42,Constraint:.2},radius:1.8,effectVector:{Equilibrium:.1,Constraint:.03},responseText:"Your pulse stabilizes and panic drains out.",requiresRoomFeature:"rest"},{optionId:"tell_dark_joke",label:"Tell a dark joke",line:"If we survive, this is still going in the stream highlight reel.",clusterId:"rest_cluster",anchorVector:{Levity:.38,Projection:.26},radius:2,effectVector:{Levity:.08,Projection:.04},responseText:"Someone laughs. The tension breaks for a minute.",requiresRoomFeature:"rest"}]},{clusterId:"forge_cluster",title:"Rune forge choices",centerVector:{Construction:.45,Projection:.24},radius:2,options:[{optionId:"etch_rune_notes",label:"Etch rune notes",line:"These symbols are a language; I need to keep the grammar.",clusterId:"forge_cluster",anchorVector:{Construction:.52,Comprehension:.32},radius:1.8,effectVector:{Construction:.1,Comprehension:.05},responseText:"Your notes reveal consistent rune behavior patterns.",requiresRoomFeature:"rune_forge"},{optionId:"forge_showcase",label:"Livestream the forge pulse",line:"Watch this, chat. The room is alive.",clusterId:"forge_cluster",anchorVector:{Projection:.42,Direction:.22},radius:1.9,effectVector:{Projection:.08,Direction:.05},responseText:"The stream spikes as the forge reacts to your cadence.",requiresRoomFeature:"rune_forge",requiresSkillId:"battle_broadcast"}]}]},tP={events:[{eventId:"depth_pressure_turn_40",kind:"deterministic",trigger:{metric:"turn_index",gte:40},message:"Dungeon alert rises: spawned enemies are now 2 levels stronger.",globalEnemyLevelBonusDelta:2},{eventId:"fame_watchers_20",kind:"deterministic",trigger:{metric:"player_feature",key:"Fame",gte:20},message:"Your stream reaches the upper halls. More eyes are watching now.",traitDelta:{Projection:.08},featureDelta:{Momentum:.25}},{eventId:"rune_surge_15",kind:"emergent",trigger:{metric:"turn_index",gte:15},probability:.08,message:"Rune resonance surges through the floor and twists intent vectors.",traitDelta:{Construction:.03,Projection:.02},featureDelta:{Momentum:.08}}]},rP={rarityTiers:["common","rare","epic","legendary"],items:[{itemId:"treasure_cache",tags:["treasure","loot"],vectorDelta:{Projection:.4,Survival:.2}},{itemId:"weapon_common",tags:["weapon","common"],vectorDelta:{Direction:.05,Survival:.05}},{itemId:"weapon_rare",tags:["weapon","rare"],vectorDelta:{Direction:.1,Survival:.1}},{itemId:"weapon_epic",tags:["weapon","epic"],vectorDelta:{Direction:.16,Survival:.14}},{itemId:"weapon_legendary",tags:["weapon","legendary"],vectorDelta:{Direction:.24,Survival:.22,Projection:.08}},{itemId:"warded_armor",tags:["armor","rare"],vectorDelta:{Constraint:.12,Survival:.08}},{itemId:"echo_relic",tags:["relic","epic"],vectorDelta:{Projection:.18,Comprehension:.1}},{itemId:"stream_ring",tags:["relic","fame","rare"],vectorDelta:{Projection:.08,Direction:.06}},{itemId:"thief_gloves",tags:["utility","guile","common"],vectorDelta:{Constraint:.06,Survival:.04}}]},nP={quests:[{questId:"escape",title:"Break the Surface",description:"Find each level exit and reach the final gate.",requiredProgress:{mode:"total_levels"},progressRules:[{kind:"chapter_completed",amount:1},{kind:"escape",setToRequired:!0}]},{questId:"training",title:"Steel in the Dark",description:"Train six times to survive upper levels.",requiredProgress:{mode:"fixed",value:6},progressRules:[{kind:"action",actionType:"train",amount:1}]},{questId:"chronicle",title:"Dungeon Chronicle",description:"Complete chapter logs from depth 12 to depth 1.",requiredProgress:{mode:"total_levels"},progressRules:[{kind:"chapter_completed",amount:1}]}]},iP={templates:[{feature:"corridor",baseVector:{}},{feature:"start",baseVector:{Comprehension:.2}},{feature:"exit",baseVector:{}},{feature:"stairs_up",baseVector:{Direction:.35,Projection:.15}},{feature:"stairs_down",baseVector:{}},{feature:"escape_gate",baseVector:{Freedom:.55,Projection:.35}},{feature:"training",baseVector:{Constraint:.45,Direction:.3}},{feature:"dialogue",baseVector:{Empathy:.4,Comprehension:.2}},{feature:"rest",baseVector:{Equilibrium:.5,Levity:.2}},{feature:"treasure",baseVector:{Projection:.45,Survival:.25}},{feature:"rune_forge",baseVector:{Construction:.45,Comprehension:.25}},{feature:"combat",baseVector:{Survival:.4,Direction:.25}}]},oP={skills:[{skillId:"appraisal",name:"Appraisal",description:"Inspect entities and items to reveal quality and risk.",branch:"perception",branchGroup:"perception_branch",exclusiveWith:["xray"],unlockRadius:2.2,vectorProfile:{Comprehension:.3,Construction:.2},unlockRequirements:[{kind:"min_attribute",key:"insight",value:5,description:"Need Insight 5+"}],useRequirements:[],traitBonus:{Comprehension:.04},featureBonus:{Awareness:.15}},{skillId:"xray",name:"X-Ray Instinct",description:"Sense hidden traps and contents without opening containers.",branch:"perception",branchGroup:"perception_branch",exclusiveWith:["appraisal"],unlockRadius:2.4,vectorProfile:{Projection:.2,Survival:.3},unlockRequirements:[{kind:"trait_below",key:"Comprehension",value:0,description:"Unlocked by rough instinct"}],useRequirements:[],traitBonus:{Survival:.04},featureBonus:{Awareness:.12}},{skillId:"deep_appraisal",name:"Deep Appraisal",description:"Advanced appraisal that reveals hidden bonuses and faction clues.",branch:"perception",evolvesFrom:"appraisal",requiresRuneForge:!0,unlockRadius:2,vectorProfile:{Comprehension:.45,Construction:.35},unlockRequirements:[{kind:"min_attribute",key:"insight",value:7,description:"Need Insight 7+"},{kind:"min_feature",key:"Awareness",value:.3,description:"Need Awareness"}],useRequirements:[],traitBonus:{Comprehension:.08,Construction:.04},featureBonus:{Awareness:.2}},{skillId:"trap_vision",name:"Trap Vision",description:"Evolved xray skill specialized in trap prediction and bypass.",branch:"perception",evolvesFrom:"xray",requiresRuneForge:!0,unlockRadius:2,vectorProfile:{Survival:.45,Projection:.3},unlockRequirements:[{kind:"min_attribute",key:"willpower",value:6,description:"Need Willpower 6+"},{kind:"min_feature",key:"Awareness",value:.25,description:"Need Awareness"}],useRequirements:[],traitBonus:{Survival:.08,Projection:.04},featureBonus:{Awareness:.18}},{skillId:"keen_eye",name:"Keen Eye",description:"Perceive value and patterns in crowded rooms.",branch:"perception",unlockRadius:1.8,vectorProfile:{Comprehension:.35,Survival:.25},unlockRequirements:[{kind:"min_attribute",key:"insight",value:6,description:"Need Insight 6+"},{kind:"min_trait",key:"Comprehension",value:.05,description:"Need Comprehension focus"}],useRequirements:[],traitBonus:{Comprehension:.06},featureBonus:{Awareness:.25}},{skillId:"shadow_hand",name:"Shadow Hand",description:"Steal from distracted targets when opportunity appears.",branch:"guile",unlockRadius:1.9,vectorProfile:{Constraint:.25,Survival:.35,Projection:.2},unlockRequirements:[{kind:"skill_unlocked",key:"keen_eye",description:"Need Keen Eye"},{kind:"min_attribute",key:"agility",value:6,description:"Need Agility 6+"},{kind:"min_feature",key:"Awareness",value:.2,description:"Need Awareness"}],useRequirements:[{kind:"target_exists",description:"Need a target"},{kind:"target_has_item_tag",key:"loot",description:"Target must carry loot"}],traitBonus:{Survival:.05,Constraint:.04},featureBonus:{Guile:.25}},{skillId:"battle_broadcast",name:"Battle Broadcast",description:"Turn danger into audience momentum while streaming.",branch:"fame",unlockRadius:2,vectorProfile:{Direction:.35,Projection:.25,Survival:.3},unlockRequirements:[{kind:"min_attribute",key:"might",value:7,description:"Need Might 7+"},{kind:"min_feature",key:"Fame",value:5,description:"Need Fame 5+"}],useRequirements:[],traitBonus:{Direction:.06,Projection:.05},featureBonus:{Momentum:.5}},{skillId:"riposte",name:"Riposte",description:"Counter after a successful block in close combat.",branch:"combat",unlockRadius:2.1,vectorProfile:{Direction:.3,Constraint:.22,Survival:.26},unlockRequirements:[{kind:"min_attribute",key:"might",value:6,description:"Need Might 6+"},{kind:"min_trait",key:"Direction",value:.05,description:"Need Direction focus"}],useRequirements:[{kind:"target_exists",description:"Need a target"}],traitBonus:{Direction:.04,Constraint:.03},featureBonus:{Momentum:.18}},{skillId:"guardian_step",name:"Guardian Step",description:"Protect companions by controlling spacing and threat.",branch:"combat",unlockRadius:2,vectorProfile:{Empathy:.2,Direction:.24,Constraint:.22},unlockRequirements:[{kind:"min_attribute",key:"willpower",value:6,description:"Need Willpower 6+"},{kind:"min_trait",key:"Empathy",value:.02,description:"Need Empathy focus"}],useRequirements:[],traitBonus:{Empathy:.03,Direction:.03},featureBonus:{Awareness:.14}},{skillId:"rumorcraft",name:"Rumorcraft",description:"Shape rumor spread and increase misinformation resistance.",branch:"social",unlockRadius:2.2,vectorProfile:{Empathy:.35,Comprehension:.32,Projection:.18},unlockRequirements:[{kind:"min_feature",key:"Fame",value:3,description:"Need Fame 3+"},{kind:"min_trait",key:"Empathy",value:.05,description:"Need Empathy focus"}],useRequirements:[],traitBonus:{Empathy:.05,Comprehension:.04},featureBonus:{Awareness:.1,Momentum:.08}},{skillId:"rune_smith",name:"Rune Smith",description:"Refine effects and reroll weak room/item synergy outcomes.",branch:"craft",evolvesFrom:"battle_broadcast",requiresRuneForge:!0,unlockRadius:2,vectorProfile:{Construction:.42,Direction:.28,Projection:.2},unlockRequirements:[{kind:"min_attribute",key:"insight",value:7,description:"Need Insight 7+"},{kind:"min_feature",key:"Momentum",value:1.2,description:"Need Momentum 1.2+"}],useRequirements:[],traitBonus:{Construction:.08,Direction:.03},featureBonus:{Awareness:.2,Momentum:.2}},{skillId:"pulse_sense",name:"Pulse Sense",description:"Detect nearby hostiles and faction presence without direct sight.",branch:"perception",unlockRadius:2.1,vectorProfile:{Comprehension:.28,Projection:.24,Survival:.24},unlockRequirements:[{kind:"min_attribute",key:"insight",value:6,description:"Need Insight 6+"},{kind:"min_feature",key:"Awareness",value:.4,description:"Need Awareness 0.4+"}],useRequirements:[],traitBonus:{Comprehension:.03,Projection:.03},featureBonus:{Awareness:.2}}]},jt=N.record(N.string(),N.number()),N0=N.object({kind:N.string(),key:N.string().optional(),value:N.union([N.number(),N.string()]).optional(),description:N.string().optional()}),aP=N.object({energyDelta:N.number().optional(),energyDeltaBase:N.number().optional(),energyDeltaRestRoom:N.number().optional(),xpDelta:N.number().optional(),reputationDelta:N.number().optional(),effortCost:N.number().optional(),traitDelta:jt.optional(),featureDelta:jt.optional(),noTargetTraitDelta:jt.optional()}),sP=N.object({canonicalSeedV1:N.number().int().positive(),roomInfluenceScale:N.number().nonnegative(),deedProjection:N.object({perFeatureCap:N.number().positive(),globalBudget:N.number().positive()}),entityPressure:N.object({cap:N.number().int().positive(),countItemsAsEntities:N.boolean()}),actions:N.record(N.string(),aP)}),uP=N.object({actions:N.array(N.object({actionType:N.string(),group:N.string(),requiresTarget:N.boolean(),requiresEncounter:N.boolean().optional(),requiresRoomFeature:N.string().optional()}))}),cP=N.object({intents:N.array(N.object({actionType:N.string(),uiIntent:N.string(),uiScreen:N.string(),uiPriority:N.number().int()}))}),lP=N.object({policies:N.array(N.object({policyId:N.string(),label:N.string(),entityKindFilter:N.array(N.string()),priorityOrder:N.array(N.string())}))}),dP=N.object({templates:N.array(N.object({feature:N.string(),baseVector:jt}))}),fP=N.object({rarityTiers:N.array(N.string()),items:N.array(N.object({itemId:N.string(),tags:N.array(N.string()),vectorDelta:jt}))}),pP=N.object({skills:N.array(N.object({skillId:N.string(),name:N.string(),description:N.string(),branch:N.string(),branchGroup:N.string().optional(),exclusiveWith:N.array(N.string()).optional(),evolvesFrom:N.string().optional(),requiresRuneForge:N.boolean().optional(),unlockRadius:N.number().positive().optional(),vectorProfile:jt.optional(),unlockRequirements:N.array(N0).optional(),useRequirements:N.array(N0).optional(),traitBonus:jt.optional(),featureBonus:jt.optional()}))}),mP=N.object({archetypes:N.array(N.object({archetypeId:N.string(),label:N.string(),description:N.string(),vectorProfile:jt,featureProfile:jt.optional(),preferredSkills:N.array(N.string()).optional()}))}),hP=N.object({clusters:N.array(N.object({clusterId:N.string(),title:N.string(),centerVector:jt,radius:N.number().positive(),options:N.array(N.object({optionId:N.string(),label:N.string(),line:N.string(),clusterId:N.string(),anchorVector:jt,radius:N.number().positive(),effectVector:jt,responseText:N.string(),nextOptionId:N.string().optional(),requiresRoomFeature:N.string().optional(),requiresItemTagPresent:N.string().optional(),requiresItemTagAbsent:N.string().optional(),requiresSkillId:N.string().optional(),takeItemTag:N.string().optional()}))}))}),gP=N.object({cutscenes:N.array(N.object({cutsceneId:N.string(),title:N.string(),once:N.boolean()}))}),vP=N.object({mode:N.enum(["fixed","total_levels"]),value:N.number().int().positive().optional()}),yP=N.discriminatedUnion("kind",[N.object({kind:N.literal("action"),actionType:N.string(),amount:N.number().int().positive().default(1)}),N.object({kind:N.literal("chapter_completed"),amount:N.number().int().positive().default(1)}),N.object({kind:N.literal("escape"),amount:N.number().int().positive().optional(),setToRequired:N.boolean().optional()})]),bP=N.object({quests:N.array(N.object({questId:N.string(),title:N.string(),description:N.string(),requiredProgress:vP,progressRules:N.array(yP)}))}),xP=N.discriminatedUnion("metric",[N.object({metric:N.literal("turn_index"),gte:N.number().int().nonnegative()}),N.object({metric:N.literal("player_feature"),key:N.string(),gte:N.number()})]),wP=N.object({events:N.array(N.object({eventId:N.string(),kind:N.enum(["deterministic","emergent"]),trigger:xP,probability:N.number().min(0).max(1).optional(),message:N.string(),traitDelta:jt.optional(),featureDelta:jt.optional(),globalEnemyLevelBonusDelta:N.number().int().optional()}))}),$r=sP.parse(YT),_P=uP.parse(HT),Q0=cP.parse(WT),ew=lP.parse(JT),tw=dP.parse(iP),kc=fP.parse(rP),rw=pP.parse(oP),nw=mP.parse(XT),iw=hP.parse(eP),IP=gP.parse(QT),mg=bP.parse(nP),ow=wP.parse(tP),$P=$r.canonicalSeedV1,aw="v1.0.0";function U0(e,t){if(!e||typeof e!="object")return 0;let n=e[t];return Number.isFinite(Number(n))?Number(n):0}var Ec={fogMetrics(e){let t=Number(e.level??1),n=U0(e.traits,"Comprehension"),i=U0(e.features,"Awareness"),r=t>=10?1:0,o=n>=1?1:0,a=i>=1?1:0;return{radius:Math.max(1,Math.min(4,1+r+o+a)),levelFactor:r,comprehensionFactor:o,awarenessFactor:a}}},tr=["Comprehension","Constraint","Construction","Direction","Empathy","Equilibrium","Freedom","Levity","Projection","Survival"],sw=["Fame","Effort","Awareness","Guile","Momentum"],hg={gameTitle:"Escape the Dungeon",playerName:"Kael",totalLevels:12,levelRows:5,levelColumns:10,roomsPerLevel:50,chaptersPerAct:4,randomSeed:7,minTraitValue:-1,maxTraitValue:1,defaultPlayerHealth:100,defaultPlayerEnergy:1,dungeoneersPerLevel:4,treasureRoomsPerLevel:20,runeForgeRoomsPerLevel:5,hostileSpawnPerTurn:1,companionsMax:1,baseXpPerLevel:30,bossLevelBonus:2,hostileLevelBonus:1,canonicalSeed:20260227,entityPressureCap:120,countItemsAsEntitiesForPressure:!0,npcActionPolicyIds:{}},vc=(e=0)=>{let t={};for(let n of tr)t[n]=e;return t},yc=()=>({Fame:0,Effort:100,Awareness:0,Guile:0,Momentum:0}),SP=(e={})=>({might:e.might??5,agility:e.agility??5,insight:e.insight??5,willpower:e.willpower??5}),bc=e=>structuredClone(e),er=(e,t,n)=>e<t?t:e>n?n:e,ka=(e,t,n)=>{let i=0;for(let r of n){let o=(e[r]??0)-(t[r]??0);i+=o*o}return Math.sqrt(i)},kP=(e,t)=>{let n={...e};for(let[i,r]of Object.entries(t))n[i]=(n[i]??0)+r;return n},Aa=class{constructor(e=7){D(this,"state");let t=Number.isFinite(e)?Math.floor(e):7;this.state=t>>>0||7}nextFloat(){let e=this.state;return e^=e<<13,e^=e>>>17,e^=e<<5,this.state=e>>>0,this.state/4294967296}nextInt(e){return e<=0?0:Math.floor(this.nextFloat()*e)}pick(e){if(e.length===0)throw new Error("Cannot pick from empty list");return e[this.nextInt(e.length)]}shuffle(e){let t=[...e];for(let n=t.length-1;n>0;n-=1){let i=this.nextInt(n+1),r=t[n];t[n]=t[i],t[i]=r}return t}getState(){return this.state>>>0}setState(e){let t=Math.floor(e)>>>0;this.state=t||7}},F0=(e,t=30)=>Math.max(1,e.baseLevel+Math.floor(e.xp/t)),AP=class{constructor(e=10){D(this,"rng");this.rng=new Aa(e)}spar(e,t,n={}){let i=F0(e),r=F0(t),o=Math.max(-3,Math.min(5,i-r)),a=e.attributes.might,s=e.attributes.agility,l=n.weaponPower??1,d=this.rng.nextFloat()*2.5,m=6+a*.6+s*.35+o*1.1+l*2+d,v=Math.max(1,Math.round(m)),h=n.lethal?0:1,b=Math.max(h,t.health-v),_=b<=0;t.health=b;let E=n.weaponName??"bare hands",S=_?`${e.name} defeats ${t.name} using ${E}.`:`${e.name} hits ${t.name} for ${v} using ${E}.`;return{damage:v,defenderHealthAfter:b,defenderDefeated:_,weaponUsed:E,message:S}}},EP=(e,t,n,i)=>{let r=1;return t.actionType==="rest"&&(r+=e.energy<.5?4:.5,n==="rest"&&(r+=1.5)),t.actionType==="train"&&(r+=n==="training"?4:.6),t.actionType==="search"&&(r+=n==="treasure"?4:1.2),(t.actionType==="talk"||t.actionType==="choose_dialogue")&&(r+=n==="dialogue"?3:1),t.actionType==="fight"&&(r+=i>0?5:.2,(e.entityKind==="boss"||e.entityKind==="hostile")&&(r+=2)),t.actionType==="flee"&&(r+=i>0?1.1:.05,(e.entityKind==="hostile"||e.entityKind==="boss")&&(r+=.2),e.health<35&&(r+=1.8)),t.actionType==="murder"&&(r+=e.faction==="laughing_face"?5:0),t.actionType==="live_stream"&&(r+=e.isPlayer?2:.8),t.actionType==="move"&&(r+=1.2,e.entityKind==="hostile"&&(r+=2.2)),t.actionType==="evolve_skill"&&(r+=n==="rune_forge"?4.5:.4),Math.max(.05,r)},TP=(e,t,n,i,r)=>{if(t.length===0)return{actionType:"rest",payload:{}};if(e.entityKind==="hostile"||e.entityKind==="boss"){let m=t.filter(v=>v.actionType==="fight"||v.actionType==="murder");if(m.length>0&&i>0)return r.pick(m)}let o=t.map(m=>({action:m,weight:EP(e,m,n,i)})),a=0;for(let m of o)a+=m.weight;let s=r.nextFloat()*a,l=0;for(let m of o)if(l+=m.weight,s<=l)return m.action;let d=o.at(-1);return d?d.action:{actionType:"rest",payload:{}}},PP=class{constructor(e){D(this,"definitions");D(this,"seen",new Set);this.definitions=e}setSeen(e){this.seen=new Set(e)}seenIds(){return[...this.seen]}trigger(e){let t=[];for(let n of this.definitions)n.once&&this.seen.has(n.cutsceneId)||this.matches(n,e)&&(n.once&&this.seen.add(n.cutsceneId),t.push({cutsceneId:n.cutsceneId,title:n.title,text:n.text}));return t}matches(e,t){return e.requiredActionType&&e.requiredActionType!==t.actionType?!1:e.triggerKind==="item_tag"?!!(e.requiredItemTag&&t.foundItemTags.includes(e.requiredItemTag)):e.triggerKind==="skill_unlock"?!!(e.requiredSkillId&&t.unlockedSkillIds.includes(e.requiredSkillId)):e.triggerKind==="attribute_milestone"?e.minAttribute?Number(t.actor.attributes[e.minAttribute.key]??0)>=e.minAttribute.value:!1:e.triggerKind==="fame_milestone"?e.minFame===void 0?!1:Number(t.actor.features.Fame??0)>=e.minFame:e.triggerKind==="chapter_complete"?t.chapterCompleted!==void 0:e.triggerKind==="escape"?!!t.escaped:!1}},DP=()=>new PP([{cutsceneId:"cutscene_treasure_first",title:"A Locked Cache",text:"The chest seal breaks. Someone passed here before you, and they were in a hurry.",triggerKind:"item_tag",requiredItemTag:"treasure",once:!0},{cutsceneId:"cutscene_training_might",title:"Steel Memory",text:"Your stance stops shaking. The dungeon no longer feels bigger than you.",triggerKind:"attribute_milestone",requiredActionType:"train",minAttribute:{key:"might",value:8},once:!0},{cutsceneId:"cutscene_stream_first",title:"Signal in the Dark",text:"A weak stream signal catches. The audience count moves from zero to one.",triggerKind:"fame_milestone",requiredActionType:"live_stream",minFame:1,once:!0},{cutsceneId:"cutscene_shadow_hand_unlock",title:"Hands Like Smoke",text:"You map weight and motion in a blink. Theft feels less like chance and more like geometry.",triggerKind:"skill_unlock",requiredSkillId:"shadow_hand",once:!0},{cutsceneId:"cutscene_chapter_complete",title:"Chapter Closed",text:"Another level is behind you. The dungeon's story has one less page to write.",triggerKind:"chapter_complete",once:!1},{cutsceneId:"cutscene_escape",title:"Surface Air",text:"The final gate opens. Kael steps out carrying twelve chapters of proof.",triggerKind:"escape",once:!0}]),uw=e=>e.trim().toLowerCase().replace(/\s+/g," "),cw=e=>{let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return(t>>>0).toString(16).padStart(8,"0")},zP=(e,t)=>{let n=cw(e),i=[],r=Number.parseInt(n,16)||1;for(let o=0;o<t;o+=1){r^=r<<13,r^=r>>>17,r^=r<<5;let a=r>>>0;i.push(a/4294967295*2-1)}return i},lw=e=>{let t=0;for(let i of e)t+=i*i;let n=Math.sqrt(t);return n<1e-12?e.map(()=>0):e.map(i=>i/n)},OP=(e,t)=>{let n=Math.min(e.length,t.length);if(n===0)return 0;let i=0,r=0,o=0;for(let a=0;a<n;a+=1){let s=e[a]??0,l=t[a]??0;i+=s*l,r+=s*s,o+=l*l}return r<1e-12||o<1e-12?0:i/(Math.sqrt(r)*Math.sqrt(o))},Sc=class{constructor(e=96){D(this,"dimension");this.dimension=e}modelName(){return"hash-token-embedding"}modelVersion(){return"1"}encode(e){let n=uw(e).match(/[A-Za-z0-9_']+/g)??[];if(n.length===0)return Array.from({length:this.dimension},()=>0);let i=Array.from({length:this.dimension},()=>0);for(let r of n){let o=zP(r,this.dimension);for(let a=0;a<this.dimension;a+=1)i[a]=(i[a]??0)+(o[a]??0)}return lw(i)}},RP=class{constructor(e=new Sc){D(this,"provider");D(this,"records",new Map);this.provider=e}embedCanonical(e,t,n){let i=uw(n),r=cw(i),o=`${e}:${t}:${r}:${this.provider.modelName()}:${this.provider.modelVersion()}`,a=this.records.get(o);if(a)return a;let s=this.provider.encode(i),l={sourceType:e,sourceId:t,canonicalText:i,textHash:r,modelName:this.provider.modelName(),modelVersion:this.provider.modelVersion(),dimension:this.provider.dimension,vector:s};return this.records.set(o,l),l}size(){return this.records.size}},L0=class{constructor(e,t){D(this,"provider");D(this,"anchorVectors");this.provider=e,this.anchorVectors={};for(let[n,i]of Object.entries(t))this.anchorVectors[n]=this.provider.encode(i)}projectVector(e,t=.2,n={perFeatureCap:.2,globalBudget:.35}){let i=lw(e),r={},o={},a={};for(let[m,v]of Object.entries(this.anchorVectors)){let h=OP(i,v);a[m]=h,r[m]=h*t,o[m]=er(r[m]??0,-n.perFeatureCap,n.perFeatureCap)}let s=0;for(let m of Object.values(o))s+=Math.abs(m);let l=s>n.globalBudget?n.globalBudget/s:1,d={};for(let[m,v]of Object.entries(o))d[m]=v*l;return{rawDeltas:r,cappedDeltas:o,finalDeltas:d,scaleFactor:l,similarities:a}}projectText(e,t=.2,n){return this.projectVector(this.provider.encode(e),t,n)}},CP={Comprehension:"understanding patterns and hidden causes",Constraint:"discipline restraint and strict control",Construction:"building tools practical structures engineering",Direction:"leadership and clear purpose",Empathy:"care compassion attentive listening",Equilibrium:"balance calm stable judgment",Freedom:"independence exploration improvisation",Levity:"humor hopeful lightness",Projection:"future planning and ambition",Survival:"resilience safety and endurance"},jP={Fame:"attention audience reach crowd engagement",Effort:"spent stamina sustained work exertion",Awareness:"perception noticing details situational awareness",Guile:"deception stealth opportunistic manipulation",Momentum:"building pace escalating progress rising pressure"},MP=class{constructor(e=new RP(new Sc(96)),t=$r.deedProjection){D(this,"store");D(this,"traitProjector");D(this,"featureProjector");D(this,"budget");this.store=e,this.traitProjector=new L0(new Sc(96),CP),this.featureProjector=new L0(new Sc(96),jP),this.budget=t}canonicalText(e){let t=[...e.tags].sort((n,i)=>n.localeCompare(i));return[`deed_id:${e.deedId}`,`actor:${e.actorId}`,`actor_name:${e.actorName}`,`subject:${e.subjectId}`,`source_entity:${e.sourceEntityId??e.actorId}`,`belief_state:${e.beliefState??"verified"}`,`confidence:${Number(e.confidence??1).toFixed(2)}`,`type:${e.deedType}`,`title:${e.title}`,`summary:${e.summary}`,`depth:${e.depth}`,`room:${e.roomId}`,`turn:${e.turnIndex}`,`tags:${t.join("|")}`].join(`
`)}vectorize(e){let t=this.canonicalText(e),n=this.store.embedCanonical("deed",e.deedId,t),i=this.traitProjector.projectVector(n.vector,.2,this.budget),r=this.featureProjector.projectVector(n.vector,.2,this.budget);return{deedId:e.deedId,actorEntityId:e.actorId,subjectEntityId:e.subjectId,summary:e.summary,canonicalText:t,sourceAction:e.deedType,turnIndex:e.turnIndex,depth:e.depth,roomId:e.roomId,tags:[...e.tags],beliefState:e.beliefState??"verified",sourceEntityId:e.sourceEntityId??e.actorId,confidence:e.confidence??1,traitDelta:i.finalDeltas,featureDelta:r.finalDeltas,vector:[...n.vector]}}projectIntent(e){let t=this.store.embedCanonical("intent",e,e).vector,n=this.traitProjector.projectVector(t,.18,this.budget),i=this.featureProjector.projectVector(t,.12,this.budget);return{traitDelta:n.finalDeltas,featureDelta:i.finalDeltas}}cacheSize(){return this.store.size()}},NP="corridor",UP="start",FP="stairs_up",LP="stairs_down",qP="escape_gate",dw="training",BP="dialogue",fw="rest",pw="treasure",vr="rune_forge",bg="combat",ZP=[dw,BP,fw,bg],gg=(e={})=>{let t={};for(let n of tr)t[n]=e[n]??0;return t},Ur=(e,t)=>`L${e.toString().padStart(2,"0")}_R${t.toString().padStart(3,"0")}`,q0=(e,t)=>({row:Math.floor(e/t),column:e%t}),KP=e=>{let t=tw.templates.find(n=>n.feature===e);return t?gg(t.baseVector):gg()},VP=(e,t,n)=>{let i=r=>{let o={};for(let[a,s]of Object.entries(r))o[a]=Number(s);return o};if(e===pw){let r=["common","rare","epic","legendary"],o=Math.min(Math.floor((t+n)/12),r.length-1),a=r[o],s={common:i({Direction:.05,Survival:.05}),rare:i({Direction:.1,Survival:.1}),epic:i({Direction:.16,Survival:.14}),legendary:i({Direction:.24,Survival:.22,Projection:.08})};return[{itemId:`treasure_cache_${t}_${n}`,name:"Treasure Cache",rarity:"rare",description:"A sealed chest filled with useful salvage.",tags:["treasure","loot"],vectorDelta:i({Projection:.4,Survival:.2}),isPresent:!0},{itemId:`weapon_${a}_${t}_${n}`,name:`${a.charAt(0).toUpperCase()}${a.slice(1)} Weapon`,rarity:a,description:`A ${a} weapon recovered from the dungeon.`,tags:["weapon","loot",a],vectorDelta:s[a],isPresent:!0}]}return e===bg?[{itemId:`worn_blade_${t}_${n}`,name:"Worn Blade",rarity:"common",description:"Old steel, but still sharp enough to matter.",tags:["weapon"],vectorDelta:i({Direction:.15,Survival:.15}),isPresent:!0}]:[]},GP=(e,t,n,i,r,o)=>{let a=[];for(let h=0;h<e;h+=1)h!==t&&h!==n&&a.push(h);let s=i.shuffle(a),l={},d=0,m=Math.max(0,Math.min(r,s.length));for(let h=0;h<m;h+=1)l[s[d]]=pw,d+=1;let v=Math.max(0,Math.min(o,s.length-d));for(let h=0;h<v;h+=1)l[s[d]]=vr,d+=1;for(let h of ZP){if(d>=s.length)break;l[s[d]]=h,d+=1}return l},HP=(e,t=new Aa(e.randomSeed))=>{let n={},i=e.levelRows,r=e.levelColumns,o=e.roomsPerLevel;if(i*r!==o)throw new Error(`Invalid room grid: ${i}x${r} != ${o}`);for(let a=e.totalLevels;a>=1;a-=1){let s=e.totalLevels-a+1,l=0,d=o-1,m=GP(o,l,d,t,e.treasureRoomsPerLevel,e.runeForgeRoomsPerLevel),v={};for(let h=0;h<o;h+=1){let{row:b,column:_}=q0(h,r),E=Ur(a,h),S=NP;h===l?S=a===e.totalLevels?UP:LP:h===d?S=a===1?qP:FP:m[h]&&(S=m[h]),v[E]={roomId:E,depth:a,chapterNumber:s,row:b,column:_,index:h,feature:S,description:`Depth ${a}, room ${h+1}/${o}. Feature: ${S.replaceAll("_"," ")}.`,baseVector:KP(S),items:VP(S,a,h),exits:{}}}for(let h=0;h<o;h+=1){let{row:b,column:_}=q0(h,r),E=Ur(a,h),S=v[E];b>0&&(S.exits.north={depth:a,roomId:Ur(a,h-r)}),b<i-1&&(S.exits.south={depth:a,roomId:Ur(a,h+r)}),_>0&&(S.exits.west={depth:a,roomId:Ur(a,h-1)}),_<r-1&&(S.exits.east={depth:a,roomId:Ur(a,h+1)})}n[a]={depth:a,chapterNumber:s,rows:i,columns:r,rooms:v,startRoomId:Ur(a,l),exitRoomId:Ur(a,d)}}for(let a=e.totalLevels;a>1;a-=1){let s=n[a],l=n[a-1],d=s.rooms[s.exitRoomId],m=l.rooms[l.startRoomId];d.exits.up={depth:a-1,roomId:l.startRoomId},m.exits.down={depth:a,roomId:s.exitRoomId}}return{title:e.gameTitle,totalLevels:e.totalLevels,chaptersPerAct:e.chaptersPerAct,levels:n,startDepth:e.totalLevels,startRoomId:n[e.totalLevels]?.startRoomId??Ur(e.totalLevels,0),escapeDepth:1,escapeRoomId:n[1]?.exitRoomId??Ur(1,o-1)}},xg=(e,t)=>e.totalLevels-t+1,WP=(e,t)=>{let n=xg(e,t);return Math.floor((n-1)/e.chaptersPerAct)+1},vg=(e,t)=>{let n=e.levels[t];if(!n)throw new Error(`Unknown level depth: ${t}`);return n},Qt=(e,t,n)=>{let r=vg(e,t).rooms[n];if(!r)throw new Error(`Unknown room ${n} at depth ${t}`);return r},B0=(e,t)=>e.items.some(n=>n.isPresent&&n.tags.includes(t)),JP=e=>{let t=e.items.find(n=>n.isPresent);return t?(t.isPresent=!1,t):null},YP=(e,t)=>{let n=e.items.find(i=>i.isPresent&&i.tags.includes(t));return n?(n.isPresent=!1,n):null},Ac=e=>{let t=gg(e.baseVector);for(let n of e.items)if(n.isPresent)for(let i of tr)t[i]+=n.vectorDelta[i]??0;return t},xc=(e,t,n,i,r=[])=>{let a=Qt(e,t,n).exits[i];if(!a)return null;let s=Qt(e,a.depth,a.roomId);return r.includes(s.feature)?null:{depth:a.depth,roomId:a.roomId}},XP=e=>e.includes("legendary")?4:e.includes("epic")?3:e.includes("rare")?2:1,QP=(e,t=3)=>{let n=Ac(e);return tr.map(i=>({trait:i,value:n[i]})).filter(i=>Math.abs(i.value)>1e-4).sort((i,r)=>Math.abs(r.value)-Math.abs(i.value)).slice(0,Math.max(1,t))},lg=(e={})=>{let t={};for(let n of tr)t[n]=e[n]??0;return t},e2=class{constructor(e){D(this,"clusters");this.clusters={};for(let t of e)this.clusters[t.clusterId]=t}roomContextVector(e,t){return kP(e.traits,Ac(t))}evaluateOptions(e,t){let n=this.roomContextVector(e,t),i=[];for(let r of Object.values(this.clusters)){let o=ka(n,r.centerVector,tr);for(let a of r.options){let s=ka(n,a.anchorVector,tr),l=[];o>r.radius&&l.push("cluster_out_of_range"),a.requiresRoomFeature&&a.requiresRoomFeature!==t.feature&&l.push("room_feature_mismatch"),a.requiresItemTagPresent&&!B0(t,a.requiresItemTagPresent)&&l.push("required_item_missing"),a.requiresItemTagAbsent&&B0(t,a.requiresItemTagAbsent)&&l.push("forbidden_item_present"),a.requiresSkillId&&!e.skills[a.requiresSkillId]?.unlocked&&l.push("required_skill_missing"),s>a.radius&&l.push("option_out_of_range"),i.push({optionId:a.optionId,label:a.label,clusterId:a.clusterId,available:l.length===0,distance:s,blockedReasons:l,line:a.line,responseText:a.responseText})}}return i.sort((r,o)=>r.distance-o.distance)}availableOptions(e,t){return this.evaluateOptions(e,t).filter(n=>n.available)}chooseOption(e,t,n){let i=this.findOption(n);if(!i)return{message:"That dialogue option does not exist.",warnings:["dialogue_option_unknown"],traitDelta:{},takenItemId:null,optionId:null,optionLabel:null,optionLine:null,clusterId:null};let r=this.evaluateOptions(e,t).find(l=>l.optionId===i.optionId);if(!r||!r.available)return{message:"That option is out of range right now.",warnings:["dialogue_option_out_of_range"],traitDelta:{},takenItemId:null,optionId:null,optionLabel:null,optionLine:null,clusterId:null};let o=e.traits;for(let[l,d]of Object.entries(i.effectVector))o[l]=Number(o[l]??0)+Number(d);let a=null,s=[];if(i.takeItemTag){let l=YP(t,i.takeItemTag);l?a=l.itemId:s.push("dialogue_item_missing")}return{message:i.responseText,warnings:s,traitDelta:{...i.effectVector},takenItemId:a,optionId:i.optionId,optionLabel:i.label,optionLine:i.line,clusterId:i.clusterId}}findOption(e){let t=e.trim().toLowerCase();for(let n of Object.values(this.clusters))for(let i of n.options)if(i.optionId.toLowerCase()===t)return i;return null}findNextOptionId(e){return this.findOption(e)?.nextOptionId??null}},t2=()=>{let e=iw.clusters.map(t=>({clusterId:t.clusterId,title:t.title,centerVector:lg(t.centerVector),radius:Number(t.radius),options:t.options.map(n=>({optionId:n.optionId,label:n.label,line:n.line,clusterId:n.clusterId,anchorVector:lg(n.anchorVector),radius:Number(n.radius),effectVector:lg(n.effectVector),responseText:n.responseText,requiresRoomFeature:n.requiresRoomFeature,requiresItemTagPresent:n.requiresItemTagPresent,requiresItemTagAbsent:n.requiresItemTagAbsent,requiresSkillId:n.requiresSkillId,takeItemTag:n.takeItemTag,nextOptionId:n.nextOptionId}))}));return new e2(e)},r2=e=>{let t=Number(e.roomVector.Projection??0),n=Number(e.roomVector.Levity??0),i=Number(e.roomVector.Direction??0),r=Number(e.roomVector.Survival??0),o=er(.6*t+.4*n+.25*i+.2*r,-.6,1.6),a=er(Number(e.actionNovelty),0,1.6),s=er(Number(e.riskLevel),0,1.4),l=er(Number(e.momentum)*.04,0,.3),d=e.hasBroadcastSkill?.15:0,m=Math.max(.15,1+.45*o+.3*a+.25*s+l+d),h=1*Math.max(0,Number(e.effortSpent)/10),b=1/(1+Math.max(0,Number(e.currentFame))/120);return{gain:Number(Math.max(0,h*m*b).toFixed(4)),baseGain:h,contextMultiplier:m,diminishingFactor:b,components:{roomInterest:o,novelty:a,risk:s,momentumBonus:l,skillBonus:d}}},n2=(e,t,n)=>{let i=0;for(let r of n)i+=Number(e[r]??0)*Number(t[r]??0);return i},Z0=(e,t)=>{let n=0;for(let i of t){let r=Number(e[i]??0);n+=r*r}return Math.sqrt(n)},K0=(e,t,n)=>{let i=Z0(e,n),r=Z0(t,n);return i<=1e-9||r<=1e-9?0:n2(e,t,n)/(i*r)},mw=e=>{let t={};for(let n of tr)t[n]=Number(e[n]??0);return t},hw=e=>{let t={};for(let n of sw)t[n]=Number(e[n]??0);return t},i2=class{constructor(e){D(this,"archetypes");this.archetypes=e}rank(e){let t=mw(e.traits),n=hw(e.features);return this.archetypes.map(r=>{let o=K0(t,r.vectorProfile,tr),a=K0(n,r.featureProfile,sw),s=r.preferredSkills.filter(d=>e.skills[d]?.unlocked).length,l=Math.min(.24,s*.08);return{archetypeId:r.archetypeId,label:r.label,score:o*.65+a*.25+l}}).sort((r,o)=>o.score-r.score)}classify(e,t){let n=this.rank(e),i=n[0];if(!i||i.score<.12)return t;let r=n.find(o=>o.archetypeId===t);return r&&i.score-r.score<.05?t:i.archetypeId}},o2=()=>{let e=nw.archetypes.map(t=>({archetypeId:t.archetypeId,label:t.label,description:t.description,vectorProfile:mw(t.vectorProfile),featureProfile:hw(t.featureProfile??{}),preferredSkills:[...t.preferredSkills??[]]}));return new i2(e)},dg=e=>e.targetEntity?e.targetEntity:e.nearbyEntities[0]??null,a2=(e,t)=>Number(e.attributes[t]??0),V0=(e,t)=>Number(e.traits[t]??0),s2=(e,t)=>Number(e.features[t]??0),u2=(e,t)=>{let n=e.description??e.kind;if(e.kind==="room_feature_is")return{pass:t.room.feature===String(e.value??""),reason:n};if(e.kind==="min_attribute"){let i=String(e.key??""),r=Number(e.value??0);return{pass:a2(t.actor,i)>=r,reason:n}}if(e.kind==="min_trait"){let i=String(e.key??""),r=Number(e.value??0);return{pass:V0(t.actor,i)>=r,reason:n}}if(e.kind==="min_feature"){let i=String(e.key??""),r=Number(e.value??0);return{pass:s2(t.actor,i)>=r,reason:n}}if(e.kind==="skill_unlocked"){let i=String(e.key??"");return{pass:!!t.actor.skills[i]?.unlocked,reason:n}}if(e.kind==="target_exists")return{pass:dg(t)!==null,reason:n};if(e.kind==="target_has_item_tag"){let i=dg(t),r=String(e.key??"");return i?{pass:i.inventory.some(o=>o.tags.includes(r)),reason:n}:{pass:!1,reason:n}}if(e.kind==="min_reputation")return{pass:t.actor.reputation>=Number(e.value??0),reason:n};if(e.kind==="max_reputation")return{pass:t.actor.reputation<=Number(e.value??0),reason:n};if(e.kind==="faction_is")return{pass:t.actor.faction.toLowerCase()===String(e.value??"").toLowerCase(),reason:n};if(e.kind==="target_faction_is"){let i=dg(t);return i?{pass:i.faction.toLowerCase()===String(e.value??"").toLowerCase(),reason:n}:{pass:!1,reason:n}}if(e.kind==="trait_below"){let i=String(e.key??""),r=Number(e.value??0);return{pass:V0(t.actor,i)<=r,reason:n}}return{pass:!1,reason:`unknown_prerequisite:${e.kind}`}},wc=(e,t)=>{let n=[];for(let i of e){let r=u2(i,t);r.pass||n.push(r.reason)}return{available:n.length===0,blockedReasons:n}},G0=(e={})=>{let t={};for(let n of tr)t[n]=e[n]??0;return t},c2=class{constructor(e){D(this,"skills");this.skills={};for(let t of e)this.skills[t.skillId]=t}branchTaken(e,t){if(!t)return!1;for(let[n,i]of Object.entries(e.skills)){if(!i.unlocked)continue;if(this.skills[n]?.branchGroup===t)return!0}return!1}evaluateUnlocks(e,t,n=[]){let i=[];for(let r of Object.values(this.skills)){if(e.skills[r.skillId]?.unlocked||r.evolvedFrom)continue;let a=[],s=ka(e.traits,r.vectorProfile,tr);s>r.unlockRadius&&a.push("skill_vector_distance"),r.requiresRuneForge&&t.feature!==vr&&a.push("needs_rune_forge"),this.branchTaken(e,r.branchGroup)&&a.push("exclusive_branch_taken");let l=wc(r.unlockRequirements,{actor:e,room:t,nearbyEntities:n});a.push(...l.blockedReasons),i.push({skillId:r.skillId,name:r.name,available:a.length===0,distance:s,blockedReasons:a})}return i.sort((r,o)=>r.distance-o.distance)}unlockNewSkills(e,t,n=[]){let i=[];for(let r of this.evaluateUnlocks(e,t,n)){if(!r.available)continue;let o=this.skills[r.skillId];!o||this.branchTaken(e,o.branchGroup)||(e.skills[r.skillId]={skillId:o.skillId,name:o.name,unlocked:!0,mastery:0},_c(e.traits,o.traitBonus),_c(e.features,o.featureBonus),i.push(o))}return i}canUse(e,t,n,i=[]){let r=this.skills[n];if(!r)return{skillId:n,name:n,available:!1,distance:999,blockedReasons:["unknown_skill"]};if(!e.skills[n]?.unlocked)return{skillId:n,name:r.name,available:!1,distance:999,blockedReasons:["skill_locked"]};let a=wc(r.useRequirements,{actor:e,room:t,nearbyEntities:i});return{skillId:n,name:r.name,available:a.available,distance:ka(e.traits,r.vectorProfile,tr),blockedReasons:a.blockedReasons}}availableEvolutions(e,t){let n=[];for(let i of Object.values(this.skills)){if(!i.evolvedFrom||e.skills[i.skillId]?.unlocked)continue;let r=[];e.skills[i.evolvedFrom]?.unlocked||r.push("parent_skill_locked"),i.requiresRuneForge&&t.feature!==vr&&r.push("needs_rune_forge");let a=wc(i.unlockRequirements,{actor:e,room:t,nearbyEntities:[]});r.push(...a.blockedReasons),n.push({skillId:i.skillId,name:i.name,available:r.length===0,distance:ka(e.traits,i.vectorProfile,tr),blockedReasons:r})}return n.sort((i,r)=>i.distance-r.distance)}evolveSkill(e,t,n){let i=this.skills[n];if(!i)return{ok:!1,reason:"unknown_skill"};if(!i.evolvedFrom)return{ok:!1,reason:"not_evolution_skill"};if(e.skills[n]?.unlocked)return{ok:!1,reason:"already_unlocked"};if(!e.skills[i.evolvedFrom]?.unlocked)return{ok:!1,reason:"parent_skill_locked"};if(i.requiresRuneForge&&t.feature!==vr)return{ok:!1,reason:"needs_rune_forge"};let o=wc(i.unlockRequirements,{actor:e,room:t,nearbyEntities:[]});return o.available?(e.skills[i.skillId]={skillId:i.skillId,name:i.name,unlocked:!0,mastery:0},_c(e.traits,i.traitBonus),_c(e.features,i.featureBonus),{ok:!0,reason:"evolved"}):{ok:!1,reason:o.blockedReasons.join(",")||"blocked"}}},_c=(e,t)=>{for(let[n,i]of Object.entries(t))e[n]=Number(e[n]??0)+Number(i)},l2=()=>{let e=rw.skills.map(t=>({skillId:t.skillId,name:t.name,description:t.description,vectorProfile:G0(t.vectorProfile??{}),unlockRadius:Number(t.unlockRadius??2.2),unlockRequirements:[...t.unlockRequirements??[]],useRequirements:[...t.useRequirements??[]],branchGroup:t.branchGroup??t.branch,evolvedFrom:t.evolvesFrom,requiresRuneForge:t.requiresRuneForge??!1,traitBonus:G0(t.traitBonus??{}),featureBonus:{...t.featureBonus??{}}}));return new c2(e)},H0=["Mira","Dagan","Yori","Sable","Fen","Ibis","Noel","Rook","Cora","Jex","Vale","Ryn","Lio","Tamsin","Orin","Bram"],W0=new Map(ew.policies.map(e=>[e.policyId,e])),d2=new Map(Q0.intents.map(e=>[e.actionType,{uiIntent:e.uiIntent,uiScreen:e.uiScreen,uiPriority:e.uiPriority}])),Ic=1,J0=kc.items.filter(e=>e.tags.includes("armor")||e.tags.includes("relic")||e.tags.includes("fame")).map(e=>e.itemId),f2=(e,t)=>e.requiredProgress.mode==="total_levels"?t.totalLevels:Math.max(1,Number(e.requiredProgress.value??1)),yg=e=>{let t={};for(let[n,i]of Object.entries(e))Math.abs(Number(i))>1e-9&&(t[n]=Number(i));return t},si=(e,t,n,i)=>{let r={};for(let[o,a]of Object.entries(t)){let s=Number(e[o]??0),l=er(s+Number(a),n,i);e[o]=l;let d=l-s;Math.abs(d)>1e-9&&(r[o]=d)}return r},Pn=(e,t)=>{let n={};for(let[i,r]of Object.entries(t)){let o=Number(e[i]??0),a=o+Number(r);e[i]=a;let s=a-o;Math.abs(s)>1e-9&&(n[i]=s)}return n},fg=(...e)=>{let t={};for(let n of e)for(let[i,r]of Object.entries(n))t[i]=Number(t[i]??0)+Number(r);return yg(t)},pg=(e,t,n)=>{let i=Math.floor(e.xp/t.baseXpPerLevel),r=e.entityKind==="hostile"||e.entityKind==="boss"?n:0;return Math.max(1,e.baseLevel+i+r)},$c=(e,t)=>xg(e.dungeon,t),Y0=(e,t)=>WP(e.dungeon,t),Tc=class gw{constructor(t){D(this,"dialogue",t2());D(this,"skills",l2());D(this,"archetypes",o2());D(this,"cutscenes",DP());D(this,"combat");D(this,"deedVectorizer",new MP);D(this,"rng");D(this,"state");this.state=t,this.rng=new Aa(t.config.randomSeed),this.rng.setState(t.rngState),this.cutscenes.setSeen(t.seenCutscenes),this.combat=new AP(t.config.randomSeed+3)}static create(t=hg.randomSeed){let n={...hg,randomSeed:t,canonicalSeed:$r.canonicalSeedV1,entityPressureCap:$r.entityPressure.cap,countItemsAsEntitiesForPressure:$r.entityPressure.countItemsAsEntities},i=new Aa(t+11),r=HP(n,new Aa(t)),o={entityId:"kael",name:n.playerName,isPlayer:!0,entityKind:"player",depth:r.startDepth,roomId:r.startRoomId,traits:vc(0),attributes:{might:6,agility:5,insight:5,willpower:6},features:yc(),faction:"freelancer",reputation:0,archetypeHeading:"wanderer",baseLevel:1,xp:0,health:n.defaultPlayerHealth,energy:n.defaultPlayerEnergy,inventory:[],skills:{},deeds:[],rumors:[],effects:[],companionTo:null,equippedWeaponItemId:null},a={[o.entityId]:o},s=0;for(let b=n.totalLevels;b>=1;b-=1){let _=vg(r,b),E=Object.values(_.rooms).filter(Z=>Z.feature!==vr).map(Z=>Z.roomId),S=i.shuffle(E);for(let Z=0;Z<n.dungeoneersPerLevel;Z+=1){let H=S[Z];if(!H)break;s+=1;let re=s%11===0?"laughing_face":"freelancer",K={entityId:`dungeoneer_${b.toString().padStart(2,"0")}_${String(Z+1).padStart(2,"0")}`,name:H0[(s-1)%H0.length],isPlayer:!1,entityKind:"dungeoneer",depth:b,roomId:H,traits:vc(0),attributes:SP(),features:yc(),faction:re,reputation:re==="laughing_face"?-2:0,archetypeHeading:"delver",baseLevel:Math.max(1,n.totalLevels-b+1),xp:0,health:94,energy:1,inventory:[{itemId:`loot_${b}_${Z+1}`,name:"Worn Pouch",rarity:"common",description:"A pouch with mixed salvage.",tags:["loot","currency"],traitDelta:{Projection:.03}}],skills:{},deeds:[],rumors:[],effects:[],companionTo:null,equippedWeaponItemId:null};K.features.Effort=80,a[K.entityId]=K}let T={entityId:`boss_${b.toString().padStart(2,"0")}`,name:`Depth ${b} Warden`,isPlayer:!1,entityKind:"boss",depth:b,roomId:_.exitRoomId,traits:vc(0),attributes:{might:7+Math.max(0,n.totalLevels-b),agility:6+Math.max(0,Math.floor((n.totalLevels-b)/2)),insight:5+Math.max(0,Math.floor((n.totalLevels-b)/3)),willpower:7+Math.max(0,Math.floor((n.totalLevels-b)/2))},features:yc(),faction:"dungeon_legion",reputation:-5,archetypeHeading:"warden",baseLevel:Math.max(2,n.totalLevels-b+1+n.bossLevelBonus),xp:0,health:120,energy:1,inventory:[{itemId:`boss_weapon_${b.toString().padStart(2,"0")}`,name:"Gatekeeper Halberd",rarity:"epic",description:"A heavy weapon used by gatekeepers.",tags:["weapon","epic"],traitDelta:{Direction:.1,Survival:.1}}],skills:{},deeds:[],rumors:[],effects:[],companionTo:null,equippedWeaponItemId:null};a[T.entityId]=T}let l=Object.fromEntries(mg.quests.map(b=>[b.questId,{questId:b.questId,title:b.title,description:b.description,requiredProgress:f2(b,n),progress:0,isComplete:!1}])),m={[xg(r,r.startDepth)]:{chapter:[],entities:Object.fromEntries(Object.keys(a).map(b=>[b,[]]))}},v={config:n,dungeon:r,entities:a,playerId:o.entityId,quests:l,eventLog:[],actionHistory:[],chapterPages:m,turnIndex:0,rngState:i.getState(),escaped:!1,globalEnemyLevelBonus:0,hostileSpawnIndex:0,activeCompanionId:null,runBranchChoice:null,globalEventFlags:[],seenCutscenes:[],dialogueProgress:{sequence:0,lastOptionId:null,lastClusterId:null,visitedOptionIds:[],visitedClusterIds:[],history:[]}},h=new gw(v);return h.refreshAllArchetypes(),h.record(o,"start",`${n.gameTitle} begins. ${o.name} wakes on depth ${o.depth}.`,[],{},{},{}),h}get player(){return this.state.entities[this.state.playerId]}snapshot(){return this.state.rngState=this.rng.getState(),this.state.seenCutscenes=this.cutscenes.seenIds(),bc(this.state)}restore(t){this.state=bc(t),this.state.dialogueProgress||(this.state.dialogueProgress={sequence:0,lastOptionId:null,lastClusterId:null,visitedOptionIds:[],visitedClusterIds:[],history:[]}),this.rng.setState(this.state.rngState),this.cutscenes.setSeen(this.state.seenCutscenes)}status(){let t=this.player,n=this.state.dialogueProgress.history,i=Ec.fogMetrics({level:pg(t,this.state.config,this.state.globalEnemyLevelBonus),traits:t.traits,features:t.features});return{turn:this.state.turnIndex,depth:t.depth,roomId:t.roomId,chapter:$c(this.state,t.depth),act:Y0(this.state,t.depth),health:t.health,energy:t.energy,level:pg(t,this.state.config,this.state.globalEnemyLevelBonus),faction:t.faction,reputation:t.reputation,archetypeHeading:t.archetypeHeading,archetypeScores:this.archetypes.rank(t).slice(0,3),traits:{...t.traits},features:{...t.features},skills:Object.values(t.skills).filter(r=>r.unlocked).map(r=>r.skillId),inventory:t.inventory.map(r=>({itemId:r.itemId,name:r.name,rarity:r.rarity,tags:[...r.tags],equipped:t.equippedWeaponItemId===r.itemId})),equippedWeaponItemId:t.equippedWeaponItemId,quests:Object.fromEntries(Object.entries(this.state.quests).map(([r,o])=>[r,{progress:o.progress,required:o.requiredProgress,complete:o.isComplete}])),companion:this.state.activeCompanionId,rumors:t.rumors.length,deeds:t.deeds.length,pressure:this.pressureEntityCount(),pressureCap:this.state.config.entityPressureCap,semanticCacheSize:this.deedVectorizer.cacheSize(),formulaRegistryVersion:aw,fogMetrics:i,dialogueProgress:{sequence:this.state.dialogueProgress.sequence,lastOptionId:this.state.dialogueProgress.lastOptionId,lastClusterId:this.state.dialogueProgress.lastClusterId,visitedOptionCount:this.state.dialogueProgress.visitedOptionIds.length,visitedClusterCount:this.state.dialogueProgress.visitedClusterIds.length,recent:n.slice(-5)}}}look(){let t=this.player,n=Qt(this.state.dungeon,t.depth,t.roomId),i=Object.keys(n.exits).join(", ")||"none",r=this.nearbyEntities(t).map(s=>`${s.name}(lvl ${pg(s,this.state.config,this.state.globalEnemyLevelBonus)},${s.faction})`),o=this.availableActions(t).filter(s=>s.available).slice(0,10).map(s=>s.label).join(", "),a=QP(n,3).map(s=>`${s.trait}${s.value>=0?"+":""}${s.value.toFixed(2)}`).join(", ");return[n.description,`Exits: ${i}`,`Nearby: ${r.join(", ")||"none"}`,`Archetype: ${t.archetypeHeading}`,`Room vector: ${a||"neutral"}`,`Available actions: ${o||"none"}`].join(`
`)}availableDialogueOptions(t=this.player){let n=Qt(this.state.dungeon,t.depth,t.roomId);return this.dialogue.availableOptions(t,n).map(i=>({optionId:i.optionId,label:i.label,line:i.line}))}pagesForCurrentChapter(){let t=$c(this.state,this.player.depth);return this.ensureChapterPages(t),this.state.chapterPages[t]}recentDeeds(t=10){return this.player.deeds.slice(-Math.max(1,t)).map(n=>({deedId:n.deedId,actorId:this.player.entityId,actorName:this.player.name,subjectId:n.subjectEntityId,sourceEntityId:n.sourceEntityId,beliefState:n.beliefState,confidence:n.confidence,deedType:n.sourceAction,title:n.summary,summary:n.summary,depth:n.depth,roomId:n.roomId,tags:n.tags,turnIndex:n.turnIndex}))}recentCutscenes(t=10){return this.state.eventLog.filter(n=>n.actionType==="cutscene").slice(-Math.max(1,t))}dispatch(t){let n=this.state.eventLog.length,i=this.player;return this.executeAction(i,t,!0),this.processGlobalEvents(i),this.spawnHostiles(i.depth),this.simulateNpcTurns(),this.enforcePressureCap(i),this.state.rngState=this.rng.getState(),this.state.seenCutscenes=this.cutscenes.seenIds(),{events:this.state.eventLog.slice(n),escaped:this.state.escaped}}availableActions(t=this.player){let n=Qt(this.state.dungeon,t.depth,t.roomId),r=this.nearbyEntities(t).some(d=>this.isEnemy(t,d)),o=[],a=d=>{let m=d2.get(d.actionType);return{...d,uiIntent:m?.uiIntent,uiScreen:m?.uiScreen,uiPriority:m?.uiPriority}};for(let d of Object.keys(n.exits)){let m={actionType:"move",payload:{direction:d}},v=this.availabilityForAction(t,m);o.push(a({actionType:"move",label:`go ${d}`,available:v.available,blockedReasons:v.blockedReasons,payload:{direction:d}}))}let s=[{label:"train",action:{actionType:"train",payload:{}}},{label:"rest",action:{actionType:"rest",payload:{}}},{label:"talk",action:{actionType:"talk",payload:{}}},{label:"search",action:{actionType:"search",payload:{}}},{label:"say <text>",action:{actionType:"speak",payload:{intentText:"..."}}},{label:"fight",action:{actionType:"fight",payload:{}}},{label:"stream",action:{actionType:"live_stream",payload:{effort:Number($r.actions.liveStream?.effortCost??10)}}},{label:"steal",action:{actionType:"steal",payload:{}}},{label:"recruit",action:{actionType:"recruit",payload:{}}},{label:"murder",action:{actionType:"murder",payload:{}}}];for(let d of s){let m=this.availabilityForAction(t,d.action);o.push(a({actionType:d.action.actionType,label:d.label,available:m.available,blockedReasons:m.blockedReasons,payload:d.action.payload}))}if(r)for(let d of Object.keys(n.exits)){let m={actionType:"flee",payload:{direction:d}},v=this.availabilityForAction(t,m);o.push(a({actionType:"flee",label:`flee ${d}`,available:v.available,blockedReasons:v.blockedReasons,payload:{direction:d}}))}let l=this.dialogue.availableOptions(t,n);l.length>0&&o.push(a({actionType:"choose_dialogue",label:`choose ${l[0]?.optionId??"option"}`,available:!0,blockedReasons:[],payload:{options:l.map(d=>({optionId:d.optionId,label:d.label}))}}));for(let d of this.skills.availableEvolutions(t,n))o.push(a({actionType:"evolve_skill",label:`evolve ${d.skillId}`,available:d.available,blockedReasons:d.blockedReasons,payload:{skillId:d.skillId}}));if(t.isPlayer){if(n.feature===vr){for(let d of J0){let m={actionType:"purchase",payload:{itemId:d}},v=this.availabilityForAction(t,m);o.push(a({actionType:"purchase",label:`purchase ${d}`,available:v.available,blockedReasons:v.blockedReasons,payload:{itemId:d}}))}for(let d of t.inventory){let m={actionType:"re_equip",payload:{itemId:d.itemId}},v=this.availabilityForAction(t,m);o.push(a({actionType:"re_equip",label:`re-equip ${d.name}`,available:v.available,blockedReasons:v.blockedReasons,payload:{itemId:d.itemId}}))}}for(let d of t.inventory){let m={actionType:"use_item",payload:{itemId:d.itemId}},v=this.availabilityForAction(t,m);o.push(a({actionType:"use_item",label:`use ${d.name}`,available:v.available,blockedReasons:v.blockedReasons,payload:{itemId:d.itemId}}));let h={actionType:"equip_item",payload:{itemId:d.itemId}},b=this.availabilityForAction(t,h);o.push(a({actionType:"equip_item",label:`equip ${d.name}`,available:b.available,blockedReasons:b.blockedReasons,payload:{itemId:d.itemId}}));let _={actionType:"drop_item",payload:{itemId:d.itemId}},E=this.availabilityForAction(t,_);o.push(a({actionType:"drop_item",label:`drop ${d.name}`,available:E.available,blockedReasons:E.blockedReasons,payload:{itemId:d.itemId}}))}}return o}executeAction(t,n,i){let r=this.availabilityForAction(t,n);if(!r.available){let re=this.record(t,n.actionType,`${t.name} cannot use '${n.actionType}' right now.`,r.blockedReasons,{},{},{});return this.state.actionHistory.push(n.actionType),re}let o=bc(t.traits),a=bc(t.features),s=t.archetypeHeading,l=this.nearbyEntities(t),d=Qt(this.state.dungeon,t.depth,t.roomId),m=this.performAction(t,n,l);this.recordDialogueProgress(t,n,m);let v=si(t.traits,p2(Ac(d),$r.roomInfluenceScale),this.state.config.minTraitValue,this.state.config.maxTraitValue),b=this.skills.unlockNewSkills(t,d,l).map(re=>re.skillId);(b.includes("appraisal")||b.includes("xray"))&&(this.state.runBranchChoice=b.includes("appraisal")?"appraisal":"xray");let _=this.applyDeedSemantics(t,n.actionType,m.message,m.foundItemTags,m.subjectEntityId??t.entityId,t.entityId,"verified",1),E=si(t.traits,_.traitDelta,this.state.config.minTraitValue,this.state.config.maxTraitValue),S=Pn(t.features,_.featureDelta);["live_stream","murder","fight","search"].includes(n.actionType)&&this.spreadRumor(t,m.message,n.actionType==="live_stream"?.65:.45,m.subjectEntityId??t.entityId),n.actionType==="talk"&&this.crossPollinateRumors(t,l);let T=fg(X0(o,t.traits),v,E,m.traitDelta),Z=fg(X0(a,t.features),S,m.featureDelta);this.refreshEntityArchetype(t);let H=this.record(t,n.actionType,m.message,m.warnings,T,Z,{...m.metadata,unlockedSkills:b,archetypeBefore:s,archetypeAfter:t.archetypeHeading});if(this.state.actionHistory.push(n.actionType),this.updateQuests(t,n.actionType,m.chapterCompleted),i&&t.isPlayer){let re=this.cutscenes.trigger({actor:t,actionType:n.actionType,foundItemTags:m.foundItemTags,unlockedSkillIds:b,chapterCompleted:m.chapterCompleted,escaped:this.state.escaped});this.recordCutscenes(t,re)}return H}performAction(t,n,i){let r=Qt(this.state.dungeon,t.depth,t.roomId),o=$r.actions;if(n.actionType==="move"){let a=String(n.payload.direction??"").toLowerCase(),s=xc(this.state.dungeon,t.depth,t.roomId,a,t.entityKind==="hostile"||t.entityKind==="boss"?[vr]:[]);if(!s)return{message:`${t.name} cannot go ${a} from here.`,warnings:["move_blocked"],traitDelta:{},featureDelta:{},metadata:{},foundItemTags:[]};let l=t.depth;t.depth=s.depth,t.roomId=s.roomId;let d;return l>t.depth&&(d=$c(this.state,l)),t.isPlayer&&l===1&&a==="up"&&(this.state.escaped=!0),{message:`${t.name} moves ${a} to ${t.roomId}.`,warnings:[],traitDelta:{},featureDelta:{},metadata:{direction:a,fromDepth:l,toDepth:t.depth},foundItemTags:[],chapterCompleted:d}}if(n.actionType==="train")return t.attributes.might+=1,t.attributes.willpower+=1,t.energy=er(t.energy+Number(o.train?.energyDelta??-.15),0,1),t.xp+=Number(o.train?.xpDelta??5),{message:`${t.name} drills forms and gains strength.`,warnings:[],traitDelta:o.train?.traitDelta??{Constraint:.07,Direction:.05},featureDelta:o.train?.featureDelta??{Momentum:.1},metadata:{},foundItemTags:[]};if(n.actionType==="rest"){let a=r.feature===fw?Number(o.rest?.energyDeltaRestRoom??.3):Number(o.rest?.energyDeltaBase??.2);return t.energy=er(t.energy+a,0,1),{message:`${t.name} takes a breath and recovers energy.`,warnings:[],traitDelta:o.rest?.traitDelta??{Equilibrium:.04,Levity:.02},featureDelta:{},metadata:{restBonus:a},foundItemTags:[]}}if(n.actionType==="talk"){let a=this.resolveTarget(t,n.payload.targetId,i,!1);return a?{message:`${t.name} talks with ${a.name} and trades rumors.`,warnings:[],traitDelta:o.talk?.traitDelta??{Empathy:.05,Comprehension:.03},featureDelta:o.talk?.featureDelta??{Awareness:.05},metadata:{targetId:a.entityId,optionLabel:"talk",clusterId:"social_cluster"},foundItemTags:[],subjectEntityId:a.entityId}:{message:`${t.name} speaks into the dark. No one answers.`,warnings:["talk_no_target"],traitDelta:o.talk?.noTargetTraitDelta??{Empathy:-.01},featureDelta:{},metadata:{},foundItemTags:[]}}if(n.actionType==="search"){let a=JP(r);if(!a)return{message:`${t.name} searches the room but finds nothing new.`,warnings:["search_empty"],traitDelta:o.searchEmpty?.traitDelta??{Comprehension:.01},featureDelta:{},metadata:{},foundItemTags:[]};t.inventory.push({itemId:a.itemId,name:a.name,rarity:a.rarity,description:a.description,tags:[...a.tags],traitDelta:{...a.vectorDelta}});let s=si(t.traits,a.vectorDelta,this.state.config.minTraitValue,this.state.config.maxTraitValue);return{message:`${t.name} finds ${a.name}.`,warnings:[],traitDelta:s,featureDelta:{},metadata:{itemId:a.itemId,rarity:a.rarity},foundItemTags:[...a.tags]}}if(n.actionType==="speak"){let a=String(n.payload.intentText??""),s=this.deedVectorizer.projectIntent(a||"..."),l=si(t.traits,s.traitDelta,this.state.config.minTraitValue,this.state.config.maxTraitValue),d=Pn(t.features,s.featureDelta);return{message:`${t.name} speaks: "${a||"..."}"`,warnings:[],traitDelta:l,featureDelta:d,metadata:{intentText:a},foundItemTags:[]}}if(n.actionType==="fight"){let a=this.resolveTarget(t,n.payload.targetId,i,!0);if(!a)return{message:`${t.name} has nobody to fight here.`,warnings:["fight_no_target"],traitDelta:{},featureDelta:{},metadata:{},foundItemTags:[]};let s=this.selectWeapon(t),l=this.combat.spar(t,a,{weaponPower:s.power,weaponName:s.name,lethal:!1});return t.xp+=Number(o.fight?.xpDelta??4),{message:l.message,warnings:[],traitDelta:o.fight?.traitDelta??{Survival:.03,Direction:.03},featureDelta:o.fight?.featureDelta??{Momentum:.1},metadata:{targetId:a.entityId,damage:l.damage,weapon:l.weaponUsed},foundItemTags:[],subjectEntityId:a.entityId}}if(n.actionType==="flee"){let a=String(n.payload.direction??"").toLowerCase(),s=xc(this.state.dungeon,t.depth,t.roomId,a,t.entityKind==="hostile"||t.entityKind==="boss"?[vr]:[]);if(!s)return{message:`${t.name} cannot flee ${a} from here.`,warnings:["flee_blocked"],traitDelta:{},featureDelta:{},metadata:{direction:a},foundItemTags:[]};let l=t.roomId,d=t.depth;return t.depth=s.depth,t.roomId=s.roomId,{message:`${t.name} flees ${a} to ${t.roomId}.`,warnings:[],traitDelta:o.flee?.traitDelta??{Survival:.01},featureDelta:{},metadata:{direction:a,fromRoomId:l,fromDepth:d,toDepth:t.depth},foundItemTags:[]}}if(n.actionType==="choose_dialogue"){let a=String(n.payload.optionId??""),s=this.dialogue.chooseOption(t,r,a);return{message:s.message,warnings:s.warnings,traitDelta:s.traitDelta,featureDelta:{},metadata:{optionId:a,takenItemId:s.takenItemId,optionLabel:s.optionLabel,optionLine:s.optionLine,clusterId:s.clusterId,nextOptionId:s.optionId?this.dialogue.findNextOptionId(s.optionId):null},foundItemTags:s.takenItemId?["treasure"]:[]}}if(n.actionType==="live_stream"){let a=Number(n.payload.effort??o.liveStream?.effortCost??10),s=Ac(r),l=r2({currentFame:t.features.Fame,effortSpent:a,roomVector:s,actionNovelty:this.state.actionHistory[this.state.actionHistory.length-1]==="live_stream"?.75:1,riskLevel:r.feature===bg?1:r.feature==="treasure"?.6:.35,momentum:t.features.Momentum,hasBroadcastSkill:!!t.skills.battle_broadcast?.unlocked});return t.features.Effort=Math.max(0,t.features.Effort-a),t.features.Fame+=l.gain,t.features.Momentum+=Number(o.liveStream?.featureDelta?.Momentum??.2),{message:`${t.name} goes live and gains ${l.gain.toFixed(2)} Fame.`,warnings:[],traitDelta:o.liveStream?.traitDelta??{Projection:.03},featureDelta:{Fame:l.gain,Effort:-a,Momentum:Number(o.liveStream?.featureDelta?.Momentum??.2)},metadata:{fame:l},foundItemTags:[]}}if(n.actionType==="steal"){let a=this.resolveTarget(t,n.payload.targetId,i,!1);if(!a)return{message:`${t.name} finds no valid target to steal from.`,warnings:["steal_no_target"],traitDelta:{},featureDelta:{},metadata:{},foundItemTags:[]};let s=a.inventory.find(l=>l.tags.includes("loot"));return s?(a.inventory=a.inventory.filter(l=>l.itemId!==s.itemId),t.inventory.push(s),t.features.Guile+=Number(o.steal?.featureDelta?.Guile??.15),{message:`${t.name} steals ${s.name} from ${a.name}.`,warnings:[],traitDelta:o.steal?.traitDelta??{Constraint:.01,Survival:.02},featureDelta:o.steal?.featureDelta??{Guile:.15},metadata:{targetId:a.entityId,itemId:s.itemId},foundItemTags:[...s.tags],subjectEntityId:a.entityId}):{message:`${a.name} has nothing worth stealing.`,warnings:["steal_no_loot"],traitDelta:{},featureDelta:{},metadata:{targetId:a.entityId},foundItemTags:[]}}if(n.actionType==="recruit"){let a=this.resolveTarget(t,n.payload.targetId,i,!1);return a?(a.faction="party",a.companionTo=t.entityId,this.state.activeCompanionId=a.entityId,t.features.Awareness+=.1,{message:`${a.name} joins ${t.name} as a companion.`,warnings:[],traitDelta:o.recruit?.traitDelta??{Empathy:.04},featureDelta:o.recruit?.featureDelta??{Awareness:.1},metadata:{targetId:a.entityId},foundItemTags:[],subjectEntityId:a.entityId}):{message:`${t.name} has no one to recruit here.`,warnings:["recruit_no_target"],traitDelta:{},featureDelta:{},metadata:{},foundItemTags:[]}}if(n.actionType==="murder"){let a=this.resolveTarget(t,n.payload.targetId,i,!0);if(!a)return{message:`${t.name} cannot carry out murder without a target.`,warnings:["murder_no_target"],traitDelta:{},featureDelta:{},metadata:{},foundItemTags:[]};let s=this.selectWeapon(t),l=this.combat.spar(t,a,{weaponPower:s.power+1,weaponName:s.name,lethal:!0});return l.defenderDefeated&&(a.faction="fallen"),t.reputation+=Number(o.murder?.reputationDelta??-2),t.xp+=Number(o.murder?.xpDelta??10),{message:l.message,warnings:[],traitDelta:o.murder?.traitDelta??{Survival:.06,Constraint:-.04},featureDelta:o.murder?.featureDelta??{Momentum:.2},metadata:{targetId:a.entityId,lethal:!0,damage:l.damage},foundItemTags:[],subjectEntityId:a.entityId}}if(n.actionType==="evolve_skill"){let a=String(n.payload.skillId??""),s=this.skills.evolveSkill(t,r,a);return s.ok?{message:`${t.name} evolves skill ${a}.`,warnings:[],traitDelta:{},featureDelta:{},metadata:{skillId:a},foundItemTags:[]}:{message:`${t.name} cannot evolve ${a}: ${s.reason}.`,warnings:[s.reason],traitDelta:{},featureDelta:{},metadata:{skillId:a,reason:s.reason},foundItemTags:[]}}if(n.actionType==="use_item"){let a=String(n.payload.itemId??""),s=this.findInventoryItem(t,a);if(!s)return{message:`${t.name} cannot find item '${a}'.`,warnings:["item_missing"],traitDelta:{},featureDelta:{},metadata:{itemId:a},foundItemTags:[]};let l=si(t.traits,s.traitDelta,this.state.config.minTraitValue,this.state.config.maxTraitValue),d=o.useItem?.featureDelta??{Awareness:.02};Pn(t.features,d);let m=this.isConsumable(s);return m&&(t.inventory=t.inventory.filter(v=>v.itemId!==s.itemId),t.equippedWeaponItemId===s.itemId&&(t.equippedWeaponItemId=null)),{message:m?`${t.name} uses ${s.name} and consumes it.`:`${t.name} uses ${s.name}.`,warnings:[],traitDelta:fg(l,o.useItem?.traitDelta??{}),featureDelta:d,metadata:{itemId:s.itemId,consumed:m},foundItemTags:[...s.tags]}}if(n.actionType==="equip_item"){let a=String(n.payload.itemId??""),s=this.findInventoryItem(t,a);if(!s)return{message:`${t.name} cannot find item '${a}'.`,warnings:["item_missing"],traitDelta:{},featureDelta:{},metadata:{itemId:a},foundItemTags:[]};if(!this.isEquippable(s))return{message:`${s.name} cannot be equipped.`,warnings:["item_not_equippable"],traitDelta:{},featureDelta:{},metadata:{itemId:s.itemId},foundItemTags:[]};t.equippedWeaponItemId=s.itemId;let l=o.equipItem?.featureDelta??{Momentum:.03};return Pn(t.features,l),{message:`${t.name} equips ${s.name}.`,warnings:[],traitDelta:{},featureDelta:l,metadata:{itemId:s.itemId},foundItemTags:[...s.tags]}}if(n.actionType==="drop_item"){let a=String(n.payload.itemId??""),s=this.findInventoryItem(t,a);if(!s)return{message:`${t.name} cannot find item '${a}'.`,warnings:["item_missing"],traitDelta:{},featureDelta:{},metadata:{itemId:a},foundItemTags:[]};t.inventory=t.inventory.filter(d=>d.itemId!==s.itemId),t.equippedWeaponItemId===s.itemId&&(t.equippedWeaponItemId=null);let l=o.dropItem?.featureDelta??{Momentum:-.02};return Pn(t.features,l),{message:`${t.name} drops ${s.name}.`,warnings:[],traitDelta:{},featureDelta:l,metadata:{itemId:s.itemId},foundItemTags:[]}}if(n.actionType==="purchase"){let a=String(n.payload.itemId??""),s=this.buildPurchasedItem(a);if(!s)return{message:`Rune Forge cannot sell '${a}'.`,warnings:["unknown_purchase_item"],traitDelta:{},featureDelta:{},metadata:{itemId:a},foundItemTags:[]};let l=this.consumeCurrencyTokens(t,Ic);if(l<Ic)return{message:`${t.name} lacks currency to purchase ${a}.`,warnings:["insufficient_currency"],traitDelta:{},featureDelta:{},metadata:{itemId:a,required:Ic,consumed:l},foundItemTags:[]};t.inventory.push(s);let d=o.purchase?.traitDelta??{Comprehension:.02,Constraint:.02},m=o.purchase?.featureDelta??{Awareness:.05,Momentum:.03};return si(t.traits,d,this.state.config.minTraitValue,this.state.config.maxTraitValue),Pn(t.features,m),{message:`${t.name} purchases ${s.name} from the Rune Forge.`,warnings:[],traitDelta:d,featureDelta:m,metadata:{itemId:s.itemId,purchasedFrom:a,currencySpent:l},foundItemTags:[...s.tags]}}if(n.actionType==="re_equip"){let a=String(n.payload.itemId??""),s=this.findInventoryItem(t,a);if(!s)return{message:`${t.name} cannot re-equip missing item '${a}'.`,warnings:["item_missing"],traitDelta:{},featureDelta:{},metadata:{itemId:a},foundItemTags:[]};if(!this.isEquippable(s))return{message:`${s.name} cannot be re-equipped.`,warnings:["item_not_equippable"],traitDelta:{},featureDelta:{},metadata:{itemId:s.itemId},foundItemTags:[]};t.equippedWeaponItemId=s.itemId;let l=o.reEquip?.featureDelta??{Momentum:.04};return Pn(t.features,l),{message:`${t.name} re-equips ${s.name} at the Rune Forge.`,warnings:[],traitDelta:{},featureDelta:l,metadata:{itemId:s.itemId},foundItemTags:[...s.tags]}}return{message:`Unknown action ${n.actionType}.`,warnings:["unknown_action"],traitDelta:{},featureDelta:{},metadata:{},foundItemTags:[]}}availabilityForAction(t,n){let i=Qt(this.state.dungeon,t.depth,t.roomId),r=this.nearbyEntities(t);if(n.actionType==="move"){let o=String(n.payload.direction??"");return xc(this.state.dungeon,t.depth,t.roomId,o,t.entityKind==="hostile"||t.entityKind==="boss"?[vr]:[])?{available:!0,blockedReasons:[]}:{available:!1,blockedReasons:["move_blocked"]}}if(n.actionType==="train"&&i.feature!==dw)return{available:!1,blockedReasons:["Need training room"]};if(n.actionType==="talk"&&r.length===0)return{available:!1,blockedReasons:["Need someone nearby"]};if(n.actionType==="fight"&&!this.resolveTarget(t,n.payload.targetId,r,!0))return{available:!1,blockedReasons:["Need an enemy target"]};if(n.actionType==="flee"){if(!r.find(l=>this.isEnemy(t,l)))return{available:!1,blockedReasons:["Need an active encounter"]};let a=String(n.payload.direction??"");if(!a)return{available:!1,blockedReasons:["Need flee direction"]};if(!xc(this.state.dungeon,t.depth,t.roomId,a,t.entityKind==="hostile"||t.entityKind==="boss"?[vr]:[]))return{available:!1,blockedReasons:["flee_blocked"]}}if(n.actionType==="choose_dialogue"){let o=String(n.payload.optionId??"");if(!o)return{available:!1,blockedReasons:["Missing option id"]};if(!this.dialogue.availableOptions(t,i).find(s=>s.optionId===o))return{available:!1,blockedReasons:["Dialogue option unavailable"]}}if(n.actionType==="live_stream"&&t.features.Effort<Number(n.payload.effort??$r.actions.liveStream?.effortCost??10))return{available:!1,blockedReasons:["Need more Effort"]};if(n.actionType==="steal"){if(!t.skills.shadow_hand?.unlocked)return{available:!1,blockedReasons:["Need shadow_hand"]};let o=this.resolveTarget(t,n.payload.targetId,r,!1);if(!o)return{available:!1,blockedReasons:["Need target"]};if(!o.inventory.some(a=>a.tags.includes("loot")))return{available:!1,blockedReasons:["Target has no loot"]}}if(n.actionType==="recruit"){if(this.state.activeCompanionId)return{available:!1,blockedReasons:["Companion slot already filled"]};let o=this.resolveTarget(t,n.payload.targetId,r,!1);if(!o)return{available:!1,blockedReasons:["Need target"]};if(["laughing_face","dungeon_legion"].includes(o.faction))return{available:!1,blockedReasons:["Target faction refuses companionship"]}}if(n.actionType==="murder"){if(!this.resolveTarget(t,n.payload.targetId,r,!0))return{available:!1,blockedReasons:["Need enemy target"]};let a=Number(t.traits.Survival??0)>=.2,s=t.faction==="laughing_face"||t.reputation<=-6;if(!a)return{available:!1,blockedReasons:["Trait gate failed (Survival too low)"]};if(!s)return{available:!1,blockedReasons:["Faction/reputation gate failed"]}}if(n.actionType==="use_item"){if(!t.isPlayer)return{available:!1,blockedReasons:["Player action only"]};let o=String(n.payload.itemId??"");if(!this.findInventoryItem(t,o))return{available:!1,blockedReasons:["Missing item"]}}if(n.actionType==="equip_item"){if(!t.isPlayer)return{available:!1,blockedReasons:["Player action only"]};let o=String(n.payload.itemId??""),a=this.findInventoryItem(t,o);if(!a)return{available:!1,blockedReasons:["Missing item"]};if(!this.isEquippable(a))return{available:!1,blockedReasons:["Item is not equippable"]}}if(n.actionType==="drop_item"){if(!t.isPlayer)return{available:!1,blockedReasons:["Player action only"]};let o=String(n.payload.itemId??"");if(!this.findInventoryItem(t,o))return{available:!1,blockedReasons:["Missing item"]}}if(n.actionType==="purchase"){if(!t.isPlayer)return{available:!1,blockedReasons:["Player action only"]};if(i.feature!==vr)return{available:!1,blockedReasons:["Need rune forge room"]};let o=String(n.payload.itemId??"");if(!o)return{available:!1,blockedReasons:["Missing item id"]};if(!J0.includes(o))return{available:!1,blockedReasons:["Item not sold at rune forge"]};if(this.countCurrencyTokens(t)<Ic)return{available:!1,blockedReasons:["Need currency"]}}if(n.actionType==="re_equip"){if(!t.isPlayer)return{available:!1,blockedReasons:["Player action only"]};if(i.feature!==vr)return{available:!1,blockedReasons:["Need rune forge room"]};let o=String(n.payload.itemId??""),a=this.findInventoryItem(t,o);if(!a)return{available:!1,blockedReasons:["Missing item"]};if(!this.isEquippable(a))return{available:!1,blockedReasons:["Item is not equippable"]}}if(n.actionType==="evolve_skill"){let o=String(n.payload.skillId??"");if(!o)return{available:!1,blockedReasons:["Missing skill id"]};let a=this.skills.availableEvolutions(t,i).find(s=>s.skillId===o);if(!a?.available)return{available:!1,blockedReasons:a?.blockedReasons??["Evolution unavailable"]}}return{available:!0,blockedReasons:[]}}recordDialogueProgress(t,n,i){if(!t.isPlayer||n.actionType!=="talk"&&n.actionType!=="choose_dialogue")return;let r=this.state.dialogueProgress.sequence+1,a=(n.actionType==="choose_dialogue"?String(n.payload.optionId??i.metadata.optionId??""):"")||null,s=String(i.metadata.clusterId??"")||null,l=String(i.metadata.targetId??"")||null,d=n.actionType==="choose_dialogue"?String(i.metadata.optionLabel??`choose ${a??"dialogue"}`):"talk",m=String(i.message??""),v={sequence:r,turnIndex:this.state.turnIndex+1,actionType:n.actionType,optionId:a,clusterId:s,label:d,responseText:m,depth:t.depth,roomId:t.roomId,targetEntityId:l},h=a&&!this.state.dialogueProgress.visitedOptionIds.includes(a)?[...this.state.dialogueProgress.visitedOptionIds,a]:[...this.state.dialogueProgress.visitedOptionIds],b=s&&!this.state.dialogueProgress.visitedClusterIds.includes(s)?[...this.state.dialogueProgress.visitedClusterIds,s]:[...this.state.dialogueProgress.visitedClusterIds];this.state.dialogueProgress={sequence:r,lastOptionId:a??this.state.dialogueProgress.lastOptionId,lastClusterId:s??this.state.dialogueProgress.lastClusterId,visitedOptionIds:h,visitedClusterIds:b,history:[...this.state.dialogueProgress.history,v].slice(-40)}}ensureChapterPages(t){this.state.chapterPages[t]||(this.state.chapterPages[t]={chapter:[],entities:{}});let n=this.state.chapterPages[t];for(let i of Object.keys(this.state.entities))n.entities[i]||(n.entities[i]=[])}record(t,n,i,r,o,a,s){let l=$c(this.state,t.depth);this.ensureChapterPages(l);let d=Y0(this.state,t.depth),m=`${n}@${t.roomId}: ${i}`,v=this.state.chapterPages[l];v.chapter.push(`[${this.state.turnIndex}] ${m}`),v.entities[t.entityId]?.push(`[${this.state.turnIndex}] ${m}`);let h={turnIndex:this.state.turnIndex,actorId:t.entityId,actorName:t.name,actionType:n,depth:t.depth,roomId:t.roomId,chapterNumber:l,actNumber:d,message:i,warnings:[...r],traitDelta:yg(o),featureDelta:yg(a),metadata:{...s}};return this.state.eventLog.push(h),this.state.turnIndex+=1,h}recordCutscenes(t,n){for(let i of n)this.record(t,"cutscene",`${i.title}: ${i.text}`,[],{},{},{cutsceneId:i.cutsceneId})}nearbyEntities(t){return Object.values(this.state.entities).filter(n=>n.entityId===t.entityId||n.health<=0?!1:n.depth===t.depth&&n.roomId===t.roomId)}isEnemy(t,n){return t.entityId===n.entityId||t.faction==="party"&&n.faction==="party"||t.companionTo&&t.companionTo===n.entityId||n.companionTo&&n.companionTo===t.entityId?!1:t.faction!==n.faction}resolveTarget(t,n,i,r){if(n){let o=i.find(a=>a.entityId===n);return!o||r&&!this.isEnemy(t,o)?null:o}for(let o of i)if(!r||this.isEnemy(t,o))return o;return null}findInventoryItem(t,n){return n?t.inventory.find(i=>i.itemId===n)??null:null}isEquippable(t){return t.tags.includes("weapon")||t.tags.includes("armor")}isConsumable(t){return t.tags.includes("consumable")||t.tags.includes("potion")?!0:!this.isEquippable(t)}countCurrencyTokens(t){return t.inventory.filter(n=>n.tags.includes("currency")).length}consumeCurrencyTokens(t,n){let i=Math.max(0,n);if(i===0)return 0;let r=i,o=[];for(let a of t.inventory){if(r>0&&a.tags.includes("currency")){t.equippedWeaponItemId===a.itemId&&(t.equippedWeaponItemId=null),r-=1;continue}o.push(a)}return t.inventory=o,i-r}buildPurchasedItem(t){let n=kc.items.find(r=>r.itemId===t);if(!n)return null;let i=n.tags.find(r=>kc.rarityTiers.includes(r))??"common";return{itemId:`${n.itemId}_shop_${this.state.turnIndex}`,name:n.itemId.replaceAll("_"," "),rarity:i,description:`Rune Forge purchase: ${n.itemId}.`,tags:[...n.tags],traitDelta:{...n.vectorDelta}}}selectWeapon(t){let i=(t.equippedWeaponItemId?t.inventory.find(r=>r.itemId===t.equippedWeaponItemId&&r.tags.includes("weapon")):null)??t.inventory.find(r=>r.tags.includes("weapon"));return i?{name:i.name,power:XP(i.tags)}:{name:"bare hands",power:1}}updateQuests(t,n,i){if(t.isPlayer)for(let r of mg.quests){let o=this.state.quests[r.questId];if(o){for(let a of r.progressRules){if(a.kind==="action"){n===a.actionType&&(o.progress+=Number(a.amount??1));continue}if(a.kind==="chapter_completed"){i!==void 0&&(o.progress+=Number(a.amount??1));continue}a.kind==="escape"&&this.state.escaped&&(a.setToRequired?o.progress=o.requiredProgress:o.progress+=Number(a.amount??1))}o.progress=Math.min(o.requiredProgress,o.progress),o.isComplete=o.progress>=o.requiredProgress}}}refreshEntityArchetype(t){t.archetypeHeading=this.archetypes.classify(t,t.archetypeHeading)}refreshAllArchetypes(){for(let t of Object.values(this.state.entities))this.refreshEntityArchetype(t)}applyDeedSemantics(t,n,i,r,o,a,s,l){let d={deedId:`${t.entityId}_${this.state.turnIndex}_${n}`,actorId:t.entityId,actorName:t.name,subjectId:o,sourceEntityId:a,beliefState:s,confidence:l,deedType:n,title:`${n} at depth ${t.depth}`,summary:i,depth:t.depth,roomId:t.roomId,tags:[...r,n,t.faction],turnIndex:this.state.turnIndex},m=this.deedVectorizer.vectorize(d);return t.deeds.push(m),t.deeds.length>160&&t.deeds.splice(0,t.deeds.length-160),{traitDelta:m.traitDelta,featureDelta:m.featureDelta}}spreadRumor(t,n,i,r){let o=this.rng.nextFloat()<.18?"misinformed":"rumor",a={rumorId:`rumor_${t.entityId}_${this.state.turnIndex}`,sourceEntityId:t.entityId,actorEntityId:t.entityId,subjectEntityId:r,summary:n,beliefState:o,confidence:er(i,0,1),turnIndex:this.state.turnIndex};t.rumors.push(a);for(let s of Object.values(this.state.entities)){if(s.entityId===t.entityId||s.health<=0||s.depth!==t.depth)continue;if(this.rng.nextFloat()<=a.confidence){let d=a.beliefState==="misinformed"||this.rng.nextFloat()<.22?"misinformed":"rumor",m=d==="misinformed"?`${n} (distorted by dungeon chatter)`:n;s.rumors.push({...a,rumorId:`${a.rumorId}_${s.entityId}`,summary:m,beliefState:d,confidence:er(a.confidence-(d==="misinformed"?.2:.08),0,1)}),this.applyDeedSemantics(s,"rumor_heard",m,["rumor"],a.subjectEntityId,a.sourceEntityId,d,er(a.confidence-(d==="misinformed"?.2:.08),0,1))}}}crossPollinateRumors(t,n){let i=t.rumors[t.rumors.length-1];for(let r of n){let o=r.rumors[r.rumors.length-1];if(i){let a=i.beliefState==="misinformed"||this.rng.nextFloat()<.15?"misinformed":"rumor",s=er(i.confidence-.1,0,1);r.rumors.push({...i,rumorId:`${i.rumorId}_shared_${r.entityId}_${this.state.turnIndex}`,beliefState:a,confidence:s}),this.applyDeedSemantics(r,"rumor_shared",i.summary,["rumor"],i.subjectEntityId,i.sourceEntityId,a,s)}if(o){let a=o.beliefState==="misinformed"||this.rng.nextFloat()<.15?"misinformed":"rumor",s=er(o.confidence-.1,0,1);t.rumors.push({...o,rumorId:`${o.rumorId}_shared_${t.entityId}_${this.state.turnIndex}`,beliefState:a,confidence:s}),this.applyDeedSemantics(t,"rumor_shared",o.summary,["rumor"],o.subjectEntityId,o.sourceEntityId,a,s)}}}pressureEntityCount(){let t=Object.values(this.state.entities).filter(o=>o.health>0).length;if(!this.state.config.countItemsAsEntitiesForPressure)return t;let n=this.player.depth,i=this.state.dungeon.levels[n];if(!i)return t;let r=0;for(let o of Object.values(i.rooms))r+=o.items.filter(a=>a.isPresent).length;return t+r}enforcePressureCap(t){let n=this.state.config.entityPressureCap,i=this.pressureEntityCount();if(i<=n)return;let r=Object.values(this.state.entities).filter(a=>a.entityKind==="hostile"&&a.health>0).sort((a,s)=>a.entityId.localeCompare(s.entityId)),o=0;for(let a of r){if(i<=n)break;delete this.state.entities[a.entityId],o+=1,i=this.pressureEntityCount()}o>0&&this.record(t,"pressure_control",`Pressure cap enforced at ${n}. Pruned ${o} hostile entities.`,[],{},{},{cap:n,pruned:o,pressureAfter:i})}eventTriggerSatisfied(t,n){return t.trigger.metric==="turn_index"?this.state.turnIndex>=t.trigger.gte:t.trigger.metric==="player_feature"?Number(n.features[t.trigger.key]??0)>=t.trigger.gte:!1}processGlobalEvents(t){for(let n of ow.events){if(this.state.globalEventFlags.includes(n.eventId)||!this.eventTriggerSatisfied(n,t))continue;if(n.kind==="emergent"){let o=Number(n.probability??0);if(this.rng.nextFloat()>o)continue}this.state.globalEventFlags.push(n.eventId),this.state.globalEnemyLevelBonus+=Number(n.globalEnemyLevelBonusDelta??0);let i=n.traitDelta?si(t.traits,n.traitDelta,this.state.config.minTraitValue,this.state.config.maxTraitValue):{},r=n.featureDelta?Pn(t.features,n.featureDelta):{};this.record(t,"global_event",n.message,[],i,r,{globalEventId:n.eventId,eventKind:n.kind})}}spawnHostiles(t){let i=vg(this.state.dungeon,t).exitRoomId;for(let r=0;r<this.state.config.hostileSpawnPerTurn;r+=1){this.state.hostileSpawnIndex+=1;let a={entityId:`hostile_${String(this.state.hostileSpawnIndex).padStart(5,"0")}`,name:`Crawler ${this.state.hostileSpawnIndex}`,isPlayer:!1,entityKind:"hostile",depth:t,roomId:i,traits:vc(0),attributes:{might:5+this.state.globalEnemyLevelBonus,agility:5+Math.floor(this.state.globalEnemyLevelBonus/2),insight:4,willpower:5+Math.floor(this.state.globalEnemyLevelBonus/2)},features:yc(),faction:"dungeon_legion",reputation:-4,archetypeHeading:"hunter",baseLevel:Math.max(1,this.state.config.totalLevels-t+1+this.state.config.hostileLevelBonus),xp:0,health:70+this.state.globalEnemyLevelBonus*6,energy:1,inventory:[],skills:{},deeds:[],rumors:[],effects:[],companionTo:null,equippedWeaponItemId:null};this.state.entities[a.entityId]=a,this.refreshEntityArchetype(a),this.record(a,"spawn",`${a.name} emerges from ${i} hunting survivors.`,[],{},{},{spawnRoomId:i})}}resolveNpcPolicyId(t,n){let i=n[t];return i&&W0.has(i)?i:null}choosePolicyAction(t,n){if(!n)return null;let i=W0.get(n);if(!i)return null;for(let r of i.priorityOrder){let o=t.find(a=>a.actionType===r);if(o)return o}return null}simulateNpcTurns(t=this.state.config.npcActionPolicyIds){let n=Object.values(this.state.entities).filter(i=>!i.isPlayer&&i.health>0).map(i=>i.entityId).sort((i,r)=>i.localeCompare(r));for(let i of n){let r=this.state.entities[i];if(!r||r.health<=0)continue;let o=this.availableActions(r).filter(d=>d.available).map(d=>{if(d.actionType==="choose_dialogue"){let v=(d.payload.options??[])[0]?.optionId;return{actionType:"choose_dialogue",payload:v?{optionId:v}:{}}}return d.actionType==="evolve_skill"?{actionType:"evolve_skill",payload:{skillId:d.payload.skillId}}:d.actionType==="live_stream"?{actionType:"live_stream",payload:{effort:Number($r.actions.liveStream?.effortCost??10)}}:d.actionType==="speak"?{actionType:"speak",payload:{intentText:"I keep moving."}}:{actionType:d.actionType,payload:{...d.payload}}});if(o.length===0)continue;let a=Qt(this.state.dungeon,r.depth,r.roomId),s=this.nearbyEntities(r).filter(d=>this.isEnemy(r,d)).length,l=null;(r.entityKind==="hostile"||r.entityKind==="boss")&&s===0&&(l=this.choosePredatorMove(r,o)),l||(l=this.choosePolicyAction(o,this.resolveNpcPolicyId(r.entityKind,t))),l||(l=TP(r,o,a.feature,s,this.rng)),this.executeAction(r,l,!1)}}choosePredatorMove(t,n){let i=Object.values(this.state.entities).filter(d=>d.entityId===t.entityId||d.health<=0||d.depth!==t.depth?!1:this.isEnemy(t,d));if(i.length===0)return null;let r=Qt(this.state.dungeon,t.depth,t.roomId),a=[...i].sort((d,m)=>{let v=Qt(this.state.dungeon,d.depth,d.roomId),h=Qt(this.state.dungeon,m.depth,m.roomId),b=Math.abs(r.row-v.row)+Math.abs(r.column-v.column),_=Math.abs(r.row-h.row)+Math.abs(r.column-h.column);return b-_})[0],s=Qt(this.state.dungeon,a.depth,a.roomId),l=[];s.row<r.row?l.push("north"):s.row>r.row&&l.push("south"),s.column<r.column?l.push("west"):s.column>r.column&&l.push("east");for(let d of l){let m=n.find(v=>v.actionType==="move"&&String(v.payload.direction)===d);if(m)return m}return null}},X0=(e,t)=>{let n={},i=new Set([...Object.keys(e),...Object.keys(t)]);for(let r of i){let o=Number(t[r]??0)-Number(e[r]??0);Math.abs(o)>1e-9&&(n[r]=o)}return n},p2=(e,t)=>{let n={};for(let[i,r]of Object.entries(e)){let o=Number(r)*t;Math.abs(o)>1e-9&&(n[i]=o)}return n};var Pc=Sl(vw(),1),yw=Symbol.for("Dexie"),Dc=globalThis[yw]||(globalThis[yw]=Pc.default);if(Pc.default.semVer!==Dc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pc.default.semVer} and ${Dc.semVer}`);var{liveQuery:eC,mergeRanges:tC,rangesOverlap:rC,RangeSet:nC,cmp:iC,Entity:oC,PropModification:aC,replacePrefix:sC,add:uC,remove:cC,DexieYProvider:lC}=Dc;var bw=Dc;var Ea=Sl(zw(),1),Fw=Sl(jw(),1);var z2=class extends bw{constructor(){super("escape_the_dungeon_browser");D(this,"slots");this.version(1).stores({slots:"id,updatedAt"})}},O2=class{constructor(){D(this,"db");this.db=new z2}async saveSlot(e,t,n){await this.db.slots.put({id:e,name:n??e,snapshot:t,updatedAt:Date.now()})}async loadSlot(e){return await this.db.slots.get(e)??null}listSlots(){return this.db.slots.orderBy("updatedAt").reverse().toArray()}async deleteSlot(e){await this.db.slots.delete(e)}},R2=class{constructor(){D(this,"slots",new Map)}saveSlot(e,t,n){return this.slots.set(e,{id:e,name:n??e,snapshot:t,updatedAt:Date.now()}),Promise.resolve()}loadSlot(e){return Promise.resolve(this.slots.get(e)??null)}listSlots(){return Promise.resolve([...this.slots.values()].sort((e,t)=>t.updatedAt-e.updatedAt))}deleteSlot(e){return this.slots.delete(e),Promise.resolve()}},Pg=()=>typeof window>"u"||typeof indexedDB>"u"?new R2:new O2,co=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"item",uo=(e,t,n,i)=>{let r=e.get(t);if(r){r.items.push(i);return}e.set(t,{id:t,title:n,items:[i]})},C2=e=>e==="move"?{id:"movement",title:"Movement"}:["train","rest","search"].includes(e)?{id:"room",title:"Room Actions"}:["talk","choose_dialogue"].includes(e)?{id:"dialogue",title:"Dialogue"}:["fight","flee","steal","recruit","murder"].includes(e)?{id:"conflict",title:"Social and Combat"}:["use_item","equip_item","drop_item"].includes(e)?{id:"inventory",title:"Inventory"}:["purchase","re_equip"].includes(e)?{id:"rune-forge",title:"Rune Forge"}:{id:"special",title:"Special"},j2=(e,t="")=>`action-${[e.actionType,co(e.label),t].filter(Boolean).join("-")}`,M2=e=>{let t=new Map;uo(t,"utility","Quick View",{id:"action-look-around",label:"Look Around",available:!0,blockedReasons:[],action:{kind:"system",systemAction:"look"}}),uo(t,"utility","Quick View",{id:"action-refresh-status",label:"Refresh Status",available:!0,blockedReasons:[],action:{kind:"system",systemAction:"status"}}),uo(t,"utility","Quick View",{id:"action-save-slot-a",label:"Save Slot A",available:!0,blockedReasons:[],action:{kind:"system",systemAction:"save_slot"}}),uo(t,"utility","Quick View",{id:"action-load-slot-a",label:"Load Slot A",available:!0,blockedReasons:[],action:{kind:"system",systemAction:"load_slot"}});for(let i of e){let r=C2(i.actionType);if(i.actionType==="choose_dialogue"){let a=(i.payload.options??[]).filter(s=>s.optionId);for(let s of a)uo(t,r.id,r.title,{id:`action-dialogue-${co(s.optionId)}`,label:`Choose: ${s.label}`,available:i.available,blockedReasons:[...i.blockedReasons],uiIntent:i.uiIntent,uiScreen:i.uiScreen,uiPriority:i.uiPriority,action:{kind:"player",playerAction:{actionType:"choose_dialogue",payload:{optionId:s.optionId}}}});continue}let o={...i.payload};i.actionType==="speak"&&(o.intentText="I will survive this floor."),uo(t,r.id,r.title,{id:j2(i,String(o.direction??o.skillId??"")),label:i.label,available:i.available,blockedReasons:[...i.blockedReasons],uiIntent:i.uiIntent,uiScreen:i.uiScreen,uiPriority:i.uiPriority,action:{kind:"player",playerAction:{actionType:i.actionType,payload:o}}})}let n=[...t.values()];for(let i of n)i.items.sort((r,o)=>{let a=Number(r.uiPriority??999),s=Number(o.uiPriority??999);return a!==s?a-s:r.label.localeCompare(o.label)});return n},N2=e=>e.actionType==="cutscene"?"cutscene":e.warnings.length>0?"warning":e.actorId==="kael"?"player":"event",U2=e=>({id:`event-${e.turnIndex}-${co(e.actorId)}-${co(e.actionType)}`,tone:N2(e),turnIndex:e.turnIndex,text:`[t${e.turnIndex}] ${e.actorName} ${e.actionType}@${e.roomId}: ${e.message}`}),F2=(e,t)=>({id:`event-${e.turnIndex}-${co(e.actorId)}-warning-${t}`,tone:"warning",turnIndex:e.turnIndex,text:`[t${e.turnIndex}] warning: ${e.warnings[t]}`}),Rc=e=>{let t=e.availableActions();return M2(t)},Mw=e=>[{id:"boot-1",tone:"system",text:"Escape the Dungeon loaded. Click actions in the left column to take turns."},{id:"boot-2",tone:"system",text:e.look()}],Nw=e=>{let t=[];for(let n of e.events){t.push(U2(n));for(let i=0;i<n.warnings.length;i+=1)t.push(F2(n,i))}return t},Uw=e=>{let t=[];for(let n of e.events){if(n.actionType!=="cutscene")continue;let i=n.message.indexOf(":"),r=i>-1?n.message.slice(0,i).trim():"Cutscene",o=i>-1?n.message.slice(i+1).trim():n.message;t.push({id:`cutscene-${n.turnIndex}-${co(r)}`,title:r,text:o,turnIndex:n.turnIndex})}return t};var Lw="autosave",qw=7;function L2(e){return[`Depth ${e.depth??"?"} - ${e.roomId??"?"}`,`Act ${e.act??"?"} / Chapter ${e.chapter??"?"}`,`HP ${e.health??"?"} | Energy ${e.energy??"?"} | Level ${e.level??"?"}`].join(`
`)}function Bw(){let e=Tc.create(qw),t=Pg();return{engine:e,persistence:t,look:e.look(),status:e.status(),groups:Rc(e)}}async function Dg(){let e=Pg(),t=await e.loadSlot(Lw);if(!t)return null;let n=Tc.create(qw);return n.restore(t.snapshot),{engine:n,persistence:e,look:n.look(),status:n.status(),groups:Rc(n)}}async function Cc(e){await e.persistence.saveSlot(Lw,e.engine.snapshot(),"Auto Save")}function Zw(e,t){let n=e.engine.dispatch(t),i=Nw(n),r=Uw(n);return{ok:!0,feed:i,cutscenes:r,escaped:n.escaped,look:e.engine.look(),status:e.engine.status(),statusText:L2(e.engine.status())}}function zg(e){return{...e,look:e.engine.look(),status:e.engine.status(),groups:Rc(e.engine)}}var Et={panelBg:[20,28,48],panelBorder:[44,62,100],headerBg:[28,36,62],headerTitle:[230,230,240],headerSubtitle:[170,180,205]},Xr={neutral:{bg:[42,54,82],fg:[196,208,232]},good:{bg:[30,78,52],fg:[192,238,208]},warn:{bg:[84,66,28],fg:[245,222,162]},danger:{bg:[92,34,40],fg:[250,196,202]},accent:{bg:[58,76,108],fg:[226,230,240]}},ui={chapter:[246,221,162],dialogue:[206,226,248],combat:[246,182,182],system:[176,212,176],narrator:[218,214,236],plain:[175,178,190]},Kw={move:"[MV]",fight:"[ATK]",flee:"[RUN]",talk:"[TALK]",choose_dialogue:"[DIA]",rest:"[REST]",train:"[TRN]",search:"[SRCH]",inspect:"[LOOK]",use_item:"[USE]",equip_item:"[EQP]",drop_item:"[DROP]",purchase:"[BUY]",re_equip:"[RE-EQ]",evolve_skill:"[EVO]",stream:"[CAST]",save_slot:"[SAVE]",load_slot:"[LOAD]",look:"[LOOK]",status:"[STAT]"};var te=8,Tt=16,Ne="ui";function Vw(e,t){return e.length<=t?e:`${e.slice(0,Math.max(0,t-3))}...`}function Qr(e){e.destroyAll(Ne)}function q2(e,t=""){let n=String(e.roomId??"?"),i=String(e.depth??"?");if(!t)return`${n} | Depth ${i}`;let r=t.split(`
`).slice(0,2);return[`${n} | Depth ${i}`,...r].join(" | ")}function Ta(e,t,n,i,r,o=""){let a=q2(r,o);return e.add([e.text(a,{size:11,width:i}),e.pos(t,n),e.color(180,180,180),e.anchor("topleft"),Ne]),n+Tt}function Gw(e,t,n,i){return e.add([e.rect(t,34),e.pos(0,0),e.color(Et.headerBg[0],Et.headerBg[1],Et.headerBg[2]),e.anchor("topleft"),Ne]),e.add([e.text(n,{size:14}),e.pos(te,6),e.color(Et.headerTitle[0],Et.headerTitle[1],Et.headerTitle[2]),e.anchor("topleft"),Ne]),e.add([e.text(i,{size:10}),e.pos(t-te,10),e.color(Et.headerSubtitle[0],Et.headerSubtitle[1],Et.headerSubtitle[2]),e.anchor("topright"),Ne]),34+te}function Ze(e,t,n,i,r,o,a=!0,s){let l=s?.tone??"accent",d=s?.compact??!1,m=d?20:24,v=d?4:6,h=Xr[l],b=a?h.bg:[45,45,45],_=a?[Math.min(255,b[0]+20),Math.min(255,b[1]+20),Math.min(255,b[2]+20)]:[45,45,45],E=e.add([e.rect(i,m,{radius:3}),e.pos(t,n),e.area(),e.anchor("topleft"),e.color(b[0],b[1],b[2]),Ne]);return e.add([e.text(Vw(r,64),{size:10,width:i-8}),e.pos(t+4,n+v),e.anchor("topleft"),e.color(a?h.fg[0]:138,a?h.fg[1]:138,a?h.fg[2]:138),Ne]),a&&(E.onHover(()=>{E.color=e.rgb(_[0],_[1],_[2])}),E.onHoverEnd(()=>{E.color=e.rgb(b[0],b[1],b[2])}),E.onClick(o)),n+m+4}function fo(e,t,n,i,r){e.add([e.rect(i,r,{radius:4}),e.pos(t,n),e.color(Et.panelBg[0],Et.panelBg[1],Et.panelBg[2]),e.anchor("topleft"),Ne]),e.add([e.rect(i,1),e.pos(t,n),e.color(Et.panelBorder[0],Et.panelBorder[1],Et.panelBorder[2]),e.anchor("topleft"),Ne])}function lo(e,t,n,i,r="neutral"){let o=Xr[r],a=Math.max(38,Math.min(220,i.length*6+12));return e.add([e.rect(a,18,{radius:9}),e.pos(t,n),e.color(o.bg[0],o.bg[1],o.bg[2]),e.anchor("topleft"),Ne]),e.add([e.text(i,{size:9}),e.pos(t+6,n+5),e.color(o.fg[0],o.fg[1],o.fg[2]),e.anchor("topleft"),Ne]),t+a+6}function Hw(e,t,n,i,r,o){let a=t;for(let s of i){let l=s===r,d=Math.max(52,s.length*7+16),m=e.add([e.rect(d,22,{radius:4}),e.pos(a,n),e.area(),e.color(l?90:52,l?122:70,l?162:102),e.anchor("topleft"),Ne]);e.add([e.text(s,{size:10}),e.pos(a+8,n+6),e.color(l?240:208,l?244:216,l?252:232),e.anchor("topleft"),Ne]),l||m.onClick(()=>o(s)),a+=d+6}return n+26}function B2(e){let t=e.toLowerCase();return t.includes("chapter")||t.includes("scene")||e.startsWith("***")?"chapter":e.includes('"')||e.includes(":")?"dialogue":t.includes("attack")||t.includes("damage")||t.includes("fight")?"combat":t.includes("saved")||t.includes("loaded")||t.includes("autosave")?"system":t.includes("you ")||t.includes("nearby")||t.includes("room")?"narrator":"plain"}function ci(e,t,n,i,r,o){e.add([e.text("--- Narrative Feed ---",{size:11}),e.pos(t,n),e.color(150,155,170),e.anchor("topleft"),Ne]),n+=Tt;let a=r.slice(-Math.max(1,o));for(let s of a){let l=B2(s),d=l==="chapter"?ui.chapter:l==="dialogue"?ui.dialogue:l==="combat"?ui.combat:l==="system"?ui.system:l==="narrator"?ui.narrator:ui.plain,m=l==="chapter"?"\xA7 ":l==="dialogue"?"> ":l==="system"?"\u2022 ":"";e.add([e.text(Vw(`${m}${s}`,120),{size:10,width:i}),e.pos(t,n),e.color(d[0],d[1],d[2]),e.anchor("topleft"),Ne]),n+=Tt}return n}function jc(e,t,n,i){let r=Number(i.health??0),o=Number(i.energy??0),a=r<=25?"danger":"good",s=o<=20?"warn":"good",l=t;return l=lo(e,l,n,`[D] ${String(i.depth??"?")}`,"neutral"),l=lo(e,l,n,`[HP] ${String(i.health??"?")}`,a),l=lo(e,l,n,`[EN] ${String(i.energy??"?")}`,s),lo(e,l,n,`[LV] ${String(i.level??"?")}`,"accent"),n+20}function Ww(e,t,n,i,r,o){let s=t-48;e.add([e.rect(t,n),e.pos(0,0),e.color(0,0,0),e.opacity(.85),e.area(),e.anchor("topleft"),"cutscene"]),e.add([e.text(`*** ${i} ***`,{size:18}),e.pos(24,24),e.color(255,220,140),e.anchor("topleft"),"cutscene"]),e.add([e.text(r,{size:14,width:s-16}),e.pos(24,52),e.color(220,220,220),e.anchor("topleft"),"cutscene"]);let l=n-24-40,d=e.add([e.rect(120,32,{radius:4}),e.pos(t/2-60,l),e.area(),e.color(60,100,140),e.anchor("topleft"),"cutscene"]);e.add([e.text("Continue",{size:14}),e.pos(t/2-30,l+8),e.anchor("topleft"),e.color(255,255,255),"cutscene"]),d.onClick(o)}function en(e,t,n){let i=Gw(e,t.width,t.title,t.subtitle);return t.tabs&&t.tabs.length>0&&n?.activeTab&&n.onSelectTab&&(i=Hw(e,te,i,t.tabs,n.activeTab,n.onSelectTab),i+=2),i}function Jw(e){return e.kind==="system"?e.systemAction:e.playerAction.actionType}function Yw(e){return Kw[Jw(e)]??"[ACT]"}function Xw(e){let t=Jw(e);return t==="fight"?"danger":t==="flee"||t==="drop_item"?"warn":t==="rest"||t==="equip_item"||t==="re_equip"?"good":t==="evolve_skill"||t==="purchase"||t==="stream"?"accent":"neutral"}function Qw(e){return`${Yw(e.action)} ${e.label}`}function Og(e){return e.kind==="system"?e.systemAction:e.playerAction.actionType}function Pa(e){return e.groups.flatMap(t=>t.items)}function Dn(e,t){return Pa(e).filter(n=>Og(n.action)===t)}function Mc(e,t){return Dn(e,t)[0]??null}function rr(e){return Qw(e)}function zn(e){return Xw(e.action)}function e_(e){return[...e].sort((t,n)=>{let i=Number(t.uiPriority??999),r=Number(n.uiPriority??999);return i!==r?i-r:t.label.localeCompare(n.label)})}var Z2={neutral:Xr.neutral.fg,good:Xr.good.fg,warn:Xr.warn.fg,danger:Xr.danger.fg,accent:Xr.accent.fg};function t_(e,t,n,i,r,o,a){fo(e,t,n,i,r),e.add([e.text(o,{size:11}),e.pos(t+8,n+8),e.color(182,194,216),e.anchor("topleft"),Ne]);let s=n+26;for(let l of a){let d=Z2[l.tone??"neutral"];e.add([e.text(l.text,{size:10,width:i-16}),e.pos(t+8,s),e.color(d[0],d[1],d[2]),e.anchor("topleft"),Ne]),s+=Tt}return n+r}function Nc(e,t,n,i,r,o,a){let s=a?.maxItems??r.length,l=a?.compact??!1,d=e_(r),m=n;for(let v of d.slice(0,s))m=Ze(e,t,m,i,rr(v),()=>o(v),v.available,{tone:zn(v),compact:l});return m}function r_(e,t,n,i,r,o,a){return a&&(lo(e,t,n,a,"accent"),n+=22),ci(e,t,n,i,r,o)}function tn(e,t){return t.kind==="info"?t_(e,t.x,t.y,t.width,t.height,t.title,t.lines):t.kind==="event_log"?r_(e,t.x,t.y,t.width,t.lines,t.maxLines,t.title):Nc(e,t.x,t.y,t.width,t.items,t.onAction,{maxItems:t.maxItems,compact:t.compact})}function K2(e,t,n){return Math.min(n,Math.max(t,e))}function Rg(e,t=!0){let n=t?22:26,i=t?14:16;return n+Math.max(1,e)*i+8}function Uc(e,t=!0){let n=t?14:16,r=Math.floor(Math.max(0,e-(t?26:30))/n);return K2(r,2,14)}function n_(e){return e<=25?"danger":e<=55?"warn":"good"}function i_(e){return e<=20?"warn":"good"}function Fc(e){return e.fog}function o_(e){let t=e.dialogue.steps.at(-1);return{sequence:e.dialogue.sequence,stepsCount:e.dialogue.steps.length,lastLabel:t?.label??"none",lastKind:t?.kind??null,lastOptionId:t?.optionId??null}}function a_(e,t=3){return e.dialogue.steps.slice(-Math.max(1,t)).map((n,i)=>`${i+1}. t${n.turn} ${n.label}`)}function Lc(e,t,n=3){let i=o_(e),r=a_(e,n),o=[{text:`[SEQ] ${i.sequence} | [STEPS] ${i.stepsCount}`,tone:"accent"},{text:`[LAST] ${i.lastLabel}`,tone:"good"},{text:r.join(" | ")||"No dialogue decisions yet.",tone:"neutral"}];return{kind:"info",x:t.x,y:t.y,width:t.width,height:Rg(o.length),title:"Progression",lines:o}}function qc(e,t,n,i){let r=Fc(e),o=Number(t.health??0),a=Number(t.energy??0),s=n.split(`
`).find(d=>d.toLowerCase().startsWith("nearby:"))?.trim(),l=[{text:`[DEPTH] ${String(t.depth??"?")}  [LV] ${String(t.level??"?")}`,tone:"neutral"},{text:`[HP] ${String(t.health??"?")}`,tone:n_(o)},{text:`[ENERGY] ${String(t.energy??"?")}`,tone:i_(a)},{text:`[FOG] r=${r.radius} (lvl+${r.levelFactor} cmp+${r.comprehensionFactor} aware+${r.awarenessFactor})`,tone:"accent"},{text:s??"Nearby: unknown",tone:s?.toLowerCase().includes("none")?"good":"warn"}];return{kind:"info",x:i.x,y:i.y,width:i.width,height:Rg(l.length,!1),title:"Context",lines:l}}function po(e){return{renderEventLog(t){return tn(e,{kind:"event_log",x:t.x,y:t.y,width:t.width,title:t.title,lines:t.lines,maxLines:t.maxLines})},renderDialogueProgress(t){return tn(e,Lc(t.ui,{x:t.x,y:t.y,width:t.width},t.timelineLimit??3))},renderActionList(t){return tn(e,{kind:"action_list",x:t.x,y:t.y,width:t.width,items:t.items,onAction:t.onAction,maxItems:t.maxItems,compact:t.compact})}}}var rn=800,V2=600,s_=136,u_=6,G2=12,H2=4,Bc=4,Cg=180,W2=8,J2=430,Y2=436,X2=130,Q2=22,eD=2;function c_(e,t){let n=["Actions","Feed","Status"],i="Actions",r=po(e);e.scene("firstPerson",()=>{let o=()=>{Qr(e);let a=t.getState(),s=en(e,{width:rn,title:"Escape the Dungeon - First-Person",subtitle:"[2] Grid | [Look/Save/Load in actions]",tabs:n},{activeTab:i,onSelectTab:l=>{i=l,o()}});if(fo(e,te,s,rn-te*2,s_),e.add([e.text(a.look,{width:rn-te*2-G2,size:12}),e.pos(te+u_,s+u_),e.color(225,228,236),e.anchor("topleft"),Ne]),s+=s_+H2,s=Ta(e,te,s,rn-te*2,a.status,a.look.split(`
`).slice(1,3).join(" ")),s+=Bc,i==="Actions"){e.add([e.text("Actions",{size:11}),e.pos(te,s),e.color(160,170,190),e.anchor("topleft"),Ne]),s+=Tt;for(let l of a.groups)if(e.add([e.text(l.title,{size:10}),e.pos(te,s),e.color(122,132,154),e.anchor("topleft"),Ne]),s+=Tt,s=Nc(e,te,s,rn-te*2,l.items,d=>t.doAction(d.action),{maxItems:W2,compact:!1}),s>J2)break}else if(i==="Feed")s=r.renderEventLog({x:te,y:s,width:rn-te*2,title:"[LOG] Narrative",lines:t.feedLines,maxLines:12});else{let l=t.getUiState();s=tn(e,qc(l,a.status,a.look,{x:te,y:s,width:rn-te*2}))+Bc,s=tn(e,Lc(l,{x:te,y:s,width:rn-te*2}))+Bc,s=Ze(e,te,s,Cg,"[LOOK] Look",()=>t.doAction({kind:"system",systemAction:"look"}),!0,{tone:"neutral"}),s=Ze(e,te,s,Cg,"[SAVE] Save",()=>t.doAction({kind:"system",systemAction:"save_slot"}),!0,{tone:"accent"}),s=Ze(e,te,s,Cg,"[LOAD] Load",()=>t.doAction({kind:"system",systemAction:"load_slot"}),!0,{tone:"accent"})}i!=="Feed"&&(s=r.renderEventLog({x:te,y:Math.max(s+Bc,Y2),width:rn-te*2,title:"[LOG] Event Feed",lines:t.feedLines,maxLines:Uc(X2)})),jc(e,te,Math.min(V2-Q2,s+eD),a.status)};e.onKeyPress("2",()=>e.go("gridNavigation")),t.setRefresh(o),o()})}var tD={choose_dialogue:"gridDialogue",fight:"gridCombat",flee:"gridCombat",evolve_skill:"gridRuneForge",purchase:"gridRuneForge",re_equip:"gridRuneForge"};function rD(e,t){return e==="rest"&&t.inRuneForgeContext?"gridRuneForge":tD[e]??"gridNavigation"}function nD(e){return e&&(e==="firstPerson"||e==="gridNavigation"||e==="gridActionMenu"||e==="gridCombat"||e==="gridInventory"||e==="gridDialogue"||e==="gridRuneForge")?e:null}function l_(e,t,n){return nD(t)??rD(e,n)}function d_(e){return{1:"firstPerson",e:"gridActionMenu",space:"gridActionMenu",c:"gridCombat",i:"gridInventory",t:"gridDialogue",r:e.inRuneForgeContext?"gridRuneForge":null}}var We=800,mo=600,li=10,Zc=5,f_=18,Ng=8,iD=Ng*2,y_=4,oD=6,b_=74,aD=22,sD=2,uD=150,cD=160,Da=260,za=190,lD=206,p_=120,Fg=95,On=260,dD=340,Oa=120,jg=20,m_=8,fD=220,h_=410,g_=240,Mg={undiscovered:"#",floor:".",player:"@",exit:"^",rune:"R",treasure:"T",training:"*",rest:"~",hostile:"E",dungeoneer:"D"},x_="dungeonbreak:kaplay:discovered-by-depth:v1",Ra=new Map,v_=!1;function w_(){if(!v_&&(v_=!0,!(typeof window>"u")))try{let e=window.localStorage.getItem(x_);if(!e)return;let t=JSON.parse(e);for(let[n,i]of Object.entries(t)){let r=Number(n);Number.isFinite(r)&&Ra.set(r,new Set(i.filter(o=>Number.isFinite(o))))}}catch{}}function pD(){if(!(typeof window>"u"))try{let e={};for(let[t,n]of Ra.entries())e[String(t)]=[...n.values()].sort((i,r)=>i-r);window.localStorage.setItem(x_,JSON.stringify(e))}catch{}}function __(e){let t=/^L(\d+)_R(\d+)$/.exec(e);return t?{depth:Number.parseInt(t[1],10),index:Number.parseInt(t[2],10)}:null}function Ug(e){return{col:e%li,row:Math.floor(e/li)}}function mD(e,t){let n={kind:"player",playerAction:{actionType:"move",payload:{direction:t}}};e.doAction(n)}function hD(e,t){w_();let n=__(String(e.status.roomId??"")),i=Number(e.status.depth??n?.depth??0);if(!n||!i)return;let r=Ra.get(i)??new Set;r.add(n.index);let{col:o,row:a}=Ug(n.index);for(let s=-t;s<=t;s+=1)for(let l=-t;l<=t;l+=1){if(Math.abs(s)+Math.abs(l)>t)continue;let d=o+l,m=a+s;d<0||d>=li||m<0||m>=Zc||r.add(m*li+d)}Ra.set(i,r),pD()}function gD(e){w_();let t=__(String(e.status.roomId??"")),n=Number(e.status.depth??t?.depth??0),i=Ra.get(n)??new Set,r=Array.from({length:Zc},()=>Array.from({length:li},()=>Mg.undiscovered));for(let o of i){let{col:a,row:s}=Ug(o);s>=0&&s<Zc&&a>=0&&a<li&&(r[s][a]=Mg.floor)}if(t){let{col:o,row:a}=Ug(t.index);a>=0&&a<Zc&&o>=0&&o<li&&(r[a][o]=Mg.player)}return r.map(o=>o.join(""))}function I_(e){return Dn(e,"evolve_skill").length>0?!0:e.look.toLowerCase().includes("rune")&&e.look.toLowerCase().includes("forge")}function $_(e){if(e.look.toLowerCase().includes("nearby:")){let n=e.look.split(`
`).find(i=>i.toLowerCase().startsWith("nearby:"));if(n)return n.slice(7).trim()||"none"}return"unknown"}function vD(e){let t=e.engine.snapshot(),n=t.entities[t.playerId];return(n?.inventory??[]).map((o,a)=>{let s=o.rarity??"common",l=o.tags?.join(", ")??"-",d=n?.equippedWeaponItemId===o.itemId?" [equipped]":"",m=Pa(e).find(b=>b.action.kind==="player"&&b.action.playerAction.actionType==="use_item"&&String(b.action.playerAction.payload.itemId??"")===o.itemId)??null,v=Pa(e).find(b=>b.action.kind==="player"&&b.action.playerAction.actionType==="equip_item"&&String(b.action.playerAction.payload.itemId??"")===o.itemId)??null,h=Pa(e).find(b=>b.action.kind==="player"&&b.action.playerAction.actionType==="drop_item"&&String(b.action.playerAction.payload.itemId??"")===o.itemId)??null;return{itemId:o.itemId,line:`${a+1}. ${o.name} (${s}) [${l}]${d}`,canUse:!!m?.available,canEquip:!!v?.available,canDrop:!!h?.available,useAction:m,equipAction:v,dropAction:h}})}function yD(e,t){let n=["Map","Feed","Context"],i="Map",r=po(e);e.scene("gridNavigation",()=>{let o=()=>{Qr(e);let l=t.getState(),d=t.getUiState(),m=Fc(d);hD(l,m.radius);let v=en(e,{width:We,title:"Escape the Dungeon - ASCII Grid / Navigation",subtitle:"[1] First-Person | [E] Actions",tabs:n},{activeTab:i,onSelectTab:T=>{i=T,o()}}),h=gD(l),b=v,_=240;fo(e,te,b,We-te*2,_),v+=Ng;let E=te+Ng,S=We-te*2-iD;if(i==="Map"){e.add([e.text("Map View",{size:11}),e.pos(E,v),e.color(160,170,196),e.anchor("topleft"),Ne]),v+=Tt;for(let T of h)e.add([e.text(T,{size:f_-2,font:"monospace"}),e.pos(E,v),e.color(218,220,228),e.anchor("topleft"),Ne]),v+=f_;v+=2,e.add([e.text("Legend: # unknown . explored @ you",{size:10,width:S}),e.pos(E,v),e.color(138,145,165),e.anchor("topleft"),Ne])}else if(i==="Feed")r.renderEventLog({x:E,y:v,width:S,title:"[LOG] Event Feed",lines:t.feedLines,maxLines:11});else{let Z=tn(e,qc(d,l.status,l.look,{x:E,y:v,width:S}))+y_;e.add([e.text(l.look,{size:11,width:S}),e.pos(E,Z),e.color(212,218,232),e.anchor("topleft"),Ne])}v=b+_+oD,v=Ta(e,te,v,We-te*2,l.status,l.look.split(`
`).slice(1,3).join(" ")),v+=4,e.add([e.text("[WASD] Move  |  [E] Actions  |  [C] Combat  |  [I] Inventory  |  [T] Dialogue",{size:10,width:We-te*2}),e.pos(te,v),e.color(155,165,186),e.anchor("topleft"),Ne]),v+=Tt+2,i!=="Feed"&&(v=r.renderEventLog({x:te,y:v,width:We-te*2,title:"[LOG] Recent",lines:t.feedLines,maxLines:Uc(b_)})),jc(e,te,Math.min(mo-aD,v+sD),l.status)},a={w:"north",a:"west",s:"south",d:"east",up:"north",left:"west",down:"south",right:"east"};for(let[l,d]of Object.entries(a))e.onKeyPress(l,()=>mD(t,d));let s=["1","e","space","c","i","t","r"];for(let l of s)e.onKeyPress(l,()=>{let d=t.getState(),m=d_({inRuneForgeContext:I_(d)})[l];m&&e.go(m)});t.setRefresh(o),o()})}function bD(e,t){e.scene("gridCombat",()=>{let n=()=>{Qr(e);let i=t.getState(),r=en(e,{width:We,title:"Combat Screen",subtitle:"Pokemon-style | [1] First-Person | [Esc] Navigation"});e.add([e.rect(We-te*2,uD,{radius:4}),e.pos(te,r),e.color(26,34,58),e.anchor("topleft"),Ne]),e.add([e.text(`Enemy: ${$_(i)}`,{size:13,width:We-te*2-12}),e.pos(te+6,r+8),e.color(236,196,178),e.anchor("topleft"),Ne]),e.add([e.text(`Kael HP ${String(i.status.health??"?")} | Energy ${String(i.status.energy??"?")} | Level ${String(i.status.level??"?")}`,{size:11,width:We-te*2-12}),e.pos(te+6,r+30),e.color(190,216,236),e.anchor("topleft"),Ne]),e.add([e.text("Choose an action:",{size:11}),e.pos(te+6,r+56),e.color(155,168,188),e.anchor("topleft"),Ne]);let o=Mc(i,"fight"),a=Dn(i,"flee"),s=a[0]??null,l=r+b_;if(l=Ze(e,te+6,l,Da,o?"[ATK] Fight":"[ATK] Fight (Unavailable)",()=>{o&&(t.doAction(o.action),e.go("gridNavigation"))},!!o?.available,{tone:"danger"}),xD(a))for(let d of a.slice(0,3))l=Ze(e,te+6,l,Da,rr(d),()=>{t.doAction(d.action),e.go("gridNavigation")},d.available,{tone:zn(d)});else l=Ze(e,te+6,l,Da,s?rr(s):"[RUN] Flee (Unavailable)",()=>{s&&(t.doAction(s.action),e.go("gridNavigation"))},!!s?.available,{tone:"warn"});l=Ze(e,te+6,l,Da,"[ITEM] Item (Stub)",()=>{},!1),Ze(e,te+6,l,Da,"[SKILL] Skill (Stub)",()=>{},!1),r+=cD,ci(e,te,r,We-te*2,t.feedLines,4)};e.onKeyPress("1",()=>e.go("firstPerson")),e.onKeyPress("escape",()=>e.go("gridNavigation")),t.setRefresh(n),n()})}function xD(e){return e.length>1}function wD(e,t){e.scene("gridActionMenu",()=>{let n=()=>{Qr(e);let i=t.getState(),r=en(e,{width:We,title:"Action Menu Screen",subtitle:"[Esc] Navigation | [1] First-Person"}),o=r;o=Ze(e,te,o,za,"[ATK] Combat Screen",()=>e.go("gridCombat"),!0,{tone:"danger"}),o=Ze(e,te,o,za,"[DIA] Dialogue Screen",()=>e.go("gridDialogue")),o=Ze(e,te,o,za,"[INV] Inventory Screen",()=>e.go("gridInventory")),o=Ze(e,te,o,za,"[EVO] Rune Forge Screen",()=>e.go("gridRuneForge"),!0,{tone:"accent"}),Ze(e,te,o,za,"[MAP] Back to Navigation",()=>e.go("gridNavigation"));let a=te+lD,s=r;for(let l of i.groups){e.add([e.text(l.title,{size:11}),e.pos(a,s),e.color(155,168,190),e.anchor("topleft"),Ne]),s+=Tt;for(let d of l.items){let m=Og(d.action);if(s=Ze(e,a,s,We-a-te,rr(d),()=>{d.available&&(t.doAction(d.action),e.go(l_(m,d.uiScreen,{inRuneForgeContext:I_(i)})))},d.available,{tone:zn(d),compact:!0}),s>mo-p_)break}if(s+=2,s>mo-p_)break}ci(e,te,mo-Fg,We-te*2,t.feedLines,3)};e.onKeyPress("1",()=>e.go("firstPerson")),e.onKeyPress("escape",()=>e.go("gridNavigation")),t.setRefresh(n),n()})}function _D(e,t){e.scene("gridRuneForge",()=>{let n=()=>{Qr(e);let i=t.getState(),r=en(e,{width:We,title:"Rune Forge Screen",subtitle:"[Esc] Action Menu | [1] First-Person"});e.add([e.text("Available in rune forge context: Rest, Evolve Skill, Inventory",{size:11,width:We-te*2}),e.pos(te,r),e.color(164,174,196),e.anchor("topleft"),Ne]),r+=Tt+4;let o=Mc(i,"rest");r=Ze(e,te,r,On,o?rr(o):"[REST] Rest (Unavailable)",()=>{o&&(t.doAction(o.action),e.go("gridNavigation"))},!!o?.available,{tone:"good"});let a=Dn(i,"evolve_skill");if(a.length===0)r=Ze(e,te,r,On,"[EVO] Evolve Skill (Unavailable)",()=>{},!1);else for(let d of a.slice(0,4))r=Ze(e,te,r,On,rr(d),()=>{t.doAction(d.action),e.go("gridNavigation")},d.available,{tone:zn(d)});r=Ze(e,te,r,On,"[INV] Inventory",()=>e.go("gridInventory"));let s=Dn(i,"purchase");if(s.length===0)r=Ze(e,te,r,On,"[BUY] Purchase (Unavailable)",()=>{},!1);else for(let d of s.slice(0,4))r=Ze(e,te,r,On,rr(d),()=>{t.doAction(d.action),e.go("gridRuneForge")},d.available,{tone:zn(d)});let l=Dn(i,"re_equip");if(l.length===0)Ze(e,te,r,On,"[RE-EQ] Re-equip (Unavailable)",()=>{},!1);else for(let d of l.slice(0,4))r=Ze(e,te,r,On,rr(d),()=>{t.doAction(d.action),e.go("gridRuneForge")},d.available,{tone:zn(d)});r+=8,Ta(e,te,r,We-te*2,i.status,i.look.split(`
`).slice(1,3).join(" ")),ci(e,te,mo-Fg,We-te*2,t.feedLines,3)};e.onKeyPress("1",()=>e.go("firstPerson")),e.onKeyPress("escape",()=>e.go("gridActionMenu")),t.setRefresh(n),n()})}function ID(e,t){let n=po(e);e.scene("gridInventory",()=>{let i=()=>{Qr(e);let r=t.getState(),o=en(e,{width:We,title:"Inventory Screen",subtitle:"[Esc] Action Menu | [1] First-Person"}),a=vD(r);if(e.add([e.rect(We-te*2,dD,{radius:4}),e.pos(te,o),e.color(22,30,52),e.anchor("topleft"),Ne]),o+=8,a.length===0)e.add([e.text("Inventory is empty.",{size:11,width:We-te*2-12}),e.pos(te+6,o),e.color(190,196,210),e.anchor("topleft"),Ne]),o+=Tt*2;else for(let l of a.slice(0,8)){e.add([e.text(l.line,{size:11,width:We-te*2-12}),e.pos(te+6,o),e.color(225,230,240),e.anchor("topleft"),Ne]),o+=Tt;let d=o;d=Ze(e,te+jg,d,Oa,"[USE] Use",()=>{l.useAction&&(t.doAction(l.useAction.action),e.go("gridInventory"))},l.canUse,{tone:"good",compact:!0}),d=Ze(e,te+jg+Oa+m_,o,Oa,"[EQP] Equip",()=>{l.equipAction&&(t.doAction(l.equipAction.action),e.go("gridInventory"))},l.canEquip,{tone:"accent",compact:!0}),Ze(e,te+jg+(Oa+m_)*2,o,Oa,"[DROP] Drop",()=>{l.dropAction&&(t.doAction(l.dropAction.action),e.go("gridInventory"))},l.canDrop,{tone:"warn",compact:!0}),o=d+2}Ze(e,te,h_,fD,"[MENU] Back to Action Menu",()=>e.go("gridActionMenu")),n.renderEventLog({x:te+g_,y:h_,width:We-(te+g_)-te,title:"[LOG] Inventory",lines:t.feedLines,maxLines:5})};e.onKeyPress("1",()=>e.go("firstPerson")),e.onKeyPress("escape",()=>e.go("gridActionMenu")),t.setRefresh(i),i()})}function $D(e,t){let n=po(e);e.scene("gridDialogue",()=>{let i=()=>{Qr(e);let r=t.getState(),o=t.getUiState(),a=en(e,{width:We,title:"Dialogue Screen",subtitle:"[Esc] Action Menu | [1] First-Person"});e.add([e.text(`Nearby: ${$_(r)}`,{size:11,width:We-te*2}),e.pos(te,a),e.color(178,188,210),e.anchor("topleft"),Ne]),a+=Tt+2,a=n.renderDialogueProgress({x:te,y:a,width:We-te*2,ui:o,timelineLimit:3}),a+=y_;let s=Dn(r,"choose_dialogue");s.length===0?a=Ze(e,te,a,We-te*2,"No dialogue options available",()=>{},!1):a=n.renderActionList({x:te,y:a,width:We-te*2,items:s,onAction:d=>{t.doAction(d.action),e.go("gridNavigation")},maxItems:10,compact:!0});let l=Mc(r,"talk");a+=4,a=Ze(e,te,a,We-te*2,l?rr(l):"[TALK] Talk (Unavailable)",()=>{l&&(t.doAction(l.action),e.go("gridNavigation"))},!!l?.available,{tone:"neutral"}),Ze(e,te,a,180,"[BACK] Back",()=>e.go("gridActionMenu")),ci(e,te,mo-Fg,We-te*2,t.feedLines,3)};e.onKeyPress("1",()=>e.go("firstPerson")),e.onKeyPress("escape",()=>e.go("gridActionMenu")),t.setRefresh(i),i()})}function S_(e,t){yD(e,t),bD(e,t),wD(e,t),_D(e,t),ID(e,t),$D(e,t)}var k_="dungeonbreak:kaplay:ui-state:v1";function SD(){return{dialogue:{sequence:0,steps:[]},fog:{radius:1,levelFactor:0,comprehensionFactor:0,awarenessFactor:0}}}function A_(){let e=SD(),t=()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(k_,JSON.stringify(e))}catch{}};return{getState(){return e},hydrate:()=>{if(!(typeof window>"u"))try{let i=window.localStorage.getItem(k_);if(!i)return;let r=JSON.parse(i);e={...e,...r,dialogue:{...e.dialogue,...r.dialogue??{},steps:r.dialogue?.steps??e.dialogue.steps},fog:{...e.fog,...r.fog??{}}}}catch{}},setFogFromStatus(i){e={...e,fog:Ec.fogMetrics(i)},t()},recordDialogueStep(i,r,o){i.kind==="player"&&(i.playerAction.actionType!=="talk"&&i.playerAction.actionType!=="choose_dialogue"||(e={...e,dialogue:{sequence:e.dialogue.sequence+1,steps:[...e.dialogue.steps,{turn:r,kind:i.playerAction.actionType,optionId:i.playerAction.actionType==="choose_dialogue"?String(i.playerAction.payload.optionId??""):void 0,label:o}].slice(-20)}},t()))}}}var Kc=800,Vc=600;function kD(){let e=Hy({width:Kc,height:Vc,scale:1,crisp:!0,background:[15,23,42]});e.setBackground(15,23,42);let t=null,n=[],i=[],r=()=>{},o=A_(),a=v=>{for(let h of v)n.push(h.text)},s=v=>{r=v},l=()=>{if(i.length===0){r();return}let v=i[0];e.destroyAll("cutscene"),Ww(e,Kc,Vc,v.title,v.text,()=>{i=i.slice(1),l()})},d=v=>{if(!t)return;let h=t.groups;if(v.kind==="system"){if(v.systemAction==="look"||v.systemAction==="status"){t=zg(t),r();return}if(v.systemAction==="save_slot"){Cc(t).then(()=>{n.push("Saved to autosave slot."),r()});return}if(v.systemAction==="load_slot"){Dg().then(_=>{if(!_){n.push("No autosave found."),r();return}t=_,n.push("Loaded autosave."),r()});return}return}let b=Zw(t,v.playerAction);if(!b.ok){n.push(b.error),r();return}if(a(b.feed),t=zg(t),o.setFogFromStatus(t.status),v.playerAction.actionType==="talk"||v.playerAction.actionType==="choose_dialogue"){let _=h.flatMap(S=>S.items).find(S=>JSON.stringify(S.action)===JSON.stringify(v)),E=_?rr(_):v.playerAction.actionType;o.recordDialogueStep(v,Number(t.status.turn??0),E)}if(b.cutscenes.length>0){i=b.cutscenes,l();return}b.escaped&&n.push("You escaped the dungeon."),Cc(t).then(()=>r())},m=async()=>{o.hydrate();let v=await Dg();t=v??Bw(),v?n.push("Autosave loaded."):(a(Mw(t.engine)),await Cc(t)),o.setFogFromStatus(t.status);let h={getState:()=>t,getUiState:()=>o.getState(),doAction:d,setRefresh:s,feedLines:n};c_(e,h),S_(e,h),e.go("firstPerson")};e.scene("menu",()=>{e.add([e.text("Escape the Dungeon",{size:32}),e.pos(Kc/2,Vc/2-60),e.color(255,255,255),e.anchor("center")]),e.add([e.text("Loading...",{size:14}),e.pos(Kc/2,Vc/2),e.color(180,180,180),e.anchor("center")])}),e.go("menu"),m()}kD();})();
/*! Bundled license information:

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
</script>
</body>
</html>